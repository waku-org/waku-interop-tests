[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_time_filter_big_timestamp with id: 2024-11-06_21-36-03__e9e5858a-d3ea-40bf-97c8-23390887a2f7
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-06_21-36-03__e9e5858a-d3ea-40bf-97c8-23390887a2f7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.220.201
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49080', '49081', '49082', '49083', '49084']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49080:49080 -p 49081:49081 -p 49082:49082 -p 49083:49083 -p 49084:49084 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49082 --rest-port=49080 --tcp-port=49081 --discv5-udp-port=49083 --rest-address=0.0.0.0 --nat=extip:172.18.220.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cba6cc3ca7bfeff0a10f99cefcff60efb27dbc51f5b82ae10c2eca85f4c53bee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49084 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.220.201 waku 2278ff469b8baaa28478560d090be7391420d13aef2dcc36b9b10593883a76b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2278ff469b8b. Setting up logs at ./log/docker/publishing_node1_2024-11-06_21-36-03__e9e5858a-d3ea-40bf-97c8-23390887a2f7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49080
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 55da9a1997d1. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49080/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49080/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.201/tcp/49081/p2p/16Uiu2HAm5Yotnxk8fHQ4WcZ2bhpvwirvcp8XcxVCpgvH94h1BhCb","/ip4/172.18.220.201/tcp/49082/ws/p2p/16Uiu2HAm5Yotnxk8fHQ4WcZ2bhpvwirvcp8XcxVCpgvH94h1BhCb"],"enrUri":"enr:-L24QNjYpYsF5fEu4dYtWYtPhnrkUsV-Ngp16UVMDmx0KVRHYoVFVqlfQxeOTHqW_TITvcpVajlvNQ87oP2iUQfaczwCgmlkgnY0gmlwhKwS3MmKbXVsdGlhZGRyc5YACASsEtzJBr-5AAoErBLcyQa_ut0DgnJzhQADAQAAiXNlY3AyNTZrMaEClmjiEUho95L1eK9dbN0sAJalejxPUWJ7vzlUdNQsE5CDdGNwgr-5g3VkcIK_u4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-06_21-36-03__e9e5858a-d3ea-40bf-97c8-23390887a2f7__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.171.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9550', '9551', '9552', '9553', '9554']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9550:9550 -p 9551:9551 -p 9552:9552 -p 9553:9553 -p 9554:9554 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=9552 --rest-port=9550 --tcp-port=9551 --discv5-udp-port=9553 --rest-address=0.0.0.0 --nat=extip:172.18.171.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b34eb7f4f5eebf4ffb1fb6e13bdac18d3a818d66f9e3e469d89c2ebe7b6f9b2a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QNjYpYsF5fEu4dYtWYtPhnrkUsV-Ngp16UVMDmx0KVRHYoVFVqlfQxeOTHqW_TITvcpVajlvNQ87oP2iUQfaczwCgmlkgnY0gmlwhKwS3MmKbXVsdGlhZGRyc5YACASsEtzJBr-5AAoErBLcyQa_ut0DgnJzhQADAQAAiXNlY3AyNTZrMaEClmjiEUho95L1eK9dbN0sAJalejxPUWJ7vzlUdNQsE5CDdGNwgr-5g3VkcIK_u4V3YWt1MgM --storenode=/ip4/172.18.220.201/tcp/49081/p2p/16Uiu2HAm5Yotnxk8fHQ4WcZ2bhpvwirvcp8XcxVCpgvH94h1BhCb --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.171.237 waku c4a2922c5bca8299405662f8141e127f59166e60ff101112feeec9c6456d541f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c4a2922c5bca. Setting up logs at ./log/docker/store_node1_2024-11-06_21-36-03__e9e5858a-d3ea-40bf-97c8-23390887a2f7__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 9550
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9550/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHvs5ysYaeLx3mk-eUuzu_foXm3LynNjxWwQJVhspkfbBD8op12kEeMxzvrIQnqc4j_CrLZmPOS5Q65c5mqTHFGGAZMDZ_gWgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQJ2_BEp96H5Vhmte01_QIYBU6D2eoU0iaHT5vt-4VubNYN0Y3CCJU-DdWRwgiVRhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/9551/p2p/16Uiu2HAm3S91yqFsUr4Eq4oxFHPCDWfJFsMgWu2c9YEDGVMFtw8p","/ip4/127.0.0.1/tcp/9552/ws/p2p/16Uiu2HAm3S91yqFsUr4Eq4oxFHPCDWfJFsMgWu2c9YEDGVMFtw8p","/ip4/172.17.0.9/tcp/9551/p2p/16Uiu2HAm3S91yqFsUr4Eq4oxFHPCDWfJFsMgWu2c9YEDGVMFtw8p","/ip4/172.17.0.9/tcp/9552/ws/p2p/16Uiu2HAm3S91yqFsUr4Eq4oxFHPCDWfJFsMgWu2c9YEDGVMFtw8p"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9550/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.220.201/tcp/49081/p2p/16Uiu2HAm5Yotnxk8fHQ4WcZ2bhpvwirvcp8XcxVCpgvH94h1BhCb", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9550/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:204 inquering stored messages with start time 1730928963737668096 after end time 2422128967973143040
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49080/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1730928963737668096&endTime=2422128967973143040&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"FNi3+u18LQ8f+APeGR4bdWjA2sf2dh8yagNpyZK+LM0=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730928963737668096,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"S8xIXYSWbm63uUNzV/8ywv6N6ZmARHk8O9axdObfIWk=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730928965737677056,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"ON26nTrjNLGh3xjxHf2C70ZpNvkXc6hkl4rE/LNdYUw=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730928966637680896,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"ohauDbmO9oZKsqT4Hb7XNCe7F5HeWWrKUqAnrFULJYo=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730928966837683968,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"by4UEr54fDA8nTrKAaHGgC6rOEw0sTcW+BeFdLnqewM=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730928968737688064,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"dV4rcSBGvbqpWpYXmG7ol2vQd7brcVYD3Em2prPCr2U=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730928976737690880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:207 number of messages stored for start time 1730928963737668096 and end time = 2422128967973143040 is  6
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9550/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&startTime=1730928963737668096&endTime=2422128967973143040&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"c9aab2531b62dbed3199b5c87c6226051fdbd28849161ce6805bf37cc072db4c","status_code":200,"status_desc":"OK","messages":[{"message_hash":"FNi3+u18LQ8f+APeGR4bdWjA2sf2dh8yagNpyZK+LM0=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":"1730928963737668096","meta":"","ephemeral":false,"rateLimitProof":""},"pubsub_topic":"/waku/2/rs/3/0"},{"message_hash":"S8xIXYSWbm63uUNzV/8ywv6N6ZmARHk8O9axdObfIWk=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":"1730928965737677056","meta":"","ephemeral":false,"rateLimitProof":""},"pubsub_topic":"/waku/2/rs/3/0"},{"message_hash":"ON26nTrjNLGh3xjxHf2C70ZpNvkXc6hkl4rE/LNdYUw=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":"1730928966637680896","meta":"","ephemeral":false,"rateLimitProof":""},"pubsub_topic":"/waku/2/rs/3/0"},{"message_hash":"ohauDbmO9oZKsqT4Hb7XNCe7F5HeWWrKUqAnrFULJYo=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":"1730928966837683968","meta":"","ephemeral":false,"rateLimitProof":""},"pubsub_topic":"/waku/2/rs/3/0"},{"message_hash":"by4UEr54fDA8nTrKAaHGgC6rOEw0sTcW+BeFdLnqewM=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":"1730928968737688064","meta":"","ephemeral":false,"rateLimitProof":""},"pubsub_topic":"/waku/2/rs/3/0"},{"message_hash":"dV4rcSBGvbqpWpYXmG7ol2vQd7brcVYD3Em2prPCr2U=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":"1730928976737690880","meta":"","ephemeral":false,"rateLimitProof":""},"pubsub_topic":"/waku/2/rs/3/0"}]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:207 number of messages stored for start time 1730928963737668096 and end time = 2422128967973143040 is  6
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2278ff469b8b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c4a2922c5bca
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2278ff469b8b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.