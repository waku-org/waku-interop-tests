2025-02-14 03:08:40.979 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 03:08:40.980 DEBUG [tests.conftest] Running test: test_publish_on_multiple_pubsub_topics_and_only_after_fetch_them with id: 2025-02-14_03-08-40__62ff4119-658c-4896-8fb2-924fb6a705bd
2025-02-14 03:08:40.980 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 03:08:40.980 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 03:08:40.980 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-14 03:08:40.987 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 03:08:40.987 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_03-08-40__62ff4119-658c-4896-8fb2-924fb6a705bd__wakuorg_nwaku:latest.log
2025-02-14 03:08:40.987 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:08:40.988 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:08:40.989 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:08:40.989 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.3.237
2025-02-14 03:08:40.989 DEBUG [src.node.docker_mananger] Generated ports ['53643', '53644', '53645', '53646', '53647']
2025-02-14 03:08:40.989 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:08:40.989 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:08:40.990 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:08:40.990 DEBUG [src.node.docker_mananger] docker run -i -t -p 53643:53643 -p 53644:53644 -p 53645:53645 -p 53646:53646 -p 53647:53647 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53645 --rest-port=53643 --tcp-port=53644 --discv5-udp-port=53646 --rest-address=0.0.0.0 --nat=extip:172.18.3.237 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6d1df55c9ba81cf390aac85bb62a6dfddaa1ad76c337a88b42ea827b0ee5d4ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53647 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-14 03:08:41.217 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.3.237 waku b17e8823ad3856fcff6d8336a1f464e0098af3cf92c4f37d23acd02fbd36be40
2025-02-14 03:08:41.238 ERROR [src.node.docker_mananger] Max retries reached for container fab2774d18e8. Exiting log stream.
2025-02-14 03:08:41.279 DEBUG [src.node.docker_mananger] Container started with ID b17e8823ad38. Setting up logs at ./log/docker/node1_2025-02-14_03-08-40__62ff4119-658c-4896-8fb2-924fb6a705bd__wakuorg_nwaku:latest.log
2025-02-14 03:08:41.280 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53643
2025-02-14 03:08:41.281 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:08:41.785 ERROR [src.node.docker_mananger] Max retries reached for container 19560f5b2065. Exiting log stream.
2025-02-14 03:08:42.281 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53643/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:42.284 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 03:08:42.284 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 03:08:42.285 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53643/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:42.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.237/tcp/53644/p2p/16Uiu2HAm5DQSRoHufTVRHek1bttw5L3Zq4qrzeogW2zYdC2BQTbk","/ip4/172.18.3.237/tcp/53645/ws/p2p/16Uiu2HAm5DQSRoHufTVRHek1bttw5L3Zq4qrzeogW2zYdC2BQTbk"],"enrUri":"enr:-L24QOAqfvAlnQHNK1gJzQnKbhh1q1PLELqpJQc1WRjuobh4Vz82ar4Lsxr91fcey7bV6SzcPJCjQYC8zHU4g2LCcB4CgmlkgnY0gmlwhKwSA-2KbXVsdGlhZGRyc5YACASsEgPtBtGMAAoErBID7QbRjd0DgnJzhQACAQAAiXNlY3AyNTZrMaECkXBT2bFRkrV3_AwmTvT0l5QYPYIBhrKjIxxbwmR8Mx-DdGNwgtGMg3VkcILRjoV3YWt1MgU"}'
2025-02-14 03:08:42.287 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:08:42.293 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-14 03:08:42.294 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_03-08-40__62ff4119-658c-4896-8fb2-924fb6a705bd__wakuorg_go-waku:latest.log
2025-02-14 03:08:42.294 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:08:42.294 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:08:42.295 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:08:42.295 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.46.38
2025-02-14 03:08:42.296 DEBUG [src.node.docker_mananger] Generated ports ['41536', '41537', '41538', '41539', '41540']
2025-02-14 03:08:42.296 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:08:42.296 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:08:42.296 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:08:42.296 DEBUG [src.node.docker_mananger] docker run -i -t -p 41536:41536 -p 41537:41537 -p 41538:41538 -p 41539:41539 -p 41540:41540 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=41538 --rest-port=41536 --tcp-port=41537 --discv5-udp-port=41539 --rest-address=0.0.0.0 --nat=extip:172.18.46.38 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8e7f6bb259ee9fc1c88f2872f9cf08b5d32be54f1ba2d3a42c45eaaa4f706c7e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QOAqfvAlnQHNK1gJzQnKbhh1q1PLELqpJQc1WRjuobh4Vz82ar4Lsxr91fcey7bV6SzcPJCjQYC8zHU4g2LCcB4CgmlkgnY0gmlwhKwSA-2KbXVsdGlhZGRyc5YACASsEgPtBtGMAAoErBID7QbRjd0DgnJzhQACAQAAiXNlY3AyNTZrMaECkXBT2bFRkrV3_AwmTvT0l5QYPYIBhrKjIxxbwmR8Mx-DdGNwgtGMg3VkcILRjoV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-14 03:08:42.528 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.46.38 waku bc547bdb008bf84c3c28fc5978d51970beb0be8ed9d86b22ebf76d35a2c4532b
2025-02-14 03:08:42.583 DEBUG [src.node.docker_mananger] Container started with ID bc547bdb008b. Setting up logs at ./log/docker/node2_2025-02-14_03-08-40__62ff4119-658c-4896-8fb2-924fb6a705bd__wakuorg_go-waku:latest.log
2025-02-14 03:08:42.584 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 41536
2025-02-14 03:08:42.584 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:08:43.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41536/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:43.587 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QIzFLVFWxKFoXKHpGaTuwaNojajP3djfn3SmuTWyELJ0MVlmhuDbmfn-U7x4kdSipjpXuZ3a9Khy-G9M9AYskcuGAZUCbhDRgmlkgnY0gmlwhKwRAAOCcnOFAAIBAACJc2VjcDI1NmsxoQPYvtPeS8TSl-RgFG4Drr1oeG9w4YC9wc7aOx2y79nTTYN0Y3CCokGDdWRwgqJDhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/41537/p2p/16Uiu2HAmTF5BXLyFhtjJb7FK4TJSJsHM51uU2qWfGURnSuCbJ3St","/ip4/127.0.0.1/tcp/41538/ws/p2p/16Uiu2HAmTF5BXLyFhtjJb7FK4TJSJsHM51uU2qWfGURnSuCbJ3St","/ip4/172.17.0.3/tcp/41537/p2p/16Uiu2HAmTF5BXLyFhtjJb7FK4TJSJsHM51uU2qWfGURnSuCbJ3St","/ip4/172.17.0.3/tcp/41538/ws/p2p/16Uiu2HAmTF5BXLyFhtjJb7FK4TJSJsHM51uU2qWfGURnSuCbJ3St"]}'
2025-02-14 03:08:43.587 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:08:43.588 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41536/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.3.237/tcp/53644/p2p/16Uiu2HAm5DQSRoHufTVRHek1bttw5L3Zq4qrzeogW2zYdC2BQTbk", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-14 03:08:43.590 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-14 03:08:43.590 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53643/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-14 03:08:43.599 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:08:43.599 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41536/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-14 03:08:43.604 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-14 03:08:43.609 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53643/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzA=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:08:43.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:08:43.623 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53643/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzE=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:08:43.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:08:43.628 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53643/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzI=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:08:43.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:08:43.633 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53643/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzM=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:08:43.637 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:08:43.637 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53643/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzQ=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:08:43.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:08:43.642 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53643/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzU=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:08:43.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:08:43.646 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53643/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzY=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:08:43.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:08:43.651 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53643/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzc=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:08:43.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:08:43.656 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 03:08:43.756 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41536/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:43.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzA=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739502523609117440,"ephemeral":false}]'
2025-02-14 03:08:43.759 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41536/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:43.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzE=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739502523623729408,"ephemeral":false}]'
2025-02-14 03:08:43.761 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41536/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:43.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzI=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739502523628466176,"ephemeral":false}]'
2025-02-14 03:08:43.763 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41536/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:43.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzM=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739502523633060608,"ephemeral":false}]'
2025-02-14 03:08:43.765 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41536/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:43.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzQ=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739502523637609216,"ephemeral":false}]'
2025-02-14 03:08:43.767 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41536/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:43.768 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzU=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739502523642222080,"ephemeral":false}]'
2025-02-14 03:08:43.769 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41536/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:43.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzY=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739502523646845440,"ephemeral":false}]'
2025-02-14 03:08:43.770 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41536/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:08:43.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzc=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739502523651388160,"ephemeral":false}]'
2025-02-14 03:08:43.774 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 03:08:43.775 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 03:08:43.775 DEBUG [src.node.waku_node] Stopping container with id b17e8823ad38
2025-02-14 03:08:44.331 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:08:44.331 DEBUG [src.node.waku_node] Stopping container with id bc547bdb008b
2025-02-14 03:08:45.144 ERROR [src.node.docker_mananger] Max retries reached for container b17e8823ad38. Exiting log stream.
2025-02-14 03:08:54.844 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:08:54.846 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 03:08:54.855 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:08:54.859 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
