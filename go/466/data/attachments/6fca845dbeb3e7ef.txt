2025-02-14 03:06:04.639 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 03:06:04.639 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-14_03-06-04__8bac7dc6-2109-40cb-a42a-9f4330dbdc72
2025-02-14 03:06:04.640 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 03:06:04.640 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 03:06:04.640 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 03:06:04.648 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-14 03:06:04.648 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_03-06-04__8bac7dc6-2109-40cb-a42a-9f4330dbdc72__wakuorg_go-waku:latest.log
2025-02-14 03:06:04.654 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 03:06:04.654 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_03-06-04__8bac7dc6-2109-40cb-a42a-9f4330dbdc72__wakuorg_nwaku:latest.log
2025-02-14 03:06:04.660 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-14 03:06:04.660 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-14_03-06-04__8bac7dc6-2109-40cb-a42a-9f4330dbdc72__wakuorg_go-waku:latest.log
2025-02-14 03:06:04.660 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 03:06:04.660 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 03:06:04.661 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:04.661 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:04.727 DEBUG [src.node.docker_mananger] Network waku created
2025-02-14 03:06:04.727 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.213
2025-02-14 03:06:04.727 DEBUG [src.node.docker_mananger] Generated ports ['23760', '23761', '23762', '23763', '23764']
2025-02-14 03:06:04.727 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:04.727 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:04.728 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:04.728 DEBUG [src.node.docker_mananger] docker run -i -t -p 23760:23760 -p 23761:23761 -p 23762:23762 -p 23763:23763 -p 23764:23764 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23762 --rest-port=23760 --tcp-port=23761 --discv5-udp-port=23763 --rest-address=0.0.0.0 --nat=extip:172.18.117.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f6c3fcff23ee7ea1cd5f2539317da36f9edb7aebb4ebaedbfba9b70c0dd562ec --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-14 03:06:07.486 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.213 waku 33fc81cde912d3c47ecdb690d5a08d48af92f72ccc6b678c19a0292c4fab36dc
2025-02-14 03:06:07.544 DEBUG [src.node.docker_mananger] Container started with ID 33fc81cde912. Setting up logs at ./log/docker/node1_2025-02-14_03-06-04__8bac7dc6-2109-40cb-a42a-9f4330dbdc72__wakuorg_go-waku:latest.log
2025-02-14 03:06:07.546 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 23760
2025-02-14 03:06:07.549 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:08.549 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23760/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:08.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QJZn12y90VAh26mdisVUQezkjwlUFdBSCVA5Upw06rvYI6ZkAM9-27t7adob3pW-sSnQ6KBrx--ATMTtrccZraGGAZUCa7MsgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDj_QY6NKgkmAGcYzget6NcKOI4tG6b_IN9-C0Cep66luDdGNwglzRg3VkcIJc04V3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/23761/p2p/16Uiu2HAmNLvXpuj1EiPvYK9UQQxUY6r58iC7QJAoFtaFTsUwgQhx","/ip4/127.0.0.1/tcp/23762/ws/p2p/16Uiu2HAmNLvXpuj1EiPvYK9UQQxUY6r58iC7QJAoFtaFTsUwgQhx","/ip4/172.17.0.2/tcp/23761/p2p/16Uiu2HAmNLvXpuj1EiPvYK9UQQxUY6r58iC7QJAoFtaFTsUwgQhx","/ip4/172.17.0.2/tcp/23762/ws/p2p/16Uiu2HAmNLvXpuj1EiPvYK9UQQxUY6r58iC7QJAoFtaFTsUwgQhx"]}'
2025-02-14 03:06:08.552 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:08.552 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:08.552 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:08.554 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:08.554 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.186.130
2025-02-14 03:06:08.554 DEBUG [src.node.docker_mananger] Generated ports ['56713', '56714', '56715', '56716', '56717']
2025-02-14 03:06:08.554 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:08.554 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:08.554 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:08.555 DEBUG [src.node.docker_mananger] docker run -i -t -p 56713:56713 -p 56714:56714 -p 56715:56715 -p 56716:56716 -p 56717:56717 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56715 --rest-port=56713 --tcp-port=56714 --discv5-udp-port=56716 --rest-address=0.0.0.0 --nat=extip:172.18.186.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a47368defdacce4d8a9cb1eaa25fee3bec666c920163305461f906055d7b29ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56717 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QJZn12y90VAh26mdisVUQezkjwlUFdBSCVA5Upw06rvYI6ZkAM9-27t7adob3pW-sSnQ6KBrx--ATMTtrccZraGGAZUCa7MsgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDj_QY6NKgkmAGcYzget6NcKOI4tG6b_IN9-C0Cep66luDdGNwglzRg3VkcIJc04V3YWt1Mgk --lightpushnode=/ip4/172.18.117.213/tcp/23761/p2p/16Uiu2HAmNLvXpuj1EiPvYK9UQQxUY6r58iC7QJAoFtaFTsUwgQhx
2025-02-14 03:06:10.682 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.186.130 waku df8573ff83d943fffc787e3a21477f979a5835f981c4e2f1374eb874bfaca35a
2025-02-14 03:06:10.734 DEBUG [src.node.docker_mananger] Container started with ID df8573ff83d9. Setting up logs at ./log/docker/node2_2025-02-14_03-06-04__8bac7dc6-2109-40cb-a42a-9f4330dbdc72__wakuorg_nwaku:latest.log
2025-02-14 03:06:10.735 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56713
2025-02-14 03:06:10.735 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:11.736 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56713/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:11.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 03:06:11.739 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 03:06:11.739 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56713/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:11.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.130/tcp/56714/p2p/16Uiu2HAmCXwECvJ6XbFMDtYLWrj7bbPMTsfyMSQUni6XpWa5WaQw","/ip4/172.18.186.130/tcp/56715/ws/p2p/16Uiu2HAmCXwECvJ6XbFMDtYLWrj7bbPMTsfyMSQUni6XpWa5WaQw"],"enrUri":"enr:-L24QLzKLL2hxPsH0AN7B3IxdLS6PjgswfCAxrRYgjTxDok0XhesHyhdypF5Bn822G8qj8e3opoPrn8o1HZBVPw3ITgCgmlkgnY0gmlwhKwSuoKKbXVsdGlhZGRyc5YACASsErqCBt2KAAoErBK6ggbdi90DgnJzhQADAQAAiXNlY3AyNTZrMaEC_jFndTijtb3h7URdld571BHkfxpIUtHMKPCSIJ2lKjiDdGNwgt2Kg3VkcILdjIV3YWt1Mgs"}'
2025-02-14 03:06:11.741 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:11.742 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:11.742 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:11.743 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:11.743 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.177.15
2025-02-14 03:06:11.743 DEBUG [src.node.docker_mananger] Generated ports ['12186', '12187', '12188', '12189', '12190']
2025-02-14 03:06:11.744 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:11.744 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:11.744 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:11.744 DEBUG [src.node.docker_mananger] docker run -i -t -p 12186:12186 -p 12187:12187 -p 12188:12188 -p 12189:12189 -p 12190:12190 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=12188 --rest-port=12186 --tcp-port=12187 --discv5-udp-port=12189 --rest-address=0.0.0.0 --nat=extip:172.18.177.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=99ea19007cc1fe16ea8dfecbedeb4c7bb400eaee62504ead3d6c147e91dc61df --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.186.130/tcp/56714/p2p/16Uiu2HAmCXwECvJ6XbFMDtYLWrj7bbPMTsfyMSQUni6XpWa5WaQw --discv5-bootstrap-node=enr:-L24QLzKLL2hxPsH0AN7B3IxdLS6PjgswfCAxrRYgjTxDok0XhesHyhdypF5Bn822G8qj8e3opoPrn8o1HZBVPw3ITgCgmlkgnY0gmlwhKwSuoKKbXVsdGlhZGRyc5YACASsErqCBt2KAAoErBK6ggbdi90DgnJzhQADAQAAiXNlY3AyNTZrMaEC_jFndTijtb3h7URdld571BHkfxpIUtHMKPCSIJ2lKjiDdGNwgt2Kg3VkcILdjIV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-14 03:06:11.987 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.177.15 waku 1a9d7a6c7c97a607f887efe4d98fb77905e1a3078f763cfba3588a6276216314
2025-02-14 03:06:12.040 DEBUG [src.node.docker_mananger] Container started with ID 1a9d7a6c7c97. Setting up logs at ./log/docker/node3_2025-02-14_03-06-04__8bac7dc6-2109-40cb-a42a-9f4330dbdc72__wakuorg_go-waku:latest.log
2025-02-14 03:06:12.041 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 12186
2025-02-14 03:06:12.043 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:13.045 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12186/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:13.047 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFur5r4HOd7Lppw2eP585B__NBtys7T0cnh0fF3TK8PTAOuRQ4aYNpsAe8N41DE9fF-fCduARImY-6qDkcdOw1OGAZUCa8S_gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNbaHnl5b5BlnrRk3_otkLdJpRmYzN_fzeH3QnNBwK6tYN0Y3CCL5uDdWRwgi-dhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/12187/p2p/16Uiu2HAmJoorGukGJ6UAfE7pCD9jURubQi7qxdgPx8ezo5PWJxk4","/ip4/127.0.0.1/tcp/12188/ws/p2p/16Uiu2HAmJoorGukGJ6UAfE7pCD9jURubQi7qxdgPx8ezo5PWJxk4","/ip4/172.17.0.4/tcp/12187/p2p/16Uiu2HAmJoorGukGJ6UAfE7pCD9jURubQi7qxdgPx8ezo5PWJxk4","/ip4/172.17.0.4/tcp/12188/ws/p2p/16Uiu2HAmJoorGukGJ6UAfE7pCD9jURubQi7qxdgPx8ezo5PWJxk4"]}'
2025-02-14 03:06:13.048 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:13.048 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23760/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 03:06:13.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-14 03:06:13.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56713/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 03:06:13.054 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:13.054 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23760/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:13.056 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmCXwECvJ6XbFMDtYLWrj7bbPMTsfyMSQUni6XpWa5WaQw","multiaddrs":["/ip4/172.18.186.130/tcp/56714/p2p/16Uiu2HAmCXwECvJ6XbFMDtYLWrj7bbPMTsfyMSQUni6XpWa5WaQw","/ip4/172.18.186.130/tcp/56715/ws/p2p/16Uiu2HAmCXwECvJ6XbFMDtYLWrj7bbPMTsfyMSQUni6XpWa5WaQw"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-14 03:06:13.057 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56713/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:13.059 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/12187/p2p/16Uiu2HAmJoorGukGJ6UAfE7pCD9jURubQi7qxdgPx8ezo5PWJxk4","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-14 03:06:13.059 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-14 03:06:43.060 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23760/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739502403060297984}}'
2025-02-14 03:06:43.067 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-14 03:06:43.068 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:44.069 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-14 03:06:44.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12186/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:44.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"c38bf347e4303949794662c31b52ff65db845e89e0ae8654a4469bc1d161347a","status_code":200,"status_desc":"OK","messages":[{"message_hash":"QZJLJcHiZKWu+8XHpmLZnAw/z4fnDcgS93NCjzY0Irg="}]}'
2025-02-14 03:06:44.078 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 03:06:44.079 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 03:06:44.079 DEBUG [src.node.waku_node] Stopping container with id 33fc81cde912
2025-02-14 03:06:44.604 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:44.604 DEBUG [src.node.waku_node] Stopping container with id df8573ff83d9
2025-02-14 03:06:45.418 ERROR [src.node.docker_mananger] Max retries reached for container 33fc81cde912. Exiting log stream.
2025-02-14 03:06:45.500 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:45.500 DEBUG [src.node.waku_node] Stopping container with id 1a9d7a6c7c97
2025-02-14 03:06:46.029 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:46.031 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 03:06:46.036 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:06:46.064 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:06:46.068 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
