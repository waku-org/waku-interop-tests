2025-02-14 03:06:34.947 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 03:06:34.947 DEBUG [tests.conftest] Running test: test_time_filter_matches_one_message with id: 2025-02-14_03-06-34__7229faff-ef99-436c-99d1-dda8b55ae777
2025-02-14 03:06:34.947 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 03:06:34.947 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 03:06:34.948 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-14 03:06:34.954 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 03:06:34.954 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-14_03-06-34__7229faff-ef99-436c-99d1-dda8b55ae777__wakuorg_nwaku:latest.log
2025-02-14 03:06:34.954 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:34.954 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:34.955 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:34.955 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.0.204
2025-02-14 03:06:34.956 DEBUG [src.node.docker_mananger] Generated ports ['53801', '53802', '53803', '53804', '53805']
2025-02-14 03:06:34.956 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:34.956 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:34.956 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:34.956 DEBUG [src.node.docker_mananger] docker run -i -t -p 53801:53801 -p 53802:53802 -p 53803:53803 -p 53804:53804 -p 53805:53805 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53803 --rest-port=53801 --tcp-port=53802 --discv5-udp-port=53804 --rest-address=0.0.0.0 --nat=extip:172.18.0.204 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1f004114701c23153523ffdc8ceb1a94c2ba0cf859a67bdf3f2b8eaffca3d9c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53805 --metrics-logging=true --store=true --relay=true
2025-02-14 03:06:35.193 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.0.204 waku c8bf4bc4b920f41e0374277a59aa0c9e826d1082acbad14e14cb2074e4932eb5
2025-02-14 03:06:35.235 ERROR [src.node.docker_mananger] Max retries reached for container 3c5e274db5b1. Exiting log stream.
2025-02-14 03:06:35.240 DEBUG [src.node.docker_mananger] Container started with ID c8bf4bc4b920. Setting up logs at ./log/docker/publishing_node1_2025-02-14_03-06-34__7229faff-ef99-436c-99d1-dda8b55ae777__wakuorg_nwaku:latest.log
2025-02-14 03:06:35.241 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53801
2025-02-14 03:06:35.241 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:35.742 ERROR [src.node.docker_mananger] Max retries reached for container 5deaee92dbd8. Exiting log stream.
2025-02-14 03:06:36.242 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53801/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:36.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 03:06:36.246 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 03:06:36.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53801/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:36.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.204/tcp/53802/p2p/16Uiu2HAmDTaBfvzCjXqEbW9GmDwKDRsvJZhpdZopsdmtcn9mHrsm","/ip4/172.18.0.204/tcp/53803/ws/p2p/16Uiu2HAmDTaBfvzCjXqEbW9GmDwKDRsvJZhpdZopsdmtcn9mHrsm"],"enrUri":"enr:-L24QKGhhb82m6y5AFNVE8cec1ynKsYy6-Bxx-T6UEQRbp7FSMGfuPgNoIRi9aCZxlPT7MSzVAAcSkkCW3TxLCIvmSMCgmlkgnY0gmlwhKwSAMyKbXVsdGlhZGRyc5YACASsEgDMBtIqAAoErBIAzAbSK90DgnJzhQADAQAAiXNlY3AyNTZrMaEDC-75QI5vpBcHSidtF0-cqZzGatMxf5NAV56hPUy1QWSDdGNwgtIqg3VkcILSLIV3YWt1MgM"}'
2025-02-14 03:06:36.248 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:36.255 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-14 03:06:36.255 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-14_03-06-34__7229faff-ef99-436c-99d1-dda8b55ae777__wakuorg_go-waku:latest.log
2025-02-14 03:06:36.255 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:36.255 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:36.257 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:36.257 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.164.71
2025-02-14 03:06:36.257 DEBUG [src.node.docker_mananger] Generated ports ['31908', '31909', '31910', '31911', '31912']
2025-02-14 03:06:36.257 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:36.257 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:36.257 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:36.257 DEBUG [src.node.docker_mananger] docker run -i -t -p 31908:31908 -p 31909:31909 -p 31910:31910 -p 31911:31911 -p 31912:31912 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31910 --rest-port=31908 --tcp-port=31909 --discv5-udp-port=31911 --rest-address=0.0.0.0 --nat=extip:172.18.164.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6ef1a4bcef29db1fb5b3a1efabf79fb7fc94da2562b8debcfe7dd2fcfa7bc69 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QKGhhb82m6y5AFNVE8cec1ynKsYy6-Bxx-T6UEQRbp7FSMGfuPgNoIRi9aCZxlPT7MSzVAAcSkkCW3TxLCIvmSMCgmlkgnY0gmlwhKwSAMyKbXVsdGlhZGRyc5YACASsEgDMBtIqAAoErBIAzAbSK90DgnJzhQADAQAAiXNlY3AyNTZrMaEDC-75QI5vpBcHSidtF0-cqZzGatMxf5NAV56hPUy1QWSDdGNwgtIqg3VkcILSLIV3YWt1MgM --storenode=/ip4/172.18.0.204/tcp/53802/p2p/16Uiu2HAmDTaBfvzCjXqEbW9GmDwKDRsvJZhpdZopsdmtcn9mHrsm --store=true --relay=true
2025-02-14 03:06:36.499 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.164.71 waku 4dd9839d46ebb4faa0e85fbef3b62e1c5e86a05fdbb8ec163e8a9c7ca7bb8e28
2025-02-14 03:06:36.553 DEBUG [src.node.docker_mananger] Container started with ID 4dd9839d46eb. Setting up logs at ./log/docker/store_node1_2025-02-14_03-06-34__7229faff-ef99-436c-99d1-dda8b55ae777__wakuorg_go-waku:latest.log
2025-02-14 03:06:36.555 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 31908
2025-02-14 03:06:36.555 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:37.556 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31908/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:37.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QOMcv7VF64MNF56OAMK9sirw-C2eAFG8tAYANo_1Uz2OM5OJaW-wOM_KX0ln5-hPp9W-V_CW2XQ2c8cJ0xsFiGCGAZUCbCSPgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECPKJPcgF7_J5IQmzHIJqmBR-l51GdBtrZzcEBHngsC8qDdGNwgnylg3VkcIJ8p4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/31909/p2p/16Uiu2HAkyWMzNSUvAFZkLHY1r5ox4vYfWXJjujV4q4QSCgF6bMiH","/ip4/127.0.0.1/tcp/31910/ws/p2p/16Uiu2HAkyWMzNSUvAFZkLHY1r5ox4vYfWXJjujV4q4QSCgF6bMiH","/ip4/172.17.0.3/tcp/31909/p2p/16Uiu2HAkyWMzNSUvAFZkLHY1r5ox4vYfWXJjujV4q4QSCgF6bMiH","/ip4/172.17.0.3/tcp/31910/ws/p2p/16Uiu2HAkyWMzNSUvAFZkLHY1r5ox4vYfWXJjujV4q4QSCgF6bMiH"]}'
2025-02-14 03:06:37.559 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:37.559 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31908/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.0.204/tcp/53802/p2p/16Uiu2HAmDTaBfvzCjXqEbW9GmDwKDRsvJZhpdZopsdmtcn9mHrsm", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-14 03:06:37.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-14 03:06:37.576 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53801/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 03:06:37.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:37.597 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31908/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 03:06:37.600 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-14 03:06:37.604 DEBUG [src.steps.store] Relaying message
2025-02-14 03:06:37.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53801/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:06:37.618 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:37.619 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 03:06:37.820 DEBUG [src.steps.store] Relaying message
2025-02-14 03:06:37.820 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53801/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:06:37.827 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:37.827 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 03:06:38.028 DEBUG [src.steps.store] Relaying message
2025-02-14 03:06:38.028 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53801/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:06:38.034 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:38.034 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 03:06:38.235 DEBUG [src.steps.store] Relaying message
2025-02-14 03:06:38.236 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53801/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:06:38.242 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:38.242 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 03:06:38.443 DEBUG [src.steps.store] Relaying message
2025-02-14 03:06:38.443 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53801/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:06:38.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:38.450 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 03:06:38.651 DEBUG [src.steps.store] Relaying message
2025-02-14 03:06:38.651 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53801/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 03:06:38.657 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:38.657 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 03:06:38.858 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53801/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739502394603663968&endTime=1739502394603863968&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:38.861 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb9cb4b2bd62a1cb98d74495677b76deaa90829dcc1fc3ac31b8484f47078a720"}]}'
2025-02-14 03:06:38.862 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31908/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&startTime=1739502394603663968&endTime=1739502394603863968&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:38.866 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"6cd3ff71a9e6bc16d7f1a520e6c81d4433bc9e026616d69640f60239f6f8fb43","status_code":200,"status_desc":"OK","messages":[{"message_hash":"uctLK9YqHLmNdElWd7dt6qkIKdzB/DrDG4SE9HB4pyA="}]}'
2025-02-14 03:06:38.869 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 03:06:38.870 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 03:06:38.870 DEBUG [src.node.waku_node] Stopping container with id c8bf4bc4b920
2025-02-14 03:06:39.427 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:39.428 DEBUG [src.node.waku_node] Stopping container with id 4dd9839d46eb
2025-02-14 03:06:39.959 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:39.959 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 03:06:39.968 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:06:39.972 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
