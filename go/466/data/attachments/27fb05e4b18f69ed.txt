2025-02-14 03:07:16.268 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 03:07:16.269 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-14_03-07-16__70d0bb06-3af1-47c9-bbb9-5e4e2a260398
2025-02-14 03:07:16.269 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 03:07:16.269 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 03:07:16.276 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 03:07:16.276 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_03-07-16__70d0bb06-3af1-47c9-bbb9-5e4e2a260398__wakuorg_nwaku:latest.log
2025-02-14 03:07:16.276 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:07:16.277 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:07:16.278 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:07:16.278 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.227.169
2025-02-14 03:07:16.279 DEBUG [src.node.docker_mananger] Generated ports ['26046', '26047', '26048', '26049', '26050']
2025-02-14 03:07:16.279 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:07:16.279 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:07:16.279 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:07:16.279 DEBUG [src.node.docker_mananger] docker run -i -t -p 26046:26046 -p 26047:26047 -p 26048:26048 -p 26049:26049 -p 26050:26050 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26048 --rest-port=26046 --tcp-port=26047 --discv5-udp-port=26049 --rest-address=0.0.0.0 --nat=extip:172.18.227.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8dbaecb15fed5465d97d96cd6b412853d55db3ffd3957c3d8d6dfdedf7b6ee4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26050 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 03:07:16.520 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.227.169 waku 66d4d4b9f3615a04caa4825f7fb9bbbfe7e779d09a49bdb59f5ace2d2afc2de1
2025-02-14 03:07:16.535 ERROR [src.node.docker_mananger] Max retries reached for container f0987891e6c5. Exiting log stream.
2025-02-14 03:07:16.573 DEBUG [src.node.docker_mananger] Container started with ID 66d4d4b9f361. Setting up logs at ./log/docker/receiving_node1_2025-02-14_03-07-16__70d0bb06-3af1-47c9-bbb9-5e4e2a260398__wakuorg_nwaku:latest.log
2025-02-14 03:07:16.573 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26046
2025-02-14 03:07:16.574 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:07:17.060 ERROR [src.node.docker_mananger] Max retries reached for container 7d9caeb7e313. Exiting log stream.
2025-02-14 03:07:17.575 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26046/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:07:17.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 03:07:17.578 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 03:07:17.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26046/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:07:17.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.169/tcp/26047/p2p/16Uiu2HAmPAp7K1UYk5wpu3WexUxfPgbem4NRFGB55an8Hx2g135p","/ip4/172.18.227.169/tcp/26048/ws/p2p/16Uiu2HAmPAp7K1UYk5wpu3WexUxfPgbem4NRFGB55an8Hx2g135p"],"enrUri":"enr:-L24QAu2Rm3UQiYSRjufkpwV0Se-ns_Bn9R7JAlhXbuW00QKBVyQ-TmrLaRQnqh4wHWXF0quI4VOKs_litHpW4g6bu4CgmlkgnY0gmlwhKwS46mKbXVsdGlhZGRyc5YACASsEuOpBmW_AAoErBLjqQZlwN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnDi2x_tFxI3J54axDYcIviamWT-qWD5_uzCe994yay-DdGNwgmW_g3VkcIJlwYV3YWt1Mgk"}'
2025-02-14 03:07:17.581 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:07:17.588 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 03:07:17.588 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-14_03-07-16__70d0bb06-3af1-47c9-bbb9-5e4e2a260398__wakuorg_nwaku:latest.log
2025-02-14 03:07:17.588 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:07:17.589 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:07:17.590 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:07:17.590 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.152.3
2025-02-14 03:07:17.590 DEBUG [src.node.docker_mananger] Generated ports ['38131', '38132', '38133', '38134', '38135']
2025-02-14 03:07:17.591 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:07:17.591 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:07:17.591 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:07:17.591 DEBUG [src.node.docker_mananger] docker run -i -t -p 38131:38131 -p 38132:38132 -p 38133:38133 -p 38134:38134 -p 38135:38135 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38133 --rest-port=38131 --tcp-port=38132 --discv5-udp-port=38134 --rest-address=0.0.0.0 --nat=extip:172.18.152.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=03617bdb78d4b9d7daf4372d79d4cec7ed8f12b7b392ba774ce5faaae8ff15f8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38135 --metrics-logging=true --lightpush=false --relay=true
2025-02-14 03:07:17.833 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.152.3 waku 5cedbd7845a758490a4214e2c05d9d6c5ea4665b7e05613a3f752db1db9efac5
2025-02-14 03:07:17.885 DEBUG [src.node.docker_mananger] Container started with ID 5cedbd7845a7. Setting up logs at ./log/docker/receiving_node2_2025-02-14_03-07-16__70d0bb06-3af1-47c9-bbb9-5e4e2a260398__wakuorg_nwaku:latest.log
2025-02-14 03:07:17.886 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38131
2025-02-14 03:07:17.886 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:07:18.887 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38131/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:07:18.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 03:07:18.890 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 03:07:18.890 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38131/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:07:18.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.3/tcp/38132/p2p/16Uiu2HAmMrCDKZMsu6EfRzETcRjrh6KYK9U57LThB8o3UvG2RT99","/ip4/172.18.152.3/tcp/38133/ws/p2p/16Uiu2HAmMrCDKZMsu6EfRzETcRjrh6KYK9U57LThB8o3UvG2RT99"],"enrUri":"enr:-L24QAHZUsJJWpdJfZSDgNgRyxirFXOZURX0igmZhWhDk_hDThhCG9x4NM8YWHn90dmgy7lF8AcDqzXQWuUrd5Y-hX4CgmlkgnY0gmlwhKwSmAOKbXVsdGlhZGRyc5YACASsEpgDBpT0AAoErBKYAwaU9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDiJf7_KH4ikCyKYnDu3qZp3ETrWhdxzsZkSe1iwUqPXCDdGNwgpT0g3VkcIKU9oV3YWt1MgE"}'
2025-02-14 03:07:18.892 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:07:18.893 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38131/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.227.169/tcp/26047/p2p/16Uiu2HAmPAp7K1UYk5wpu3WexUxfPgbem4NRFGB55an8Hx2g135p"]'
2025-02-14 03:07:18.934 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:07:18.945 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-14 03:07:18.945 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_03-07-16__70d0bb06-3af1-47c9-bbb9-5e4e2a260398__wakuorg_go-waku:latest.log
2025-02-14 03:07:18.945 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:07:18.945 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:07:18.947 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:07:18.947 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.70.102
2025-02-14 03:07:18.947 DEBUG [src.node.docker_mananger] Generated ports ['52210', '52211', '52212', '52213', '52214']
2025-02-14 03:07:18.947 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:07:18.947 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:07:18.948 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:07:18.948 DEBUG [src.node.docker_mananger] docker run -i -t -p 52210:52210 -p 52211:52211 -p 52212:52212 -p 52213:52213 -p 52214:52214 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52212 --rest-port=52210 --tcp-port=52211 --discv5-udp-port=52213 --rest-address=0.0.0.0 --nat=extip:172.18.70.102 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afee76eed07dfdbe779ba57892e21db107aa55f7f5bbac69b4c988ec5a622da7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QAu2Rm3UQiYSRjufkpwV0Se-ns_Bn9R7JAlhXbuW00QKBVyQ-TmrLaRQnqh4wHWXF0quI4VOKs_litHpW4g6bu4CgmlkgnY0gmlwhKwS46mKbXVsdGlhZGRyc5YACASsEuOpBmW_AAoErBLjqQZlwN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnDi2x_tFxI3J54axDYcIviamWT-qWD5_uzCe994yay-DdGNwgmW_g3VkcIJlwYV3YWt1Mgk --lightpushnode=/ip4/172.18.227.169/tcp/26047/p2p/16Uiu2HAmPAp7K1UYk5wpu3WexUxfPgbem4NRFGB55an8Hx2g135p --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-14 03:07:19.201 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.70.102 waku 959bab5eb75781373484ab9f9c4723470585e9c2960395bf9e3567d05b7525f6
2025-02-14 03:07:19.261 DEBUG [src.node.docker_mananger] Container started with ID 959bab5eb757. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_03-07-16__70d0bb06-3af1-47c9-bbb9-5e4e2a260398__wakuorg_go-waku:latest.log
2025-02-14 03:07:19.262 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 52210
2025-02-14 03:07:19.262 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:07:20.263 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52210/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:07:20.265 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QCKgZ_iFkEoOS5b52Q90p2Xp7YOv6v3IHTYckgDqHHP8BjfWDv2sr2nEnKJA7WGfyUcbMMP3eF_EPm0A7pldrLOGAZUCbMtRgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIg4bZc56xu0tTt7re5ss4AgQUbB0utDuQTBshYbr-IHIN0Y3CCy_ODdWRwgsv1hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/52211/p2p/16Uiu2HAkwe2eWNtuKbhMWsQ7HdB1fMJC17ye6WA9G5xgD8j6tfBy","/ip4/127.0.0.1/tcp/52212/ws/p2p/16Uiu2HAkwe2eWNtuKbhMWsQ7HdB1fMJC17ye6WA9G5xgD8j6tfBy","/ip4/172.17.0.4/tcp/52211/p2p/16Uiu2HAkwe2eWNtuKbhMWsQ7HdB1fMJC17ye6WA9G5xgD8j6tfBy","/ip4/172.17.0.4/tcp/52212/ws/p2p/16Uiu2HAkwe2eWNtuKbhMWsQ7HdB1fMJC17ye6WA9G5xgD8j6tfBy"]}'
2025-02-14 03:07:20.266 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:07:20.266 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52210/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.227.169/tcp/26047/p2p/16Uiu2HAmPAp7K1UYk5wpu3WexUxfPgbem4NRFGB55an8Hx2g135p", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-14 03:07:20.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-14 03:07:20.268 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52210/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.152.3/tcp/38132/p2p/16Uiu2HAmMrCDKZMsu6EfRzETcRjrh6KYK9U57LThB8o3UvG2RT99", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-14 03:07:20.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-14 03:07:20.286 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26046/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 03:07:20.292 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:07:20.292 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38131/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 03:07:20.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:07:20.298 DEBUG [src.steps.light_push] Lightpushing message
2025-02-14 03:07:20.298 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52210/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739502440297827072, "meta": "Light push works!!"}}'
2025-02-14 03:07:20.300 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52210/lightpush/v1/message. Response content: b''
2025-02-14 03:07:20.302 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 03:07:20.303 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 03:07:20.303 DEBUG [src.node.waku_node] Stopping container with id 66d4d4b9f361
2025-02-14 03:07:20.929 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:07:20.930 DEBUG [src.node.waku_node] Stopping container with id 5cedbd7845a7
2025-02-14 03:07:21.743 ERROR [src.node.docker_mananger] Max retries reached for container 66d4d4b9f361. Exiting log stream.
2025-02-14 03:07:22.472 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:07:22.472 DEBUG [src.node.waku_node] Stopping container with id 959bab5eb757
2025-02-14 03:07:23.001 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:07:23.002 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 03:07:23.008 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:07:23.016 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:07:23.019 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
