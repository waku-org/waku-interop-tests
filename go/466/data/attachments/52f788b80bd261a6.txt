2025-02-14 03:07:09.038 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 03:07:09.038 DEBUG [tests.conftest] Running test: test_filter_ping_on_peer_without_subscription with id: 2025-02-14_03-07-09__7e305944-0181-4bd5-a155-b7d882469069
2025-02-14 03:07:09.039 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 03:07:09.039 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 03:07:09.039 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-14 03:07:09.045 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 03:07:09.045 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_03-07-09__7e305944-0181-4bd5-a155-b7d882469069__wakuorg_nwaku:latest.log
2025-02-14 03:07:09.045 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:07:09.045 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:07:09.046 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:07:09.047 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.78.153
2025-02-14 03:07:09.047 DEBUG [src.node.docker_mananger] Generated ports ['40789', '40790', '40791', '40792', '40793']
2025-02-14 03:07:09.047 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:07:09.047 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:07:09.047 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:07:09.047 DEBUG [src.node.docker_mananger] docker run -i -t -p 40789:40789 -p 40790:40790 -p 40791:40791 -p 40792:40792 -p 40793:40793 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40791 --rest-port=40789 --tcp-port=40790 --discv5-udp-port=40792 --rest-address=0.0.0.0 --nat=extip:172.18.78.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf8c0ae96da7b48e874ed92f2a5ce6935b57ef7fa273e6dfdccebca125c92037 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40793 --metrics-logging=true --relay=true --filter=true
2025-02-14 03:07:09.278 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.78.153 waku b78cd212f2342d0e271746abe0b30b9182e15c9048068b9b344c9656ba831e08
2025-02-14 03:07:09.325 DEBUG [src.node.docker_mananger] Container started with ID b78cd212f234. Setting up logs at ./log/docker/node1_2025-02-14_03-07-09__7e305944-0181-4bd5-a155-b7d882469069__wakuorg_nwaku:latest.log
2025-02-14 03:07:09.325 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40789
2025-02-14 03:07:09.326 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:07:09.439 ERROR [src.node.docker_mananger] Max retries reached for container d85f05714736. Exiting log stream.
2025-02-14 03:07:09.785 ERROR [src.node.docker_mananger] Max retries reached for container 553de7175fe6. Exiting log stream.
2025-02-14 03:07:10.327 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40789/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:07:10.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 03:07:10.330 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 03:07:10.330 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40789/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:07:10.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.153/tcp/40790/p2p/16Uiu2HAkxz4Yf538gsuvAy95EMumscXAQkpsUng1LF1tq8VXas5T","/ip4/172.18.78.153/tcp/40791/ws/p2p/16Uiu2HAkxz4Yf538gsuvAy95EMumscXAQkpsUng1LF1tq8VXas5T"],"enrUri":"enr:-L24QIfYH7IdE4Q7tEMukAoaXr09Kn4qO0Arh2Lrxj1JDE1DGnri_SnhBAUttI79vX-Uxzjrvi7l8EkS-BMfcEcDXX0CgmlkgnY0gmlwhKwSTpmKbXVsdGlhZGRyc5YACASsEk6ZBp9WAAoErBJOmQafV90DgnJzhQADAQAAiXNlY3AyNTZrMaECNN8prrrqrJEyZasDk6nChRpOR6Lft7ylHrofG-djHVKDdGNwgp9Wg3VkcIKfWIV3YWt1MgU"}'
2025-02-14 03:07:10.333 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:07:10.333 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-14 03:07:10.340 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-14 03:07:10.340 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_03-07-09__7e305944-0181-4bd5-a155-b7d882469069__wakuorg_go-waku:latest.log
2025-02-14 03:07:10.340 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:07:10.340 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:07:10.342 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:07:10.342 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.151.183
2025-02-14 03:07:10.342 DEBUG [src.node.docker_mananger] Generated ports ['50833', '50834', '50835', '50836', '50837']
2025-02-14 03:07:10.342 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:07:10.342 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:07:10.342 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:07:10.342 DEBUG [src.node.docker_mananger] docker run -i -t -p 50833:50833 -p 50834:50834 -p 50835:50835 -p 50836:50836 -p 50837:50837 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=50835 --rest-port=50833 --tcp-port=50834 --discv5-udp-port=50836 --rest-address=0.0.0.0 --nat=extip:172.18.151.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa73cbb46076f9574276cf6dd4a1badbdfdcaabd811ae4cbcbea6d579a4ba597 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QIfYH7IdE4Q7tEMukAoaXr09Kn4qO0Arh2Lrxj1JDE1DGnri_SnhBAUttI79vX-Uxzjrvi7l8EkS-BMfcEcDXX0CgmlkgnY0gmlwhKwSTpmKbXVsdGlhZGRyc5YACASsEk6ZBp9WAAoErBJOmQafV90DgnJzhQADAQAAiXNlY3AyNTZrMaECNN8prrrqrJEyZasDk6nChRpOR6Lft7ylHrofG-djHVKDdGNwgp9Wg3VkcIKfWIV3YWt1MgU --filternode=/ip4/172.18.78.153/tcp/40790/p2p/16Uiu2HAkxz4Yf538gsuvAy95EMumscXAQkpsUng1LF1tq8VXas5T --pubsub-topic=/waku/2/rs/3/1
2025-02-14 03:07:10.589 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.151.183 waku 04b2de1f4f00a8f50465d8fff542802ff744f739e6f5d1b1388b7f74c8a3c062
2025-02-14 03:07:10.636 DEBUG [src.node.docker_mananger] Container started with ID 04b2de1f4f00. Setting up logs at ./log/docker/node2_2025-02-14_03-07-09__7e305944-0181-4bd5-a155-b7d882469069__wakuorg_go-waku:latest.log
2025-02-14 03:07:10.636 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 50833
2025-02-14 03:07:10.636 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:07:11.637 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50833/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:07:11.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFhpMNfvB0eDcsYs0c415iuReTU6984f1SHBqvrpu3gsfOYOQg-PXEKl_7w2WW1wJJ42kMIIbzabyFKq0Y1_hIiGAZUCbKmogmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQIHYf_KTaSCrb3JpzVriIfcdeh5ePaFUNBEeGFmncD8HIN0Y3CCxpKDdWRwgsaUhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/50834/p2p/16Uiu2HAkuvVWEbSpFZ4r8jGs3TV3LCMhkipVa2YVtKWdAgQiqJJo","/ip4/127.0.0.1/tcp/50835/ws/p2p/16Uiu2HAkuvVWEbSpFZ4r8jGs3TV3LCMhkipVa2YVtKWdAgQiqJJo","/ip4/172.17.0.3/tcp/50834/p2p/16Uiu2HAkuvVWEbSpFZ4r8jGs3TV3LCMhkipVa2YVtKWdAgQiqJJo","/ip4/172.17.0.3/tcp/50835/ws/p2p/16Uiu2HAkuvVWEbSpFZ4r8jGs3TV3LCMhkipVa2YVtKWdAgQiqJJo"]}'
2025-02-14 03:07:11.639 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:07:11.639 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50833/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.78.153/tcp/40790/p2p/16Uiu2HAkxz4Yf538gsuvAy95EMumscXAQkpsUng1LF1tq8VXas5T", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-14 03:07:11.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-14 03:07:11.642 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50833/filter/v2/subscriptions/9139a0a6-35fb-4221-bcf9-3df66665b86c" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:07:11.647 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:50833/filter/v2/subscriptions/9139a0a6-35fb-4221-bcf9-3df66665b86c. Response content: b'{"requestId":"9139a0a6-35fb-4221-bcf9-3df66665b86c","statusDesc":"peer has no subscription"}'
2025-02-14 03:07:11.651 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 03:07:11.652 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 03:07:11.652 DEBUG [src.node.waku_node] Stopping container with id b78cd212f234
2025-02-14 03:07:12.245 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:07:12.245 DEBUG [src.node.waku_node] Stopping container with id 04b2de1f4f00
2025-02-14 03:07:13.058 ERROR [src.node.docker_mananger] Max retries reached for container b78cd212f234. Exiting log stream.
2025-02-14 03:07:13.141 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:07:13.142 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 03:07:13.147 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:07:13.150 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
