2025-02-14 03:06:26.646 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 03:06:26.647 DEBUG [tests.conftest] Running test: test_get_peers_after_node1_was_restarted with id: 2025-02-14_03-06-26__1f046046-6c15-47a4-b98a-d82ee4e8eadb
2025-02-14 03:06:26.647 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 03:06:26.647 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 03:06:26.654 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 03:06:26.654 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_03-06-26__1f046046-6c15-47a4-b98a-d82ee4e8eadb__wakuorg_nwaku:latest.log
2025-02-14 03:06:26.654 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:26.654 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:26.655 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:26.656 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.58.202
2025-02-14 03:06:26.656 DEBUG [src.node.docker_mananger] Generated ports ['36438', '36439', '36440', '36441', '36442']
2025-02-14 03:06:26.656 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:26.656 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:26.656 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:26.656 DEBUG [src.node.docker_mananger] docker run -i -t -p 36438:36438 -p 36439:36439 -p 36440:36440 -p 36441:36441 -p 36442:36442 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36440 --rest-port=36438 --tcp-port=36439 --discv5-udp-port=36441 --rest-address=0.0.0.0 --nat=extip:172.18.58.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fac3b7a3dcafee7ba172ce7fbcaef7ca244958bb93ffaa78ccdf734a0833301a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36442 --metrics-logging=true --relay=true --relay-peer-exchange=true
2025-02-14 03:06:26.880 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.58.202 waku 966f74859432ff939ccba36234fb75bd324470a9072b3984d6baedb37a6c7386
2025-02-14 03:06:26.926 DEBUG [src.node.docker_mananger] Container started with ID 966f74859432. Setting up logs at ./log/docker/node1_2025-02-14_03-06-26__1f046046-6c15-47a4-b98a-d82ee4e8eadb__wakuorg_nwaku:latest.log
2025-02-14 03:06:26.927 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36438
2025-02-14 03:06:26.928 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:26.932 ERROR [src.node.docker_mananger] Max retries reached for container 98b1df5e162d. Exiting log stream.
2025-02-14 03:06:27.443 ERROR [src.node.docker_mananger] Max retries reached for container eb8d2c5571d7. Exiting log stream.
2025-02-14 03:06:27.930 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36438/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:27.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 03:06:27.933 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 03:06:27.933 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36438/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:27.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.202/tcp/36439/p2p/16Uiu2HAmF3FoAGnDc6HrygiGhKreDxaXAnU5LHsQWQk1o5xQVyKU","/ip4/172.18.58.202/tcp/36440/ws/p2p/16Uiu2HAmF3FoAGnDc6HrygiGhKreDxaXAnU5LHsQWQk1o5xQVyKU"],"enrUri":"enr:-L24QHt-K9rkWWzCFzEoWWYKn_wAiNNyYQVy_xNm3PogJoXRHU57FMvFEmcZodeVNFk6iFC_sxpp9-2K7uu9GpJOUtUCgmlkgnY0gmlwhKwSOsqKbXVsdGlhZGRyc5YACASsEjrKBo5XAAoErBI6ygaOWN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDI2ud1oqJ_u8v0Xw180FB_pCgVjeL4NqjqdjoY6GmgD-DdGNwgo5Xg3VkcIKOWYV3YWt1MgE"}'
2025-02-14 03:06:27.935 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:27.941 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-14 03:06:27.941 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_03-06-26__1f046046-6c15-47a4-b98a-d82ee4e8eadb__wakuorg_go-waku:latest.log
2025-02-14 03:06:27.941 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:27.942 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:27.943 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:27.943 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.225.205
2025-02-14 03:06:27.943 DEBUG [src.node.docker_mananger] Generated ports ['58272', '58273', '58274', '58275', '58276']
2025-02-14 03:06:27.943 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:27.943 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:27.943 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:27.944 DEBUG [src.node.docker_mananger] docker run -i -t -p 58272:58272 -p 58273:58273 -p 58274:58274 -p 58275:58275 -p 58276:58276 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=58274 --rest-port=58272 --tcp-port=58273 --discv5-udp-port=58275 --rest-address=0.0.0.0 --nat=extip:172.18.225.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b34fb91e8add2bcb1ee7f2a32bbcabb25bf87efeb78c9fa355fb540720ae01df --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QHt-K9rkWWzCFzEoWWYKn_wAiNNyYQVy_xNm3PogJoXRHU57FMvFEmcZodeVNFk6iFC_sxpp9-2K7uu9GpJOUtUCgmlkgnY0gmlwhKwSOsqKbXVsdGlhZGRyc5YACASsEjrKBo5XAAoErBI6ygaOWN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDI2ud1oqJ_u8v0Xw180FB_pCgVjeL4NqjqdjoY6GmgD-DdGNwgo5Xg3VkcIKOWYV3YWt1MgE
2025-02-14 03:06:28.165 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.225.205 waku a1b20c4125512e24ee249b715fcbd364d47c7612e340cdd36108d9bcc1b9a70d
2025-02-14 03:06:28.222 DEBUG [src.node.docker_mananger] Container started with ID a1b20c412551. Setting up logs at ./log/docker/node2_2025-02-14_03-06-26__1f046046-6c15-47a4-b98a-d82ee4e8eadb__wakuorg_go-waku:latest.log
2025-02-14 03:06:28.222 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 58272
2025-02-14 03:06:28.222 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:29.223 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58272/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:29.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QOKzpImCSAKvGFLhm0SPYA1VM0Tc6B5ye0zLJmJSq58nChqIZxUyUgLmXkSjNxuEjuSvkZqJYy3yUgf9y8vldzSGAZUCbAPzgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECLRkseqLFprLygUBIGq8fHkYcf2A_Eygsa5LyBu5LZAWDdGNwguOhg3VkcILjo4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/58273/p2p/16Uiu2HAkxTibBefLB2z1w5y7xLyZ749NVqNKhWmAimaPN9M2PoJt","/ip4/127.0.0.1/tcp/58274/ws/p2p/16Uiu2HAkxTibBefLB2z1w5y7xLyZ749NVqNKhWmAimaPN9M2PoJt","/ip4/172.17.0.3/tcp/58273/p2p/16Uiu2HAkxTibBefLB2z1w5y7xLyZ749NVqNKhWmAimaPN9M2PoJt","/ip4/172.17.0.3/tcp/58274/ws/p2p/16Uiu2HAkxTibBefLB2z1w5y7xLyZ749NVqNKhWmAimaPN9M2PoJt"]}'
2025-02-14 03:06:29.226 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:29.226 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58272/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.58.202/tcp/36439/p2p/16Uiu2HAmF3FoAGnDc6HrygiGhKreDxaXAnU5LHsQWQk1o5xQVyKU", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-14 03:06:29.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-14 03:06:29.245 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36438/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-14 03:06:29.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:29.271 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58272/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-14 03:06:29.273 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-14 03:06:29.274 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:30.274 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36438/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:30.277 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.3/tcp/58273/p2p/16Uiu2HAkxTibBefLB2z1w5y7xLyZ749NVqNKhWmAimaPN9M2PoJt","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-14 03:06:30.277 DEBUG [src.node.waku_node] Restarting container with id 966f74859432
2025-02-14 03:06:31.125 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:32.132 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-14 03:06:32.133 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-14_03-06-26__1f046046-6c15-47a4-b98a-d82ee4e8eadb__wakuorg_go-waku:latest.log
2025-02-14 03:06:32.133 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:32.133 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:32.134 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:32.134 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.78.184
2025-02-14 03:06:32.135 DEBUG [src.node.docker_mananger] Generated ports ['52212', '52213', '52214', '52215', '52216']
2025-02-14 03:06:32.135 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:32.135 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:32.135 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:32.135 DEBUG [src.node.docker_mananger] docker run -i -t -p 52212:52212 -p 52213:52213 -p 52214:52214 -p 52215:52215 -p 52216:52216 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52214 --rest-port=52212 --tcp-port=52213 --discv5-udp-port=52215 --rest-address=0.0.0.0 --nat=extip:172.18.78.184 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --nodekey=eafa363b13ec067f5be8445fabcbaebef2ea90f4cdc0d2b8f83cf3ba0eb87aab --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.3/tcp/58273/p2p/16Uiu2HAkxTibBefLB2z1w5y7xLyZ749NVqNKhWmAimaPN9M2PoJt --pubsub-topic=/waku/2/rs/3/1
2025-02-14 03:06:32.363 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.78.184 waku e5aff72836d5793d05a5d2e46a456bc2e3f97b3e5218e2bca47c6b80964d99f6
2025-02-14 03:06:32.414 DEBUG [src.node.docker_mananger] Container started with ID e5aff72836d5. Setting up logs at ./log/docker/node3_2025-02-14_03-06-26__1f046046-6c15-47a4-b98a-d82ee4e8eadb__wakuorg_go-waku:latest.log
2025-02-14 03:06:32.415 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 52212
2025-02-14 03:06:32.415 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:33.415 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52212/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:33.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-Jq4QEedCepva7eff3MGKiE8yzOImtCD2QZjOOUDAp3nZIW4LfwbWoQWZR-gT0SZ18cXOAq6fBeCnmCdWjZnfGLZrXKGAZUCbBRYgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQMwn5mli0My8_onvMFVK2-AkFvC810QLvVp76Cp6obYp4N0Y3CCy_WFd2FrdTKA","listenAddresses":["/ip4/127.0.0.1/tcp/52213/p2p/16Uiu2HAmFvo56DAKWYw9iGQNYRLUPSQk7YJKQyaiNT68sePjzJfY","/ip4/127.0.0.1/tcp/52214/ws/p2p/16Uiu2HAmFvo56DAKWYw9iGQNYRLUPSQk7YJKQyaiNT68sePjzJfY","/ip4/172.17.0.4/tcp/52213/p2p/16Uiu2HAmFvo56DAKWYw9iGQNYRLUPSQk7YJKQyaiNT68sePjzJfY","/ip4/172.17.0.4/tcp/52214/ws/p2p/16Uiu2HAmFvo56DAKWYw9iGQNYRLUPSQk7YJKQyaiNT68sePjzJfY"]}'
2025-02-14 03:06:33.418 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:33.419 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52212/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.58.202/tcp/36439/p2p/16Uiu2HAmF3FoAGnDc6HrygiGhKreDxaXAnU5LHsQWQk1o5xQVyKU", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-14 03:06:33.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-14 03:06:33.436 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52212/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:33.438 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAkxTibBefLB2z1w5y7xLyZ749NVqNKhWmAimaPN9M2PoJt","multiaddrs":["/ip4/172.17.0.3/tcp/58273/p2p/16Uiu2HAkxTibBefLB2z1w5y7xLyZ749NVqNKhWmAimaPN9M2PoJt","/ip4/172.17.0.3/tcp/58274/ws/p2p/16Uiu2HAkxTibBefLB2z1w5y7xLyZ749NVqNKhWmAimaPN9M2PoJt"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]},{"id":"16Uiu2HAmF3FoAGnDc6HrygiGhKreDxaXAnU5LHsQWQk1o5xQVyKU","multiaddrs":["/ip4/172.18.58.202/tcp/36439/p2p/16Uiu2HAmF3FoAGnDc6HrygiGhKreDxaXAnU5LHsQWQk1o5xQVyKU","/ip4/172.18.58.202/tcp/36440/ws/p2p/16Uiu2HAmF3FoAGnDc6HrygiGhKreDxaXAnU5LHsQWQk1o5xQVyKU"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/2","/waku/2/rs/3/5","/waku/2/rs/3/8","/waku/2/rs/3/0","/waku/2/rs/3/3","/waku/2/rs/3/4","/waku/2/rs/3/6","/waku/2/rs/3/7","/waku/2/rs/3/1"]}]'
2025-02-14 03:06:33.440 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 03:06:33.441 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 03:06:33.441 DEBUG [src.node.waku_node] Stopping container with id 966f74859432
2025-02-14 03:06:33.960 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:33.960 DEBUG [src.node.waku_node] Stopping container with id a1b20c412551
2025-02-14 03:06:34.451 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:34.453 DEBUG [src.node.waku_node] Stopping container with id e5aff72836d5
2025-02-14 03:06:34.772 ERROR [src.node.docker_mananger] Max retries reached for container 966f74859432. Exiting log stream.
2025-02-14 03:06:34.921 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:34.922 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 03:06:34.946 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:06:34.951 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:06:34.953 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
