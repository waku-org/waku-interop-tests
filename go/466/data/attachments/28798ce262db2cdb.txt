2025-02-14 03:06:20.068 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 03:06:20.069 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-14_03-06-20__fd9b576d-2829-4fda-8e9e-e1f8b0b73948
2025-02-14 03:06:20.069 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 03:06:20.069 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 03:06:20.076 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 03:06:20.076 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_03-06-20__fd9b576d-2829-4fda-8e9e-e1f8b0b73948__wakuorg_nwaku:latest.log
2025-02-14 03:06:20.076 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:20.076 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:20.078 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:20.078 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.225.14
2025-02-14 03:06:20.078 DEBUG [src.node.docker_mananger] Generated ports ['43416', '43417', '43418', '43419', '43420']
2025-02-14 03:06:20.078 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:20.078 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:20.078 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:20.078 DEBUG [src.node.docker_mananger] docker run -i -t -p 43416:43416 -p 43417:43417 -p 43418:43418 -p 43419:43419 -p 43420:43420 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43418 --rest-port=43416 --tcp-port=43417 --discv5-udp-port=43419 --rest-address=0.0.0.0 --nat=extip:172.18.225.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1f7aac97ed9ac3ee89faecfc1aca275160efd818fcdbcefa8f85cb61b7bbedf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43420 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 03:06:20.310 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.225.14 waku 5fe3f850089d11c3b5980326e9508b55c8f658e6d04b15ea335bdee5ba94670e
2025-02-14 03:06:20.358 DEBUG [src.node.docker_mananger] Container started with ID 5fe3f850089d. Setting up logs at ./log/docker/receiving_node1_2025-02-14_03-06-20__fd9b576d-2829-4fda-8e9e-e1f8b0b73948__wakuorg_nwaku:latest.log
2025-02-14 03:06:20.360 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43416
2025-02-14 03:06:20.360 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:20.374 ERROR [src.node.docker_mananger] Max retries reached for container 3414972e1ce4. Exiting log stream.
2025-02-14 03:06:20.859 ERROR [src.node.docker_mananger] Max retries reached for container 3604a048b094. Exiting log stream.
2025-02-14 03:06:21.360 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43416/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:21.363 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 03:06:21.364 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 03:06:21.364 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43416/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:21.366 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.14/tcp/43417/p2p/16Uiu2HAmS8fK3K45vcqya1fvgUL4HwJvrM1Kes13YPkTesSLXUex","/ip4/172.18.225.14/tcp/43418/ws/p2p/16Uiu2HAmS8fK3K45vcqya1fvgUL4HwJvrM1Kes13YPkTesSLXUex"],"enrUri":"enr:-L24QABRXhUfh1hmaXQgkMp7OM3dLSNk9hyo1WaOSms65-9qQ6EaIl-CYNwwpCUd0o2M4IsVJjvWQm3u_Q7HVVmxiM0CgmlkgnY0gmlwhKwS4Q6KbXVsdGlhZGRyc5YACASsEuEOBqmZAAoErBLhDgapmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyD6qXOch5yt16WdonwLdyT0ifhOhYot8oh5qXceP1eWDdGNwgqmZg3VkcIKpm4V3YWt1Mgk"}'
2025-02-14 03:06:21.366 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:21.373 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 03:06:21.373 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-14_03-06-20__fd9b576d-2829-4fda-8e9e-e1f8b0b73948__wakuorg_nwaku:latest.log
2025-02-14 03:06:21.373 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:21.373 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:21.374 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:21.374 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.252.173
2025-02-14 03:06:21.375 DEBUG [src.node.docker_mananger] Generated ports ['6444', '6445', '6446', '6447', '6448']
2025-02-14 03:06:21.375 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:21.375 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:21.375 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:21.375 DEBUG [src.node.docker_mananger] docker run -i -t -p 6444:6444 -p 6445:6445 -p 6446:6446 -p 6447:6447 -p 6448:6448 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6446 --rest-port=6444 --tcp-port=6445 --discv5-udp-port=6447 --rest-address=0.0.0.0 --nat=extip:172.18.252.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ada80a8e5ac53ef19fbb9efd31f2a78fe0fcebade3d7ca6d7da02a51875aebaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6448 --metrics-logging=true --lightpush=false --relay=true
2025-02-14 03:06:21.600 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.252.173 waku 98b1df5e162dc0c0aafa467f11cae5dd7f676f1231f73002df752798f9fe9103
2025-02-14 03:06:21.648 DEBUG [src.node.docker_mananger] Container started with ID 98b1df5e162d. Setting up logs at ./log/docker/receiving_node2_2025-02-14_03-06-20__fd9b576d-2829-4fda-8e9e-e1f8b0b73948__wakuorg_nwaku:latest.log
2025-02-14 03:06:21.649 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6444
2025-02-14 03:06:21.649 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:22.649 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6444/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:22.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 03:06:22.652 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 03:06:22.652 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6444/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:22.654 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.173/tcp/6445/p2p/16Uiu2HAm3maDo2Km3CearakALWVTx44jnMWbHEnFNGmFXUXG5omH","/ip4/172.18.252.173/tcp/6446/ws/p2p/16Uiu2HAm3maDo2Km3CearakALWVTx44jnMWbHEnFNGmFXUXG5omH"],"enrUri":"enr:-L24QLXXRn6DBsIOUAdn3vFnLHnAH4OunxK84eXqKI0nRImodpG4xpqh5BX6Nx2Q_A8lrGJ2-uW48F5wJlMeBBctK5sCgmlkgnY0gmlwhKwS_K2KbXVsdGlhZGRyc5YACASsEvytBhktAAoErBL8rQYZLt0DgnJzhQADAQAAiXNlY3AyNTZrMaECe_aZrjjjlT6dkggO_F9RlBBuOECNFvFsm8APRkHuqZCDdGNwghktg3VkcIIZL4V3YWt1MgE"}'
2025-02-14 03:06:22.655 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:22.655 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6444/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.14/tcp/43417/p2p/16Uiu2HAmS8fK3K45vcqya1fvgUL4HwJvrM1Kes13YPkTesSLXUex"]'
2025-02-14 03:06:22.693 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:22.703 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-14 03:06:22.703 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_03-06-20__fd9b576d-2829-4fda-8e9e-e1f8b0b73948__wakuorg_go-waku:latest.log
2025-02-14 03:06:22.703 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 03:06:22.703 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 03:06:22.705 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 03:06:22.705 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.240.172
2025-02-14 03:06:22.705 DEBUG [src.node.docker_mananger] Generated ports ['33902', '33903', '33904', '33905', '33906']
2025-02-14 03:06:22.705 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 03:06:22.705 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 03:06:22.706 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 03:06:22.706 DEBUG [src.node.docker_mananger] docker run -i -t -p 33902:33902 -p 33903:33903 -p 33904:33904 -p 33905:33905 -p 33906:33906 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33904 --rest-port=33902 --tcp-port=33903 --discv5-udp-port=33905 --rest-address=0.0.0.0 --nat=extip:172.18.240.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc9e51b4f215211beab41ba771bfb43b3f134ccca4d4bdfdeaf27560e0bdbd62 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QABRXhUfh1hmaXQgkMp7OM3dLSNk9hyo1WaOSms65-9qQ6EaIl-CYNwwpCUd0o2M4IsVJjvWQm3u_Q7HVVmxiM0CgmlkgnY0gmlwhKwS4Q6KbXVsdGlhZGRyc5YACASsEuEOBqmZAAoErBLhDgapmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyD6qXOch5yt16WdonwLdyT0ifhOhYot8oh5qXceP1eWDdGNwgqmZg3VkcIKpm4V3YWt1Mgk --lightpushnode=/ip4/172.18.225.14/tcp/43417/p2p/16Uiu2HAmS8fK3K45vcqya1fvgUL4HwJvrM1Kes13YPkTesSLXUex --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-14 03:06:22.941 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.240.172 waku eb8d2c5571d76f280fad57ed3595df29d69f86ac5b4ad8dcf8a0c8f4691db23b
2025-02-14 03:06:22.991 DEBUG [src.node.docker_mananger] Container started with ID eb8d2c5571d7. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_03-06-20__fd9b576d-2829-4fda-8e9e-e1f8b0b73948__wakuorg_go-waku:latest.log
2025-02-14 03:06:22.991 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 33902
2025-02-14 03:06:22.992 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 03:06:23.993 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33902/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 03:06:23.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QI1oCzTf55Jo-q_vvg6nX4RPWgQ7FRDgxoFR9PcZ4B-pNc06uD2MCR7Uzkxwufv5wHFGF2iBGdgLyMViD_0qVt2GAZUCa--OgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQJqHBpPCDGMn_rx-rhHhIlHROsSr04Q6mP3-lVAF8lzT4N0Y3CChG-DdWRwgoRxhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/33903/p2p/16Uiu2HAm2Zt3s7FXDp81PN2bvBB1e3Jk8dtWMdMuuq5HCsM8JrDU","/ip4/127.0.0.1/tcp/33904/ws/p2p/16Uiu2HAm2Zt3s7FXDp81PN2bvBB1e3Jk8dtWMdMuuq5HCsM8JrDU","/ip4/172.17.0.4/tcp/33903/p2p/16Uiu2HAm2Zt3s7FXDp81PN2bvBB1e3Jk8dtWMdMuuq5HCsM8JrDU","/ip4/172.17.0.4/tcp/33904/ws/p2p/16Uiu2HAm2Zt3s7FXDp81PN2bvBB1e3Jk8dtWMdMuuq5HCsM8JrDU"]}'
2025-02-14 03:06:23.995 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 03:06:23.996 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33902/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.225.14/tcp/43417/p2p/16Uiu2HAmS8fK3K45vcqya1fvgUL4HwJvrM1Kes13YPkTesSLXUex", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-14 03:06:23.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-14 03:06:23.998 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33902/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.252.173/tcp/6445/p2p/16Uiu2HAm3maDo2Km3CearakALWVTx44jnMWbHEnFNGmFXUXG5omH", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-14 03:06:24.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-14 03:06:24.015 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43416/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 03:06:24.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:24.022 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6444/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 03:06:24.026 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 03:06:24.027 DEBUG [src.steps.light_push] Lightpushing message
2025-02-14 03:06:24.027 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33902/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739502384027443968}}'
2025-02-14 03:06:24.032 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:33902/lightpush/v1/message. Response content: b'lightpush errornot_published_to_any_peer'
2025-02-14 03:06:24.035 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 03:06:24.036 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 03:06:24.036 DEBUG [src.node.waku_node] Stopping container with id 5fe3f850089d
2025-02-14 03:06:24.633 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:24.634 DEBUG [src.node.waku_node] Stopping container with id 98b1df5e162d
2025-02-14 03:06:25.467 ERROR [src.node.docker_mananger] Max retries reached for container 5fe3f850089d. Exiting log stream.
2025-02-14 03:06:26.116 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:26.116 DEBUG [src.node.waku_node] Stopping container with id eb8d2c5571d7
2025-02-14 03:06:26.618 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 03:06:26.619 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 03:06:26.634 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:06:26.640 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 03:06:26.643 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
