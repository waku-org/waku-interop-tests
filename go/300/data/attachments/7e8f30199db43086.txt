[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-10-05_03-15-59__468aa4ff-7a31-48e6-8052-515e3bed5f83
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-05_03-15-59__468aa4ff-7a31-48e6-8052-515e3bed5f83__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-05_03-15-59__468aa4ff-7a31-48e6-8052-515e3bed5f83__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-05_03-15-59__468aa4ff-7a31-48e6-8052-515e3bed5f83__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.232.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59864', '59865', '59866', '59867', '59868']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59864:59864 -p 59865:59865 -p 59866:59866 -p 59867:59867 -p 59868:59868 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=59866 --rest-port=59864 --tcp-port=59865 --discv5-udp-port=59867 --rest-address=0.0.0.0 --nat=extip:172.18.232.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1d87c852dbbc62dfd4c0a1e3673f1aabd25837bcb19adfdbdcf201ba8b5dd72e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.232.128 waku e04c85ada67540c92f2286bc3b591c84b82cbbb6e8f82282a8b70d9ae67cdd97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e04c85ada675. Setting up logs at ./log/docker/node1_2024-10-05_03-15-59__468aa4ff-7a31-48e6-8052-515e3bed5f83__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 59864
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59864/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QPqfc4oe7cT070Oks_iwj6oADqIkYTIoXBqIwgLG1nLFYEXRayvQ6pvL7vaEwvUOarK-e4SxUxUErUf38Hul406GAZJarU1cgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQKeKeKX3ScGEALelhDlz1gnEZD09L1CDa_74SWxuHdB8oN0Y3CC6dmDdWRwgunbhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/59865/p2p/16Uiu2HAm655STJGLEKYbwTNDrmxm3reLX1D7cgeJdXdBX3tcozd7","/ip4/127.0.0.1/tcp/59866/ws/p2p/16Uiu2HAm655STJGLEKYbwTNDrmxm3reLX1D7cgeJdXdBX3tcozd7","/ip4/172.17.0.5/tcp/59865/p2p/16Uiu2HAm655STJGLEKYbwTNDrmxm3reLX1D7cgeJdXdBX3tcozd7","/ip4/172.17.0.5/tcp/59866/ws/p2p/16Uiu2HAm655STJGLEKYbwTNDrmxm3reLX1D7cgeJdXdBX3tcozd7"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.184.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55568', '55569', '55570', '55571', '55572']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55568:55568 -p 55569:55569 -p 55570:55570 -p 55571:55571 -p 55572:55572 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55570 --rest-port=55568 --tcp-port=55569 --discv5-udp-port=55571 --rest-address=0.0.0.0 --nat=extip:172.18.184.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=358eb15c777031d0e8993aba9e3faabd916f99d2ef544fb43bc94ceabd0a1ace --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55572 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QPqfc4oe7cT070Oks_iwj6oADqIkYTIoXBqIwgLG1nLFYEXRayvQ6pvL7vaEwvUOarK-e4SxUxUErUf38Hul406GAZJarU1cgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQKeKeKX3ScGEALelhDlz1gnEZD09L1CDa_74SWxuHdB8oN0Y3CC6dmDdWRwgunbhXdha3UyCQ --lightpushnode=/ip4/172.18.232.128/tcp/59865/p2p/16Uiu2HAm655STJGLEKYbwTNDrmxm3reLX1D7cgeJdXdBX3tcozd7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.184.128 waku 8f567b36d16dbf9d61f1baa1f209b519e1ffb7940e2407ef2416d426c1f79788
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8f567b36d16d. Setting up logs at ./log/docker/node2_2024-10-05_03-15-59__468aa4ff-7a31-48e6-8052-515e3bed5f83__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55568
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55568/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55568/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.128/tcp/55569/p2p/16Uiu2HAmG3SJx3FJywqdNDWvJKEsAxaEGKybU8WBGkJ9uu5YQavj","/ip4/172.18.184.128/tcp/55570/ws/p2p/16Uiu2HAmG3SJx3FJywqdNDWvJKEsAxaEGKybU8WBGkJ9uu5YQavj"],"enrUri":"enr:-LO4QFwINfmB56g5bvTjbzWsGLenOh8PfGHKptYD-ZVzZLiZY_iTY_1WUw4hVhylJIC0J148AElM8ARmvoqpUTEn9-EBgmlkgnY0gmlwhKwSuICKbXVsdGlhZGRyc4wACgSsEriABtkS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMyUzD15kqXyti7Jfnk_9M6GyzD7G9-qI1rgbT25i5v2IN0Y3CC2RGDdWRwgtkThXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.61.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36043', '36044', '36045', '36046', '36047']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36043:36043 -p 36044:36044 -p 36045:36045 -p 36046:36046 -p 36047:36047 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36045 --rest-port=36043 --tcp-port=36044 --discv5-udp-port=36046 --rest-address=0.0.0.0 --nat=extip:172.18.61.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f91becb9ebfbd82dacdbb7a1c8e6ba1bc5fcda5aac66add8b9a5c2cea0702ff8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.184.128/tcp/55569/p2p/16Uiu2HAmG3SJx3FJywqdNDWvJKEsAxaEGKybU8WBGkJ9uu5YQavj --discv5-bootstrap-node=enr:-LO4QFwINfmB56g5bvTjbzWsGLenOh8PfGHKptYD-ZVzZLiZY_iTY_1WUw4hVhylJIC0J148AElM8ARmvoqpUTEn9-EBgmlkgnY0gmlwhKwSuICKbXVsdGlhZGRyc4wACgSsEriABtkS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMyUzD15kqXyti7Jfnk_9M6GyzD7G9-qI1rgbT25i5v2IN0Y3CC2RGDdWRwgtkThXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.61.28 waku 0d4b284ae01ff384bf8343a7dad485b9d20af2570a57ba6d6df211b5e3928df7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0d4b284ae01f. Setting up logs at ./log/docker/node3_2024-10-05_03-15-59__468aa4ff-7a31-48e6-8052-515e3bed5f83__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 36043
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36043/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QPfzVOxDlfBHVtwdjBme5KqI8kiFB5NZYDQWuhGcQBNYLhTFvBq3Slb8j84xhcvSbgliAt8uXn4pwYg1Q42X5ayGAZJarVhvgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQLJ6M-1XV76TYtV9GUCdWYeyqYX9BQDB7VAHr71SSjfJoN0Y3CCjMyDdWRwgozOhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/36044/p2p/16Uiu2HAm91qpuc6tPtzs2VLJ1TUVuB5bhUZREcbWgETYiekEsvo7","/ip4/127.0.0.1/tcp/36045/ws/p2p/16Uiu2HAm91qpuc6tPtzs2VLJ1TUVuB5bhUZREcbWgETYiekEsvo7","/ip4/172.17.0.9/tcp/36044/p2p/16Uiu2HAm91qpuc6tPtzs2VLJ1TUVuB5bhUZREcbWgETYiekEsvo7","/ip4/172.17.0.9/tcp/36045/ws/p2p/16Uiu2HAm91qpuc6tPtzs2VLJ1TUVuB5bhUZREcbWgETYiekEsvo7"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59864/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55568/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59864/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59864/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59864/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59864/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmG3SJx3FJywqdNDWvJKEsAxaEGKybU8WBGkJ9uu5YQavj","multiaddrs":["/ip4/172.18.184.128/tcp/55569/p2p/16Uiu2HAmG3SJx3FJywqdNDWvJKEsAxaEGKybU8WBGkJ9uu5YQavj","/ip4/172.18.184.128/tcp/55570/ws/p2p/16Uiu2HAmG3SJx3FJywqdNDWvJKEsAxaEGKybU8WBGkJ9uu5YQavj"],"protocols":["/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55568/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.5/tcp/59865/p2p/16Uiu2HAm655STJGLEKYbwTNDrmxm3reLX1D7cgeJdXdBX3tcozd7","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.9/tcp/36044/p2p/16Uiu2HAm91qpuc6tPtzs2VLJ1TUVuB5bhUZREcbWgETYiekEsvo7","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59864/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1728098196837765120}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36043/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"e56ecb4298e46a717c94b73ae462d3a48b4ebfeb60053185ea26e8ea427b13bd","status_code":200,"status_desc":"OK","messages":[{"message_hash":"zGgYNpe8RRMHt9Who6fMa8MG3OzjqHyK1Z5K31hSe6U="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e04c85ada675
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8f567b36d16d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0d4b284ae01f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.