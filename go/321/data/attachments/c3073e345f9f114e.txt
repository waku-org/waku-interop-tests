[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_publish_on_not_subscribed_shard with id: 2024-10-26_03-16-08__8ce0f987-2fbd-4cb1-8b70-397e9df6936f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-26_03-16-08__8ce0f987-2fbd-4cb1-8b70-397e9df6936f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.17.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32208', '32209', '32210', '32211', '32212']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32208:32208 -p 32209:32209 -p 32210:32210 -p 32211:32211 -p 32212:32212 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32210 --rest-port=32208 --tcp-port=32209 --discv5-udp-port=32211 --rest-address=0.0.0.0 --nat=extip:172.18.17.33 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=aaa98b568efc8a5dbdbd27b518fcac3b7f6ddd4fea69bc1bdd36486438beb638 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32212 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.17.33 waku 184a35a57534b16e8b60d24973231d144e9ca8da46f5275701da9210b1a55697
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 184a35a57534. Setting up logs at ./log/docker/node1_2024-10-26_03-16-08__8ce0f987-2fbd-4cb1-8b70-397e9df6936f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32208
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f47a6e5621ed. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32208/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32208/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.33/tcp/32209/p2p/16Uiu2HAkv1WPvmtXbfusA3xrKSEqaVs8EL4qP4ozGqFqtL1YH6g8","/ip4/172.18.17.33/tcp/32210/ws/p2p/16Uiu2HAkv1WPvmtXbfusA3xrKSEqaVs8EL4qP4ozGqFqtL1YH6g8"],"enrUri":"enr:-LO4QEP_h0z7cV5XEH1VQrMcPQaZx54I_U5iLbwtqfmedaEAcMPGYbK5FeJE2scE-308x_BSJs89S2UJH51mBxygl4UBgmlkgnY0gmlwhKwSESGKbXVsdGlhZGRyc4wACgSsEhEhBn3S3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIIquk1X9JX6NipTctCVgXIgUpO_u-BsLMnYzp4MHu0QYN0Y3CCfdGDdWRwgn3ThXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-26_03-16-08__8ce0f987-2fbd-4cb1-8b70-397e9df6936f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.184.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60535', '60536', '60537', '60538', '60539']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60535:60535 -p 60536:60536 -p 60537:60537 -p 60538:60538 -p 60539:60539 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=60537 --rest-port=60535 --tcp-port=60536 --discv5-udp-port=60538 --rest-address=0.0.0.0 --nat=extip:172.18.184.223 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=eede0bcec55c423fe8e7e7af52fa0fccadc950d555aaaffdd6fe854a3633d271 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QEP_h0z7cV5XEH1VQrMcPQaZx54I_U5iLbwtqfmedaEAcMPGYbK5FeJE2scE-308x_BSJs89S2UJH51mBxygl4UBgmlkgnY0gmlwhKwSESGKbXVsdGlhZGRyc4wACgSsEhEhBn3S3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIIquk1X9JX6NipTctCVgXIgUpO_u-BsLMnYzp4MHu0QYN0Y3CCfdGDdWRwgn3ThXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.184.223 waku 605c7d70d2d851c6d0f61f461bdb51e500d23b0ce63067bed8c20c7c6afa01f5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 605c7d70d2d8. Setting up logs at ./log/docker/node2_2024-10-26_03-16-08__8ce0f987-2fbd-4cb1-8b70-397e9df6936f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 60535
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60535/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJrizaGB1ExB9kVHZSWn6hWmJGy6f7Mryx6bDKFbQSujBhXdtHdetBEFMOrO0UpH-hT1RTmXen9eSYDNrQiFx_aGAZLG0wRcgmlkgnY0gmlwhKwRAAqCcnOFAAIBAACJc2VjcDI1NmsxoQKvSWKa18DxGflalQFHdP0LKizRo7vBu_7JXsyuSwy8DoN0Y3CC7HiDdWRwgux6hXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/60536/p2p/16Uiu2HAm7DvEFimEmyKwnP8oP2557K13fd8eE7PbvJMSFdoXas25","/ip4/127.0.0.1/tcp/60537/ws/p2p/16Uiu2HAm7DvEFimEmyKwnP8oP2557K13fd8eE7PbvJMSFdoXas25","/ip4/172.17.0.10/tcp/60536/p2p/16Uiu2HAm7DvEFimEmyKwnP8oP2557K13fd8eE7PbvJMSFdoXas25","/ip4/172.17.0.10/tcp/60537/ws/p2p/16Uiu2HAm7DvEFimEmyKwnP8oP2557K13fd8eE7PbvJMSFdoXas25"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60535/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.17.33/tcp/32209/p2p/16Uiu2HAkv1WPvmtXbfusA3xrKSEqaVs8EL4qP4ozGqFqtL1YH6g8", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32208/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60535/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32208/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32208/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 184a35a57534
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 605c7d70d2d8
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 184a35a57534. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.