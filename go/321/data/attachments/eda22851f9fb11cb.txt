[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-10-26_03-05-14__0c062c08-c231-43a6-9a61-8c79d4ebcda2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-26_03-05-14__0c062c08-c231-43a6-9a61-8c79d4ebcda2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-26_03-05-14__0c062c08-c231-43a6-9a61-8c79d4ebcda2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-26_03-05-14__0c062c08-c231-43a6-9a61-8c79d4ebcda2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.244.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37780', '37781', '37782', '37783', '37784']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37780:37780 -p 37781:37781 -p 37782:37782 -p 37783:37783 -p 37784:37784 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=37782 --rest-port=37780 --tcp-port=37781 --discv5-udp-port=37783 --rest-address=0.0.0.0 --nat=extip:172.18.244.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eec335d8dd2c88ec813a1c5fb2000d6c7ccda9ced9afdb93d069ff6ef3fdaefb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.244.109 waku e189d22787c14bde5b22fdcab6b691169e62692781887849696483765da78e53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e189d22787c1. Setting up logs at ./log/docker/node1_2024-10-26_03-05-14__0c062c08-c231-43a6-9a61-8c79d4ebcda2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 37780
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37780/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QKj1WwOStZ72Ye7lku4iM2i9HBidnNWVJCCIQ55LHtLaQ3oJB7WpX34y6HkCkdu9Q9Y0KrQSxmJwsrS4ppdhyNSGAZLGyQ0_gmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQOH8Upa4rSfiRbfJbUPOwg60B3kzZhQWH7mn--YAAnej4N0Y3CCk5WDdWRwgpOXhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/37781/p2p/16Uiu2HAmMoengAp6FBj5T3Yin3qRJcn961wNaaA7WdjeJDv4CRH8","/ip4/127.0.0.1/tcp/37782/ws/p2p/16Uiu2HAmMoengAp6FBj5T3Yin3qRJcn961wNaaA7WdjeJDv4CRH8","/ip4/172.17.0.2/tcp/37781/p2p/16Uiu2HAmMoengAp6FBj5T3Yin3qRJcn961wNaaA7WdjeJDv4CRH8","/ip4/172.17.0.2/tcp/37782/ws/p2p/16Uiu2HAmMoengAp6FBj5T3Yin3qRJcn961wNaaA7WdjeJDv4CRH8"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.130.108
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54116', '54117', '54118', '54119', '54120']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54116:54116 -p 54117:54117 -p 54118:54118 -p 54119:54119 -p 54120:54120 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54118 --rest-port=54116 --tcp-port=54117 --discv5-udp-port=54119 --rest-address=0.0.0.0 --nat=extip:172.18.130.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb1d6e96e42dd352aecdf4cf3eb99a48fa0bd8bc62d6afae0fa92f2fdc6dabd3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54120 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QKj1WwOStZ72Ye7lku4iM2i9HBidnNWVJCCIQ55LHtLaQ3oJB7WpX34y6HkCkdu9Q9Y0KrQSxmJwsrS4ppdhyNSGAZLGyQ0_gmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQOH8Upa4rSfiRbfJbUPOwg60B3kzZhQWH7mn--YAAnej4N0Y3CCk5WDdWRwgpOXhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.130.108 waku 491bb67c9cc438e86c18de946635cf762de4d880bd576276f82709ea5d9bc77c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 491bb67c9cc4. Setting up logs at ./log/docker/node2_2024-10-26_03-05-14__0c062c08-c231-43a6-9a61-8c79d4ebcda2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54116
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54116/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54116/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.108/tcp/54117/p2p/16Uiu2HAmKp2KAjpKymZEnVfV9svdKt52Bs7Gek3YkRwhrEQMwvwC","/ip4/172.18.130.108/tcp/54118/ws/p2p/16Uiu2HAmKp2KAjpKymZEnVfV9svdKt52Bs7Gek3YkRwhrEQMwvwC"],"enrUri":"enr:-LO4QGXnSO7eehkKQvtmgNuwN4XgdV-M136Ewh6m69YKPZ2AQbdVLnUi748lTR_q0nzq6hFGaHXm5M7sM70f-tB9g8sBgmlkgnY0gmlwhKwSgmyKbXVsdGlhZGRyc4wACgSsEoJsBtNm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNqUkF9helt1Lq7WO7UcZz-WsLJXPL_Uz0NE-1kNwPfi4N0Y3CC02WDdWRwgtNnhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.240.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16283', '16284', '16285', '16286', '16287']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16283:16283 -p 16284:16284 -p 16285:16285 -p 16286:16286 -p 16287:16287 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=16285 --rest-port=16283 --tcp-port=16284 --discv5-udp-port=16286 --rest-address=0.0.0.0 --nat=extip:172.18.240.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa12dfc6a717cf750d0fdaacb7cb6aeb3a9fc5ff643074f024c07b5b1bb2b7ac --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.130.108/tcp/54117/p2p/16Uiu2HAmKp2KAjpKymZEnVfV9svdKt52Bs7Gek3YkRwhrEQMwvwC --discv5-bootstrap-node=enr:-LO4QGXnSO7eehkKQvtmgNuwN4XgdV-M136Ewh6m69YKPZ2AQbdVLnUi748lTR_q0nzq6hFGaHXm5M7sM70f-tB9g8sBgmlkgnY0gmlwhKwSgmyKbXVsdGlhZGRyc4wACgSsEoJsBtNm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNqUkF9helt1Lq7WO7UcZz-WsLJXPL_Uz0NE-1kNwPfi4N0Y3CC02WDdWRwgtNnhXdha3UyAw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.240.184 waku 7b4a0261d173a8b25503831b5b450e9e5fcc5fb473a4194cddee553b5121ee9b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7b4a0261d173. Setting up logs at ./log/docker/node3_2024-10-26_03-05-14__0c062c08-c231-43a6-9a61-8c79d4ebcda2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 16283
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16283/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QLcR_adwrULHU5rLb8NvX_XYru9fumTpo2yqGRBKEvzKEt2LNpoxiNwytdcdjuOqaCzrzfBSgoD3yjYcCaf0IgyGAZLGyRgmgmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQKX-w2kJiKF6gOibB1kt0utoxVE9Q4e3MZJJI3zgk2EWoN0Y3CCP5yDdWRwgj-ehXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/16284/p2p/16Uiu2HAm5ewaK6eYAD7XriGTw1WrUMGa7fEEbSmPuhRkV1qPepMF","/ip4/127.0.0.1/tcp/16285/ws/p2p/16Uiu2HAm5ewaK6eYAD7XriGTw1WrUMGa7fEEbSmPuhRkV1qPepMF","/ip4/172.17.0.10/tcp/16284/p2p/16Uiu2HAm5ewaK6eYAD7XriGTw1WrUMGa7fEEbSmPuhRkV1qPepMF","/ip4/172.17.0.10/tcp/16285/ws/p2p/16Uiu2HAm5ewaK6eYAD7XriGTw1WrUMGa7fEEbSmPuhRkV1qPepMF"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37780/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54116/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37780/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmKp2KAjpKymZEnVfV9svdKt52Bs7Gek3YkRwhrEQMwvwC","multiaddrs":["/ip4/172.18.130.108/tcp/54117/p2p/16Uiu2HAmKp2KAjpKymZEnVfV9svdKt52Bs7Gek3YkRwhrEQMwvwC","/ip4/172.18.130.108/tcp/54118/ws/p2p/16Uiu2HAmKp2KAjpKymZEnVfV9svdKt52Bs7Gek3YkRwhrEQMwvwC"],"protocols":["/vac/waku/store/2.0.0-beta4","/vac/waku/relay/2.0.0","/vac/waku/store-query/3.0.0"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAm5ewaK6eYAD7XriGTw1WrUMGa7fEEbSmPuhRkV1qPepMF","multiaddrs":["/ip4/172.17.0.10/tcp/16284/p2p/16Uiu2HAm5ewaK6eYAD7XriGTw1WrUMGa7fEEbSmPuhRkV1qPepMF","/ip4/172.17.0.10/tcp/16285/ws/p2p/16Uiu2HAm5ewaK6eYAD7XriGTw1WrUMGa7fEEbSmPuhRkV1qPepMF"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54116/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.10/tcp/16284/p2p/16Uiu2HAm5ewaK6eYAD7XriGTw1WrUMGa7fEEbSmPuhRkV1qPepMF","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16283/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"e6868acd0ae058f6220f38c21f665fa899409ad2bf372adf9c6c694c5786fb89","status_code":200,"status_desc":"OK","messages":[{"message_hash":"KUJvBk22cm1xgoBoOx8V0MtveTkvnoqVP3BoCf2DdZU="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e189d22787c1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 491bb67c9cc4
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e189d22787c1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7b4a0261d173
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 491bb67c9cc4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.