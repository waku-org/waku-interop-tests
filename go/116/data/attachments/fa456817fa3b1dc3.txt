[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-06_03-20-58__87677f0a-df31-476d-a76b-604450642718
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_03-20-58__87677f0a-df31-476d-a76b-604450642718__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.76.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['21824', '21825', '21826', '21827', '21828']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 21824:21824 -p 21825:21825 -p 21826:21826 -p 21827:21827 -p 21828:21828 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21826 --rest-port=21824 --tcp-port=21825 --discv5-udp-port=21827 --rest-address=0.0.0.0 --nat=extip:172.18.76.100 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21828 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.76.100 waku cc34415e5a99b6242f818911a54499bb99d61c78d9aaa38346da458e4127ee22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID cc34415e5a99. Setting up logs at ./log/docker/publishing_node1_2024-05-06_03-20-58__87677f0a-df31-476d-a76b-604450642718__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 21824
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21824/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.100/tcp/21825/p2p/16Uiu2HAm3sTrUtt5gL9pYTBAzE2oaNvg8sHXdqWtwbB2ZtvYdvaJ","/ip4/172.18.76.100/tcp/21826/ws/p2p/16Uiu2HAm3sTrUtt5gL9pYTBAzE2oaNvg8sHXdqWtwbB2ZtvYdvaJ"],"enrUri":"enr:-LO4QJ-2aZMs8OAM6za1BVm8cQH5JXqPE_jiipDtYMXn8knbWu3izNurT-1dWGn0sVe607pdRVzWfUq-ClySnJPOETABgmlkgnY0gmlwhKwSTGSKbXVsdGlhZGRyc4wACgSsEkxkBlVC3QOCcnOFAAABAACJc2VjcDI1NmsxoQJ9eOKtm3llzrA7-l1Xu7_aWtCJJTWrvV8sldPCf0zYb4N0Y3CCVUGDdWRwglVDhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_03-20-58__87677f0a-df31-476d-a76b-604450642718__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.218.93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['65405', '65406', '65407', '65408', '65409']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 65405:65405 -p 65406:65406 -p 65407:65407 -p 65408:65408 -p 65409:65409 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=65407 --rest-port=65405 --tcp-port=65406 --discv5-udp-port=65408 --rest-address=0.0.0.0 --nat=extip:172.18.218.93 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QJ-2aZMs8OAM6za1BVm8cQH5JXqPE_jiipDtYMXn8knbWu3izNurT-1dWGn0sVe607pdRVzWfUq-ClySnJPOETABgmlkgnY0gmlwhKwSTGSKbXVsdGlhZGRyc4wACgSsEkxkBlVC3QOCcnOFAAABAACJc2VjcDI1NmsxoQJ9eOKtm3llzrA7-l1Xu7_aWtCJJTWrvV8sldPCf0zYb4N0Y3CCVUGDdWRwglVDhXdha3UyAw --storenode=/ip4/172.18.76.100/tcp/21825/p2p/16Uiu2HAm3sTrUtt5gL9pYTBAzE2oaNvg8sHXdqWtwbB2ZtvYdvaJ --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.218.93 waku dd0cc55a2dc7cfdd5eb95add43e6e40c6d613d2d3717614a6cb889068e3ab123
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID dd0cc55a2dc7. Setting up logs at ./log/docker/store_node1_2024-05-06_03-20-58__87677f0a-df31-476d-a76b-604450642718__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 65405
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65405/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QMLYqDxRb1HahxY9qenYqx7aXlC16phO2jocGDHFF6CmEjYraH1nniN_MJZ2HOm92SGyEShUgNrDHwuUY8MpbGyGAY9L60GwgmlkgnY0gmlwhKwRAAKKbXVsdGlhZGRyc5gACgR_AAABBv9_3QMACgSsEQACBv9_3QOJc2VjcDI1NmsxoQO2dbihVDMf6gN6wjPsfIlispDTqOCYQQlh8eRt52y_yIN0Y3CC_36DdWRwgv-AhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/65406/p2p/16Uiu2HAmQwEfWqEUgnQd8fnnw1rUw2SoUgUnhCGnFxng9efjWHwd","/ip4/127.0.0.1/tcp/65407/ws/p2p/16Uiu2HAmQwEfWqEUgnQd8fnnw1rUw2SoUgUnhCGnFxng9efjWHwd","/ip4/172.17.0.2/tcp/65406/p2p/16Uiu2HAmQwEfWqEUgnQd8fnnw1rUw2SoUgUnhCGnFxng9efjWHwd","/ip4/172.17.0.2/tcp/65407/ws/p2p/16Uiu2HAmQwEfWqEUgnQd8fnnw1rUw2SoUgUnhCGnFxng9efjWHwd"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65405/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.76.100/tcp/21825/p2p/16Uiu2HAm3sTrUtt5gL9pYTBAzE2oaNvg8sHXdqWtwbB2ZtvYdvaJ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21824/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21824/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21824/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714965661224359168,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id cc34415e5a99
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id dd0cc55a2dc7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_03-20-58__87677f0a-df31-476d-a76b-604450642718__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_03-20-58__87677f0a-df31-476d-a76b-604450642718__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-06_03-21-03__895609e4-f0b4-4086-b1eb-4f78f1224eba
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_03-21-03__895609e4-f0b4-4086-b1eb-4f78f1224eba__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.190.241
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['47705', '47706', '47707', '47708', '47709']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 47705:47705 -p 47706:47706 -p 47707:47707 -p 47708:47708 -p 47709:47709 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47707 --rest-port=47705 --tcp-port=47706 --discv5-udp-port=47708 --rest-address=0.0.0.0 --nat=extip:172.18.190.241 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47709 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.190.241 waku b0956a02a65ec95d8597b099045eea04be7691bc43daaa18e4a3ce07b7572c75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b0956a02a65e. Setting up logs at ./log/docker/publishing_node1_2024-05-06_03-21-03__895609e4-f0b4-4086-b1eb-4f78f1224eba__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 47705
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47705/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.241/tcp/47706/p2p/16Uiu2HAm7nhjmFtWGET9v6xxvHRZnmy9FKEEycyoRv9GbD5ucYpc","/ip4/172.18.190.241/tcp/47707/ws/p2p/16Uiu2HAm7nhjmFtWGET9v6xxvHRZnmy9FKEEycyoRv9GbD5ucYpc"],"enrUri":"enr:-LO4QDuceKXwgLvFiS9mrx2EWlkWHEkNLw0-I3uPWsggpR3OAnOHup59vTkxH_Qgx62XJGK6qAOjIYo0Yd7K_sNnvC8BgmlkgnY0gmlwhKwSvvGKbXVsdGlhZGRyc4wACgSsEr7xBrpb3QOCcnOFAAABAACJc2VjcDI1NmsxoQK3r22R5XU7w7jjLSBjyZXSawO2xBdme4Wjx2WwDyvWXYN0Y3CCulqDdWRwgrpchXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_03-21-03__895609e4-f0b4-4086-b1eb-4f78f1224eba__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.54.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['27884', '27885', '27886', '27887', '27888']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 27884:27884 -p 27885:27885 -p 27886:27886 -p 27887:27887 -p 27888:27888 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=27886 --rest-port=27884 --tcp-port=27885 --discv5-udp-port=27887 --rest-address=0.0.0.0 --nat=extip:172.18.54.215 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QDuceKXwgLvFiS9mrx2EWlkWHEkNLw0-I3uPWsggpR3OAnOHup59vTkxH_Qgx62XJGK6qAOjIYo0Yd7K_sNnvC8BgmlkgnY0gmlwhKwSvvGKbXVsdGlhZGRyc4wACgSsEr7xBrpb3QOCcnOFAAABAACJc2VjcDI1NmsxoQK3r22R5XU7w7jjLSBjyZXSawO2xBdme4Wjx2WwDyvWXYN0Y3CCulqDdWRwgrpchXdha3UyAw --storenode=/ip4/172.18.190.241/tcp/47706/p2p/16Uiu2HAm7nhjmFtWGET9v6xxvHRZnmy9FKEEycyoRv9GbD5ucYpc --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.54.215 waku f87ea0ccf6996d8a82005c1adc1ad56ad5bedf8c206a31a1bc6e10b4d2678ece
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f87ea0ccf699. Setting up logs at ./log/docker/store_node1_2024-05-06_03-21-03__895609e4-f0b4-4086-b1eb-4f78f1224eba__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 27884
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27884/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QD-ebgtcD3XGem9Vh3zXpEn7tAOb1SfXjgJp0J4Qlq4bQYyL1lW4SBEN_bkSy8HnP8DUugCyikIRdFqXII-YQ5WGAY9L61j-gmlkgnY0gmlwhKwRAASKbXVsdGlhZGRyc5gACgR_AAABBmzu3QMACgSsEQAEBmzu3QOJc2VjcDI1NmsxoQIIMC-6Heug9UKPwsNdU82PEjsSoY49R2b3tNNuQ2EwKoN0Y3CCbO2DdWRwgmzvhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/27885/p2p/16Uiu2HAkuydriG6BpXUfjmd8eyHi3MJQRqzVnzcdx5ESdHuaPjKo","/ip4/127.0.0.1/tcp/27886/ws/p2p/16Uiu2HAkuydriG6BpXUfjmd8eyHi3MJQRqzVnzcdx5ESdHuaPjKo","/ip4/172.17.0.4/tcp/27885/p2p/16Uiu2HAkuydriG6BpXUfjmd8eyHi3MJQRqzVnzcdx5ESdHuaPjKo","/ip4/172.17.0.4/tcp/27886/ws/p2p/16Uiu2HAkuydriG6BpXUfjmd8eyHi3MJQRqzVnzcdx5ESdHuaPjKo"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27884/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.190.241/tcp/47706/p2p/16Uiu2HAm7nhjmFtWGET9v6xxvHRZnmy9FKEEycyoRv9GbD5ucYpc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47705/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47705/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47705/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714965667180705536,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id b0956a02a65e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id f87ea0ccf699
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_03-21-03__895609e4-f0b4-4086-b1eb-4f78f1224eba__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_03-21-03__895609e4-f0b4-4086-b1eb-4f78f1224eba__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-06_03-21-09__f130a8d9-20c9-4da7-89a1-b8336d72389d
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_03-21-09__f130a8d9-20c9-4da7-89a1-b8336d72389d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.211.120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18241', '18242', '18243', '18244', '18245']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18241:18241 -p 18242:18242 -p 18243:18243 -p 18244:18244 -p 18245:18245 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18243 --rest-port=18241 --tcp-port=18242 --discv5-udp-port=18244 --rest-address=0.0.0.0 --nat=extip:172.18.211.120 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18245 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.211.120 waku 643726e43288afce7d19eb0421914998126741e6f73e48970fcfed72a364b47e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 643726e43288. Setting up logs at ./log/docker/publishing_node1_2024-05-06_03-21-09__f130a8d9-20c9-4da7-89a1-b8336d72389d__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 18241
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18241/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.120/tcp/18242/p2p/16Uiu2HAmFjZXQVsPrLg6jqSJQ9tdRqQ1xPE1HnhHHUMrNoCgZP3r","/ip4/172.18.211.120/tcp/18243/ws/p2p/16Uiu2HAmFjZXQVsPrLg6jqSJQ9tdRqQ1xPE1HnhHHUMrNoCgZP3r"],"enrUri":"enr:-LO4QHuBoghmG-RQRNVl-g_fYm-xfySaEg8jiHvVIYza4ItrVc25qGC41cM2O6_VC3mst6Geb3hK1kpTzgPlwtLkUNcBgmlkgnY0gmlwhKwS03iKbXVsdGlhZGRyc4wACgSsEtN4BkdD3QOCcnOFAAABAACJc2VjcDI1NmsxoQMtvuT6arJS3p7dlqNNUD7gALxPF98uY95J2YJdVwNTDYN0Y3CCR0KDdWRwgkdEhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_03-21-09__f130a8d9-20c9-4da7-89a1-b8336d72389d__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.85.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18973', '18974', '18975', '18976', '18977']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18973:18973 -p 18974:18974 -p 18975:18975 -p 18976:18976 -p 18977:18977 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=18975 --rest-port=18973 --tcp-port=18974 --discv5-udp-port=18976 --rest-address=0.0.0.0 --nat=extip:172.18.85.144 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QHuBoghmG-RQRNVl-g_fYm-xfySaEg8jiHvVIYza4ItrVc25qGC41cM2O6_VC3mst6Geb3hK1kpTzgPlwtLkUNcBgmlkgnY0gmlwhKwS03iKbXVsdGlhZGRyc4wACgSsEtN4BkdD3QOCcnOFAAABAACJc2VjcDI1NmsxoQMtvuT6arJS3p7dlqNNUD7gALxPF98uY95J2YJdVwNTDYN0Y3CCR0KDdWRwgkdEhXdha3UyAw --storenode=/ip4/172.18.211.120/tcp/18242/p2p/16Uiu2HAmFjZXQVsPrLg6jqSJQ9tdRqQ1xPE1HnhHHUMrNoCgZP3r --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.85.144 waku 09a2310cdc1b569666a5d586119b67134d816c43b452db831480cf270cc3457a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 09a2310cdc1b. Setting up logs at ./log/docker/store_node1_2024-05-06_03-21-09__f130a8d9-20c9-4da7-89a1-b8336d72389d__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 18973
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18973/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QDil3V_EffeGCpfZwQ2J-N5Vl3Q8AiFOCJMLnj7QvMWISRXGbA7MPj2mtfK0Jq6Z1dJ8slgeYbHCCx2TEAAKwnqGAY9L63DQgmlkgnY0gmlwhKwRAAiKbXVsdGlhZGRyc5gACgR_AAABBkof3QMACgSsEQAIBkof3QOJc2VjcDI1NmsxoQJpy7FNRZXqWOUYYlB598ZGkStHDfrVoBLdUwmc_fgA_4N0Y3CCSh6DdWRwgkoghXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/18974/p2p/16Uiu2HAm2YewBfWGZ3v1EeC8zN1fr9R2vDZ8xyGtsfKmPQ2wWodQ","/ip4/127.0.0.1/tcp/18975/ws/p2p/16Uiu2HAm2YewBfWGZ3v1EeC8zN1fr9R2vDZ8xyGtsfKmPQ2wWodQ","/ip4/172.17.0.8/tcp/18974/p2p/16Uiu2HAm2YewBfWGZ3v1EeC8zN1fr9R2vDZ8xyGtsfKmPQ2wWodQ","/ip4/172.17.0.8/tcp/18975/ws/p2p/16Uiu2HAm2YewBfWGZ3v1EeC8zN1fr9R2vDZ8xyGtsfKmPQ2wWodQ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18973/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.211.120/tcp/18242/p2p/16Uiu2HAmFjZXQVsPrLg6jqSJQ9tdRqQ1xPE1HnhHHUMrNoCgZP3r", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18241/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18241/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18241/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714965673346186752,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 643726e43288
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 09a2310cdc1b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_03-21-09__f130a8d9-20c9-4da7-89a1-b8336d72389d__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_03-21-09__f130a8d9-20c9-4da7-89a1-b8336d72389d__harbor.status.im_wakuorg_nwaku:latest.log