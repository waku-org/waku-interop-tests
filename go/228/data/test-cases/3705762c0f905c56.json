{"uid":"3705762c0f905c56","name":"test_store_lightpushed_message","fullName":"tests.store.test_running_nodes.TestRunningNodes#test_store_lightpushed_message","historyId":"964395f73b95c28c749b3e67dfff9ab1","time":{"start":1722655603727,"stop":1722655607430,"duration":3703},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64044/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x53e374f6bcff1731f2a2313a7df6a85288f65a3ea1b6c1ddf7086d94da339e62'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64044/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/store/test_running_nodes.py:66: in test_store_lightpushed_message\n    self.publish_message(via=\"lightpush\", sender=self.store_node1)\nsrc/steps/store.py:133: in publish_message\n    sender.send_light_push_message(payload)\nsrc/node/waku_node.py:338: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64044/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x53e374f6bcff1731f2a2313a7df6a85288f65a3ea1b6c1ddf7086d94da339e62'","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1722654628543,"stop":1722654628543,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1722655603726,"stop":1722655603726,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1722655603726,"stop":1722655603726,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1722655603726,"stop":1722655603727,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1722655603727,"stop":1722655603727,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1722655603727,"stop":1722655603727,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"store_setup","time":{"start":1722655603727,"stop":1722655603727,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64044/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x53e374f6bcff1731f2a2313a7df6a85288f65a3ea1b6c1ddf7086d94da339e62'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64044/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/store/test_running_nodes.py:66: in test_store_lightpushed_message\n    self.publish_message(via=\"lightpush\", sender=self.store_node1)\nsrc/steps/store.py:133: in publish_message\n    sender.send_light_push_message(payload)\nsrc/node/waku_node.py:338: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64044/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x53e374f6bcff1731f2a2313a7df6a85288f65a3ea1b6c1ddf7086d94da339e62'","steps":[{"name":"setup_first_publishing_node","time":{"start":1722655603728,"stop":1722655605890,"duration":2162},"status":"passed","steps":[{"name":"start_publishing_node","time":{"start":1722655603728,"stop":1722655605889,"duration":2161},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1722655605889,"stop":1722655605889,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.store.test_running_nodes.TestRunningNodes object at 0x7f3bde1dd370>, <src.node.waku_node.WakuNode object at 0x7f3bdde1ef90>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"store","value":"'true'"},{"name":"relay","value":"'true'"},{"name":"nodekey","value":"'30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68'"},{"name":"lightpush","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"store","value":"'true'"},{"name":"relay","value":"'true'"},{"name":"lightpush","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_store_node","time":{"start":1722655605890,"stop":1722655607418,"duration":1528},"status":"passed","steps":[{"name":"setup_store_node","time":{"start":1722655605890,"stop":1722655607418,"duration":1528},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1722655607415,"stop":1722655607417,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.store.test_running_nodes.TestRunningNodes object at 0x7f3bde1dd370>, <src.node.waku_node.WakuNode object at 0x7f3bdde30bf0>, ['/ip4/172.18.160.200/tcp/23589/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/go-waku:latest'"},{"name":"node_index","value":"1"},{"name":"store","value":"'false'"},{"name":"relay","value":"'false'"},{"name":"lightpush","value":"'true'"},{"name":"lightpushnode","value":"'/ip4/172.18.160.200/tcp/23589/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"store","value":"'false'"},{"name":"relay","value":"'false'"},{"name":"lightpush","value":"'true'"},{"name":"lightpushnode","value":"'/ip4/172.18.160.200/tcp/23589/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_to_pubsub_topics_via_relay","time":{"start":1722655607418,"stop":1722655607421,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"None"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1722655607421,"stop":1722655607429,"duration":8},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64044/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x53e374f6bcff1731f2a2313a7df6a85288f65a3ea1b6c1ddf7086d94da339e62'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/store.py\", line 133, in publish_message\n    sender.send_light_push_message(payload)\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 338, in send_light_push_message\n    return self._api.send_light_push_message(payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 57, in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_message","time":{"start":1722655607421,"stop":1722655607421,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"create_payload","time":{"start":1722655607421,"stop":1722655607421,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/3/0'"},{"name":"message","value":"{'payload': 'U3RvcmUgd29ya3MhIQ==', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1722655607421306624}"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"via","value":"'lightpush'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"None"},{"name":"message_propagation_delay","value":"0.2"},{"name":"sender","value":"<src.node.waku_node.WakuNode object at 0x7f3bdde30bf0>"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"5c0c638952853209","name":"log","source":"5c0c638952853209.txt","type":"text/plain","size":31274}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1722655607475,"stop":1722655607480,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1722655607481,"stop":1722655610115,"duration":2634},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1722655610116,"stop":1722655610120,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"9ed4598ef1bed8d7","name":"store_node1_2024-08-03_03-26-43__b98b6303-3089-4466-abe1-43830ffed163__wakuorg_go-waku:latest.log","source":"9ed4598ef1bed8d7.txt","type":"text/plain","size":56977},{"uid":"1b3c71e0d1f91997","name":"publishing_node1_2024-08-03_03-26-43__b98b6303-3089-4466-abe1-43830ffed163__wakuorg_nwaku:latest.log","source":"1b3c71e0d1f91997.txt","type":"text/plain","size":118016}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1722655642525,"stop":1722655642525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.store"},{"name":"suite","value":"test_running_nodes"},{"name":"subSuite","value":"TestRunningNodes"},{"name":"host","value":"fv-az1393-108"},{"name":"thread","value":"2163-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.store.test_running_nodes"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"d3f6abaac5b33a20","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:51518/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x3747e9784b44af6697b24eee8ce58e6f33188c39d6f7a5e9c5528d37b3d72397'","time":{"start":1722655596723,"stop":1722655600406,"duration":3683}},{"uid":"f88f685de272ebb6","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:27384/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x4b832025e889259a16a7aec594a02ad79ed8b35fe0a2337a0ff324244b95b47e'","time":{"start":1722655588817,"stop":1722655592179,"duration":3362}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":21,"skipped":0,"passed":112,"unknown":0,"total":133},"items":[{"uid":"6afe4dc28c3cf24d","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/227//#testresult/6afe4dc28c3cf24d","status":"passed","time":{"start":1722569166384,"stop":1722569169714,"duration":3330}},{"uid":"964f22fd7838b6e0","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/226//#testresult/964f22fd7838b6e0","status":"passed","time":{"start":1722482745588,"stop":1722482749044,"duration":3456}},{"uid":"137c17c7ba3471d5","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/225//#testresult/137c17c7ba3471d5","status":"passed","time":{"start":1722396309458,"stop":1722396313104,"duration":3646}},{"uid":"1b0b5bd66d5906ac","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/224//#testresult/1b0b5bd66d5906ac","status":"passed","time":{"start":1722309999729,"stop":1722310003337,"duration":3608}},{"uid":"b58666c67770c0db","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/223//#testresult/b58666c67770c0db","status":"passed","time":{"start":1722252281437,"stop":1722252285204,"duration":3767}},{"uid":"83f3275a38b77ba4","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/221//#testresult/83f3275a38b77ba4","status":"passed","time":{"start":1722137069771,"stop":1722137073140,"duration":3369}},{"uid":"31a195f1f0f5ebf8","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/220//#testresult/31a195f1f0f5ebf8","status":"passed","time":{"start":1722050808440,"stop":1722050811552,"duration":3112}},{"uid":"e603a5c81a7de17f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/219//#testresult/e603a5c81a7de17f","status":"passed","time":{"start":1721964337619,"stop":1721964350761,"duration":13142}},{"uid":"575322e4c4bc49ee","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/218//#testresult/575322e4c4bc49ee","status":"passed","time":{"start":1721877868646,"stop":1721877871788,"duration":3142}},{"uid":"6f7ab6f205eefc2f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/217//#testresult/6f7ab6f205eefc2f","status":"passed","time":{"start":1721791540809,"stop":1721791544133,"duration":3324}},{"uid":"b94e78cdb9da1beb","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/216//#testresult/b94e78cdb9da1beb","status":"passed","time":{"start":1721705101666,"stop":1721705105550,"duration":3884}},{"uid":"d90743bb903c28bb","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/215//#testresult/d90743bb903c28bb","status":"passed","time":{"start":1721633707641,"stop":1721633711670,"duration":4029}},{"uid":"9c9fe5086f54ce02","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/214//#testresult/9c9fe5086f54ce02","status":"passed","time":{"start":1721618739504,"stop":1721618742854,"duration":3350}},{"uid":"d1aef5bd9cd9f1e1","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/213//#testresult/d1aef5bd9cd9f1e1","status":"passed","time":{"start":1721532298223,"stop":1721532301703,"duration":3480}},{"uid":"4060035e322f0cfc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/212//#testresult/4060035e322f0cfc","status":"passed","time":{"start":1721445913494,"stop":1721445926365,"duration":12871}},{"uid":"ab32124b28e54965","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/211//#testresult/ab32124b28e54965","status":"passed","time":{"start":1721359475008,"stop":1721359479032,"duration":4024}},{"uid":"e55f23b2b05d7fee","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/210//#testresult/e55f23b2b05d7fee","status":"passed","time":{"start":1721290787331,"stop":1721290790504,"duration":3173}},{"uid":"e0d7da75215e1f1c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/209//#testresult/e0d7da75215e1f1c","status":"passed","time":{"start":1721273085359,"stop":1721273097914,"duration":12555}},{"uid":"2658457398e3ffb6","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/208//#testresult/2658457398e3ffb6","status":"passed","time":{"start":1721186705178,"stop":1721186708310,"duration":3132}},{"uid":"948ee713b3d868ed","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/207//#testresult/948ee713b3d868ed","status":"passed","time":{"start":1721113058968,"stop":1721113062027,"duration":3059}}]},"tags":[]},"source":"3705762c0f905c56.json","parameterValues":[]}