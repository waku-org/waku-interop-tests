[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_multiple_pubsub_topics with id: 2024-08-03_03-16-51__0b147e42-0bac-4cb8-a2fb-7fc380a6acea
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-03_03-16-51__0b147e42-0bac-4cb8-a2fb-7fc380a6acea__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.156.154
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['4257', '4258', '4259', '4260', '4261']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 4257:4257 -p 4258:4258 -p 4259:4259 -p 4260:4260 -p 4261:4261 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4259 --rest-port=4257 --tcp-port=4258 --discv5-udp-port=4260 --rest-address=0.0.0.0 --nat=extip:172.18.156.154 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4261 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.156.154 waku b4f07c947a80616a087031a15e8e7748596c881aef18fc48070e46d83f5ef602
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b4f07c947a80. Setting up logs at ./log/docker/receiving_node1_2024-08-03_03-16-51__0b147e42-0bac-4cb8-a2fb-7fc380a6acea__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 4257
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4257/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4257/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.154/tcp/4258/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.156.154/tcp/4259/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QGxNZ7TDb1x1g1qc0HSIasd-XJ3Nwzb7r998djZjjzflYkcpNIzKyF0PZ8sHne-R7YLeRLXkZq999qE4njLqYX4BgmlkgnY0gmlwhKwSnJqKbXVsdGlhZGRyc4wACgSsEpyaBhCj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCEKKDdWRwghCkhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-03_03-16-51__0b147e42-0bac-4cb8-a2fb-7fc380a6acea__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.224.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['62780', '62781', '62782', '62783', '62784']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 62780:62780 -p 62781:62781 -p 62782:62782 -p 62783:62783 -p 62784:62784 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=62782 --rest-port=62780 --tcp-port=62781 --discv5-udp-port=62783 --rest-address=0.0.0.0 --nat=extip:172.18.224.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QGxNZ7TDb1x1g1qc0HSIasd-XJ3Nwzb7r998djZjjzflYkcpNIzKyF0PZ8sHne-R7YLeRLXkZq999qE4njLqYX4BgmlkgnY0gmlwhKwSnJqKbXVsdGlhZGRyc4wACgSsEpyaBhCj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCEKKDdWRwghCkhXdha3UyCQ --lightpushnode=/ip4/172.18.156.154/tcp/4258/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.224.3 waku 1beb5ad5e68859da77218227a8ba8a9c2c560bafdae20fb9149cd056a280a2ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1beb5ad5e688. Setting up logs at ./log/docker/lightpush_node1_2024-08-03_03-16-51__0b147e42-0bac-4cb8-a2fb-7fc380a6acea__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/go-waku:latest. REST: 62780
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62780/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QEALXv15ee3TRbEM_DSoOsUHMpUL56c75gxsFO2SMV-gT8Wrz0ynhluG6-HxHzxlmll88tP37JN1xulNbuKeWr6GAZEWPXvigmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQNeVwrKt8RSMisAEySd36pGKyoUr8ZRs6q1LhDdgYCArYN0Y3CC9T2DdWRwgvU_hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/62781/p2p/16Uiu2HAmK1FevoZL27cVa1zsXmME32SX1RZ8EkcxNikZJiCyr6Yk","/ip4/127.0.0.1/tcp/62782/ws/p2p/16Uiu2HAmK1FevoZL27cVa1zsXmME32SX1RZ8EkcxNikZJiCyr6Yk","/ip4/172.17.0.9/tcp/62781/p2p/16Uiu2HAmK1FevoZL27cVa1zsXmME32SX1RZ8EkcxNikZJiCyr6Yk","/ip4/172.17.0.9/tcp/62782/ws/p2p/16Uiu2HAmK1FevoZL27cVa1zsXmME32SX1RZ8EkcxNikZJiCyr6Yk"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62780/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.156.154/tcp/4258/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4257/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4257/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/0
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62780/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655015006935808}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x12051cbfdb4d9531a5cd962ca1f9cf14ec457e04f12d7917c1b8fe08282a34b6'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/0 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x12051cbfdb4d9531a5cd962ca1f9cf14ec457e04f12d7917c1b8fe08282a34b6'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/1
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62780/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655015058363392}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x3d84159cde736094257c84ccf509b04e91a2186396b2f680a02634c0d4653f9c'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/1 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x3d84159cde736094257c84ccf509b04e91a2186396b2f680a02634c0d4653f9c'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/9
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62780/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/9", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655015104987648}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xccf8d4b4dd868549e7212fac0311521ec122c3daae986c6e70759c1b67a0ebff'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/9 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xccf8d4b4dd868549e7212fac0311521ec122c3daae986c6e70759c1b67a0ebff'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/25
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62780/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/25", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655023193515520}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xeed21636daa6a6673a8567da43e034bde6b56987efa1ef00405d56aa44b008d7'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/25 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xeed21636daa6a6673a8567da43e034bde6b56987efa1ef00405d56aa44b008d7'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/1000
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62780/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1000", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655023244812032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x71456a4015d421a31cb0998f13e53bf1e20a8c0a363202b04bc3e1c0dae0984e'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/1000 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62780/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x71456a4015d421a31cb0998f13e53bf1e20a8c0a363202b04bc3e1c0dae0984e'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id b4f07c947a80
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 1beb5ad5e688
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-03_03-16-51__0b147e42-0bac-4cb8-a2fb-7fc380a6acea__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-03_03-16-51__0b147e42-0bac-4cb8-a2fb-7fc380a6acea__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_multiple_pubsub_topics with id: 2024-08-03_03-17-07__150e1e1a-1b76-4cc2-8b84-74e53d71cb2b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-03_03-17-07__150e1e1a-1b76-4cc2-8b84-74e53d71cb2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.73.148
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39326', '39327', '39328', '39329', '39330']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39326:39326 -p 39327:39327 -p 39328:39328 -p 39329:39329 -p 39330:39330 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39328 --rest-port=39326 --tcp-port=39327 --discv5-udp-port=39329 --rest-address=0.0.0.0 --nat=extip:172.18.73.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39330 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.73.148 waku 5d2a52319009636a9b6f3f3947755300253b6e7ba4523d71596c77b606077cc7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5d2a52319009. Setting up logs at ./log/docker/receiving_node1_2024-08-03_03-17-07__150e1e1a-1b76-4cc2-8b84-74e53d71cb2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 39326
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39326/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39326/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.73.148/tcp/39328/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QH9smqdM2ZWEZEDETpezBhWrFsKNdlqyH_eee6cgwG5fel91jwQdb19Jttys5hwk0dcZe9Hse5_ASYnu0PuJp1ABgmlkgnY0gmlwhKwSSZSKbXVsdGlhZGRyc4wACgSsEkmUBpmg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCmZ-DdWRwgpmhhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-03_03-17-07__150e1e1a-1b76-4cc2-8b84-74e53d71cb2b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.235.207
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['47952', '47953', '47954', '47955', '47956']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 47952:47952 -p 47953:47953 -p 47954:47954 -p 47955:47955 -p 47956:47956 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=47954 --rest-port=47952 --tcp-port=47953 --discv5-udp-port=47955 --rest-address=0.0.0.0 --nat=extip:172.18.235.207 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QH9smqdM2ZWEZEDETpezBhWrFsKNdlqyH_eee6cgwG5fel91jwQdb19Jttys5hwk0dcZe9Hse5_ASYnu0PuJp1ABgmlkgnY0gmlwhKwSSZSKbXVsdGlhZGRyc4wACgSsEkmUBpmg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCmZ-DdWRwgpmhhXdha3UyCQ --lightpushnode=/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.235.207 waku e5a4d14bbfbb973b1d8108c426bae4b686f32a01d44983c468a5a6e91ba5cd8e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e5a4d14bbfbb. Setting up logs at ./log/docker/lightpush_node1_2024-08-03_03-17-07__150e1e1a-1b76-4cc2-8b84-74e53d71cb2b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/go-waku:latest. REST: 47952
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47952/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHcmDkk_xGh1_BmaRgComKMuhzdT7RyYNi7zPzgcB_SOXmCjOy5yM-BCBXLdJHjW04E26VQiLZmPJGRS-qch6PSGAZEWPbq7gmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQOviQoFvQFbebeW5P5TEDu98YfvTAEFR-QxNp9U0Zw024N0Y3CCu1GDdWRwgrtThXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/47953/p2p/16Uiu2HAmQUCtuumpotSgxMiNTRRjnWMP9cXhvzP1y3tR8gSRED8n","/ip4/127.0.0.1/tcp/47954/ws/p2p/16Uiu2HAmQUCtuumpotSgxMiNTRRjnWMP9cXhvzP1y3tR8gSRED8n","/ip4/172.17.0.9/tcp/47953/p2p/16Uiu2HAmQUCtuumpotSgxMiNTRRjnWMP9cXhvzP1y3tR8gSRED8n","/ip4/172.17.0.9/tcp/47954/ws/p2p/16Uiu2HAmQUCtuumpotSgxMiNTRRjnWMP9cXhvzP1y3tR8gSRED8n"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:47952/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.148/tcp/39327/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39326/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39326/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/0
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655040182393344}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xe94b3f94850cf9ff487813c80819b283f13308323f83e204c58d431bde038f2f'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/0 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xe94b3f94850cf9ff487813c80819b283f13308323f83e204c58d431bde038f2f'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/1
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655040190015744}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x838acdd15892c6b66de173ece7eaa3650a18fe37769500e71f674e346dc1aa43'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/1 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x838acdd15892c6b66de173ece7eaa3650a18fe37769500e71f674e346dc1aa43'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/9
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/9", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655040196141056}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x20a41c46fc153fbc391cb52db79296a6c451c773b9a3a80e5e342ea8cc9d66bd'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/9 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x20a41c46fc153fbc391cb52db79296a6c451c773b9a3a80e5e342ea8cc9d66bd'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/25
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/25", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655044720468736}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x875a6c7cbd0b02aef0a1bb638ad0b82e622f55876781701188454ce0440fb9b4'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/25 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x875a6c7cbd0b02aef0a1bb638ad0b82e622f55876781701188454ce0440fb9b4'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/1000
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47952/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1000", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655044727621376}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xd476a7f3c87b2f2317e7593f8a6d0b8f6690cab3e4fa9558fa1d3dc5f95ab3ec'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/1000 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47952/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xd476a7f3c87b2f2317e7593f8a6d0b8f6690cab3e4fa9558fa1d3dc5f95ab3ec'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 5d2a52319009
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id e5a4d14bbfbb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-03_03-17-07__150e1e1a-1b76-4cc2-8b84-74e53d71cb2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-03_03-17-07__150e1e1a-1b76-4cc2-8b84-74e53d71cb2b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_multiple_pubsub_topics with id: 2024-08-03_03-17-29__4a8ef1fe-8b29-40c6-a5e2-1a5e1d0de51b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-03_03-17-29__4a8ef1fe-8b29-40c6-a5e2-1a5e1d0de51b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.43.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36163', '36164', '36165', '36166', '36167']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36163:36163 -p 36164:36164 -p 36165:36165 -p 36166:36166 -p 36167:36167 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36165 --rest-port=36163 --tcp-port=36164 --discv5-udp-port=36166 --rest-address=0.0.0.0 --nat=extip:172.18.43.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36167 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.181.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18195', '18196', '18197', '18198', '18199']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18195:18195 -p 18196:18196 -p 18197:18197 -p 18198:18198 -p 18199:18199 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18197 --rest-port=18195 --tcp-port=18196 --discv5-udp-port=18198 --rest-address=0.0.0.0 --nat=extip:172.18.181.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18199 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.181.6 waku e791ed684086a4a2c0105aa489933e211fef27c68293a0304bd5cb470c9def13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e791ed684086. Setting up logs at ./log/docker/receiving_node1_2024-08-03_03-17-29__4a8ef1fe-8b29-40c6-a5e2-1a5e1d0de51b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 18195
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18195/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18195/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.6/tcp/18196/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.181.6/tcp/18197/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QOOQWYfQd0HER_vjF9cdcTydCOZ5MxuOr67MtXazBegEQNW6ejnyHvnSLjiuF4CDK0BjqvL-am88qVO6oGLiq-ABgmlkgnY0gmlwhKwStQaKbXVsdGlhZGRyc4wACgSsErUGBkcV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCRxSDdWRwgkcWhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-03_03-17-29__4a8ef1fe-8b29-40c6-a5e2-1a5e1d0de51b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.3.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['40846', '40847', '40848', '40849', '40850']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 40846:40846 -p 40847:40847 -p 40848:40848 -p 40849:40849 -p 40850:40850 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40848 --rest-port=40846 --tcp-port=40847 --discv5-udp-port=40849 --rest-address=0.0.0.0 --nat=extip:172.18.3.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QOOQWYfQd0HER_vjF9cdcTydCOZ5MxuOr67MtXazBegEQNW6ejnyHvnSLjiuF4CDK0BjqvL-am88qVO6oGLiq-ABgmlkgnY0gmlwhKwStQaKbXVsdGlhZGRyc4wACgSsErUGBkcV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCRxSDdWRwgkcWhXdha3UyCQ --lightpushnode=/ip4/172.18.181.6/tcp/18196/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.3.218 waku 282c2f98e1fad2ba50edd23b282551f0c9b6f3d05ef432e8fd7e3d770013fc07
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 282c2f98e1fa. Setting up logs at ./log/docker/lightpush_node1_2024-08-03_03-17-29__4a8ef1fe-8b29-40c6-a5e2-1a5e1d0de51b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/go-waku:latest. REST: 40846
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40846/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QG89puKCckI_t_X1eBwxkivRQQnsnRojdvrPksd-4yrddl0yME-0X5fkhvDkuXHVq4xA2bVlTR-pn3GiRBghMTyGAZEWPhNKgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQOlhzZ8nUT8RV_E3__6D6BOcHsP8E9a9eMadVxsbkJ8MoN0Y3CCn4-DdWRwgp-RhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/40847/p2p/16Uiu2HAmPo9CmRrKXsc4GuBDuptUg9STRTvFzK6ojiyZ8YGoyCVF","/ip4/127.0.0.1/tcp/40848/ws/p2p/16Uiu2HAmPo9CmRrKXsc4GuBDuptUg9STRTvFzK6ojiyZ8YGoyCVF","/ip4/172.17.0.2/tcp/40847/p2p/16Uiu2HAmPo9CmRrKXsc4GuBDuptUg9STRTvFzK6ojiyZ8YGoyCVF","/ip4/172.17.0.2/tcp/40848/ws/p2p/16Uiu2HAmPo9CmRrKXsc4GuBDuptUg9STRTvFzK6ojiyZ8YGoyCVF"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40846/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.181.6/tcp/18196/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18195/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18195/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/0
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40846/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655053739364096}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x5e126f54ef25c28d262d2119cd5defbf723cb95c4bc4cf8623a79f53c4d5c766'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/0 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x5e126f54ef25c28d262d2119cd5defbf723cb95c4bc4cf8623a79f53c4d5c766'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/1
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40846/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655053745776384}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x8fbbce07018c631422507fdbf144048a58c9d1f67ba93b3055e3d03b32e2bf61'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/1 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x8fbbce07018c631422507fdbf144048a58c9d1f67ba93b3055e3d03b32e2bf61'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/9
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40846/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/9", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655053751450112}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x7f832f106c5b98969b0c6fe0f1e33a41cb367db908d414458c2868d5fbb5b2a9'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/9 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x7f832f106c5b98969b0c6fe0f1e33a41cb367db908d414458c2868d5fbb5b2a9'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/25
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40846/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/25", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655055568265984}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x05108fb07eb103edc605bc5fb8a4a89515b4d99e436e73e1473cff586b7a98f4'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/25 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x05108fb07eb103edc605bc5fb8a4a89515b4d99e436e73e1473cff586b7a98f4'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:113 Running test with pubsub topic /waku/2/rs/3/1000
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40846/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1000", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722655055574302976}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xca0b9a5a03be9882dd18e94ce07961d0f4bf91ace869c083e0c3754bb36968eb'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:117 PubusubTopic /waku/2/rs/3/1000 failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40846/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xca0b9a5a03be9882dd18e94ce07961d0f4bf91ace869c083e0c3754bb36968eb'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id e791ed684086
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 282c2f98e1fa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-03_03-17-29__4a8ef1fe-8b29-40c6-a5e2-1a5e1d0de51b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-03_03-17-29__4a8ef1fe-8b29-40c6-a5e2-1a5e1d0de51b__wakuorg_go-waku:latest.log