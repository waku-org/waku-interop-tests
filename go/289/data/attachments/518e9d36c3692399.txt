[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-09-24_03-16-47__ebcf14a9-e6a3-4ee5-a3b2-86b913548bd1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-24_03-16-47__ebcf14a9-e6a3-4ee5-a3b2-86b913548bd1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-24_03-16-47__ebcf14a9-e6a3-4ee5-a3b2-86b913548bd1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-24_03-16-47__ebcf14a9-e6a3-4ee5-a3b2-86b913548bd1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.85.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12330', '12331', '12332', '12333', '12334']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12330:12330 -p 12331:12331 -p 12332:12332 -p 12333:12333 -p 12334:12334 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=12332 --rest-port=12330 --tcp-port=12331 --discv5-udp-port=12333 --rest-address=0.0.0.0 --nat=extip:172.18.85.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdce5e0d67e891c0e3bda34b83baa528ffb5b44e60ffcbe788fdd83dda67fe2c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.85.221 waku 7ce806c327c4729cff65423239f8cfc1880c7085eb363f1ff1f720e10ba98b26
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7ce806c327c4. Setting up logs at ./log/docker/node1_2024-09-24_03-16-47__ebcf14a9-e6a3-4ee5-a3b2-86b913548bd1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 12330
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12330/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QC3q2VXcZt1_uPgH4IlflAr88pGiyuO28Gjna9tDPHWrNWrtifqXCaF1swO-tokQnsQwP6BG7_27WgDm4y8VB7uGAZIiCCY3gmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQLmBfsv8DY_OZHUwh9Umv1kZsVQpxZjjPFrCnKsKLx8hoN0Y3CCMCuDdWRwgjAthXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/12331/p2p/16Uiu2HAmAub3HnjQvbUWi1dFTiLwYM5SmTwHCfv4jk9NVZhoayMP","/ip4/127.0.0.1/tcp/12332/ws/p2p/16Uiu2HAmAub3HnjQvbUWi1dFTiLwYM5SmTwHCfv4jk9NVZhoayMP","/ip4/172.17.0.5/tcp/12331/p2p/16Uiu2HAmAub3HnjQvbUWi1dFTiLwYM5SmTwHCfv4jk9NVZhoayMP","/ip4/172.17.0.5/tcp/12332/ws/p2p/16Uiu2HAmAub3HnjQvbUWi1dFTiLwYM5SmTwHCfv4jk9NVZhoayMP"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.70.25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60232', '60233', '60234', '60235', '60236']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60232:60232 -p 60233:60233 -p 60234:60234 -p 60235:60235 -p 60236:60236 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60234 --rest-port=60232 --tcp-port=60233 --discv5-udp-port=60235 --rest-address=0.0.0.0 --nat=extip:172.18.70.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb1ebef20c1bd1c8a68f28ba6dd6fdfa1f50c9e2957a72f8df86ece2ef35e2b2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60236 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QC3q2VXcZt1_uPgH4IlflAr88pGiyuO28Gjna9tDPHWrNWrtifqXCaF1swO-tokQnsQwP6BG7_27WgDm4y8VB7uGAZIiCCY3gmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQLmBfsv8DY_OZHUwh9Umv1kZsVQpxZjjPFrCnKsKLx8hoN0Y3CCMCuDdWRwgjAthXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.70.25 waku 0eba9600d134bd1f3077658fd39517b8428180b8b368934b70f59ffd6ac215e9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0eba9600d134. Setting up logs at ./log/docker/node2_2024-09-24_03-16-47__ebcf14a9-e6a3-4ee5-a3b2-86b913548bd1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60232
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60232/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60232/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.25/tcp/60233/p2p/16Uiu2HAmBeDSVBi8PhYAWD613WKtyThTZzJFg7jgEzGvwPfwWqcK","/ip4/172.18.70.25/tcp/60234/ws/p2p/16Uiu2HAmBeDSVBi8PhYAWD613WKtyThTZzJFg7jgEzGvwPfwWqcK"],"enrUri":"enr:-LO4QI1Cb0JxzelY_yC0k7cMLAxDEMiEcuZcZI-OQf-5p8W1O2fMBHcqKgp-hohkI908fx4xc1tAdCPBNeCBP6tOC50BgmlkgnY0gmlwhKwSRhmKbXVsdGlhZGRyc4wACgSsEkYZButK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLw8YhgmwZ6ZedPD2hUVrtKVZ0GLv20NPG3dQ38HORD6IN0Y3CC60mDdWRwgutLhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.147.120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8370', '8371', '8372', '8373', '8374']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8370:8370 -p 8371:8371 -p 8372:8372 -p 8373:8373 -p 8374:8374 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=8372 --rest-port=8370 --tcp-port=8371 --discv5-udp-port=8373 --rest-address=0.0.0.0 --nat=extip:172.18.147.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1097f60aa5cd7852fc78a7dc5fcfa7179f5d0d5b6b569d5b82931cf4ffebeba4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.70.25/tcp/60233/p2p/16Uiu2HAmBeDSVBi8PhYAWD613WKtyThTZzJFg7jgEzGvwPfwWqcK --discv5-bootstrap-node=enr:-LO4QI1Cb0JxzelY_yC0k7cMLAxDEMiEcuZcZI-OQf-5p8W1O2fMBHcqKgp-hohkI908fx4xc1tAdCPBNeCBP6tOC50BgmlkgnY0gmlwhKwSRhmKbXVsdGlhZGRyc4wACgSsEkYZButK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLw8YhgmwZ6ZedPD2hUVrtKVZ0GLv20NPG3dQ38HORD6IN0Y3CC60mDdWRwgutLhXdha3UyAw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.147.120 waku 2097fc669d2b5b30f7fca613859c6c2a213f3ea70ab42b923527320fa61c6d00
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2097fc669d2b. Setting up logs at ./log/docker/node3_2024-09-24_03-16-47__ebcf14a9-e6a3-4ee5-a3b2-86b913548bd1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 8370
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8370/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QN8AJy7dSJdTpq6caNyStMw3n2T9D7MYioSLFosu9QxHeeIuh1bKpuh1FFC1WkIhECUivKYIUN8iZZ0oAJelGdKGAZIiCDNDgmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQPjUw4CPjcEskLjStoyvHf14_Q2CeqKl0VcvLuFAweWloN0Y3CCILODdWRwgiC1hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/8371/p2p/16Uiu2HAmTxNMNWFw9AzgMNyMqDiyw3TBJ828qo3SjjpiNvCiqbvV","/ip4/127.0.0.1/tcp/8372/ws/p2p/16Uiu2HAmTxNMNWFw9AzgMNyMqDiyw3TBJ828qo3SjjpiNvCiqbvV","/ip4/172.17.0.10/tcp/8371/p2p/16Uiu2HAmTxNMNWFw9AzgMNyMqDiyw3TBJ828qo3SjjpiNvCiqbvV","/ip4/172.17.0.10/tcp/8372/ws/p2p/16Uiu2HAmTxNMNWFw9AzgMNyMqDiyw3TBJ828qo3SjjpiNvCiqbvV"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12330/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60232/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12330/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmBeDSVBi8PhYAWD613WKtyThTZzJFg7jgEzGvwPfwWqcK","multiaddrs":["/ip4/172.18.70.25/tcp/60233/p2p/16Uiu2HAmBeDSVBi8PhYAWD613WKtyThTZzJFg7jgEzGvwPfwWqcK","/ip4/172.18.70.25/tcp/60234/ws/p2p/16Uiu2HAmBeDSVBi8PhYAWD613WKtyThTZzJFg7jgEzGvwPfwWqcK"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAmTxNMNWFw9AzgMNyMqDiyw3TBJ828qo3SjjpiNvCiqbvV","multiaddrs":["/ip4/172.17.0.10/tcp/8371/p2p/16Uiu2HAmTxNMNWFw9AzgMNyMqDiyw3TBJ828qo3SjjpiNvCiqbvV","/ip4/172.17.0.10/tcp/8372/ws/p2p/16Uiu2HAmTxNMNWFw9AzgMNyMqDiyw3TBJ828qo3SjjpiNvCiqbvV"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60232/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.10/tcp/8371/p2p/16Uiu2HAmTxNMNWFw9AzgMNyMqDiyw3TBJ828qo3SjjpiNvCiqbvV","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12330/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8370/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"7575a666d34ee4903b63562b0a53502fab3d233b0f3627255bdbc48b7cf6217a","status_code":200,"status_desc":"OK","messages":[{"message_hash":"XlcVStPfrLdkIGtiv266WvGsNXcRhRTDGKPucE2Mgaw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7ce806c327c4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0eba9600d134
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2097fc669d2b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.