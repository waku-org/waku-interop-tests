[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_lightpushing_node with id: 2024-09-24_03-17-29__e7f6040e-8ee2-4da4-936d-4f1af3a64354
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-24_03-17-29__e7f6040e-8ee2-4da4-936d-4f1af3a64354__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-24_03-17-29__e7f6040e-8ee2-4da4-936d-4f1af3a64354__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-24_03-17-29__e7f6040e-8ee2-4da4-936d-4f1af3a64354__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.215.104
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12554', '12555', '12556', '12557', '12558']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12554:12554 -p 12555:12555 -p 12556:12556 -p 12557:12557 -p 12558:12558 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=12556 --rest-port=12554 --tcp-port=12555 --discv5-udp-port=12557 --rest-address=0.0.0.0 --nat=extip:172.18.215.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1fdc35c355036abb8d9fdeabe6b7dffba8f04eabf7ebc3cc9f4d2606fecfcabc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.215.104 waku 08255180ae4007c5bada57d099eb1a625905373b7faf4e6554e9359fb6c8f239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 08255180ae40. Setting up logs at ./log/docker/node1_2024-09-24_03-17-29__e7f6040e-8ee2-4da4-936d-4f1af3a64354__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 12554
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12554/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QA7kenUJamhV2q3P7f3GOufjF_7lmS170VZ-cJt9f4DYEJ6nuzu7uygnmS1jlyXJwMXMONR9QBxExsr3Jf6ERu-GAZIiCLhhgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQKd_5xdHE36905Zj5a7_qKn0MCFlNP7-0FfBqGty87Zl4N0Y3CCMQuDdWRwgjENhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/12555/p2p/16Uiu2HAm64S3yHy2n9PYqHH7fUqwphBhMNoCEGSqwJd5yiikbu2n","/ip4/127.0.0.1/tcp/12556/ws/p2p/16Uiu2HAm64S3yHy2n9PYqHH7fUqwphBhMNoCEGSqwJd5yiikbu2n","/ip4/172.17.0.5/tcp/12555/p2p/16Uiu2HAm64S3yHy2n9PYqHH7fUqwphBhMNoCEGSqwJd5yiikbu2n","/ip4/172.17.0.5/tcp/12556/ws/p2p/16Uiu2HAm64S3yHy2n9PYqHH7fUqwphBhMNoCEGSqwJd5yiikbu2n"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.189.104
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1446', '1447', '1448', '1449', '1450']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1446:1446 -p 1447:1447 -p 1448:1448 -p 1449:1449 -p 1450:1450 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1448 --rest-port=1446 --tcp-port=1447 --discv5-udp-port=1449 --rest-address=0.0.0.0 --nat=extip:172.18.189.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=05ec3d40a38e0f9b5e2ac5dc1445abd8b40bdb1ed9744cbfc374033ff8ccc41a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1450 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-Ji4QA7kenUJamhV2q3P7f3GOufjF_7lmS170VZ-cJt9f4DYEJ6nuzu7uygnmS1jlyXJwMXMONR9QBxExsr3Jf6ERu-GAZIiCLhhgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQKd_5xdHE36905Zj5a7_qKn0MCFlNP7-0FfBqGty87Zl4N0Y3CCMQuDdWRwgjENhXdha3UyCQ --lightpushnode=/ip4/172.18.215.104/tcp/12555/p2p/16Uiu2HAm64S3yHy2n9PYqHH7fUqwphBhMNoCEGSqwJd5yiikbu2n
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.189.104 waku d085b46c5b7c0a1af6085fcd2059728ca46da30aa71fb89000f4b88bb865926b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d085b46c5b7c. Setting up logs at ./log/docker/node2_2024-09-24_03-17-29__e7f6040e-8ee2-4da4-936d-4f1af3a64354__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 1446
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1446/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1446/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.104/tcp/1447/p2p/16Uiu2HAmLvtqdxoPuqotJUoQbF9LxGCNfFq684VBadBLUZTbqdYi","/ip4/172.18.189.104/tcp/1448/ws/p2p/16Uiu2HAmLvtqdxoPuqotJUoQbF9LxGCNfFq684VBadBLUZTbqdYi"],"enrUri":"enr:-LO4QAJHEah-uSvVL_dmcoIAAjQW-nx9d9SF6YPfEf7LWA0uZsSLtKYIA9V4_5jtKLWFcPpd3gpTZZpgmvOdGLVQL1YBgmlkgnY0gmlwhKwSvWiKbXVsdGlhZGRyc4wACgSsEr1oBgWo3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN68I6JHlqs5PHEaCoG0KKiDPlUuCr4oImY43tOzUFIn4N0Y3CCBaeDdWRwggWphXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.173.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12381', '12382', '12383', '12384', '12385']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12381:12381 -p 12382:12382 -p 12383:12383 -p 12384:12384 -p 12385:12385 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=12383 --rest-port=12381 --tcp-port=12382 --discv5-udp-port=12384 --rest-address=0.0.0.0 --nat=extip:172.18.173.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8e86bea54b2efcf8c1b457f1bdd4ee0b7fa9b1c0c2dde3185ec44f109d211c3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QAJHEah-uSvVL_dmcoIAAjQW-nx9d9SF6YPfEf7LWA0uZsSLtKYIA9V4_5jtKLWFcPpd3gpTZZpgmvOdGLVQL1YBgmlkgnY0gmlwhKwSvWiKbXVsdGlhZGRyc4wACgSsEr1oBgWo3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN68I6JHlqs5PHEaCoG0KKiDPlUuCr4oImY43tOzUFIn4N0Y3CCBaeDdWRwggWphXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.173.10 waku 928bd01a8aee4d63e8ac54d8e09251184b9c5198c9ddcec6b248893efaa7d498
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 928bd01a8aee. Setting up logs at ./log/docker/node3_2024-09-24_03-17-29__e7f6040e-8ee2-4da4-936d-4f1af3a64354__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 12381
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12381/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBYFMvlK6rlIO5V77Xi-AyS60RCvcmg3kq39ojMersUiZSUAVUXu-dZCiIqMzR34Q72DdkaZPXG69zwErnS5eNiGAZIiCMV4gmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQO0bqy-H5H10CCNDm48tJLEZ9wCj524LFu0o8eEoIrN4YN0Y3CCMF6DdWRwgjBghXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/12382/p2p/16Uiu2HAmQoKcmieUgEjjSM8ygEbfkTDqfcDxaNxv2sZdxZ6vfHtt","/ip4/127.0.0.1/tcp/12383/ws/p2p/16Uiu2HAmQoKcmieUgEjjSM8ygEbfkTDqfcDxaNxv2sZdxZ6vfHtt","/ip4/172.17.0.10/tcp/12382/p2p/16Uiu2HAmQoKcmieUgEjjSM8ygEbfkTDqfcDxaNxv2sZdxZ6vfHtt","/ip4/172.17.0.10/tcp/12383/ws/p2p/16Uiu2HAmQoKcmieUgEjjSM8ygEbfkTDqfcDxaNxv2sZdxZ6vfHtt"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12554/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1446/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12381/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12554/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12554/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12554/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmLvtqdxoPuqotJUoQbF9LxGCNfFq684VBadBLUZTbqdYi","multiaddrs":["/ip4/172.18.189.104/tcp/1447/p2p/16Uiu2HAmLvtqdxoPuqotJUoQbF9LxGCNfFq684VBadBLUZTbqdYi","/ip4/172.18.189.104/tcp/1448/ws/p2p/16Uiu2HAmLvtqdxoPuqotJUoQbF9LxGCNfFq684VBadBLUZTbqdYi"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1446/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.5/tcp/12555/p2p/16Uiu2HAm64S3yHy2n9PYqHH7fUqwphBhMNoCEGSqwJd5yiikbu2n","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12381/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmLvtqdxoPuqotJUoQbF9LxGCNfFq684VBadBLUZTbqdYi","multiaddrs":["/ip4/172.18.189.104/tcp/1447/p2p/16Uiu2HAmLvtqdxoPuqotJUoQbF9LxGCNfFq684VBadBLUZTbqdYi","/ip4/172.18.189.104/tcp/1448/ws/p2p/16Uiu2HAmLvtqdxoPuqotJUoQbF9LxGCNfFq684VBadBLUZTbqdYi"],"protocols":["/vac/waku/lightpush/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12554/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1727147886142271232}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/go-waku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12381/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1727147886142271232,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 08255180ae40
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d085b46c5b7c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 928bd01a8aee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.