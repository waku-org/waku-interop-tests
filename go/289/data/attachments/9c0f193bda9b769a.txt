[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_without_request_id with id: 2024-09-24_03-18-49__a01bc232-046f-4689-8fc3-84ec3ec24ab5
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-24_03-18-49__a01bc232-046f-4689-8fc3-84ec3ec24ab5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.248.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60934', '60935', '60936', '60937', '60938']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60934:60934 -p 60935:60935 -p 60936:60936 -p 60937:60937 -p 60938:60938 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60936 --rest-port=60934 --tcp-port=60935 --discv5-udp-port=60937 --rest-address=0.0.0.0 --nat=extip:172.18.248.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=79c4ff144fe0eb53a89fac5032a4cdceae3e78ffd835decb6eee41eea825aacc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60938 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.248.234 waku eb7dbefe4760bc1d692a117a34f69ace258d3a72a6c10a7d3923f416f5a372f3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID eb7dbefe4760. Setting up logs at ./log/docker/node1_2024-09-24_03-18-49__a01bc232-046f-4689-8fc3-84ec3ec24ab5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60934
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60934/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60934/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.234/tcp/60935/p2p/16Uiu2HAmFUNKFo43in9cc3241cjPfA4xBXwaouGSFgXdLUn1vDFy","/ip4/172.18.248.234/tcp/60936/ws/p2p/16Uiu2HAmFUNKFo43in9cc3241cjPfA4xBXwaouGSFgXdLUn1vDFy"],"enrUri":"enr:-LO4QF1tnXz18yrG1JKdFpvW6NZtQ4r67uGbPXaKtmBrss07UVwEvETgT8flP58tpyQrklGxrHZLtwFR9WSv2zswZOkBgmlkgnY0gmlwhKwS-OqKbXVsdGlhZGRyc4wACgSsEvjqBu4I3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMp2oH5Byh-j3dGorKlJG0WuwjxFv2pviaT3fU2uoKUvIN0Y3CC7geDdWRwgu4JhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-24_03-18-49__a01bc232-046f-4689-8fc3-84ec3ec24ab5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.164.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42499', '42500', '42501', '42502', '42503']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42499:42499 -p 42500:42500 -p 42501:42501 -p 42502:42502 -p 42503:42503 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=42501 --rest-port=42499 --tcp-port=42500 --discv5-udp-port=42502 --rest-address=0.0.0.0 --nat=extip:172.18.164.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=667f970764b4e013058fe9ccfc9bcedebcaecc6cf72dc059a4637edf6ee2bae3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QF1tnXz18yrG1JKdFpvW6NZtQ4r67uGbPXaKtmBrss07UVwEvETgT8flP58tpyQrklGxrHZLtwFR9WSv2zswZOkBgmlkgnY0gmlwhKwS-OqKbXVsdGlhZGRyc4wACgSsEvjqBu4I3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMp2oH5Byh-j3dGorKlJG0WuwjxFv2pviaT3fU2uoKUvIN0Y3CC7geDdWRwgu4JhXdha3UyBQ --filternode=/ip4/172.18.248.234/tcp/60935/p2p/16Uiu2HAmFUNKFo43in9cc3241cjPfA4xBXwaouGSFgXdLUn1vDFy
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.172.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42765', '42766', '42767', '42768', '42769']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42765:42765 -p 42766:42766 -p 42767:42767 -p 42768:42768 -p 42769:42769 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=42767 --rest-port=42765 --tcp-port=42766 --discv5-udp-port=42768 --rest-address=0.0.0.0 --nat=extip:172.18.172.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da5fbab8f4e9cd2a55c61280ac2abfa133cfbfef802a6bdc4b85ddbbbc98eeb0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QF1tnXz18yrG1JKdFpvW6NZtQ4r67uGbPXaKtmBrss07UVwEvETgT8flP58tpyQrklGxrHZLtwFR9WSv2zswZOkBgmlkgnY0gmlwhKwS-OqKbXVsdGlhZGRyc4wACgSsEvjqBu4I3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMp2oH5Byh-j3dGorKlJG0WuwjxFv2pviaT3fU2uoKUvIN0Y3CC7geDdWRwgu4JhXdha3UyBQ --filternode=/ip4/172.18.248.234/tcp/60935/p2p/16Uiu2HAmFUNKFo43in9cc3241cjPfA4xBXwaouGSFgXdLUn1vDFy
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.172.97 waku 8fdfbfa84f6da74cdc28a2918ac29cc035431c7e212c3b8bc43b7f9597a43525
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8fdfbfa84f6d. Setting up logs at ./log/docker/node2_2024-09-24_03-18-49__a01bc232-046f-4689-8fc3-84ec3ec24ab5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 42765
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42765/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QItdMATA4c3RK-2xVYSgE5rysxn91-ZQ-VDILl9X33TXBYaRPa0LvsIpHEpGtnZpVq1C_U8zuCwXpDwxdGBU8JuGAZIiCfkqgmlkgnY0gmlwhKwRAAuJc2VjcDI1NmsxoQP0tv6mZC7LSoF-xHvpFBvgvdpEBBASXPaSwoYDHQchDoN0Y3CCpw6DdWRwgqcQhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/42766/p2p/16Uiu2HAmV8FfqJ7U8c9TjwLMzjBummAdwyPcL5b2Lw8qLDyXufAm","/ip4/127.0.0.1/tcp/42767/ws/p2p/16Uiu2HAmV8FfqJ7U8c9TjwLMzjBummAdwyPcL5b2Lw8qLDyXufAm","/ip4/172.17.0.11/tcp/42766/p2p/16Uiu2HAmV8FfqJ7U8c9TjwLMzjBummAdwyPcL5b2Lw8qLDyXufAm","/ip4/172.17.0.11/tcp/42767/ws/p2p/16Uiu2HAmV8FfqJ7U8c9TjwLMzjBummAdwyPcL5b2Lw8qLDyXufAm"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42765/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.248.234/tcp/60935/p2p/16Uiu2HAmFUNKFo43in9cc3241cjPfA4xBXwaouGSFgXdLUn1vDFy", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60934/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42765/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0d0f53cc-42db-4060-8bcc-e875fbff2bf1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0d0f53cc-42db-4060-8bcc-e875fbff2bf1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42765/filter/v2/subscriptions/" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42765/filter/v2/subscriptions/. Response content: b'{"requestId":"","statusDesc":"bad request id"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id eb7dbefe4760
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8fdfbfa84f6d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.