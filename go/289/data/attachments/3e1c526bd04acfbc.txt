[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-09-24_03-16-59__f71bfa5b-b69f-4e57-99cf-cb60ce0773d8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-24_03-16-59__f71bfa5b-b69f-4e57-99cf-cb60ce0773d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-24_03-16-59__f71bfa5b-b69f-4e57-99cf-cb60ce0773d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-24_03-16-59__f71bfa5b-b69f-4e57-99cf-cb60ce0773d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.134.94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10598', '10599', '10600', '10601', '10602']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10598:10598 -p 10599:10599 -p 10600:10600 -p 10601:10601 -p 10602:10602 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=10600 --rest-port=10598 --tcp-port=10599 --discv5-udp-port=10601 --rest-address=0.0.0.0 --nat=extip:172.18.134.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=caabaa96afb4e9bd941ddafd8ecdd5de1be65a3f06bbacfbff2c2ad8ddeff6f3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.134.94 waku 31ded2afdc6c9c886b463bcd1153c350b22f9343e7b54c5da6e92f3b3a3f6f3f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 31ded2afdc6c. Setting up logs at ./log/docker/node1_2024-09-24_03-16-59__f71bfa5b-b69f-4e57-99cf-cb60ce0773d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 10598
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10598/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QEZND7Zc25sptVXI0KvWGgFVDcZdjV8-TlaG_Gnxf2jtO_qaIEDOS7cOV-hZXpjtkjTVqIdfA2kXP_uWGL2JbBqGAZIiCERhgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQIQJlidwv-VKTfDraQmxVcS4J-0mguoC2PR0s3hNvVZYoN0Y3CCKWeDdWRwgilphXdha3UyBQ","listenAddresses":["/ip4/127.0.0.1/tcp/10599/p2p/16Uiu2HAkvWiR834ivgUdr2V29GGNfjfwYDnFV7auH5C3aBoisaf3","/ip4/127.0.0.1/tcp/10600/ws/p2p/16Uiu2HAkvWiR834ivgUdr2V29GGNfjfwYDnFV7auH5C3aBoisaf3","/ip4/172.17.0.2/tcp/10599/p2p/16Uiu2HAkvWiR834ivgUdr2V29GGNfjfwYDnFV7auH5C3aBoisaf3","/ip4/172.17.0.2/tcp/10600/ws/p2p/16Uiu2HAkvWiR834ivgUdr2V29GGNfjfwYDnFV7auH5C3aBoisaf3"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.208.228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25974', '25975', '25976', '25977', '25978']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25974:25974 -p 25975:25975 -p 25976:25976 -p 25977:25977 -p 25978:25978 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25976 --rest-port=25974 --tcp-port=25975 --discv5-udp-port=25977 --rest-address=0.0.0.0 --nat=extip:172.18.208.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf00e974dcb6f8dda0bdbf1bdfc001faff39eec1012c6db3abb8d83f04fda1bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25978 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-Ji4QEZND7Zc25sptVXI0KvWGgFVDcZdjV8-TlaG_Gnxf2jtO_qaIEDOS7cOV-hZXpjtkjTVqIdfA2kXP_uWGL2JbBqGAZIiCERhgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQIQJlidwv-VKTfDraQmxVcS4J-0mguoC2PR0s3hNvVZYoN0Y3CCKWeDdWRwgilphXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.208.228 waku 309c0b8e5d1d74cd3f995a4c2ad6889318862b99ebe480ca5ea3623a7ce3f7a8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 309c0b8e5d1d. Setting up logs at ./log/docker/node2_2024-09-24_03-16-59__f71bfa5b-b69f-4e57-99cf-cb60ce0773d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25974
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25974/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25974/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.228/tcp/25975/p2p/16Uiu2HAm5wkFqRwC69ov7TA3EFFaq4sFZeKwocD3oTU922R9FrdV","/ip4/172.18.208.228/tcp/25976/ws/p2p/16Uiu2HAm5wkFqRwC69ov7TA3EFFaq4sFZeKwocD3oTU922R9FrdV"],"enrUri":"enr:-LO4QPu89O5aAeRdVN4UX9Gby3GJnwBvcwK6UGyN5bmQscG9MVpC2F-XHppPYVzdX2cDl1D5iGUPFOe9IGxeQW0jsgABgmlkgnY0gmlwhKwS0OSKbXVsdGlhZGRyc4wACgSsEtDkBmV43QOCcnOFAAMBAACJc2VjcDI1NmsxoQKcSSEMPXSRy3CnGP7GZN6KyaN8nXcDQ2bp8gg3qVSYmIN0Y3CCZXeDdWRwgmV5hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.77.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52001', '52002', '52003', '52004', '52005']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52001:52001 -p 52002:52002 -p 52003:52003 -p 52004:52004 -p 52005:52005 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52003 --rest-port=52001 --tcp-port=52002 --discv5-udp-port=52004 --rest-address=0.0.0.0 --nat=extip:172.18.77.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e7bd36e4e26dbab9c33e3328cccd6ce31a09affce5d3be126aafdbd9aea5c0c6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.208.228/tcp/25975/p2p/16Uiu2HAm5wkFqRwC69ov7TA3EFFaq4sFZeKwocD3oTU922R9FrdV --discv5-bootstrap-node=enr:-LO4QPu89O5aAeRdVN4UX9Gby3GJnwBvcwK6UGyN5bmQscG9MVpC2F-XHppPYVzdX2cDl1D5iGUPFOe9IGxeQW0jsgABgmlkgnY0gmlwhKwS0OSKbXVsdGlhZGRyc4wACgSsEtDkBmV43QOCcnOFAAMBAACJc2VjcDI1NmsxoQKcSSEMPXSRy3CnGP7GZN6KyaN8nXcDQ2bp8gg3qVSYmIN0Y3CCZXeDdWRwgmV5hXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.77.184 waku 2e492ece69add49ec894a5b823af4433717025501416810dc6121f38fe580390
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2e492ece69ad. Setting up logs at ./log/docker/node3_2024-09-24_03-16-59__f71bfa5b-b69f-4e57-99cf-cb60ce0773d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 52001
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52001/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QIB-k5sPDSmehxlbzAntSwS9T9jidiZUDJKV8uEqm99bEcnL9gOdzBNXTfaqLhTFCjp_sT27Mb_bq-_vh-G922uGAZIiCFGXgmlkgnY0gmlwhKwRAAuJc2VjcDI1NmsxoQMFKjoC9GDDnSPIRG9YyVM5M-6hgtuolwkyKkmj5UJvHIN0Y3CCyyKDdWRwgsskhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/52002/p2p/16Uiu2HAmD19jZFkDmwJM2ptobV2XztWX4pKnsX21e7QTixCBK4mh","/ip4/127.0.0.1/tcp/52003/ws/p2p/16Uiu2HAmD19jZFkDmwJM2ptobV2XztWX4pKnsX21e7QTixCBK4mh","/ip4/172.17.0.11/tcp/52002/p2p/16Uiu2HAmD19jZFkDmwJM2ptobV2XztWX4pKnsX21e7QTixCBK4mh","/ip4/172.17.0.11/tcp/52003/ws/p2p/16Uiu2HAmD19jZFkDmwJM2ptobV2XztWX4pKnsX21e7QTixCBK4mh"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10598/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25974/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52001/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10598/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmD19jZFkDmwJM2ptobV2XztWX4pKnsX21e7QTixCBK4mh","multiaddrs":["/ip4/172.17.0.11/tcp/52002/p2p/16Uiu2HAmD19jZFkDmwJM2ptobV2XztWX4pKnsX21e7QTixCBK4mh","/ip4/172.17.0.11/tcp/52003/ws/p2p/16Uiu2HAmD19jZFkDmwJM2ptobV2XztWX4pKnsX21e7QTixCBK4mh"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":[]},{"id":"16Uiu2HAm5wkFqRwC69ov7TA3EFFaq4sFZeKwocD3oTU922R9FrdV","multiaddrs":["/ip4/172.18.208.228/tcp/25975/p2p/16Uiu2HAm5wkFqRwC69ov7TA3EFFaq4sFZeKwocD3oTU922R9FrdV","/ip4/172.18.208.228/tcp/25976/ws/p2p/16Uiu2HAm5wkFqRwC69ov7TA3EFFaq4sFZeKwocD3oTU922R9FrdV"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25974/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/10599/p2p/16Uiu2HAkvWiR834ivgUdr2V29GGNfjfwYDnFV7auH5C3aBoisaf3","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.11/tcp/52002/p2p/16Uiu2HAmD19jZFkDmwJM2ptobV2XztWX4pKnsX21e7QTixCBK4mh","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52001/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm5wkFqRwC69ov7TA3EFFaq4sFZeKwocD3oTU922R9FrdV","multiaddrs":["/ip4/172.18.208.228/tcp/25975/p2p/16Uiu2HAm5wkFqRwC69ov7TA3EFFaq4sFZeKwocD3oTU922R9FrdV","/ip4/172.18.208.228/tcp/25976/ws/p2p/16Uiu2HAm5wkFqRwC69ov7TA3EFFaq4sFZeKwocD3oTU922R9FrdV"],"protocols":["/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAkvWiR834ivgUdr2V29GGNfjfwYDnFV7auH5C3aBoisaf3","multiaddrs":["/ip4/172.17.0.2/tcp/10599/p2p/16Uiu2HAkvWiR834ivgUdr2V29GGNfjfwYDnFV7auH5C3aBoisaf3","/ip4/172.17.0.2/tcp/10600/ws/p2p/16Uiu2HAkvWiR834ivgUdr2V29GGNfjfwYDnFV7auH5C3aBoisaf3"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10598/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52001/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","timestamp":1727147857474689280,"ephemeral":null}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 31ded2afdc6c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 309c0b8e5d1d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2e492ece69ad
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.