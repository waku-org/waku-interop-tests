[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-10-23_03-07-15__ee9ddc33-e47d-43fb-8aa3-f2beff7680a5
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-23_03-07-15__ee9ddc33-e47d-43fb-8aa3-f2beff7680a5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-23_03-07-15__ee9ddc33-e47d-43fb-8aa3-f2beff7680a5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-23_03-07-15__ee9ddc33-e47d-43fb-8aa3-f2beff7680a5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.195.107
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20569', '20570', '20571', '20572', '20573']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20569:20569 -p 20570:20570 -p 20571:20571 -p 20572:20572 -p 20573:20573 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=20571 --rest-port=20569 --tcp-port=20570 --discv5-udp-port=20572 --rest-address=0.0.0.0 --nat=extip:172.18.195.107 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a329e6cf70d56b8fa475ed4ed9f0bae7ed98ebdda9139d0dd00a47c5d7cadfeb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.195.107 waku 1b878c12e38181259423ae0de3ae75c23895400ebe70b9846009837eb3a5006b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1b878c12e381. Setting up logs at ./log/docker/node1_2024-10-23_03-07-15__ee9ddc33-e47d-43fb-8aa3-f2beff7680a5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 20569
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20569/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBW7E45rOr1qPSNjt5uxE7YL0-OCsh65qCHFL7kdI5MIGQU49PYV06-Pa-QjhwRIUeS6KZTyxrMwD6j0o-m485-GAZK3V8cngmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQI5ezw0nn5eKvvGrtzhmyp3fWXJv_bgJKVnlx7ieA4lvYN0Y3CCUFqDdWRwglBchXdha3UyBQ","listenAddresses":["/ip4/127.0.0.1/tcp/20570/p2p/16Uiu2HAkyJ4D3wzkFSM654fp87e9Le4U3LWWyfVPZ6KyaNZsDpFv","/ip4/127.0.0.1/tcp/20571/ws/p2p/16Uiu2HAkyJ4D3wzkFSM654fp87e9Le4U3LWWyfVPZ6KyaNZsDpFv","/ip4/172.17.0.8/tcp/20570/p2p/16Uiu2HAkyJ4D3wzkFSM654fp87e9Le4U3LWWyfVPZ6KyaNZsDpFv","/ip4/172.17.0.8/tcp/20571/ws/p2p/16Uiu2HAkyJ4D3wzkFSM654fp87e9Le4U3LWWyfVPZ6KyaNZsDpFv"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.1.212
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64407', '64408', '64409', '64410', '64411']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64407:64407 -p 64408:64408 -p 64409:64409 -p 64410:64410 -p 64411:64411 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64409 --rest-port=64407 --tcp-port=64408 --discv5-udp-port=64410 --rest-address=0.0.0.0 --nat=extip:172.18.1.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ba3d6c69facbe5dbd9ae37747ca093dbdb051c3d9fb3bfc2d6cfddefccbcf0b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64411 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-Ji4QBW7E45rOr1qPSNjt5uxE7YL0-OCsh65qCHFL7kdI5MIGQU49PYV06-Pa-QjhwRIUeS6KZTyxrMwD6j0o-m485-GAZK3V8cngmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQI5ezw0nn5eKvvGrtzhmyp3fWXJv_bgJKVnlx7ieA4lvYN0Y3CCUFqDdWRwglBchXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.1.212 waku 90bcaf63c7cd623fb670743a8b841ff83b02202f009d8148b6c3f5b79078275e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 90bcaf63c7cd. Setting up logs at ./log/docker/node2_2024-10-23_03-07-15__ee9ddc33-e47d-43fb-8aa3-f2beff7680a5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64407
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64407/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64407/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.212/tcp/64408/p2p/16Uiu2HAm8VP2TGzbF9kHBbAnmgD7uhzTkyFNuXnF7VuRjkLkuGRB","/ip4/172.18.1.212/tcp/64409/ws/p2p/16Uiu2HAm8VP2TGzbF9kHBbAnmgD7uhzTkyFNuXnF7VuRjkLkuGRB"],"enrUri":"enr:-LO4QEnkFaUNsEn0P7mxvJiPd8jO9mEZObTRxSxHAWvXQKH6azYjETQr4IL4IMyoXm5EJuf4DUeODuKU-3oDpxXnRBoBgmlkgnY0gmlwhKwSAdSKbXVsdGlhZGRyc4wACgSsEgHUBvuZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLCGxVLUANLLg_3DT3ZZk12jukvsPtdRCtQ3GBSMUlNBoN0Y3CC-5iDdWRwgvuahXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.159.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13234', '13235', '13236', '13237', '13238']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13234:13234 -p 13235:13235 -p 13236:13236 -p 13237:13237 -p 13238:13238 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13236 --rest-port=13234 --tcp-port=13235 --discv5-udp-port=13237 --rest-address=0.0.0.0 --nat=extip:172.18.159.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c77b2ba3fa2c95cbc4029a0400ec0f93f431571cff6e0bf82ff56aae95e9ac05 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.1.212/tcp/64408/p2p/16Uiu2HAm8VP2TGzbF9kHBbAnmgD7uhzTkyFNuXnF7VuRjkLkuGRB --discv5-bootstrap-node=enr:-LO4QEnkFaUNsEn0P7mxvJiPd8jO9mEZObTRxSxHAWvXQKH6azYjETQr4IL4IMyoXm5EJuf4DUeODuKU-3oDpxXnRBoBgmlkgnY0gmlwhKwSAdSKbXVsdGlhZGRyc4wACgSsEgHUBvuZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLCGxVLUANLLg_3DT3ZZk12jukvsPtdRCtQ3GBSMUlNBoN0Y3CC-5iDdWRwgvuahXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.159.168 waku 14f56412bf06b853472c53f3d83d027d76a9d40d3d5b2e95e8ad47a0cd76c0cd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 14f56412bf06. Setting up logs at ./log/docker/node3_2024-10-23_03-07-15__ee9ddc33-e47d-43fb-8aa3-f2beff7680a5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 13234
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13234/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QPNfSTPGrsd_EuWpvOyfx5rG1cAA4_OnMQQoaJ6mp7yxfcTMiDVwP_qYiKBwVCHQjEppE362d2RS5zlk67e0E1OGAZK3V9U2gmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQOaSmrMIFcZdiCW5SfAhL2w-Hvxdkcr8a1mmRNW16ISrYN0Y3CCM7ODdWRwgjO1hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/13235/p2p/16Uiu2HAmP3Gx7TXJxqqHR4GckuB26NE7Q54g9w4HEibBQBDzbcZa","/ip4/127.0.0.1/tcp/13236/ws/p2p/16Uiu2HAmP3Gx7TXJxqqHR4GckuB26NE7Q54g9w4HEibBQBDzbcZa","/ip4/172.17.0.13/tcp/13235/p2p/16Uiu2HAmP3Gx7TXJxqqHR4GckuB26NE7Q54g9w4HEibBQBDzbcZa","/ip4/172.17.0.13/tcp/13236/ws/p2p/16Uiu2HAmP3Gx7TXJxqqHR4GckuB26NE7Q54g9w4HEibBQBDzbcZa"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20569/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64407/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13234/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20569/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm8VP2TGzbF9kHBbAnmgD7uhzTkyFNuXnF7VuRjkLkuGRB","multiaddrs":["/ip4/172.18.1.212/tcp/64408/p2p/16Uiu2HAm8VP2TGzbF9kHBbAnmgD7uhzTkyFNuXnF7VuRjkLkuGRB","/ip4/172.18.1.212/tcp/64409/ws/p2p/16Uiu2HAm8VP2TGzbF9kHBbAnmgD7uhzTkyFNuXnF7VuRjkLkuGRB"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAmP3Gx7TXJxqqHR4GckuB26NE7Q54g9w4HEibBQBDzbcZa","multiaddrs":["/ip4/172.17.0.13/tcp/13235/p2p/16Uiu2HAmP3Gx7TXJxqqHR4GckuB26NE7Q54g9w4HEibBQBDzbcZa","/ip4/172.17.0.13/tcp/13236/ws/p2p/16Uiu2HAmP3Gx7TXJxqqHR4GckuB26NE7Q54g9w4HEibBQBDzbcZa"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64407/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.13/tcp/13235/p2p/16Uiu2HAmP3Gx7TXJxqqHR4GckuB26NE7Q54g9w4HEibBQBDzbcZa","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13234/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm8VP2TGzbF9kHBbAnmgD7uhzTkyFNuXnF7VuRjkLkuGRB","multiaddrs":["/ip4/172.18.1.212/tcp/64408/p2p/16Uiu2HAm8VP2TGzbF9kHBbAnmgD7uhzTkyFNuXnF7VuRjkLkuGRB","/ip4/172.18.1.212/tcp/64409/ws/p2p/16Uiu2HAm8VP2TGzbF9kHBbAnmgD7uhzTkyFNuXnF7VuRjkLkuGRB"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAkyJ4D3wzkFSM654fp87e9Le4U3LWWyfVPZ6KyaNZsDpFv","multiaddrs":["/ip4/172.17.0.8/tcp/20570/p2p/16Uiu2HAkyJ4D3wzkFSM654fp87e9Le4U3LWWyfVPZ6KyaNZsDpFv","/ip4/172.17.0.8/tcp/20571/ws/p2p/16Uiu2HAkyJ4D3wzkFSM654fp87e9Le4U3LWWyfVPZ6KyaNZsDpFv"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20569/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13234/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","timestamp":1729652873164219136,"ephemeral":null}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1b878c12e381
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 90bcaf63c7cd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 14f56412bf06
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.