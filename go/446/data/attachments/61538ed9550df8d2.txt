[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:349 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.16.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3076', '3077', '3078', '3079', '3080']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3076:3076 -p 3077:3077 -p 3078:3078 -p 3079:3079 -p 3080:3080 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3078 --rest-port=3076 --tcp-port=3077 --discv5-udp-port=3079 --rest-address=0.0.0.0 --nat=extip:172.18.16.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9c0ceb1eeb95bf595b46463fffd30f077057cef4d04e3197bdf7bf7d1db0261 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.16.89 waku d5b7d93ff856de76acb7ecd4d4bd90195427eca179048fe0874b68b03e50a020
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d5b7d93ff856. Setting up logs at ./log/docker/node1_2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 3076
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3076/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QFaDIrv9wQ_P-Uj7InwSKkmzr67HIHSpYzmSwhp9Q6UqGvst0NcmxFGYdNYPthLRYy9A5HBJL0roKAregAL8ZHiGAZSwBHoLgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDO6A5mtioNvjHGgK_9Bs9lYH4ElcSY_dc0-NLb09R22CDdGNwggwFg3VkcIIMB4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/3077/p2p/16Uiu2HAmGfk7FdkZjKH5RHSi4iCcbw91f1WhvGy3GkLD5ExUbTzo","/ip4/127.0.0.1/tcp/3078/ws/p2p/16Uiu2HAmGfk7FdkZjKH5RHSi4iCcbw91f1WhvGy3GkLD5ExUbTzo","/ip4/172.17.0.2/tcp/3077/p2p/16Uiu2HAmGfk7FdkZjKH5RHSi4iCcbw91f1WhvGy3GkLD5ExUbTzo","/ip4/172.17.0.2/tcp/3078/ws/p2p/16Uiu2HAmGfk7FdkZjKH5RHSi4iCcbw91f1WhvGy3GkLD5ExUbTzo"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.118.30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54317', '54318', '54319', '54320', '54321']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54317:54317 -p 54318:54318 -p 54319:54319 -p 54320:54320 -p 54321:54321 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54319 --rest-port=54317 --tcp-port=54318 --discv5-udp-port=54320 --rest-address=0.0.0.0 --nat=extip:172.18.118.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dacf667ea8a0b6b1b4dabd1d93fac474a2a5018ffd2922f7cd4cec7b5d8a5ba7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54321 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QFaDIrv9wQ_P-Uj7InwSKkmzr67HIHSpYzmSwhp9Q6UqGvst0NcmxFGYdNYPthLRYy9A5HBJL0roKAregAL8ZHiGAZSwBHoLgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDO6A5mtioNvjHGgK_9Bs9lYH4ElcSY_dc0-NLb09R22CDdGNwggwFg3VkcIIMB4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.118.30 waku 414c89eeecddc2addc83943be75d8094b59df8a9a03ef23d9e5118794f965830
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 414c89eeecdd. Setting up logs at ./log/docker/node2_2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 54317
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54317/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54317/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.30/tcp/54318/p2p/16Uiu2HAmVs6tFhD9uvpqQNHGybTtdaUKWz3NWgC2TWQSvptqoBFe","/ip4/172.18.118.30/tcp/54319/ws/p2p/16Uiu2HAmVs6tFhD9uvpqQNHGybTtdaUKWz3NWgC2TWQSvptqoBFe"],"enrUri":"enr:-L24QF1gX2RY7l_Ii5fvRsMFF848RHHiPfCkedd5t4FT1OdrJyUgyq0KY-affTNamzIafOUO2WUvuA5R9mfhcZrj770CgmlkgnY0gmlwhKwSdh6KbXVsdGlhZGRyc5YACASsEnYeBtQuAAoErBJ2HgbUL90DgnJzhQADAQAAiXNlY3AyNTZrMaED_7EJCvelmNJDNyardn4ctkcfh6_m-r3cElB4-S9EcQmDdGNwgtQug3VkcILUMIV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.136.196
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26190', '26191', '26192', '26193', '26194']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26190:26190 -p 26191:26191 -p 26192:26192 -p 26193:26193 -p 26194:26194 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=26192 --rest-port=26190 --tcp-port=26191 --discv5-udp-port=26193 --rest-address=0.0.0.0 --nat=extip:172.18.136.196 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a5b9be5ccc81ca265a6763d0be2f6dfe4c7beb0bbdfb347bddfdf78818bec3c8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.118.30/tcp/54318/p2p/16Uiu2HAmVs6tFhD9uvpqQNHGybTtdaUKWz3NWgC2TWQSvptqoBFe --store=false --pubsub-topic=/waku/2/rs/3/1 --discv5-bootstrap-node=enr:-L24QF1gX2RY7l_Ii5fvRsMFF848RHHiPfCkedd5t4FT1OdrJyUgyq0KY-affTNamzIafOUO2WUvuA5R9mfhcZrj770CgmlkgnY0gmlwhKwSdh6KbXVsdGlhZGRyc5YACASsEnYeBtQuAAoErBJ2HgbUL90DgnJzhQADAQAAiXNlY3AyNTZrMaED_7EJCvelmNJDNyardn4ctkcfh6_m-r3cElB4-S9EcQmDdGNwgtQug3VkcILUMIV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.136.196 waku 1a11d6321f24d87c9c65130b81f0d220b9a9017f3c547e64eb069f01b721a3e8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1a11d6321f24. Setting up logs at ./log/docker/node3_2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 26190
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26190/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QOXnJDT0KDGupXylKxTRWTVuK5ySSyaMzeaFT2lxJuqXHHYW7fMvLjjgwwxGXEk5ImToeVLR0_TkX-IgD4OP4miGAZSwBI-_gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIWYzoge1jI77ptsNknWa_rf_lC2r5U_oxJwf6s1huaFIN0Y3CCZk-DdWRwgmZRhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/26191/p2p/16Uiu2HAkvw4hv8TqEtQWSsUtf8cVJX4MhLizA96A5zgq7uS613J3","/ip4/127.0.0.1/tcp/26192/ws/p2p/16Uiu2HAkvw4hv8TqEtQWSsUtf8cVJX4MhLizA96A5zgq7uS613J3","/ip4/172.17.0.4/tcp/26191/p2p/16Uiu2HAkvw4hv8TqEtQWSsUtf8cVJX4MhLizA96A5zgq7uS613J3","/ip4/172.17.0.4/tcp/26192/ws/p2p/16Uiu2HAkvw4hv8TqEtQWSsUtf8cVJX4MhLizA96A5zgq7uS613J3"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:360 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3076/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54317/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:364 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3076/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmVs6tFhD9uvpqQNHGybTtdaUKWz3NWgC2TWQSvptqoBFe","multiaddrs":["/ip4/172.18.118.30/tcp/54318/p2p/16Uiu2HAmVs6tFhD9uvpqQNHGybTtdaUKWz3NWgC2TWQSvptqoBFe","/ip4/172.18.118.30/tcp/54319/ws/p2p/16Uiu2HAmVs6tFhD9uvpqQNHGybTtdaUKWz3NWgC2TWQSvptqoBFe"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54317/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3076/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmVs6tFhD9uvpqQNHGybTtdaUKWz3NWgC2TWQSvptqoBFe","multiaddrs":["/ip4/172.18.118.30/tcp/54319/ws/p2p/16Uiu2HAmVs6tFhD9uvpqQNHGybTtdaUKWz3NWgC2TWQSvptqoBFe","/ip4/172.18.118.30/tcp/54318/p2p/16Uiu2HAmVs6tFhD9uvpqQNHGybTtdaUKWz3NWgC2TWQSvptqoBFe"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54317/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/26191/p2p/16Uiu2HAkvw4hv8TqEtQWSsUtf8cVJX4MhLizA96A5zgq7uS613J3","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:368 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26190/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26190/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d5b7d93ff856
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 414c89eeecdd
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d5b7d93ff856. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1a11d6321f24
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-29_03-04-25__670eedd1-679a-4401-a6d2-66eb11d34ac2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:349 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.136.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30058', '30059', '30060', '30061', '30062']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30058:30058 -p 30059:30059 -p 30060:30060 -p 30061:30061 -p 30062:30062 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=30060 --rest-port=30058 --tcp-port=30059 --discv5-udp-port=30061 --rest-address=0.0.0.0 --nat=extip:172.18.136.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a179a6a41aedfabed12af3723da57b45bec27bb6c61b726ee6ecedd573bd0e4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 414c89eeecdd. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.136.103 waku 57146a3b75d6b041961831f60716e1169579c621e56b27476327f31b9052b90c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 57146a3b75d6. Setting up logs at ./log/docker/node1_2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 30058
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1a11d6321f24. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30058/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLWJzBfqZl61GuppQuIKbvVaHBpkOfocYV2S4Im5O6qod9S_AKsdqHBDFwZmN9FArWzt-8ebB2AXx44TkxUlkQuGAZSwBRZcgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDMVqVukID2lnyBXkF_8V_MHvS75wIS2nNPPpaxco8la-DdGNwgnVrg3VkcIJ1bYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/30059/p2p/16Uiu2HAmFyeSZbKLcBjQKzk1re3BBxsdx4qauczV3G9G9iTW4xd4","/ip4/127.0.0.1/tcp/30060/ws/p2p/16Uiu2HAmFyeSZbKLcBjQKzk1re3BBxsdx4qauczV3G9G9iTW4xd4","/ip4/172.17.0.2/tcp/30059/p2p/16Uiu2HAmFyeSZbKLcBjQKzk1re3BBxsdx4qauczV3G9G9iTW4xd4","/ip4/172.17.0.2/tcp/30060/ws/p2p/16Uiu2HAmFyeSZbKLcBjQKzk1re3BBxsdx4qauczV3G9G9iTW4xd4"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.67.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50965', '50966', '50967', '50968', '50969']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50965:50965 -p 50966:50966 -p 50967:50967 -p 50968:50968 -p 50969:50969 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50967 --rest-port=50965 --tcp-port=50966 --discv5-udp-port=50968 --rest-address=0.0.0.0 --nat=extip:172.18.67.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc8f51dc5e4217fbfc0fa2a17ff5fd35babea8376ab54b2cb0c3a37ca1b7af00 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50969 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QLWJzBfqZl61GuppQuIKbvVaHBpkOfocYV2S4Im5O6qod9S_AKsdqHBDFwZmN9FArWzt-8ebB2AXx44TkxUlkQuGAZSwBRZcgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDMVqVukID2lnyBXkF_8V_MHvS75wIS2nNPPpaxco8la-DdGNwgnVrg3VkcIJ1bYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.67.224 waku 65f75dfb81cc7457f273f5c8b34bd9448569c1d9771f6ae859a0a1ef7570e7c1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 65f75dfb81cc. Setting up logs at ./log/docker/node2_2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 50965
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50965/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50965/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.67.224/tcp/50966/p2p/16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa","/ip4/172.18.67.224/tcp/50967/ws/p2p/16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa"],"enrUri":"enr:-L24QEpxq9F6UGXroOx6BhmC11N7gj4SL2OoIGwsm9nRIwaNa0E1n9gTnZl-IO9ppb2U_w6JmffcxMYahZaJB0HC3OYCgmlkgnY0gmlwhKwSQ-CKbXVsdGlhZGRyc5YACASsEkPgBscWAAoErBJD4AbHF90DgnJzhQADAQAAiXNlY3AyNTZrMaEC-vTjeBvGvItVrGRGrpfoSxNdKMLNtT6tvpdZscvFvxWDdGNwgscWg3VkcILHGIV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.78.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36707', '36708', '36709', '36710', '36711']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36707:36707 -p 36708:36708 -p 36709:36709 -p 36710:36710 -p 36711:36711 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36709 --rest-port=36707 --tcp-port=36708 --discv5-udp-port=36710 --rest-address=0.0.0.0 --nat=extip:172.18.78.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=42066e1c63bced2a3b8ac21b8fa7b7daace9beccefc40f12f5d84ea4fb561c01 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.67.224/tcp/50966/p2p/16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa --store=false --pubsub-topic=/waku/2/rs/3/1 --discv5-bootstrap-node=enr:-L24QEpxq9F6UGXroOx6BhmC11N7gj4SL2OoIGwsm9nRIwaNa0E1n9gTnZl-IO9ppb2U_w6JmffcxMYahZaJB0HC3OYCgmlkgnY0gmlwhKwSQ-CKbXVsdGlhZGRyc5YACASsEkPgBscWAAoErBJD4AbHF90DgnJzhQADAQAAiXNlY3AyNTZrMaEC-vTjeBvGvItVrGRGrpfoSxNdKMLNtT6tvpdZscvFvxWDdGNwgscWg3VkcILHGIV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.78.87 waku 3de39d77d55deaed9249f01ea67706f5d364b05cb6bb78a185aca4a89e0d4b87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3de39d77d55d. Setting up logs at ./log/docker/node3_2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 36707
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QLy-cyu8Ct5Qwv92GRiqAMCetfrFTba61gqmMVyOP6kOeuJkCdDNejMtrlbZhPmBBVBZSjAqsW_6Kw0n6rzeAq6GAZSwBSChgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIDev2MM4FRkWzwE6MZROfaZrY5xk6xtcb8iTXehmvhHYN0Y3CCj2SDdWRwgo9mhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/36708/p2p/16Uiu2HAkufFyb1xuh2ELiNEZMQ3ZVMyh4cr2C3Me4sUV1BgtrhHe","/ip4/127.0.0.1/tcp/36709/ws/p2p/16Uiu2HAkufFyb1xuh2ELiNEZMQ3ZVMyh4cr2C3Me4sUV1BgtrhHe","/ip4/172.17.0.4/tcp/36708/p2p/16Uiu2HAkufFyb1xuh2ELiNEZMQ3ZVMyh4cr2C3Me4sUV1BgtrhHe","/ip4/172.17.0.4/tcp/36709/ws/p2p/16Uiu2HAkufFyb1xuh2ELiNEZMQ3ZVMyh4cr2C3Me4sUV1BgtrhHe"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:360 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30058/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50965/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:364 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30058/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa","multiaddrs":["/ip4/172.18.67.224/tcp/50966/p2p/16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa","/ip4/172.18.67.224/tcp/50967/ws/p2p/16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50965/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30058/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa","multiaddrs":["/ip4/172.18.67.224/tcp/50966/p2p/16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa","/ip4/172.18.67.224/tcp/50967/ws/p2p/16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50965/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30058/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa","multiaddrs":["/ip4/172.18.67.224/tcp/50966/p2p/16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa","/ip4/172.18.67.224/tcp/50967/ws/p2p/16Uiu2HAmCKJV6By2h34phvQw1F1uJZGnwy76WgEQ3Rqfh7ingwsa"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50965/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/30059/p2p/16Uiu2HAmFyeSZbKLcBjQKzk1re3BBxsdx4qauczV3G9G9iTW4xd4","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:368 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36707/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36707/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 57146a3b75d6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 65f75dfb81cc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3de39d77d55d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 57146a3b75d6. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-29_03-05-10__3a223424-294d-4265-8bb7-77fac0f07ed0__wakuorg_go-waku:latest.log