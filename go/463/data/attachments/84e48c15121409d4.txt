2025-02-11 14:56:05.318 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:56:05.318 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_content_topic with id: 2025-02-11_14-56-05__4ec14d54-b5fa-43ab-904b-0e6c454ffdf8
2025-02-11 14:56:05.318 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:56:05.318 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 14:56:05.319 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 14:56:05.325 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:56:05.325 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-56-05__4ec14d54-b5fa-43ab-904b-0e6c454ffdf8__wakuorg_nwaku:latest.log
2025-02-11 14:56:05.325 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:56:05.325 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:56:05.327 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:56:05.327 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.149.34
2025-02-11 14:56:05.327 DEBUG [src.node.docker_mananger] Generated ports ['40034', '40035', '40036', '40037', '40038']
2025-02-11 14:56:05.327 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:56:05.327 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:56:05.327 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:56:05.327 DEBUG [src.node.docker_mananger] docker run -i -t -p 40034:40034 -p 40035:40035 -p 40036:40036 -p 40037:40037 -p 40038:40038 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40036 --rest-port=40034 --tcp-port=40035 --discv5-udp-port=40037 --rest-address=0.0.0.0 --nat=extip:172.18.149.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1be1bad7f88e5466e8ce9a201f9dfdbeea4e68e3caface4524335dfe534d7f2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40038 --metrics-logging=true --relay=true --filter=true
2025-02-11 14:56:05.559 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.149.34 waku 75e422ddf26b559e6924d0f232d9326631f7d0b80e57a9f54cfbec2dc3f2df68
2025-02-11 14:56:05.609 DEBUG [src.node.docker_mananger] Container started with ID 75e422ddf26b. Setting up logs at ./log/docker/node1_2025-02-11_14-56-05__4ec14d54-b5fa-43ab-904b-0e6c454ffdf8__wakuorg_nwaku:latest.log
2025-02-11 14:56:05.610 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40034
2025-02-11 14:56:05.611 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:56:06.124 ERROR [src.node.docker_mananger] Max retries reached for container a80cb7f5c3eb. Exiting log stream.
2025-02-11 14:56:06.612 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40034/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:56:06.615 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:56:06.615 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:56:06.615 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40034/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:56:06.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.34/tcp/40035/p2p/16Uiu2HAm7SR36GKBfDrHe71NtXcc7NWBk8Wmwx3TQauum7WADxxP","/ip4/172.18.149.34/tcp/40036/ws/p2p/16Uiu2HAm7SR36GKBfDrHe71NtXcc7NWBk8Wmwx3TQauum7WADxxP"],"enrUri":"enr:-L24QOpw3zargqyd4yIC9l0fxL4sLFgiZFLOYkuUrnR-PatvQKPAUKIhrBV1pctJjTUrI3dIC0JBmR__thErhC9gd1QCgmlkgnY0gmlwhKwSlSKKbXVsdGlhZGRyc5YACASsEpUiBpxjAAoErBKVIgacZN0DgnJzhQADAQAAiXNlY3AyNTZrMaECsnzte42M4WXzatcfA4jOCO6MvIqT7N2sWg5VjuDJzViDdGNwgpxjg3VkcIKcZYV3YWt1MgU"}'
2025-02-11 14:56:06.618 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:56:06.618 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 14:56:06.624 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:56:06.624 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_14-56-05__4ec14d54-b5fa-43ab-904b-0e6c454ffdf8__wakuorg_go-waku:latest.log
2025-02-11 14:56:06.624 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:56:06.624 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:56:06.626 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:56:06.626 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.179.65
2025-02-11 14:56:06.626 DEBUG [src.node.docker_mananger] Generated ports ['23662', '23663', '23664', '23665', '23666']
2025-02-11 14:56:06.626 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:56:06.626 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:56:06.626 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:56:06.626 DEBUG [src.node.docker_mananger] docker run -i -t -p 23662:23662 -p 23663:23663 -p 23664:23664 -p 23665:23665 -p 23666:23666 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23664 --rest-port=23662 --tcp-port=23663 --discv5-udp-port=23665 --rest-address=0.0.0.0 --nat=extip:172.18.179.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9c7fabd2d02e3004ecdcafcabafd9f40bb5dd911c5a1e44a5adce3fbd37dbcd2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QOpw3zargqyd4yIC9l0fxL4sLFgiZFLOYkuUrnR-PatvQKPAUKIhrBV1pctJjTUrI3dIC0JBmR__thErhC9gd1QCgmlkgnY0gmlwhKwSlSKKbXVsdGlhZGRyc5YACASsEpUiBpxjAAoErBKVIgacZN0DgnJzhQADAQAAiXNlY3AyNTZrMaECsnzte42M4WXzatcfA4jOCO6MvIqT7N2sWg5VjuDJzViDdGNwgpxjg3VkcIKcZYV3YWt1MgU --filternode=/ip4/172.18.149.34/tcp/40035/p2p/16Uiu2HAm7SR36GKBfDrHe71NtXcc7NWBk8Wmwx3TQauum7WADxxP --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:56:06.857 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.179.65 waku 1b31a63d3a05e0317299c60065b78a2df52a15ff47404471cc6ec26280069684
2025-02-11 14:56:06.915 DEBUG [src.node.docker_mananger] Container started with ID 1b31a63d3a05. Setting up logs at ./log/docker/node2_2025-02-11_14-56-05__4ec14d54-b5fa-43ab-904b-0e6c454ffdf8__wakuorg_go-waku:latest.log
2025-02-11 14:56:06.916 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 23662
2025-02-11 14:56:06.916 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:56:07.917 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23662/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:56:07.919 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QA-t_HX75Gu6InfVm_cFEZeue4p4sTYOmCL8v8kqgxqiBaE_WDuvOm7DfdwDbR0MA_RO0c0D-4wBN5SV6afp6jmGAZT1gqL2gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQOtnC4O36zE3Y-kpX-KfuKk6L-0naFEhZYusOE8wy3VJYN0Y3CCXG-DdWRwglxxhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/23663/p2p/16Uiu2HAmQLh1TM9UfgctbaWKCxrCqKcGQbB9pgQLxiWAW1vyYNhi","/ip4/127.0.0.1/tcp/23664/ws/p2p/16Uiu2HAmQLh1TM9UfgctbaWKCxrCqKcGQbB9pgQLxiWAW1vyYNhi","/ip4/172.17.0.3/tcp/23663/p2p/16Uiu2HAmQLh1TM9UfgctbaWKCxrCqKcGQbB9pgQLxiWAW1vyYNhi","/ip4/172.17.0.3/tcp/23664/ws/p2p/16Uiu2HAmQLh1TM9UfgctbaWKCxrCqKcGQbB9pgQLxiWAW1vyYNhi"]}'
2025-02-11 14:56:07.920 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:56:07.920 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23662/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.149.34/tcp/40035/p2p/16Uiu2HAm7SR36GKBfDrHe71NtXcc7NWBk8Wmwx3TQauum7WADxxP", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:56:07.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:56:07.922 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 14:56:07.923 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:56:07.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:56:07.926 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23662/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5ab2b5ad-31eb-4053-b887-3c1442d6a978", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 14:56:07.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5ab2b5ad-31eb-4053-b887-3c1442d6a978","statusDesc":"OK"}'
2025-02-11 14:56:07.933 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:23662/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/2/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 14:56:07.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"can\'t unsubscribe from 16Uiu2HAm7SR36GKBfDrHe71NtXcc7NWBk8Wmwx3TQauum7WADxxP"}'
2025-02-11 14:56:07.935 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40034/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:56:07.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:56:07.942 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:56:08.042 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 14:56:08.043 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23662/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:56:08.045 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739285767935907328,"ephemeral":false}]'
2025-02-11 14:56:08.048 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:56:08.049 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:56:08.049 DEBUG [src.node.waku_node] Stopping container with id 75e422ddf26b
2025-02-11 14:56:08.630 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:56:08.631 DEBUG [src.node.waku_node] Stopping container with id 1b31a63d3a05
2025-02-11 14:56:09.395 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:56:09.397 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:56:09.402 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:56:09.404 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
