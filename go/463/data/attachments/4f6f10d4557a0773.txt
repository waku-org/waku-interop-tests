2025-02-11 14:55:12.418 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:55:12.419 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-11_14-55-12__d3cd8e7d-5fa0-4b76-b941-38c2357b1142
2025-02-11 14:55:12.419 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:55:12.419 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 14:55:12.419 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 14:55:12.425 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:55:12.425 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-55-12__d3cd8e7d-5fa0-4b76-b941-38c2357b1142__wakuorg_nwaku:latest.log
2025-02-11 14:55:12.425 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:55:12.425 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:55:12.427 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:55:12.427 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.34.111
2025-02-11 14:55:12.427 DEBUG [src.node.docker_mananger] Generated ports ['28216', '28217', '28218', '28219', '28220']
2025-02-11 14:55:12.427 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:55:12.427 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:55:12.427 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:55:12.428 DEBUG [src.node.docker_mananger] docker run -i -t -p 28216:28216 -p 28217:28217 -p 28218:28218 -p 28219:28219 -p 28220:28220 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28218 --rest-port=28216 --tcp-port=28217 --discv5-udp-port=28219 --rest-address=0.0.0.0 --nat=extip:172.18.34.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eea1c2dfb866bd63c75bdca59dae5eebe0a75d8d2daee48b5ab30a42aedf0e03 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28220 --metrics-logging=true --relay=true --filter=true
2025-02-11 14:55:12.647 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.34.111 waku 0763655f042dd3fd8b51a192c78461cf9a99d0ae7e89561f45c7310748367a7d
2025-02-11 14:55:12.697 DEBUG [src.node.docker_mananger] Container started with ID 0763655f042d. Setting up logs at ./log/docker/node1_2025-02-11_14-55-12__d3cd8e7d-5fa0-4b76-b941-38c2357b1142__wakuorg_nwaku:latest.log
2025-02-11 14:55:12.698 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28216
2025-02-11 14:55:12.698 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:55:13.198 ERROR [src.node.docker_mananger] Max retries reached for container 2dfb9ba21208. Exiting log stream.
2025-02-11 14:55:13.699 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28216/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:13.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:55:13.702 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:55:13.702 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28216/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:13.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.111/tcp/28217/p2p/16Uiu2HAmPc8wtrag1NCF8QomvDczzBz7fL81gGatUY4tnkoqGuLs","/ip4/172.18.34.111/tcp/28218/ws/p2p/16Uiu2HAmPc8wtrag1NCF8QomvDczzBz7fL81gGatUY4tnkoqGuLs"],"enrUri":"enr:-L24QHrlMk2g64WsOdAY2b4MDVCawMzs7WIPsAsyleUYz4umQLRhZd02cGpYQSwyK1x2wiQlGq0YNnDJAx3KsQ3Pbn0CgmlkgnY0gmlwhKwSIm-KbXVsdGlhZGRyc5YACASsEiJvBm45AAoErBIibwZuOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDorWItQGmvLij3r-e8_hNefBrn8fWgkMF1hvoZKdyeCiDdGNwgm45g3VkcIJuO4V3YWt1MgU"}'
2025-02-11 14:55:13.704 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:55:13.705 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 14:55:13.711 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:55:13.711 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_14-55-12__d3cd8e7d-5fa0-4b76-b941-38c2357b1142__wakuorg_go-waku:latest.log
2025-02-11 14:55:13.711 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:55:13.711 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:55:13.712 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:55:13.712 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.245.111
2025-02-11 14:55:13.712 DEBUG [src.node.docker_mananger] Generated ports ['54099', '54100', '54101', '54102', '54103']
2025-02-11 14:55:13.713 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:55:13.713 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:55:13.713 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:55:13.713 DEBUG [src.node.docker_mananger] docker run -i -t -p 54099:54099 -p 54100:54100 -p 54101:54101 -p 54102:54102 -p 54103:54103 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=54101 --rest-port=54099 --tcp-port=54100 --discv5-udp-port=54102 --rest-address=0.0.0.0 --nat=extip:172.18.245.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c910c90f1c9b7bdb20e15edcabeefc2b8ceb61afcace49eef2df2cf4ded9df14 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QHrlMk2g64WsOdAY2b4MDVCawMzs7WIPsAsyleUYz4umQLRhZd02cGpYQSwyK1x2wiQlGq0YNnDJAx3KsQ3Pbn0CgmlkgnY0gmlwhKwSIm-KbXVsdGlhZGRyc5YACASsEiJvBm45AAoErBIibwZuOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDorWItQGmvLij3r-e8_hNefBrn8fWgkMF1hvoZKdyeCiDdGNwgm45g3VkcIJuO4V3YWt1MgU --filternode=/ip4/172.18.34.111/tcp/28217/p2p/16Uiu2HAmPc8wtrag1NCF8QomvDczzBz7fL81gGatUY4tnkoqGuLs --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:55:13.943 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.245.111 waku f70f8377bb2a03fc73f2f329f8e8a39ea07d6c44d1808a8246ae291c08672ef1
2025-02-11 14:55:13.999 DEBUG [src.node.docker_mananger] Container started with ID f70f8377bb2a. Setting up logs at ./log/docker/node2_2025-02-11_14-55-12__d3cd8e7d-5fa0-4b76-b941-38c2357b1142__wakuorg_go-waku:latest.log
2025-02-11 14:55:14.001 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 54099
2025-02-11 14:55:14.001 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:55:15.003 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54099/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:15.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QEGg9mEltVzMDKBFgMQJyaeyaXcb6kgdRXWcNW8kT8jUJ6k6jzdYtVfpd0d1oBERoFXrRfL_L7RpGLXsR9KA2MmGAZT1gdRFgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQISkBV9cmRBKzc3E1zyPcM9GhQ26RE5gzDJUg1858fy_oN0Y3CC01SDdWRwgtNWhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/54100/p2p/16Uiu2HAkvg8kHcCLdxkTitikhQU5JYK4muDo7yqAKkRAcwD5a2gV","/ip4/127.0.0.1/tcp/54101/ws/p2p/16Uiu2HAkvg8kHcCLdxkTitikhQU5JYK4muDo7yqAKkRAcwD5a2gV","/ip4/172.17.0.3/tcp/54100/p2p/16Uiu2HAkvg8kHcCLdxkTitikhQU5JYK4muDo7yqAKkRAcwD5a2gV","/ip4/172.17.0.3/tcp/54101/ws/p2p/16Uiu2HAkvg8kHcCLdxkTitikhQU5JYK4muDo7yqAKkRAcwD5a2gV"]}'
2025-02-11 14:55:15.005 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:55:15.006 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54099/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.34.111/tcp/28217/p2p/16Uiu2HAmPc8wtrag1NCF8QomvDczzBz7fL81gGatUY4tnkoqGuLs", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:55:15.007 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:55:15.008 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 14:55:15.008 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28216/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:55:15.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:55:15.012 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54099/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e932a1f4-827f-47f3-a239-af4832d5ce54", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 14:55:15.017 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e932a1f4-827f-47f3-a239-af4832d5ce54","statusDesc":"OK"}'
2025-02-11 14:55:15.019 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54099/filter/v2/subscriptions/83f2cf99-2621-46a1-85d4-37afc1827e29" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:15.023 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"83f2cf99-2621-46a1-85d4-37afc1827e29","statusDesc":"OK"}'
2025-02-11 14:55:15.026 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:55:15.026 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:55:15.027 DEBUG [src.node.waku_node] Stopping container with id 0763655f042d
2025-02-11 14:55:15.599 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:55:15.599 DEBUG [src.node.waku_node] Stopping container with id f70f8377bb2a
2025-02-11 14:55:16.413 ERROR [src.node.docker_mananger] Max retries reached for container 0763655f042d. Exiting log stream.
2025-02-11 14:55:16.478 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:55:16.480 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:55:16.485 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:55:16.487 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
