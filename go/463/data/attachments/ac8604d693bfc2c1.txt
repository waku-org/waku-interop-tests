2025-02-11 14:57:05.316 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:57:05.317 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_multiple_overlapping_content_topics with id: 2025-02-11_14-57-05__de603b3f-642f-4238-a13f-2322ab5199c8
2025-02-11 14:57:05.317 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:57:05.317 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 14:57:05.317 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 14:57:05.323 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:57:05.323 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-57-05__de603b3f-642f-4238-a13f-2322ab5199c8__wakuorg_nwaku:latest.log
2025-02-11 14:57:05.324 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:57:05.324 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:57:05.325 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:57:05.325 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.165.189
2025-02-11 14:57:05.325 DEBUG [src.node.docker_mananger] Generated ports ['27132', '27133', '27134', '27135', '27136']
2025-02-11 14:57:05.326 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:57:05.326 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:57:05.326 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:57:05.326 DEBUG [src.node.docker_mananger] docker run -i -t -p 27132:27132 -p 27133:27133 -p 27134:27134 -p 27135:27135 -p 27136:27136 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27134 --rest-port=27132 --tcp-port=27133 --discv5-udp-port=27135 --rest-address=0.0.0.0 --nat=extip:172.18.165.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=322aacf7a6b5e5762b80f2cefffafb7a3a47dce1b396ecd7e7f7fca7ebfeb24d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27136 --metrics-logging=true --relay=true --filter=true
2025-02-11 14:57:05.558 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.165.189 waku 5b5ace9b531d81ec31a598e4a531308885e63a3899ed9bbe9258925403b0085e
2025-02-11 14:57:05.614 DEBUG [src.node.docker_mananger] Container started with ID 5b5ace9b531d. Setting up logs at ./log/docker/node1_2025-02-11_14-57-05__de603b3f-642f-4238-a13f-2322ab5199c8__wakuorg_nwaku:latest.log
2025-02-11 14:57:05.615 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27132
2025-02-11 14:57:05.617 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:57:06.121 ERROR [src.node.docker_mananger] Max retries reached for container fc8899646e80. Exiting log stream.
2025-02-11 14:57:06.618 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27132/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:06.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:57:06.621 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:57:06.622 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27132/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:06.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.189/tcp/27133/p2p/16Uiu2HAkvUsmyqnZ65YppVK8F4gVR4oPiHNijtXyD7Ycz9saApFv","/ip4/172.18.165.189/tcp/27134/ws/p2p/16Uiu2HAkvUsmyqnZ65YppVK8F4gVR4oPiHNijtXyD7Ycz9saApFv"],"enrUri":"enr:-L24QDqAQ66lmmGeMzF2BpmBdEZTLBp8x9Jbmxr2ofadBwKWPh3_hWKVctZiwMp0tRvkW3Kojs_vrbUg8vVvTdmdk68CgmlkgnY0gmlwhKwSpb2KbXVsdGlhZGRyc5YACASsEqW9Bmn9AAoErBKlvQZp_t0DgnJzhQADAQAAiXNlY3AyNTZrMaECD63Ee4eposBGFt9K1TVld77xceMOXg-YT6Va4_OUqjWDdGNwgmn9g3VkcIJp_4V3YWt1MgU"}'
2025-02-11 14:57:06.624 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:57:06.624 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 14:57:06.630 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:57:06.630 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_14-57-05__de603b3f-642f-4238-a13f-2322ab5199c8__wakuorg_go-waku:latest.log
2025-02-11 14:57:06.630 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:57:06.631 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:57:06.632 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:57:06.632 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.151.161
2025-02-11 14:57:06.632 DEBUG [src.node.docker_mananger] Generated ports ['33544', '33545', '33546', '33547', '33548']
2025-02-11 14:57:06.632 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:57:06.632 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:57:06.632 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:57:06.633 DEBUG [src.node.docker_mananger] docker run -i -t -p 33544:33544 -p 33545:33545 -p 33546:33546 -p 33547:33547 -p 33548:33548 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33546 --rest-port=33544 --tcp-port=33545 --discv5-udp-port=33547 --rest-address=0.0.0.0 --nat=extip:172.18.151.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=326b8cc7eb2ff4cbe7c1db16d53cf2f08cf88fedbb819ae063ad2eef6bd642a5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QDqAQ66lmmGeMzF2BpmBdEZTLBp8x9Jbmxr2ofadBwKWPh3_hWKVctZiwMp0tRvkW3Kojs_vrbUg8vVvTdmdk68CgmlkgnY0gmlwhKwSpb2KbXVsdGlhZGRyc5YACASsEqW9Bmn9AAoErBKlvQZp_t0DgnJzhQADAQAAiXNlY3AyNTZrMaECD63Ee4eposBGFt9K1TVld77xceMOXg-YT6Va4_OUqjWDdGNwgmn9g3VkcIJp_4V3YWt1MgU --filternode=/ip4/172.18.165.189/tcp/27133/p2p/16Uiu2HAkvUsmyqnZ65YppVK8F4gVR4oPiHNijtXyD7Ycz9saApFv --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:57:06.860 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.151.161 waku 815992b6d0831941b58ddecc748b209cf628a6fef1fb3a76c4429dd291e22fa8
2025-02-11 14:57:06.909 DEBUG [src.node.docker_mananger] Container started with ID 815992b6d083. Setting up logs at ./log/docker/node2_2025-02-11_14-57-05__de603b3f-642f-4238-a13f-2322ab5199c8__wakuorg_go-waku:latest.log
2025-02-11 14:57:06.911 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 33544
2025-02-11 14:57:06.911 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:57:07.912 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33544/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:07.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJ-yO_ARWa15Jlf9ScNzI-J6nRs7N8VCChXHHJ_-FPifPWjtFZRPof0Nd1BknCvmk4yR1xyLRcR8jcQkVocUNC2GAZT1g41cgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQJMsmpOF8btmIcFlzKJ8VLTQkk7SfzghP4rCOj-1We17YN0Y3CCgwmDdWRwgoMLhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/33545/p2p/16Uiu2HAkzb4kpjganS7wg4ihbm9cp799pAL6VMsAXvk6T6xQfntC","/ip4/127.0.0.1/tcp/33546/ws/p2p/16Uiu2HAkzb4kpjganS7wg4ihbm9cp799pAL6VMsAXvk6T6xQfntC","/ip4/172.17.0.3/tcp/33545/p2p/16Uiu2HAkzb4kpjganS7wg4ihbm9cp799pAL6VMsAXvk6T6xQfntC","/ip4/172.17.0.3/tcp/33546/ws/p2p/16Uiu2HAkzb4kpjganS7wg4ihbm9cp799pAL6VMsAXvk6T6xQfntC"]}'
2025-02-11 14:57:07.914 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:57:07.915 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33544/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.165.189/tcp/27133/p2p/16Uiu2HAkvUsmyqnZ65YppVK8F4gVR4oPiHNijtXyD7Ycz9saApFv", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:57:07.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:57:07.918 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27132/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:57:07.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:57:07.922 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33544/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "83b3ae01-b750-44f0-aff7-65abd32bb4f9", "contentFilters": ["Hello World!", "1234567890", "{\"key\": \"value\"}"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 14:57:07.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"83b3ae01-b750-44f0-aff7-65abd32bb4f9","statusDesc":"OK"}'
2025-02-11 14:57:07.928 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27132/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:57:07.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:57:07.931 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33544/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1c632837-378a-4c9c-93fc-b747c4954598", "contentFilters": ["1234567890", "{\"key\": \"value\"}", "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 14:57:07.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1c632837-378a-4c9c-93fc-b747c4954598","statusDesc":"OK"}'
2025-02-11 14:57:07.937 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27132/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:57:07.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:57:07.945 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:57:08.045 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 14:57:08.046 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33544/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:08.048 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"Hello World!","version":0,"timestamp":1739285827937383424,"ephemeral":false}]'
2025-02-11 14:57:08.050 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27132/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:57:08.057 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:57:08.058 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:57:08.158 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 14:57:08.158 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33544/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/1234567890" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:08.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1739285828050060288,"ephemeral":false}]'
2025-02-11 14:57:08.162 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27132/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "{\"key\": \"value\"}", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:57:08.170 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:57:08.170 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:57:08.270 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 14:57:08.270 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33544/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%7B%22key%22%3A%20%22value%22%7D" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:08.272 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"{\\"key\\": \\"value\\"}","version":0,"timestamp":1739285828162664448,"ephemeral":false}]'
2025-02-11 14:57:08.274 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27132/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:57:08.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:57:08.281 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:57:08.382 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 14:57:08.382 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33544/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%E8%BF%99%E6%98%AF%E4%B8%80%E4%BA%9B%E4%B8%AD%E6%96%87" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:08.384 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xba\x9b\xe4\xb8\xad\xe6\x96\x87","version":0,"timestamp":1739285828274331136,"ephemeral":false}]'
2025-02-11 14:57:08.387 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:57:08.388 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:57:08.388 DEBUG [src.node.waku_node] Stopping container with id 5b5ace9b531d
2025-02-11 14:57:08.952 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:57:08.952 DEBUG [src.node.waku_node] Stopping container with id 815992b6d083
2025-02-11 14:57:09.457 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:57:09.458 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:57:09.464 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:57:09.467 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
