2025-02-11 14:57:59.309 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:57:59.309 DEBUG [tests.conftest] Running test: test_light_push_with_valid_timestamps with id: 2025-02-11_14-57-59__4f785205-846d-4ad6-a99f-d40dd2d55846
2025-02-11 14:57:59.309 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:57:59.310 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 14:57:59.316 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:57:59.316 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_14-57-59__4f785205-846d-4ad6-a99f-d40dd2d55846__wakuorg_nwaku:latest.log
2025-02-11 14:57:59.317 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:57:59.317 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:57:59.318 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:57:59.318 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.134.116
2025-02-11 14:57:59.318 DEBUG [src.node.docker_mananger] Generated ports ['11984', '11985', '11986', '11987', '11988']
2025-02-11 14:57:59.319 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:57:59.319 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:57:59.319 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:57:59.319 DEBUG [src.node.docker_mananger] docker run -i -t -p 11984:11984 -p 11985:11985 -p 11986:11986 -p 11987:11987 -p 11988:11988 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11986 --rest-port=11984 --tcp-port=11985 --discv5-udp-port=11987 --rest-address=0.0.0.0 --nat=extip:172.18.134.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4c9c10edf6bb5acdb21e3609f94bcddedfd9abbf653afa2aadaf31dc4a1c2e7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11988 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 14:57:59.552 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.134.116 waku b927f6a4e44b2cd94e55f6b6487f569189a597720fa9ddaa076128f9b3115790
2025-02-11 14:57:59.558 ERROR [src.node.docker_mananger] Max retries reached for container c918e426644e. Exiting log stream.
2025-02-11 14:57:59.602 DEBUG [src.node.docker_mananger] Container started with ID b927f6a4e44b. Setting up logs at ./log/docker/receiving_node1_2025-02-11_14-57-59__4f785205-846d-4ad6-a99f-d40dd2d55846__wakuorg_nwaku:latest.log
2025-02-11 14:57:59.602 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11984
2025-02-11 14:57:59.603 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:58:00.124 ERROR [src.node.docker_mananger] Max retries reached for container 2779c949ee14. Exiting log stream.
2025-02-11 14:58:00.603 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:00.606 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:58:00.607 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:58:00.607 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:00.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.134.116/tcp/11985/p2p/16Uiu2HAmESJVW58zcZUK1eMV1Ye3pevVt5r5ojJ8yZV2Ce3TY4Cc","/ip4/172.18.134.116/tcp/11986/ws/p2p/16Uiu2HAmESJVW58zcZUK1eMV1Ye3pevVt5r5ojJ8yZV2Ce3TY4Cc"],"enrUri":"enr:-L24QJNKHtfvx5CfbrZsddFEP3PxcAs-WrrTzDgnVd-vxQ7jLhB9m-fv1HgT0mX4QRfdh_G06AWqnla-K_bExsov9oECgmlkgnY0gmlwhKwShnSKbXVsdGlhZGRyc5YACASsEoZ0Bi7RAAoErBKGdAYu0t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGndWClHr0zSGjO8RsUcezMATCyDgD_ZzynqaJjqlF4WDdGNwgi7Rg3VkcIIu04V3YWt1Mgk"}'
2025-02-11 14:58:00.609 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:58:00.616 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:58:00.616 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_14-57-59__4f785205-846d-4ad6-a99f-d40dd2d55846__wakuorg_nwaku:latest.log
2025-02-11 14:58:00.616 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:58:00.616 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:58:00.618 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:58:00.618 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.6
2025-02-11 14:58:00.618 DEBUG [src.node.docker_mananger] Generated ports ['20389', '20390', '20391', '20392', '20393']
2025-02-11 14:58:00.619 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:58:00.619 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:58:00.619 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:58:00.619 DEBUG [src.node.docker_mananger] docker run -i -t -p 20389:20389 -p 20390:20390 -p 20391:20391 -p 20392:20392 -p 20393:20393 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20391 --rest-port=20389 --tcp-port=20390 --discv5-udp-port=20392 --rest-address=0.0.0.0 --nat=extip:172.18.125.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=00de4fcdceeb719437a08dbf133795bce00289b601a008636ab7cb1cdf50de2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20393 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 14:58:00.862 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.6 waku c3037ef7f03cc048e08fbac4b76f77d316ca502bcbe807f10fde5c8a95152903
2025-02-11 14:58:00.908 DEBUG [src.node.docker_mananger] Container started with ID c3037ef7f03c. Setting up logs at ./log/docker/receiving_node2_2025-02-11_14-57-59__4f785205-846d-4ad6-a99f-d40dd2d55846__wakuorg_nwaku:latest.log
2025-02-11 14:58:00.908 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20389
2025-02-11 14:58:00.909 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:58:01.910 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:01.913 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:58:01.913 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:58:01.913 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:01.915 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.6/tcp/20390/p2p/16Uiu2HAm3D5ztCC1rqHojoc7J7xZ3aA1LdcoGWcwWoaQR1PfmKSq","/ip4/172.18.125.6/tcp/20391/ws/p2p/16Uiu2HAm3D5ztCC1rqHojoc7J7xZ3aA1LdcoGWcwWoaQR1PfmKSq"],"enrUri":"enr:-L24QHgh_tE7BDyOUL-3a0SRqNwK-KvHIf-YESAeFKdBcRfNAh_FSXgdYD7LI0hdUUAsueZsU01MryXD4hU7KQg8ouYCgmlkgnY0gmlwhKwSfQaKbXVsdGlhZGRyc5YACASsEn0GBk-mAAoErBJ9BgZPp90DgnJzhQADAQAAiXNlY3AyNTZrMaECc6QaYANPw2IARTSkqQyNNMYP0LvLaYDArt2GOFQEamKDdGNwgk-mg3VkcIJPqIV3YWt1MgE"}'
2025-02-11 14:58:01.916 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:58:01.916 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20389/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.134.116/tcp/11985/p2p/16Uiu2HAmESJVW58zcZUK1eMV1Ye3pevVt5r5ojJ8yZV2Ce3TY4Cc"]'
2025-02-11 14:58:01.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:58:01.968 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:58:01.968 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_14-57-59__4f785205-846d-4ad6-a99f-d40dd2d55846__wakuorg_go-waku:latest.log
2025-02-11 14:58:01.968 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:58:01.968 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:58:01.970 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:58:01.970 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.74.54
2025-02-11 14:58:01.970 DEBUG [src.node.docker_mananger] Generated ports ['57073', '57074', '57075', '57076', '57077']
2025-02-11 14:58:01.970 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:58:01.971 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:58:01.971 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:58:01.971 DEBUG [src.node.docker_mananger] docker run -i -t -p 57073:57073 -p 57074:57074 -p 57075:57075 -p 57076:57076 -p 57077:57077 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=57075 --rest-port=57073 --tcp-port=57074 --discv5-udp-port=57076 --rest-address=0.0.0.0 --nat=extip:172.18.74.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4bd2fdbd9d9aad7ea07b9df3aefaf4a330c9f6ddae6cdc8bdea5b51d0bb8cdda --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QJNKHtfvx5CfbrZsddFEP3PxcAs-WrrTzDgnVd-vxQ7jLhB9m-fv1HgT0mX4QRfdh_G06AWqnla-K_bExsov9oECgmlkgnY0gmlwhKwShnSKbXVsdGlhZGRyc5YACASsEoZ0Bi7RAAoErBKGdAYu0t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGndWClHr0zSGjO8RsUcezMATCyDgD_ZzynqaJjqlF4WDdGNwgi7Rg3VkcIIu04V3YWt1Mgk --lightpushnode=/ip4/172.18.134.116/tcp/11985/p2p/16Uiu2HAmESJVW58zcZUK1eMV1Ye3pevVt5r5ojJ8yZV2Ce3TY4Cc --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:58:02.205 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.74.54 waku bad3b625ca60f5d03579ef3dec34fb27ca226dd4fcda0eb7998850d8cbcda641
2025-02-11 14:58:02.258 DEBUG [src.node.docker_mananger] Container started with ID bad3b625ca60. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_14-57-59__4f785205-846d-4ad6-a99f-d40dd2d55846__wakuorg_go-waku:latest.log
2025-02-11 14:58:02.259 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 57073
2025-02-11 14:58:02.260 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:58:03.261 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57073/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QLBHFt_hUNW6CX-X-0Q88e8wyp9GGzGYcDJO_r9lYgAwZ8R7v3LtR9BxhfK2O-mUyO6yuJZZ8AzZUkmsfAWOiwuGAZT1hGWMgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNEWVtvPd1caDNXSLTJohcbhGsX623YgiO_i2olMgQStoN0Y3CC3vKDdWRwgt70hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/57074/p2p/16Uiu2HAmHFo6sQMrGtotKwiYNP4gG5Juef4ecZGQm7YWtTiMacWq","/ip4/127.0.0.1/tcp/57075/ws/p2p/16Uiu2HAmHFo6sQMrGtotKwiYNP4gG5Juef4ecZGQm7YWtTiMacWq","/ip4/172.17.0.4/tcp/57074/p2p/16Uiu2HAmHFo6sQMrGtotKwiYNP4gG5Juef4ecZGQm7YWtTiMacWq","/ip4/172.17.0.4/tcp/57075/ws/p2p/16Uiu2HAmHFo6sQMrGtotKwiYNP4gG5Juef4ecZGQm7YWtTiMacWq"]}'
2025-02-11 14:58:03.263 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:58:03.264 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.134.116/tcp/11985/p2p/16Uiu2HAmESJVW58zcZUK1eMV1Ye3pevVt5r5ojJ8yZV2Ce3TY4Cc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:58:03.266 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:58:03.266 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.125.6/tcp/20390/p2p/16Uiu2HAm3D5ztCC1rqHojoc7J7xZ3aA1LdcoGWcwWoaQR1PfmKSq", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:58:03.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:58:03.283 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11984/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:58:03.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:58:03.289 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20389/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:58:03.292 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:58:03.295 DEBUG [tests.light_push.test_publish] Running test with timestamp Now
2025-02-11 14:58:03.295 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:58:03.295 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739285651434033408}}'
2025-02-11 14:58:03.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:58:03.305 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:58:03.405 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.405 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739285651434033408,"ephemeral":false}]'
2025-02-11 14:58:03.409 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.410 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739285651434033408,"ephemeral":false}]'
2025-02-11 14:58:03.413 DEBUG [tests.light_push.test_publish] Running test with timestamp Far future
2025-02-11 14:58:03.414 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:58:03.414 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 2054645651434020096}}'
2025-02-11 14:58:03.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:58:03.421 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:58:03.521 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.521 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054645651434020096,"ephemeral":false}]'
2025-02-11 14:58:03.526 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.526 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054645651434020096,"ephemeral":false}]'
2025-02-11 14:58:03.529 DEBUG [tests.light_push.test_publish] Running test with timestamp Recent past
2025-02-11 14:58:03.530 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:58:03.530 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739282051434020096}}'
2025-02-11 14:58:03.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:58:03.537 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:58:03.638 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.638 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739282051434020096,"ephemeral":false}]'
2025-02-11 14:58:03.642 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.642 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739282051434020096,"ephemeral":false}]'
2025-02-11 14:58:03.646 DEBUG [tests.light_push.test_publish] Running test with timestamp Near future
2025-02-11 14:58:03.647 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:58:03.647 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739289251434020096}}'
2025-02-11 14:58:03.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:58:03.654 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:58:03.754 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.755 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.757 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739289251434020096,"ephemeral":false}]'
2025-02-11 14:58:03.759 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.759 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739289251434020096,"ephemeral":false}]'
2025-02-11 14:58:03.763 DEBUG [tests.light_push.test_publish] Running test with timestamp Positive number
2025-02-11 14:58:03.763 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:58:03.763 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1}}'
2025-02-11 14:58:03.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:58:03.771 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:58:03.871 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.871 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-11 14:58:03.876 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.876 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.878 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-11 14:58:03.880 DEBUG [tests.light_push.test_publish] Running test with timestamp Negative number
2025-02-11 14:58:03.880 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:58:03.880 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": -1}}'
2025-02-11 14:58:03.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:58:03.889 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:58:03.990 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.990 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.993 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-11 14:58:03.994 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:03.994 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:03.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-11 14:58:03.998 DEBUG [tests.light_push.test_publish] Running test with timestamp DST change
2025-02-11 14:58:03.999 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:58:03.999 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1583632800000000000}}'
2025-02-11 14:58:04.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:58:04.006 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:58:04.107 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:04.107 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:04.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-11 14:58:04.111 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:04.111 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:04.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-11 14:58:04.115 DEBUG [tests.light_push.test_publish] Running test with timestamp Missing
2025-02-11 14:58:04.115 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:58:04.116 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57073/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": null}}'
2025-02-11 14:58:04.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:58:04.124 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:58:04.224 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:04.225 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:04.228 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
2025-02-11 14:58:04.229 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:58:04.229 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20389/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:04.231 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
2025-02-11 14:58:04.234 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:58:04.235 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:58:04.236 DEBUG [src.node.waku_node] Stopping container with id b927f6a4e44b
2025-02-11 14:58:04.842 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:58:04.842 DEBUG [src.node.waku_node] Stopping container with id c3037ef7f03c
2025-02-11 14:58:05.656 ERROR [src.node.docker_mananger] Max retries reached for container b927f6a4e44b. Exiting log stream.
2025-02-11 14:58:05.939 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:58:05.941 DEBUG [src.node.waku_node] Stopping container with id bad3b625ca60
2025-02-11 14:58:06.485 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:58:06.486 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:58:06.495 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:58:06.504 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:58:06.507 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
