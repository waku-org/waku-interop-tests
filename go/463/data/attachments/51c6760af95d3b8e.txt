2025-02-11 14:55:36.133 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:55:36.134 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-11_14-55-36__f1461ead-240f-45bd-9680-03c7a5ecbfe2
2025-02-11 14:55:36.135 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:55:36.135 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 14:55:36.136 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 14:55:36.136 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 14:55:36.136 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 14:55:36.145 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:55:36.145 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-55-36__f1461ead-240f-45bd-9680-03c7a5ecbfe2__wakuorg_nwaku:latest.log
2025-02-11 14:55:36.145 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:55:36.145 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:55:36.146 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:55:36.147 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.100.127
2025-02-11 14:55:36.147 DEBUG [src.node.docker_mananger] Generated ports ['28128', '28129', '28130', '28131', '28132']
2025-02-11 14:55:36.147 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:55:36.147 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:55:36.147 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:55:36.147 DEBUG [src.node.docker_mananger] docker run -i -t -p 28128:28128 -p 28129:28129 -p 28130:28130 -p 28131:28131 -p 28132:28132 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28130 --rest-port=28128 --tcp-port=28129 --discv5-udp-port=28131 --rest-address=0.0.0.0 --nat=extip:172.18.100.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cec5badd51ca519e9aebccffdacb0cbea611bcf2aa72cec5d97dce8d6637e5bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28132 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 14:55:36.370 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.100.127 waku 00ba9a3a1eed50325961ef5b3f1d7dc96972e40553307bf6350a4c8604cf72fa
2025-02-11 14:55:36.419 DEBUG [src.node.docker_mananger] Container started with ID 00ba9a3a1eed. Setting up logs at ./log/docker/node1_2025-02-11_14-55-36__f1461ead-240f-45bd-9680-03c7a5ecbfe2__wakuorg_nwaku:latest.log
2025-02-11 14:55:36.420 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28128
2025-02-11 14:55:36.420 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:55:36.446 ERROR [src.node.docker_mananger] Max retries reached for container a81ebe49cd70. Exiting log stream.
2025-02-11 14:55:36.950 ERROR [src.node.docker_mananger] Max retries reached for container 21eb85c7549a. Exiting log stream.
2025-02-11 14:55:37.420 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28128/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:37.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:55:37.423 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:55:37.423 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28128/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:37.425 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.127/tcp/28129/p2p/16Uiu2HAmMSHrZMTRnvm5Ffg7ZuUtS17it2bSBprE3YYiN4svdFqh","/ip4/172.18.100.127/tcp/28130/ws/p2p/16Uiu2HAmMSHrZMTRnvm5Ffg7ZuUtS17it2bSBprE3YYiN4svdFqh"],"enrUri":"enr:-L24QMHJE0o9iG_ZgPaB9tvpILGICGchhu1EMr9SmcSs8AQhO9hb9G-XxVQuJJbCxTSfBZQaxKuNVsM-G_Wi2d-3MWECgmlkgnY0gmlwhKwSZH-KbXVsdGlhZGRyc5YACASsEmR_Bm3hAAoErBJkfwZt4t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgnhso5tGtRU61XZBO5n2lugu2cMC599Lt7pNEsrtmHCDdGNwgm3hg3VkcIJt44V3YWt1Mgk"}'
2025-02-11 14:55:37.426 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:55:37.432 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:55:37.432 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-55-36__f1461ead-240f-45bd-9680-03c7a5ecbfe2__wakuorg_nwaku:latest.log
2025-02-11 14:55:37.432 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:55:37.432 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:55:37.433 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:55:37.434 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.75.89
2025-02-11 14:55:37.434 DEBUG [src.node.docker_mananger] Generated ports ['10317', '10318', '10319', '10320', '10321']
2025-02-11 14:55:37.434 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:55:37.434 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:55:37.434 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:55:37.434 DEBUG [src.node.docker_mananger] docker run -i -t -p 10317:10317 -p 10318:10318 -p 10319:10319 -p 10320:10320 -p 10321:10321 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10319 --rest-port=10317 --tcp-port=10318 --discv5-udp-port=10320 --rest-address=0.0.0.0 --nat=extip:172.18.75.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdcefcdb31eb38dc716d9df5f8a44cc4bde74cfe98dd4bd17495cefc6f488ecd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10321 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QMHJE0o9iG_ZgPaB9tvpILGICGchhu1EMr9SmcSs8AQhO9hb9G-XxVQuJJbCxTSfBZQaxKuNVsM-G_Wi2d-3MWECgmlkgnY0gmlwhKwSZH-KbXVsdGlhZGRyc5YACASsEmR_Bm3hAAoErBJkfwZt4t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgnhso5tGtRU61XZBO5n2lugu2cMC599Lt7pNEsrtmHCDdGNwgm3hg3VkcIJt44V3YWt1Mgk
2025-02-11 14:55:37.663 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.75.89 waku 6857bea592d63e91890f222567d1ec5ab6a84489dcc24c1fd3d6a090d37f73a8
2025-02-11 14:55:37.713 DEBUG [src.node.docker_mananger] Container started with ID 6857bea592d6. Setting up logs at ./log/docker/node1_2025-02-11_14-55-36__f1461ead-240f-45bd-9680-03c7a5ecbfe2__wakuorg_nwaku:latest.log
2025-02-11 14:55:37.714 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10317
2025-02-11 14:55:37.715 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:55:38.716 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10317/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:38.722 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:55:38.723 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:55:38.725 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10317/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:38.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.89/tcp/10318/p2p/16Uiu2HAm3wopz4U4QYmwWiXnDeB53uTW2fDXGTQ255F4vTbkwwzH","/ip4/172.18.75.89/tcp/10319/ws/p2p/16Uiu2HAm3wopz4U4QYmwWiXnDeB53uTW2fDXGTQ255F4vTbkwwzH"],"enrUri":"enr:-L24QBKJpHyRcUvT06hNdC0ctwSIU4TcZDmlJBgmP3NiUE_-Bg256ZwQG5lKbaPD7NUR6hMLOhiw4P9_JXZVtO7_zIwCgmlkgnY0gmlwhKwSS1mKbXVsdGlhZGRyc5YACASsEktZBihOAAoErBJLWQYoT90DgnJzhQADAQAAiXNlY3AyNTZrMaECfpXLKEPokeU5l3fVaaOBhZW3qFQxFF57Pq3s6P4ZJfKDdGNwgihOg3VkcIIoUIV3YWt1MgE"}'
2025-02-11 14:55:38.732 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:55:38.740 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:55:38.740 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-55-36__f1461ead-240f-45bd-9680-03c7a5ecbfe2__wakuorg_go-waku:latest.log
2025-02-11 14:55:38.740 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:55:38.740 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:55:38.741 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:55:38.742 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.192.142
2025-02-11 14:55:38.742 DEBUG [src.node.docker_mananger] Generated ports ['37230', '37231', '37232', '37233', '37234']
2025-02-11 14:55:38.742 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:55:38.742 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:55:38.742 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:55:38.742 DEBUG [src.node.docker_mananger] docker run -i -t -p 37230:37230 -p 37231:37231 -p 37232:37232 -p 37233:37233 -p 37234:37234 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=37232 --rest-port=37230 --tcp-port=37231 --discv5-udp-port=37233 --rest-address=0.0.0.0 --nat=extip:172.18.192.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d03ee53e7bab4fc0bbd007652c880f08a4ca31ef5b6b84def0f05dfdd8b9f764 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QMHJE0o9iG_ZgPaB9tvpILGICGchhu1EMr9SmcSs8AQhO9hb9G-XxVQuJJbCxTSfBZQaxKuNVsM-G_Wi2d-3MWECgmlkgnY0gmlwhKwSZH-KbXVsdGlhZGRyc5YACASsEmR_Bm3hAAoErBJkfwZt4t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgnhso5tGtRU61XZBO5n2lugu2cMC599Lt7pNEsrtmHCDdGNwgm3hg3VkcIJt44V3YWt1Mgk --lightpushnode=/ip4/172.18.100.127/tcp/28129/p2p/16Uiu2HAmMSHrZMTRnvm5Ffg7ZuUtS17it2bSBprE3YYiN4svdFqh --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:55:38.977 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.192.142 waku 8a92a95964fec8fee733235f7a12935258ee4035b0e4707e757d20add7d4f5c4
2025-02-11 14:55:39.039 DEBUG [src.node.docker_mananger] Container started with ID 8a92a95964fe. Setting up logs at ./log/docker/node1_2025-02-11_14-55-36__f1461ead-240f-45bd-9680-03c7a5ecbfe2__wakuorg_go-waku:latest.log
2025-02-11 14:55:39.040 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 37230
2025-02-11 14:55:39.041 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:55:40.042 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37230/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:40.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QDCEU7iiEZRX3u2r8lm1AElUrFA0NoZfVZeZsUeD8DkmIeGBUnN4F6KKf1gyNrqhGUtVYTebF6SAaor8FCPfKQWGAZT1gjYMgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQKfnZr2Lky3MexBr7BbS7PvGyG4NtzknVIPebdXIvWrpoN0Y3CCkW-DdWRwgpFxhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/37231/p2p/16Uiu2HAm6AkC2QEuk5AbM5JRwzihq9XUDhXN2ktZBxY77gficAkV","/ip4/127.0.0.1/tcp/37232/ws/p2p/16Uiu2HAm6AkC2QEuk5AbM5JRwzihq9XUDhXN2ktZBxY77gficAkV","/ip4/172.17.0.4/tcp/37231/p2p/16Uiu2HAm6AkC2QEuk5AbM5JRwzihq9XUDhXN2ktZBxY77gficAkV","/ip4/172.17.0.4/tcp/37232/ws/p2p/16Uiu2HAm6AkC2QEuk5AbM5JRwzihq9XUDhXN2ktZBxY77gficAkV"]}'
2025-02-11 14:55:40.045 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:55:40.045 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28128/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:55:40.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:55:40.049 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10317/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:55:40.056 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:55:40.057 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:55:40.057 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37230/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739285740057346560}}'
2025-02-11 14:55:47.039 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:55:47.041 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:55:47.141 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:55:47.141 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28128/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:47.144 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739285740057346560,"ephemeral":false}]'
2025-02-11 14:55:47.145 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:55:47.145 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10317/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:47.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739285740057346560,"ephemeral":false}]'
2025-02-11 14:55:47.151 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:55:47.152 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:55:47.152 DEBUG [src.node.waku_node] Stopping container with id 00ba9a3a1eed
2025-02-11 14:55:47.677 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:55:47.677 DEBUG [src.node.waku_node] Stopping container with id 6857bea592d6
2025-02-11 14:55:48.489 ERROR [src.node.docker_mananger] Max retries reached for container 00ba9a3a1eed. Exiting log stream.
2025-02-11 14:55:49.157 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:55:49.158 DEBUG [src.node.waku_node] Stopping container with id 8a92a95964fe
2025-02-11 14:55:49.683 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:55:49.685 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:55:49.694 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:55:49.702 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:55:49.705 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
