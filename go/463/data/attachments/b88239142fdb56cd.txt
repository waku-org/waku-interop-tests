2025-02-11 14:55:54.565 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:55:54.566 DEBUG [tests.conftest] Running test: test_filter_ping_without_request_id with id: 2025-02-11_14-55-54__84888933-555f-4240-b4bc-464f047a88d8
2025-02-11 14:55:54.566 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:55:54.566 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 14:55:54.566 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 14:55:54.572 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:55:54.572 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-55-54__84888933-555f-4240-b4bc-464f047a88d8__wakuorg_nwaku:latest.log
2025-02-11 14:55:54.572 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:55:54.572 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:55:54.574 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:55:54.574 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.112.245
2025-02-11 14:55:54.574 DEBUG [src.node.docker_mananger] Generated ports ['17399', '17400', '17401', '17402', '17403']
2025-02-11 14:55:54.574 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:55:54.574 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:55:54.574 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:55:54.575 DEBUG [src.node.docker_mananger] docker run -i -t -p 17399:17399 -p 17400:17400 -p 17401:17401 -p 17402:17402 -p 17403:17403 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17401 --rest-port=17399 --tcp-port=17400 --discv5-udp-port=17402 --rest-address=0.0.0.0 --nat=extip:172.18.112.245 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0b0e31fd78180aa215a6d2daae4aa1ec4eeddb1caf0c9a7dbbe4e46ac531e9fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17403 --metrics-logging=true --relay=true --filter=true
2025-02-11 14:55:54.804 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.112.245 waku bd65df79612cb260de835cd6f30eeec45c910a3ab883612fccce8d11f53d6b88
2025-02-11 14:55:54.852 DEBUG [src.node.docker_mananger] Container started with ID bd65df79612c. Setting up logs at ./log/docker/node1_2025-02-11_14-55-54__84888933-555f-4240-b4bc-464f047a88d8__wakuorg_nwaku:latest.log
2025-02-11 14:55:54.853 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17399
2025-02-11 14:55:54.854 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:55:54.860 ERROR [src.node.docker_mananger] Max retries reached for container 2dd0466b8656. Exiting log stream.
2025-02-11 14:55:55.372 ERROR [src.node.docker_mananger] Max retries reached for container a2e45f42c685. Exiting log stream.
2025-02-11 14:55:55.854 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17399/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:55.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:55:55.858 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:55:55.858 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17399/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:55.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.245/tcp/17400/p2p/16Uiu2HAmDt8sDBM3ipwkyM8V7t9kCjecFgTwqsFvgSjFFy3WTpek","/ip4/172.18.112.245/tcp/17401/ws/p2p/16Uiu2HAmDt8sDBM3ipwkyM8V7t9kCjecFgTwqsFvgSjFFy3WTpek"],"enrUri":"enr:-L24QGpStoy16QotTtixGDZNvYQQ3QyrKTMwHTBdw_4lN47Sa9s3dcJBtsOArR7uHGPFB_-IoYtqNhYL0aKnHYHuV1cCgmlkgnY0gmlwhKwScPWKbXVsdGlhZGRyc5YACASsEnD1BkP4AAoErBJw9QZD-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEjndyvO3yFzRHwOApcxUVH6qqvYKyLc2DsFECdB6D0mDdGNwgkP4g3VkcIJD-oV3YWt1MgU"}'
2025-02-11 14:55:55.860 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:55:55.861 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 14:55:55.867 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:55:55.867 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_14-55-54__84888933-555f-4240-b4bc-464f047a88d8__wakuorg_go-waku:latest.log
2025-02-11 14:55:55.867 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:55:55.868 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:55:55.869 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:55:55.869 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.42
2025-02-11 14:55:55.869 DEBUG [src.node.docker_mananger] Generated ports ['36615', '36616', '36617', '36618', '36619']
2025-02-11 14:55:55.870 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:55:55.870 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:55:55.870 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:55:55.870 DEBUG [src.node.docker_mananger] docker run -i -t -p 36615:36615 -p 36616:36616 -p 36617:36617 -p 36618:36618 -p 36619:36619 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36617 --rest-port=36615 --tcp-port=36616 --discv5-udp-port=36618 --rest-address=0.0.0.0 --nat=extip:172.18.95.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=34c4b7ffc3ea537a6965efaffb43aa980ff1cebec04fc978cd6cccda1bd1aec4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QGpStoy16QotTtixGDZNvYQQ3QyrKTMwHTBdw_4lN47Sa9s3dcJBtsOArR7uHGPFB_-IoYtqNhYL0aKnHYHuV1cCgmlkgnY0gmlwhKwScPWKbXVsdGlhZGRyc5YACASsEnD1BkP4AAoErBJw9QZD-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEjndyvO3yFzRHwOApcxUVH6qqvYKyLc2DsFECdB6D0mDdGNwgkP4g3VkcIJD-oV3YWt1MgU --filternode=/ip4/172.18.112.245/tcp/17400/p2p/16Uiu2HAmDt8sDBM3ipwkyM8V7t9kCjecFgTwqsFvgSjFFy3WTpek --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:55:56.100 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.42 waku 9095543db893a379865530e730f170d03b0147b8fafddf56582ec2f05182f42b
2025-02-11 14:55:56.144 DEBUG [src.node.docker_mananger] Container started with ID 9095543db893. Setting up logs at ./log/docker/node2_2025-02-11_14-55-54__84888933-555f-4240-b4bc-464f047a88d8__wakuorg_go-waku:latest.log
2025-02-11 14:55:56.146 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 36615
2025-02-11 14:55:56.146 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:55:57.146 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36615/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:57.149 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHCrDOb-NfZw-eIACjunztGLId8761zqHNexXeWa0ZuFD20UoGa1A0yGz9kT42HLrg6MdmW1IK32w2fFpB71tt-GAZT1gnj2gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQM6F-fuhrr98d_xdTczhDO6hMh5HmXdzpQuxB-DObDvz4N0Y3CCjwiDdWRwgo8KhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/36616/p2p/16Uiu2HAmGZm947AMpSkwo1dribErVWJ8a6Ym31iHVL9cVvRNunWz","/ip4/127.0.0.1/tcp/36617/ws/p2p/16Uiu2HAmGZm947AMpSkwo1dribErVWJ8a6Ym31iHVL9cVvRNunWz","/ip4/172.17.0.3/tcp/36616/p2p/16Uiu2HAmGZm947AMpSkwo1dribErVWJ8a6Ym31iHVL9cVvRNunWz","/ip4/172.17.0.3/tcp/36617/ws/p2p/16Uiu2HAmGZm947AMpSkwo1dribErVWJ8a6Ym31iHVL9cVvRNunWz"]}'
2025-02-11 14:55:57.149 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:55:57.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36615/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.112.245/tcp/17400/p2p/16Uiu2HAmDt8sDBM3ipwkyM8V7t9kCjecFgTwqsFvgSjFFy3WTpek", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:55:57.151 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:55:57.152 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 14:55:57.152 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17399/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:55:57.155 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:55:57.155 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36615/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a13a4797-5164-46e2-b8f3-dbe4e8130607", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 14:55:57.161 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"a13a4797-5164-46e2-b8f3-dbe4e8130607","statusDesc":"OK"}'
2025-02-11 14:55:57.162 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36615/filter/v2/subscriptions/" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:55:57.164 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36615/filter/v2/subscriptions/. Response content: b'{"requestId":"","statusDesc":"bad request id"}'
2025-02-11 14:55:57.167 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:55:57.168 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:55:57.168 DEBUG [src.node.waku_node] Stopping container with id bd65df79612c
2025-02-11 14:55:57.778 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:55:57.778 DEBUG [src.node.waku_node] Stopping container with id 9095543db893
2025-02-11 14:55:58.592 ERROR [src.node.docker_mananger] Max retries reached for container bd65df79612c. Exiting log stream.
2025-02-11 14:55:58.641 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:55:58.642 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:55:58.646 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:55:58.650 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
