2025-02-11 14:59:36.019 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:59:36.019 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-11_14-59-36__61b20346-e177-4606-b816-200d7a6315d2
2025-02-11 14:59:36.019 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:59:36.020 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 14:59:36.026 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:59:36.027 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_14-59-36__61b20346-e177-4606-b816-200d7a6315d2__wakuorg_nwaku:latest.log
2025-02-11 14:59:36.027 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:59:36.027 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:59:36.028 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:59:36.029 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.124.141
2025-02-11 14:59:36.029 DEBUG [src.node.docker_mananger] Generated ports ['11012', '11013', '11014', '11015', '11016']
2025-02-11 14:59:36.029 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:59:36.029 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:59:36.029 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:59:36.029 DEBUG [src.node.docker_mananger] docker run -i -t -p 11012:11012 -p 11013:11013 -p 11014:11014 -p 11015:11015 -p 11016:11016 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11014 --rest-port=11012 --tcp-port=11013 --discv5-udp-port=11015 --rest-address=0.0.0.0 --nat=extip:172.18.124.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a3df3bce6db6a8dcee9f5b90c4d3c12cecaa9cf4e5b13b0aedb8fe033ab8ca6e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11016 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 14:59:36.253 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.124.141 waku 5e2a95053da4f873003112a2bc3fe510ffc582c88765bc1758f8b9db68b1c969
2025-02-11 14:59:36.301 DEBUG [src.node.docker_mananger] Container started with ID 5e2a95053da4. Setting up logs at ./log/docker/receiving_node1_2025-02-11_14-59-36__61b20346-e177-4606-b816-200d7a6315d2__wakuorg_nwaku:latest.log
2025-02-11 14:59:36.302 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11012
2025-02-11 14:59:36.302 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:59:36.320 ERROR [src.node.docker_mananger] Max retries reached for container 188fc6397968. Exiting log stream.
2025-02-11 14:59:36.817 ERROR [src.node.docker_mananger] Max retries reached for container b0e6408ff527. Exiting log stream.
2025-02-11 14:59:37.302 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11012/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:37.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:59:37.306 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:59:37.306 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11012/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:37.308 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.141/tcp/11013/p2p/16Uiu2HAmMmQGdekK9TmBy6cc2cnhJJ6LdGejeRnVtzXyVkk65PCL","/ip4/172.18.124.141/tcp/11014/ws/p2p/16Uiu2HAmMmQGdekK9TmBy6cc2cnhJJ6LdGejeRnVtzXyVkk65PCL"],"enrUri":"enr:-L24QJPSvGSDF7igdvitx-QGuf7AjDj8fDAXBLkci0haxrWJYkVeq2uirKBOKXnJWbAh5r58herrkuGqcHs3vQEwkMkCgmlkgnY0gmlwhKwSfI2KbXVsdGlhZGRyc5YACASsEnyNBisFAAoErBJ8jQYrBt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDh122mgLi_9xSFJvTjGscMwSh5kVIM187u5RBZEps4jmDdGNwgisFg3VkcIIrB4V3YWt1Mgk"}'
2025-02-11 14:59:37.308 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:59:37.315 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:59:37.315 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_14-59-36__61b20346-e177-4606-b816-200d7a6315d2__wakuorg_nwaku:latest.log
2025-02-11 14:59:37.315 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:59:37.316 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:59:37.317 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:59:37.317 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.238.122
2025-02-11 14:59:37.317 DEBUG [src.node.docker_mananger] Generated ports ['15249', '15250', '15251', '15252', '15253']
2025-02-11 14:59:37.317 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:59:37.318 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:59:37.318 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:59:37.318 DEBUG [src.node.docker_mananger] docker run -i -t -p 15249:15249 -p 15250:15250 -p 15251:15251 -p 15252:15252 -p 15253:15253 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15251 --rest-port=15249 --tcp-port=15250 --discv5-udp-port=15252 --rest-address=0.0.0.0 --nat=extip:172.18.238.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc4156999e56ccc7bc299423c21ed60c24dbb2e5c3d2bbb36cdeb5312babfdde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15253 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 14:59:37.550 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.238.122 waku c333c0f00c7538339515713990f6bb0f0412bcf25896bef1dbd2acff871e0676
2025-02-11 14:59:37.596 DEBUG [src.node.docker_mananger] Container started with ID c333c0f00c75. Setting up logs at ./log/docker/receiving_node2_2025-02-11_14-59-36__61b20346-e177-4606-b816-200d7a6315d2__wakuorg_nwaku:latest.log
2025-02-11 14:59:37.597 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15249
2025-02-11 14:59:37.597 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:59:38.598 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15249/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:38.601 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:59:38.601 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:59:38.601 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15249/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:38.604 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.122/tcp/15250/p2p/16Uiu2HAmME3YMUTfkK9YjR7DMivpAgHJaooDb11y9hyb1P2Zcuts","/ip4/172.18.238.122/tcp/15251/ws/p2p/16Uiu2HAmME3YMUTfkK9YjR7DMivpAgHJaooDb11y9hyb1P2Zcuts"],"enrUri":"enr:-L24QJO_hRrw5tOvQ7tnoEeqlePBVxUu3aWa84qa1p_j4u0bRILswedXC_JCwilCFl-xEkXj0Tgf8HHlaa0WioRb-4sCgmlkgnY0gmlwhKwS7nqKbXVsdGlhZGRyc5YACASsEu56BjuSAAoErBLuegY7k90DgnJzhQADAQAAiXNlY3AyNTZrMaEDf1VFGObX-rOXlXu2Y_4xDmGotOduQMbC5uN_Qlq-faiDdGNwgjuSg3VkcII7lIV3YWt1MgE"}'
2025-02-11 14:59:38.604 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:59:38.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15249/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.124.141/tcp/11013/p2p/16Uiu2HAmMmQGdekK9TmBy6cc2cnhJJ6LdGejeRnVtzXyVkk65PCL"]'
2025-02-11 14:59:38.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:59:38.654 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:59:38.654 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_14-59-36__61b20346-e177-4606-b816-200d7a6315d2__wakuorg_go-waku:latest.log
2025-02-11 14:59:38.655 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:59:38.655 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:59:38.656 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:59:38.656 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.156.156
2025-02-11 14:59:38.656 DEBUG [src.node.docker_mananger] Generated ports ['20925', '20926', '20927', '20928', '20929']
2025-02-11 14:59:38.657 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:59:38.657 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:59:38.657 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:59:38.657 DEBUG [src.node.docker_mananger] docker run -i -t -p 20925:20925 -p 20926:20926 -p 20927:20927 -p 20928:20928 -p 20929:20929 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=20927 --rest-port=20925 --tcp-port=20926 --discv5-udp-port=20928 --rest-address=0.0.0.0 --nat=extip:172.18.156.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ddda6f636dd806befb83b6f5bdbaadd0ad0a8663cbf1ea6704aad5dfc7b60fd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QJPSvGSDF7igdvitx-QGuf7AjDj8fDAXBLkci0haxrWJYkVeq2uirKBOKXnJWbAh5r58herrkuGqcHs3vQEwkMkCgmlkgnY0gmlwhKwSfI2KbXVsdGlhZGRyc5YACASsEnyNBisFAAoErBJ8jQYrBt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDh122mgLi_9xSFJvTjGscMwSh5kVIM187u5RBZEps4jmDdGNwgisFg3VkcIIrB4V3YWt1Mgk --lightpushnode=/ip4/172.18.124.141/tcp/11013/p2p/16Uiu2HAmMmQGdekK9TmBy6cc2cnhJJ6LdGejeRnVtzXyVkk65PCL --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:59:38.897 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.156.156 waku b8a05ef670cc22b1d09cab35f2b2f1dbfe390db168b9eaf85210b277480cb946
2025-02-11 14:59:38.953 DEBUG [src.node.docker_mananger] Container started with ID b8a05ef670cc. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_14-59-36__61b20346-e177-4606-b816-200d7a6315d2__wakuorg_go-waku:latest.log
2025-02-11 14:59:38.954 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 20925
2025-02-11 14:59:38.954 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:59:39.955 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20925/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:39.957 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJY-9_qUf0exszrGuyQokUK3HCFGXiIKfBMlJtuj2MVCFMoPZLWtzrt6DS115Y_uBn2gMLqqhpxPbQzuAUD3-SiGAZT1hd8_gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQP9eHUaLKuBJYOWsZDi12dMswo29addtzQmDXza2U6O24N0Y3CCUb6DdWRwglHAhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/20926/p2p/16Uiu2HAmViS2mdLRgY78edRnaB7VLuVWUGNgUTvdThKtY4L4FMei","/ip4/127.0.0.1/tcp/20927/ws/p2p/16Uiu2HAmViS2mdLRgY78edRnaB7VLuVWUGNgUTvdThKtY4L4FMei","/ip4/172.17.0.4/tcp/20926/p2p/16Uiu2HAmViS2mdLRgY78edRnaB7VLuVWUGNgUTvdThKtY4L4FMei","/ip4/172.17.0.4/tcp/20927/ws/p2p/16Uiu2HAmViS2mdLRgY78edRnaB7VLuVWUGNgUTvdThKtY4L4FMei"]}'
2025-02-11 14:59:39.957 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:59:39.958 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20925/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.124.141/tcp/11013/p2p/16Uiu2HAmMmQGdekK9TmBy6cc2cnhJJ6LdGejeRnVtzXyVkk65PCL", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:59:39.959 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:59:39.960 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20925/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.238.122/tcp/15250/p2p/16Uiu2HAmME3YMUTfkK9YjR7DMivpAgHJaooDb11y9hyb1P2Zcuts", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:59:39.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:59:39.978 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11012/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:59:39.983 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:59:39.984 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15249/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:59:39.987 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:59:39.989 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:59:39.989 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20925/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739285979988925696, "version": 2.1}}'
2025-02-11 14:59:39.991 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20925/lightpush/v1/message. Response content: b''
2025-02-11 14:59:39.993 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:59:39.994 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:59:39.994 DEBUG [src.node.waku_node] Stopping container with id 5e2a95053da4
2025-02-11 14:59:40.621 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:59:40.622 DEBUG [src.node.waku_node] Stopping container with id c333c0f00c75
2025-02-11 14:59:41.434 ERROR [src.node.docker_mananger] Max retries reached for container 5e2a95053da4. Exiting log stream.
2025-02-11 14:59:42.165 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:59:42.166 DEBUG [src.node.waku_node] Stopping container with id b8a05ef670cc
2025-02-11 14:59:42.668 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:59:42.670 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:59:42.676 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:59:42.681 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:59:42.684 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
