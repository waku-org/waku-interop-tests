2025-02-11 14:56:45.730 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:56:45.731 DEBUG [tests.conftest] Running test: test_unsubscribe_from_non_subscribed_pubsub_topics with id: 2025-02-11_14-56-45__d806c0af-7f1d-41e9-abc1-af3ef06b425b
2025-02-11 14:56:45.731 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:56:45.731 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 14:56:45.732 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-11 14:56:45.738 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:56:45.738 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-56-45__d806c0af-7f1d-41e9-abc1-af3ef06b425b__wakuorg_nwaku:latest.log
2025-02-11 14:56:45.739 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:56:45.739 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:56:45.740 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:56:45.740 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.75.233
2025-02-11 14:56:45.740 DEBUG [src.node.docker_mananger] Generated ports ['33506', '33507', '33508', '33509', '33510']
2025-02-11 14:56:45.741 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:56:45.741 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:56:45.741 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:56:45.741 DEBUG [src.node.docker_mananger] docker run -i -t -p 33506:33506 -p 33507:33507 -p 33508:33508 -p 33509:33509 -p 33510:33510 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33508 --rest-port=33506 --tcp-port=33507 --discv5-udp-port=33509 --rest-address=0.0.0.0 --nat=extip:172.18.75.233 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=513aeaa9d2d44f4bff53866ecf666bc4ffe913eefd1ba8af0c42bcca3c21eaaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33510 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-11 14:56:45.973 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.75.233 waku 7f905e1d7375bd2461931ab86a5fb1322859ea2a802e3bac97802930fa98e63e
2025-02-11 14:56:46.009 ERROR [src.node.docker_mananger] Max retries reached for container 5a80b925ad12. Exiting log stream.
2025-02-11 14:56:46.025 DEBUG [src.node.docker_mananger] Container started with ID 7f905e1d7375. Setting up logs at ./log/docker/node1_2025-02-11_14-56-45__d806c0af-7f1d-41e9-abc1-af3ef06b425b__wakuorg_nwaku:latest.log
2025-02-11 14:56:46.026 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33506
2025-02-11 14:56:46.026 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:56:46.535 ERROR [src.node.docker_mananger] Max retries reached for container 7207de9bfa1f. Exiting log stream.
2025-02-11 14:56:47.027 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33506/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:56:47.030 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:56:47.030 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:56:47.030 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33506/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:56:47.032 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.233/tcp/33507/p2p/16Uiu2HAmDsU8SccXmneyepFkw4GeZrE5jXBEjsiD9AZ8dXc7EKtM","/ip4/172.18.75.233/tcp/33508/ws/p2p/16Uiu2HAmDsU8SccXmneyepFkw4GeZrE5jXBEjsiD9AZ8dXc7EKtM"],"enrUri":"enr:-L24QMTAZ2SJ0jAwQm6FbDhMFqk7mdm-ieE_TVr1p9FLvaUidxzyZrQalL0A44IrxjvL6s9t95JD9IuIaVEAYesxgNoCgmlkgnY0gmlwhKwSS-mKbXVsdGlhZGRyc5YACASsEkvpBoLjAAoErBJL6QaC5N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDEg4Q3U0F-Ta3Xk3hQdhc6BqWIhlR1m2Gq06WCuKCD_KDdGNwgoLjg3VkcIKC5YV3YWt1MgU"}'
2025-02-11 14:56:47.033 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:56:47.039 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:56:47.039 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_14-56-45__d806c0af-7f1d-41e9-abc1-af3ef06b425b__wakuorg_go-waku:latest.log
2025-02-11 14:56:47.039 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:56:47.040 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:56:47.041 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:56:47.041 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.58.67
2025-02-11 14:56:47.041 DEBUG [src.node.docker_mananger] Generated ports ['52610', '52611', '52612', '52613', '52614']
2025-02-11 14:56:47.041 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:56:47.042 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:56:47.042 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:56:47.042 DEBUG [src.node.docker_mananger] docker run -i -t -p 52610:52610 -p 52611:52611 -p 52612:52612 -p 52613:52613 -p 52614:52614 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52612 --rest-port=52610 --tcp-port=52611 --discv5-udp-port=52613 --rest-address=0.0.0.0 --nat=extip:172.18.58.67 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=150a9fbf9ceaea1496de388a516ce62fbf4c8fcc9df88c0b406f1ae3ac052bce --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QMTAZ2SJ0jAwQm6FbDhMFqk7mdm-ieE_TVr1p9FLvaUidxzyZrQalL0A44IrxjvL6s9t95JD9IuIaVEAYesxgNoCgmlkgnY0gmlwhKwSS-mKbXVsdGlhZGRyc5YACASsEkvpBoLjAAoErBJL6QaC5N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDEg4Q3U0F-Ta3Xk3hQdhc6BqWIhlR1m2Gq06WCuKCD_KDdGNwgoLjg3VkcIKC5YV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-11 14:56:47.271 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.58.67 waku 0a2ac7496da03034e225dd4eec68571273c30b6084ec728dbd585bab606e6bae
2025-02-11 14:56:47.326 DEBUG [src.node.docker_mananger] Container started with ID 0a2ac7496da0. Setting up logs at ./log/docker/node2_2025-02-11_14-56-45__d806c0af-7f1d-41e9-abc1-af3ef06b425b__wakuorg_go-waku:latest.log
2025-02-11 14:56:47.327 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 52610
2025-02-11 14:56:47.327 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:56:48.327 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52610/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:56:48.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QO4JYAo9tllZHcwdKNzvJNh5XXD8Nm0KcMfU2gxV2-Z2U4o0yFYpb6lAiM4dMURkMm2JlWG375EUjhyq1SR-xn-GAZT1g0DWgmlkgnY0gmlwhKwRAAOCcnOFAAIBAACJc2VjcDI1NmsxoQPD9_IpKruNGDWyY7__YjayFZGyEdaQUYwP1by6ztUmFoN0Y3CCzYODdWRwgs2FhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/52611/p2p/16Uiu2HAmRqy8rtuPmK2t7Bm8ThGpqGykC6RYkyepQ7nioMmzzcvq","/ip4/127.0.0.1/tcp/52612/ws/p2p/16Uiu2HAmRqy8rtuPmK2t7Bm8ThGpqGykC6RYkyepQ7nioMmzzcvq","/ip4/172.17.0.3/tcp/52611/p2p/16Uiu2HAmRqy8rtuPmK2t7Bm8ThGpqGykC6RYkyepQ7nioMmzzcvq","/ip4/172.17.0.3/tcp/52612/ws/p2p/16Uiu2HAmRqy8rtuPmK2t7Bm8ThGpqGykC6RYkyepQ7nioMmzzcvq"]}'
2025-02-11 14:56:48.330 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:56:48.330 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52610/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.75.233/tcp/33507/p2p/16Uiu2HAmDsU8SccXmneyepFkw4GeZrE5jXBEjsiD9AZ8dXc7EKtM", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:56:48.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:56:48.333 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:33506/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-11 14:56:48.337 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:56:48.337 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:52610/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-11 14:56:48.340 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:52610/relay/v1/subscriptions. Response content: b''
2025-02-11 14:56:48.342 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:56:48.345 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/0'
2025-02-11 14:56:48.346 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:56:48.348 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'
2025-02-11 14:56:48.350 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:56:48.352 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/2'
2025-02-11 14:56:48.354 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:56:48.356 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/3'
2025-02-11 14:56:48.358 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:56:48.360 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/4'
2025-02-11 14:56:48.361 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:56:48.364 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/5'
2025-02-11 14:56:48.365 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:56:48.368 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/6'
2025-02-11 14:56:48.369 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:56:48.371 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33506/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/7'
2025-02-11 14:56:48.374 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:56:48.375 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:56:48.375 DEBUG [src.node.waku_node] Stopping container with id 7f905e1d7375
2025-02-11 14:56:48.948 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:56:48.948 DEBUG [src.node.waku_node] Stopping container with id 0a2ac7496da0
2025-02-11 14:56:49.763 ERROR [src.node.docker_mananger] Max retries reached for container 7f905e1d7375. Exiting log stream.
2025-02-11 14:56:49.836 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:56:49.837 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:56:49.841 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:56:49.845 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
