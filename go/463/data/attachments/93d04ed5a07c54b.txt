2025-02-11 14:59:29.248 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:59:29.248 DEBUG [tests.conftest] Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2025-02-11_14-59-29__2814dfa1-792c-48b5-bc9d-0e914e3461af
2025-02-11 14:59:29.248 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:59:29.248 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 14:59:29.255 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:59:29.255 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_14-59-29__2814dfa1-792c-48b5-bc9d-0e914e3461af__wakuorg_nwaku:latest.log
2025-02-11 14:59:29.255 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:59:29.256 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:59:29.257 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:59:29.257 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.219
2025-02-11 14:59:29.257 DEBUG [src.node.docker_mananger] Generated ports ['23128', '23129', '23130', '23131', '23132']
2025-02-11 14:59:29.257 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:59:29.258 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:59:29.258 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:59:29.258 DEBUG [src.node.docker_mananger] docker run -i -t -p 23128:23128 -p 23129:23129 -p 23130:23130 -p 23131:23131 -p 23132:23132 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23130 --rest-port=23128 --tcp-port=23129 --discv5-udp-port=23131 --rest-address=0.0.0.0 --nat=extip:172.18.191.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eddb82c1dfde79a47fdaceddb29a370cb4c8efbe725cbef9ec84b1e516e6e9bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23132 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 14:59:29.489 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.219 waku a26e4f32e60fac2e16ac09e1a6ecd5a8cbb4cd4266666ee378b80383eabd26e1
2025-02-11 14:59:29.530 ERROR [src.node.docker_mananger] Max retries reached for container 812e5409d6ce. Exiting log stream.
2025-02-11 14:59:29.536 DEBUG [src.node.docker_mananger] Container started with ID a26e4f32e60f. Setting up logs at ./log/docker/receiving_node1_2025-02-11_14-59-29__2814dfa1-792c-48b5-bc9d-0e914e3461af__wakuorg_nwaku:latest.log
2025-02-11 14:59:29.536 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23128
2025-02-11 14:59:29.536 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:59:30.045 ERROR [src.node.docker_mananger] Max retries reached for container 32024798b9ea. Exiting log stream.
2025-02-11 14:59:30.537 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23128/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:30.540 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:59:30.540 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:59:30.540 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23128/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:30.543 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.219/tcp/23129/p2p/16Uiu2HAkv3Thy78azAQHQMYztrajVCyhh1yBdv6iPvKqgYrFcyw1","/ip4/172.18.191.219/tcp/23130/ws/p2p/16Uiu2HAkv3Thy78azAQHQMYztrajVCyhh1yBdv6iPvKqgYrFcyw1"],"enrUri":"enr:-L24QDEBoAgPwXWweiYFdb7tx__bMFfMhsgQuKx-DekK628Nb4o9fwz4W9fCmVAxxPpdqVZ2AlWqVHijY0YwYgSD3uICgmlkgnY0gmlwhKwSv9uKbXVsdGlhZGRyc5YACASsEr_bBlpZAAoErBK_2wZaWt0DgnJzhQADAQAAiXNlY3AyNTZrMaECCSsIPEdSe-5IfcX-UCJfZ9_Ev85k0SVALukVagkEjVSDdGNwglpZg3VkcIJaW4V3YWt1Mgk"}'
2025-02-11 14:59:30.543 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:59:30.549 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:59:30.550 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_14-59-29__2814dfa1-792c-48b5-bc9d-0e914e3461af__wakuorg_nwaku:latest.log
2025-02-11 14:59:30.550 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:59:30.550 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:59:30.551 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:59:30.551 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.175.36
2025-02-11 14:59:30.552 DEBUG [src.node.docker_mananger] Generated ports ['35484', '35485', '35486', '35487', '35488']
2025-02-11 14:59:30.552 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:59:30.552 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:59:30.552 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:59:30.552 DEBUG [src.node.docker_mananger] docker run -i -t -p 35484:35484 -p 35485:35485 -p 35486:35486 -p 35487:35487 -p 35488:35488 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35486 --rest-port=35484 --tcp-port=35485 --discv5-udp-port=35487 --rest-address=0.0.0.0 --nat=extip:172.18.175.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0d7d3cea59bf43f9a517f2ade7aada0e4fa5bbfc2ebf594efea8a4dffa19edd5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35488 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 14:59:30.793 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.175.36 waku 188fc6397968c6acce320f38ad2286aa749a05a4d93f0e8ad9cc8bdce59f5fc0
2025-02-11 14:59:30.845 DEBUG [src.node.docker_mananger] Container started with ID 188fc6397968. Setting up logs at ./log/docker/receiving_node2_2025-02-11_14-59-29__2814dfa1-792c-48b5-bc9d-0e914e3461af__wakuorg_nwaku:latest.log
2025-02-11 14:59:30.846 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35484
2025-02-11 14:59:30.846 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:59:31.846 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35484/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:31.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:59:31.849 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:59:31.850 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35484/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:31.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.175.36/tcp/35485/p2p/16Uiu2HAm7QLYCQinmj6XcuTKy6LtEzyrU758R6D5hYM91eESD6gz","/ip4/172.18.175.36/tcp/35486/ws/p2p/16Uiu2HAm7QLYCQinmj6XcuTKy6LtEzyrU758R6D5hYM91eESD6gz"],"enrUri":"enr:-L24QJzOjJaOCz88snnZ6OjyWhtRYuoxNQXZaAQSnQQP0vIxVudw_tR3cj-pmdi-BUPyiYiq8hMLgmegKIqKjKzAbG4CgmlkgnY0gmlwhKwSrySKbXVsdGlhZGRyc5YACASsEq8kBoqdAAoErBKvJAaKnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECsfSuEQtnpnNpTa-RosdOAXmOQKRk-NUorIaqgIpN15ODdGNwgoqdg3VkcIKKn4V3YWt1MgE"}'
2025-02-11 14:59:31.852 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:59:31.852 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35484/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.219/tcp/23129/p2p/16Uiu2HAkv3Thy78azAQHQMYztrajVCyhh1yBdv6iPvKqgYrFcyw1"]'
2025-02-11 14:59:31.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:59:31.901 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:59:31.901 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_14-59-29__2814dfa1-792c-48b5-bc9d-0e914e3461af__wakuorg_go-waku:latest.log
2025-02-11 14:59:31.901 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:59:31.901 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:59:31.903 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:59:31.903 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.48.97
2025-02-11 14:59:31.903 DEBUG [src.node.docker_mananger] Generated ports ['13722', '13723', '13724', '13725', '13726']
2025-02-11 14:59:31.903 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:59:31.903 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:59:31.903 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:59:31.903 DEBUG [src.node.docker_mananger] docker run -i -t -p 13722:13722 -p 13723:13723 -p 13724:13724 -p 13725:13725 -p 13726:13726 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13724 --rest-port=13722 --tcp-port=13723 --discv5-udp-port=13725 --rest-address=0.0.0.0 --nat=extip:172.18.48.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a7ed0d31b37695f212eeb1afecc72ae0c4ae7ae8cd1dd9e4007aff3ff8c06d5a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QDEBoAgPwXWweiYFdb7tx__bMFfMhsgQuKx-DekK628Nb4o9fwz4W9fCmVAxxPpdqVZ2AlWqVHijY0YwYgSD3uICgmlkgnY0gmlwhKwSv9uKbXVsdGlhZGRyc5YACASsEr_bBlpZAAoErBK_2wZaWt0DgnJzhQADAQAAiXNlY3AyNTZrMaECCSsIPEdSe-5IfcX-UCJfZ9_Ev85k0SVALukVagkEjVSDdGNwglpZg3VkcIJaW4V3YWt1Mgk --lightpushnode=/ip4/172.18.191.219/tcp/23129/p2p/16Uiu2HAkv3Thy78azAQHQMYztrajVCyhh1yBdv6iPvKqgYrFcyw1 --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:59:32.141 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.48.97 waku b0e6408ff52712ebffe6b2e56cab5b4bec8ed529c96229a4ec743aa6e5da3559
2025-02-11 14:59:32.200 DEBUG [src.node.docker_mananger] Container started with ID b0e6408ff527. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_14-59-29__2814dfa1-792c-48b5-bc9d-0e914e3461af__wakuorg_go-waku:latest.log
2025-02-11 14:59:32.200 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 13722
2025-02-11 14:59:32.201 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:59:33.201 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13722/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:33.204 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QN_5O4_cKPByjg1kOofQ6wZ7DJL5hFwIhUZFuZh0CORMGM9-3d5aOO6N7zPm3Pj1CSBKON-pnRHsd7AgbVcWuo-GAZT1hcTagmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQJGO_19tQuG4DD4CWvbA0Plz6PlQYVJQ-nHm0uc9rGwTYN0Y3CCNZuDdWRwgjWdhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/13723/p2p/16Uiu2HAkz9qaGon1neGqcQFfKf7qBGdRb2WhGNv4EJ85ASRgEM2C","/ip4/127.0.0.1/tcp/13724/ws/p2p/16Uiu2HAkz9qaGon1neGqcQFfKf7qBGdRb2WhGNv4EJ85ASRgEM2C","/ip4/172.17.0.4/tcp/13723/p2p/16Uiu2HAkz9qaGon1neGqcQFfKf7qBGdRb2WhGNv4EJ85ASRgEM2C","/ip4/172.17.0.4/tcp/13724/ws/p2p/16Uiu2HAkz9qaGon1neGqcQFfKf7qBGdRb2WhGNv4EJ85ASRgEM2C"]}'
2025-02-11 14:59:33.204 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:59:33.205 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13722/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.191.219/tcp/23129/p2p/16Uiu2HAkv3Thy78azAQHQMYztrajVCyhh1yBdv6iPvKqgYrFcyw1", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:59:33.207 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:59:33.207 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13722/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.175.36/tcp/35485/p2p/16Uiu2HAm7QLYCQinmj6XcuTKy6LtEzyrU758R6D5hYM91eESD6gz", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:59:33.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:59:33.225 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23128/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:59:33.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:59:33.231 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35484/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:59:33.235 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:59:33.235 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:59:33.235 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13722/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739285973235615744}}'
2025-02-11 14:59:33.243 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:59:33.244 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 14:59:33.344 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:59:33.345 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23128/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:33.348 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739285973235615744,"ephemeral":false}]'
2025-02-11 14:59:33.349 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 14:59:33.349 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35484/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:33.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739285973235615744,"ephemeral":false}]'
2025-02-11 14:59:33.354 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:59:33.355 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:59:33.355 DEBUG [src.node.waku_node] Stopping container with id a26e4f32e60f
2025-02-11 14:59:33.959 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:59:33.960 DEBUG [src.node.waku_node] Stopping container with id 188fc6397968
2025-02-11 14:59:34.773 ERROR [src.node.docker_mananger] Max retries reached for container a26e4f32e60f. Exiting log stream.
2025-02-11 14:59:35.505 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:59:35.506 DEBUG [src.node.waku_node] Stopping container with id b0e6408ff527
2025-02-11 14:59:35.998 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:59:35.999 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:59:36.007 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:59:36.013 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:59:36.015 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
