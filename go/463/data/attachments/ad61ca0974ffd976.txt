2025-02-11 14:54:53.500 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:54:53.500 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-11_14-54-53__8c81ec0a-3a7d-42b2-a3c1-ce98df029ab2
2025-02-11 14:54:53.500 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:54:53.501 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 14:54:53.507 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:54:53.507 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_14-54-53__8c81ec0a-3a7d-42b2-a3c1-ce98df029ab2__wakuorg_nwaku:latest.log
2025-02-11 14:54:53.508 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:54:53.508 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:54:53.509 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:54:53.509 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.218.244
2025-02-11 14:54:53.509 DEBUG [src.node.docker_mananger] Generated ports ['29289', '29290', '29291', '29292', '29293']
2025-02-11 14:54:53.510 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:54:53.510 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:54:53.510 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:54:53.510 DEBUG [src.node.docker_mananger] docker run -i -t -p 29289:29289 -p 29290:29290 -p 29291:29291 -p 29292:29292 -p 29293:29293 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29291 --rest-port=29289 --tcp-port=29290 --discv5-udp-port=29292 --rest-address=0.0.0.0 --nat=extip:172.18.218.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbed33202c2dc7578e85e881febdcab3fbeaca64f399b17becf1523aaaa7f48b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29293 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 14:54:53.744 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.218.244 waku 9b6af784a8c8cf0c40641c892cbafb58adfc1ed3717def65a42c3eabf7a1ccae
2025-02-11 14:54:53.756 ERROR [src.node.docker_mananger] Max retries reached for container 6951fe84b16b. Exiting log stream.
2025-02-11 14:54:53.797 DEBUG [src.node.docker_mananger] Container started with ID 9b6af784a8c8. Setting up logs at ./log/docker/receiving_node1_2025-02-11_14-54-53__8c81ec0a-3a7d-42b2-a3c1-ce98df029ab2__wakuorg_nwaku:latest.log
2025-02-11 14:54:53.798 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29289
2025-02-11 14:54:53.798 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:54:54.284 ERROR [src.node.docker_mananger] Max retries reached for container aa56b7813c6b. Exiting log stream.
2025-02-11 14:54:54.798 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29289/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:54.802 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:54:54.802 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:54:54.802 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29289/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:54.804 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.244/tcp/29290/p2p/16Uiu2HAm2RXFsxrsoHtSVDd4graQ6Wv5u3JdjsQ4PFsF8BqH3y95","/ip4/172.18.218.244/tcp/29291/ws/p2p/16Uiu2HAm2RXFsxrsoHtSVDd4graQ6Wv5u3JdjsQ4PFsF8BqH3y95"],"enrUri":"enr:-L24QFNuyPOgL01qYffknTtYl3hDr30Z0V7AP3uIb3a9AtcNYa7wctP7i8UwSkRk9ddkfZM45A4iqQwAuMmC8Bi3GT4CgmlkgnY0gmlwhKwS2vSKbXVsdGlhZGRyc5YACASsEtr0BnJqAAoErBLa9AZya90DgnJzhQADAQAAiXNlY3AyNTZrMaECZ_fyHG4IhXWTw-c8Yqt6SBdH0Yn0C9FNcFZ9894S9wSDdGNwgnJqg3VkcIJybIV3YWt1Mgk"}'
2025-02-11 14:54:54.804 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:54:54.811 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:54:54.811 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_14-54-53__8c81ec0a-3a7d-42b2-a3c1-ce98df029ab2__wakuorg_nwaku:latest.log
2025-02-11 14:54:54.811 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:54:54.811 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:54:54.812 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:54:54.813 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.223.253
2025-02-11 14:54:54.813 DEBUG [src.node.docker_mananger] Generated ports ['41897', '41898', '41899', '41900', '41901']
2025-02-11 14:54:54.813 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:54:54.813 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:54:54.813 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:54:54.813 DEBUG [src.node.docker_mananger] docker run -i -t -p 41897:41897 -p 41898:41898 -p 41899:41899 -p 41900:41900 -p 41901:41901 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41899 --rest-port=41897 --tcp-port=41898 --discv5-udp-port=41900 --rest-address=0.0.0.0 --nat=extip:172.18.223.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eccf96b931b7d962e2c92dbc9eb7acf8ca0ef84bf07de77e4e3784759eea1b43 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41901 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 14:54:55.038 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.223.253 waku f6e3e37f6ddaf12bbd130ad66a38d2de6452d03494e42342bb4444621d44768d
2025-02-11 14:54:55.095 DEBUG [src.node.docker_mananger] Container started with ID f6e3e37f6dda. Setting up logs at ./log/docker/receiving_node2_2025-02-11_14-54-53__8c81ec0a-3a7d-42b2-a3c1-ce98df029ab2__wakuorg_nwaku:latest.log
2025-02-11 14:54:55.096 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41897
2025-02-11 14:54:55.096 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:54:56.096 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41897/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:56.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:54:56.100 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:54:56.100 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41897/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:56.102 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.253/tcp/41898/p2p/16Uiu2HAmVmRmT4oJv8FGVSfK6TGaFBp7XDEvinsVYusQaTmtEd5r","/ip4/172.18.223.253/tcp/41899/ws/p2p/16Uiu2HAmVmRmT4oJv8FGVSfK6TGaFBp7XDEvinsVYusQaTmtEd5r"],"enrUri":"enr:-L24QGEUnD_NEkFs4rwIp1vpFn7b-JI4JlIP0pSVpySSdOo3etCA5-oBcV82tQC-FwNtumsSBxcXHCmgvWmmq7i_hnYCgmlkgnY0gmlwhKwS3_2KbXVsdGlhZGRyc5YACASsEt_9BqOqAAoErBLf_Qajq90DgnJzhQADAQAAiXNlY3AyNTZrMaED_jzmtMUQnAb0HudOO9sT7aQZIYSSWyVJ2bujy_p7T-GDdGNwgqOqg3VkcIKjrIV3YWt1MgE"}'
2025-02-11 14:54:56.102 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:54:56.103 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41897/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.218.244/tcp/29290/p2p/16Uiu2HAm2RXFsxrsoHtSVDd4graQ6Wv5u3JdjsQ4PFsF8BqH3y95"]'
2025-02-11 14:54:56.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:54:56.152 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:54:56.152 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_14-54-53__8c81ec0a-3a7d-42b2-a3c1-ce98df029ab2__wakuorg_go-waku:latest.log
2025-02-11 14:54:56.153 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:54:56.153 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:54:56.154 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:54:56.154 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.20.51
2025-02-11 14:54:56.155 DEBUG [src.node.docker_mananger] Generated ports ['57262', '57263', '57264', '57265', '57266']
2025-02-11 14:54:56.155 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:54:56.155 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:54:56.155 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:54:56.155 DEBUG [src.node.docker_mananger] docker run -i -t -p 57262:57262 -p 57263:57263 -p 57264:57264 -p 57265:57265 -p 57266:57266 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=57264 --rest-port=57262 --tcp-port=57263 --discv5-udp-port=57265 --rest-address=0.0.0.0 --nat=extip:172.18.20.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2bbcfd212305ae5bcbf1dcef9fc3ffaa20cf1b6fe2344a0cdbc6769b25eede9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QFNuyPOgL01qYffknTtYl3hDr30Z0V7AP3uIb3a9AtcNYa7wctP7i8UwSkRk9ddkfZM45A4iqQwAuMmC8Bi3GT4CgmlkgnY0gmlwhKwS2vSKbXVsdGlhZGRyc5YACASsEtr0BnJqAAoErBLa9AZya90DgnJzhQADAQAAiXNlY3AyNTZrMaECZ_fyHG4IhXWTw-c8Yqt6SBdH0Yn0C9FNcFZ9894S9wSDdGNwgnJqg3VkcIJybIV3YWt1Mgk --lightpushnode=/ip4/172.18.218.244/tcp/29290/p2p/16Uiu2HAm2RXFsxrsoHtSVDd4graQ6Wv5u3JdjsQ4PFsF8BqH3y95 --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:54:56.402 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.20.51 waku 83b24589fc44d1dbf93ae2c7adee6cfba9ac1da40032dcb31ae17d54a0d2f5cd
2025-02-11 14:54:56.461 DEBUG [src.node.docker_mananger] Container started with ID 83b24589fc44. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_14-54-53__8c81ec0a-3a7d-42b2-a3c1-ce98df029ab2__wakuorg_go-waku:latest.log
2025-02-11 14:54:56.463 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 57262
2025-02-11 14:54:56.463 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:54:57.463 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57262/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:57.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QD1cYNmDqLdKnZqot2BLwalO9RBROlH2dkPykChwAh8eNNEcKxmiCkRa588a5bN3Pxxxr5RSaLCkrtl2Ulc12RWGAZT1gY_AgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQJnFJUL85pbPgAUEib-JC5uqTX2Jco4twazN-whjJxeAYN0Y3CC36-DdWRwgt-xhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/57263/p2p/16Uiu2HAm2N4B9vrupjt6LfZwGLBmouNBPTMaaWWmRudSrVB7w2Fa","/ip4/127.0.0.1/tcp/57264/ws/p2p/16Uiu2HAm2N4B9vrupjt6LfZwGLBmouNBPTMaaWWmRudSrVB7w2Fa","/ip4/172.17.0.4/tcp/57263/p2p/16Uiu2HAm2N4B9vrupjt6LfZwGLBmouNBPTMaaWWmRudSrVB7w2Fa","/ip4/172.17.0.4/tcp/57264/ws/p2p/16Uiu2HAm2N4B9vrupjt6LfZwGLBmouNBPTMaaWWmRudSrVB7w2Fa"]}'
2025-02-11 14:54:57.466 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:54:57.467 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57262/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.218.244/tcp/29290/p2p/16Uiu2HAm2RXFsxrsoHtSVDd4graQ6Wv5u3JdjsQ4PFsF8BqH3y95", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:54:57.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:54:57.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57262/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.223.253/tcp/41898/p2p/16Uiu2HAmVmRmT4oJv8FGVSfK6TGaFBp7XDEvinsVYusQaTmtEd5r", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:54:57.484 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:54:57.486 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29289/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:54:57.491 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:54:57.492 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41897/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:54:57.496 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:54:57.497 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57262/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1739285697497318144}}'
2025-02-11 14:54:57.499 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:57262/lightpush/v1/message. Response content: b'missing Payload field'
2025-02-11 14:54:57.500 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:54:57.501 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:54:57.501 DEBUG [src.node.waku_node] Stopping container with id 9b6af784a8c8
2025-02-11 14:54:58.088 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:54:58.088 DEBUG [src.node.waku_node] Stopping container with id f6e3e37f6dda
2025-02-11 14:54:58.901 ERROR [src.node.docker_mananger] Max retries reached for container 9b6af784a8c8. Exiting log stream.
2025-02-11 14:54:59.596 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:54:59.596 DEBUG [src.node.waku_node] Stopping container with id 83b24589fc44
2025-02-11 14:55:00.123 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:55:00.124 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:55:00.130 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:55:00.137 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:55:00.140 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
