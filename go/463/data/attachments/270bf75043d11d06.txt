2025-02-11 14:58:14.095 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:58:14.095 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_extra_field with id: 2025-02-11_14-58-14__ab5bd027-7ca7-4023-a7e7-eef25b181009
2025-02-11 14:58:14.095 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:58:14.096 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 14:58:14.096 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 14:58:14.102 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:58:14.102 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-58-14__ab5bd027-7ca7-4023-a7e7-eef25b181009__wakuorg_nwaku:latest.log
2025-02-11 14:58:14.102 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:58:14.102 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:58:14.104 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:58:14.104 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.35.225
2025-02-11 14:58:14.104 DEBUG [src.node.docker_mananger] Generated ports ['27197', '27198', '27199', '27200', '27201']
2025-02-11 14:58:14.104 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:58:14.104 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:58:14.104 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:58:14.105 DEBUG [src.node.docker_mananger] docker run -i -t -p 27197:27197 -p 27198:27198 -p 27199:27199 -p 27200:27200 -p 27201:27201 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27199 --rest-port=27197 --tcp-port=27198 --discv5-udp-port=27200 --rest-address=0.0.0.0 --nat=extip:172.18.35.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5389a8fdc4ddbfc440fe9cd22a2b251de5ca9cad8f0405b1e5abfd5dbf728e3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27201 --metrics-logging=true --relay=true --filter=true
2025-02-11 14:58:14.136 ERROR [src.node.docker_mananger] Max retries reached for container 888a2182a7c3. Exiting log stream.
2025-02-11 14:58:14.328 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.35.225 waku f6b3c36021e57a89a41947d64f6124033a29791210bfa1a434b0fedab83ea376
2025-02-11 14:58:14.376 DEBUG [src.node.docker_mananger] Container started with ID f6b3c36021e5. Setting up logs at ./log/docker/node1_2025-02-11_14-58-14__ab5bd027-7ca7-4023-a7e7-eef25b181009__wakuorg_nwaku:latest.log
2025-02-11 14:58:14.376 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27197
2025-02-11 14:58:14.376 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:58:14.895 ERROR [src.node.docker_mananger] Max retries reached for container 19b2ef4ce901. Exiting log stream.
2025-02-11 14:58:15.378 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27197/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:15.381 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:58:15.381 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:58:15.381 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27197/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:15.383 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.225/tcp/27198/p2p/16Uiu2HAmAB7WJR864GVyon2FUXRf3Vz4tVVfdoMCX7vFrogMLAHT","/ip4/172.18.35.225/tcp/27199/ws/p2p/16Uiu2HAmAB7WJR864GVyon2FUXRf3Vz4tVVfdoMCX7vFrogMLAHT"],"enrUri":"enr:-L24QOawFR9DEoaZ6XZTbLmd5knzfNpjygOXL70UXPvvG4YIE0lIWyzrcIe1yPYu-rcfeIKxWdL-kKy3WqYGByW_X7oCgmlkgnY0gmlwhKwSI-GKbXVsdGlhZGRyc5YACASsEiPhBmo-AAoErBIj4QZqP90DgnJzhQADAQAAiXNlY3AyNTZrMaEC2yR0P0_NNxxQMY4RdhFEu7KxkPU1Kkj8mGrgH8rPhZaDdGNwgmo-g3VkcIJqQIV3YWt1MgU"}'
2025-02-11 14:58:15.384 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:58:15.384 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 14:58:15.390 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:58:15.390 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_14-58-14__ab5bd027-7ca7-4023-a7e7-eef25b181009__wakuorg_go-waku:latest.log
2025-02-11 14:58:15.390 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:58:15.391 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:58:15.392 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:58:15.392 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.84
2025-02-11 14:58:15.392 DEBUG [src.node.docker_mananger] Generated ports ['61022', '61023', '61024', '61025', '61026']
2025-02-11 14:58:15.392 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:58:15.392 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:58:15.393 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:58:15.393 DEBUG [src.node.docker_mananger] docker run -i -t -p 61022:61022 -p 61023:61023 -p 61024:61024 -p 61025:61025 -p 61026:61026 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=61024 --rest-port=61022 --tcp-port=61023 --discv5-udp-port=61025 --rest-address=0.0.0.0 --nat=extip:172.18.24.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3da8f7a10dac9e4d1c6ddecfba2216e4c8c9cec897416aca15b64a9884a6f7a7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QOawFR9DEoaZ6XZTbLmd5knzfNpjygOXL70UXPvvG4YIE0lIWyzrcIe1yPYu-rcfeIKxWdL-kKy3WqYGByW_X7oCgmlkgnY0gmlwhKwSI-GKbXVsdGlhZGRyc5YACASsEiPhBmo-AAoErBIj4QZqP90DgnJzhQADAQAAiXNlY3AyNTZrMaEC2yR0P0_NNxxQMY4RdhFEu7KxkPU1Kkj8mGrgH8rPhZaDdGNwgmo-g3VkcIJqQIV3YWt1MgU --filternode=/ip4/172.18.35.225/tcp/27198/p2p/16Uiu2HAmAB7WJR864GVyon2FUXRf3Vz4tVVfdoMCX7vFrogMLAHT --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:58:15.624 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.84 waku 54e875a17d429af853ae5f996899bf9ff56aca27b055903db8f6a0a6cac703d3
2025-02-11 14:58:15.683 DEBUG [src.node.docker_mananger] Container started with ID 54e875a17d42. Setting up logs at ./log/docker/node2_2025-02-11_14-58-14__ab5bd027-7ca7-4023-a7e7-eef25b181009__wakuorg_go-waku:latest.log
2025-02-11 14:58:15.685 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 61022
2025-02-11 14:58:15.685 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:58:16.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61022/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:58:16.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHQJnh7u4c0JhhTpybozFS3NrvrHdB_8pKnTIxCy5msoZsuBsNeYtw_dLTdHfQDgkouir8XynTs7bKAQZGiXZN2GAZT1hJn1gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQMcuyng54ZqxScuIteBtGPIkIYfPjdJ1ybI0lxyHc3HZIN0Y3CC7l-DdWRwgu5hhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/61023/p2p/16Uiu2HAmEb9J3Fych3KxnzpyJtCrabmqQQ63ViiCxXZsSZpCwQvf","/ip4/127.0.0.1/tcp/61024/ws/p2p/16Uiu2HAmEb9J3Fych3KxnzpyJtCrabmqQQ63ViiCxXZsSZpCwQvf","/ip4/172.17.0.3/tcp/61023/p2p/16Uiu2HAmEb9J3Fych3KxnzpyJtCrabmqQQ63ViiCxXZsSZpCwQvf","/ip4/172.17.0.3/tcp/61024/ws/p2p/16Uiu2HAmEb9J3Fych3KxnzpyJtCrabmqQQ63ViiCxXZsSZpCwQvf"]}'
2025-02-11 14:58:16.688 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:58:16.689 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61022/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.35.225/tcp/27198/p2p/16Uiu2HAmAB7WJR864GVyon2FUXRf3Vz4tVVfdoMCX7vFrogMLAHT", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:58:16.690 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:58:16.691 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 14:58:16.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27197/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:58:16.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:58:16.694 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61022/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3eaf67bf-209c-4434-b047-8e5bc96f9826", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 14:58:16.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3eaf67bf-209c-4434-b047-8e5bc96f9826","statusDesc":"OK"}'
2025-02-11 14:58:16.702 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:61022/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
2025-02-11 14:58:16.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-11 14:58:16.709 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:58:16.709 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:58:16.710 DEBUG [src.node.waku_node] Stopping container with id f6b3c36021e5
2025-02-11 14:58:17.298 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:58:17.299 DEBUG [src.node.waku_node] Stopping container with id 54e875a17d42
2025-02-11 14:58:18.125 ERROR [src.node.docker_mananger] Max retries reached for container f6b3c36021e5. Exiting log stream.
2025-02-11 14:58:18.186 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:58:18.188 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:58:18.196 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:58:18.198 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
