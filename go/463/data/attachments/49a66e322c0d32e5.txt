2025-02-11 14:57:44.056 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:57:44.056 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_no_pubsub_topic with id: 2025-02-11_14-57-44__336f6ba3-815d-4259-b5e2-e4a34427025a
2025-02-11 14:57:44.057 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:57:44.057 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 14:57:44.057 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 14:57:44.063 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:57:44.063 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-57-44__336f6ba3-815d-4259-b5e2-e4a34427025a__wakuorg_nwaku:latest.log
2025-02-11 14:57:44.064 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:57:44.064 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:57:44.065 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:57:44.065 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.137.132
2025-02-11 14:57:44.065 DEBUG [src.node.docker_mananger] Generated ports ['4228', '4229', '4230', '4231', '4232']
2025-02-11 14:57:44.066 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:57:44.066 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:57:44.066 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:57:44.066 DEBUG [src.node.docker_mananger] docker run -i -t -p 4228:4228 -p 4229:4229 -p 4230:4230 -p 4231:4231 -p 4232:4232 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4230 --rest-port=4228 --tcp-port=4229 --discv5-udp-port=4231 --rest-address=0.0.0.0 --nat=extip:172.18.137.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0701ad6cdd2370ad54952dfaecdda9b3cae46fc9cdfc51434cba92bbb758b09 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4232 --metrics-logging=true --relay=true --filter=true
2025-02-11 14:57:44.292 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.137.132 waku 8ada3683b16de58747b1fb48a94a820164d2c9221367db4cd56ea256d2f7b01c
2025-02-11 14:57:44.346 DEBUG [src.node.docker_mananger] Container started with ID 8ada3683b16d. Setting up logs at ./log/docker/node1_2025-02-11_14-57-44__336f6ba3-815d-4259-b5e2-e4a34427025a__wakuorg_nwaku:latest.log
2025-02-11 14:57:44.347 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4228
2025-02-11 14:57:44.347 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:57:44.861 ERROR [src.node.docker_mananger] Max retries reached for container e045eadd109f. Exiting log stream.
2025-02-11 14:57:45.347 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4228/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:45.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:57:45.351 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:57:45.351 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4228/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:45.353 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.132/tcp/4229/p2p/16Uiu2HAm1wD6ALFJFPnYj8fZa3FeBnHZUgKbnfkojK8LhmKhKjKt","/ip4/172.18.137.132/tcp/4230/ws/p2p/16Uiu2HAm1wD6ALFJFPnYj8fZa3FeBnHZUgKbnfkojK8LhmKhKjKt"],"enrUri":"enr:-L24QGXVQxRmk1pK41vVjWhFTcDQKqUdqzCuSPx8gAfqKWNATdJqrNLm3u9zWbFltdNzNBxca6cn0o5IdOrGlZtais4CgmlkgnY0gmlwhKwSiYSKbXVsdGlhZGRyc5YACASsEomEBhCFAAoErBKJhAYQht0DgnJzhQADAQAAiXNlY3AyNTZrMaECYLckF0hFM11LwFdfcmGsSd-KGnPVV86oy8yqgGvP6r-DdGNwghCFg3VkcIIQh4V3YWt1MgU"}'
2025-02-11 14:57:45.353 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:57:45.354 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 14:57:45.363 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:57:45.363 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_14-57-44__336f6ba3-815d-4259-b5e2-e4a34427025a__wakuorg_go-waku:latest.log
2025-02-11 14:57:45.363 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:57:45.363 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:57:45.365 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:57:45.365 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.177
2025-02-11 14:57:45.365 DEBUG [src.node.docker_mananger] Generated ports ['18403', '18404', '18405', '18406', '18407']
2025-02-11 14:57:45.365 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:57:45.366 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:57:45.366 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:57:45.366 DEBUG [src.node.docker_mananger] docker run -i -t -p 18403:18403 -p 18404:18404 -p 18405:18405 -p 18406:18406 -p 18407:18407 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=18405 --rest-port=18403 --tcp-port=18404 --discv5-udp-port=18406 --rest-address=0.0.0.0 --nat=extip:172.18.44.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f1fe4bd5dda2cd44c28dd4aee05eca05ca5abc34cfed27bbb61cf5c017bdddcb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QGXVQxRmk1pK41vVjWhFTcDQKqUdqzCuSPx8gAfqKWNATdJqrNLm3u9zWbFltdNzNBxca6cn0o5IdOrGlZtais4CgmlkgnY0gmlwhKwSiYSKbXVsdGlhZGRyc5YACASsEomEBhCFAAoErBKJhAYQht0DgnJzhQADAQAAiXNlY3AyNTZrMaECYLckF0hFM11LwFdfcmGsSd-KGnPVV86oy8yqgGvP6r-DdGNwghCFg3VkcIIQh4V3YWt1MgU --filternode=/ip4/172.18.137.132/tcp/4229/p2p/16Uiu2HAm1wD6ALFJFPnYj8fZa3FeBnHZUgKbnfkojK8LhmKhKjKt --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:57:45.587 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.177 waku 7db674dc4c227bd1bf08b2f069eb2d4e84ec76fb32d59bd90f1a8cafd82675d6
2025-02-11 14:57:45.636 DEBUG [src.node.docker_mananger] Container started with ID 7db674dc4c22. Setting up logs at ./log/docker/node2_2025-02-11_14-57-44__336f6ba3-815d-4259-b5e2-e4a34427025a__wakuorg_go-waku:latest.log
2025-02-11 14:57:45.636 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 18403
2025-02-11 14:57:45.637 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:57:46.637 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18403/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:57:46.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMZ_ck1ITSqTglwW02hvgBkxyiQ2y7L6FZqaYxAAXTy3LQf8q5sHhlLDwFMGCJWSgQmLJ0dn4yBgXdaHt10fvDKGAZT1hCSigmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQIBUnqz3yfCLBaBeXpBxRtghphG55idCpCPYs5Vb3fzQYN0Y3CCR-SDdWRwgkfmhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/18404/p2p/16Uiu2HAkuWqLFr75quyiBaoQUKggMm8CmQ3LyuJTBNDe2pNhVjzp","/ip4/127.0.0.1/tcp/18405/ws/p2p/16Uiu2HAkuWqLFr75quyiBaoQUKggMm8CmQ3LyuJTBNDe2pNhVjzp","/ip4/172.17.0.3/tcp/18404/p2p/16Uiu2HAkuWqLFr75quyiBaoQUKggMm8CmQ3LyuJTBNDe2pNhVjzp","/ip4/172.17.0.3/tcp/18405/ws/p2p/16Uiu2HAkuWqLFr75quyiBaoQUKggMm8CmQ3LyuJTBNDe2pNhVjzp"]}'
2025-02-11 14:57:46.640 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:57:46.640 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18403/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.137.132/tcp/4229/p2p/16Uiu2HAm1wD6ALFJFPnYj8fZa3FeBnHZUgKbnfkojK8LhmKhKjKt", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:57:46.642 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:57:46.642 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 14:57:46.643 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4228/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:57:46.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:57:46.646 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18403/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "78d41b23-9741-4da0-84cc-b2e5f061f322", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 14:57:46.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"78d41b23-9741-4da0-84cc-b2e5f061f322","statusDesc":"OK"}'
2025-02-11 14:57:46.653 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:18403/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto"}'
2025-02-11 14:57:46.654 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:18403/filter/v2/subscriptions. Response content: b''
2025-02-11 14:57:46.657 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:57:46.658 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:57:46.658 DEBUG [src.node.waku_node] Stopping container with id 8ada3683b16d
2025-02-11 14:57:47.248 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:57:47.249 DEBUG [src.node.waku_node] Stopping container with id 7db674dc4c22
2025-02-11 14:57:48.061 ERROR [src.node.docker_mananger] Max retries reached for container 8ada3683b16d. Exiting log stream.
2025-02-11 14:57:48.109 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:57:48.110 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:57:48.114 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:57:48.117 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
