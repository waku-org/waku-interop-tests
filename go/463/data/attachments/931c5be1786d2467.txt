2025-02-11 14:54:15.556 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:54:15.556 DEBUG [tests.conftest] Running test: test_store with id: 2025-02-11_14-54-15__aff3a423-33d3-4b91-9677-d229256bb2b1
2025-02-11 14:54:15.557 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:54:15.557 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 14:54:15.557 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 14:54:15.557 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 14:54:15.558 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 14:54:15.566 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:54:15.566 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-54-15__aff3a423-33d3-4b91-9677-d229256bb2b1__wakuorg_nwaku:latest.log
2025-02-11 14:54:15.566 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:54:15.567 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:54:15.629 DEBUG [src.node.docker_mananger] Network waku created
2025-02-11 14:54:15.629 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.126.150
2025-02-11 14:54:15.629 DEBUG [src.node.docker_mananger] Generated ports ['31939', '31940', '31941', '31942', '31943']
2025-02-11 14:54:15.630 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:54:15.630 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:54:15.630 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:54:15.630 DEBUG [src.node.docker_mananger] docker run -i -t -p 31939:31939 -p 31940:31940 -p 31941:31941 -p 31942:31942 -p 31943:31943 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31941 --rest-port=31939 --tcp-port=31940 --discv5-udp-port=31942 --rest-address=0.0.0.0 --nat=extip:172.18.126.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9cefdb65fb60dbafabafdfeaaf6f3591b8ce7cb98828ac98c8b05e5fa75abfba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31943 --metrics-logging=true --relay=true --store=true
2025-02-11 14:54:17.823 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.126.150 waku 0bb9d597f898583c4bcab44e0ec35970b6bac1fbbce75f18a891c7b31db9a601
2025-02-11 14:54:17.871 DEBUG [src.node.docker_mananger] Container started with ID 0bb9d597f898. Setting up logs at ./log/docker/node1_2025-02-11_14-54-15__aff3a423-33d3-4b91-9677-d229256bb2b1__wakuorg_nwaku:latest.log
2025-02-11 14:54:17.873 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31939
2025-02-11 14:54:17.873 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:54:18.874 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31939/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:18.877 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:54:18.877 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:54:18.877 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31939/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:18.880 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.150/tcp/31940/p2p/16Uiu2HAmS2yYbhJihm6mMGnDo5oKCf2pMJk2dKzaS8RiGK3vWdWu","/ip4/172.18.126.150/tcp/31941/ws/p2p/16Uiu2HAmS2yYbhJihm6mMGnDo5oKCf2pMJk2dKzaS8RiGK3vWdWu"],"enrUri":"enr:-L24QGNQuCJQ7no-qszE0jgzXKK8wODPF9Gz5jfNYmOatxuZI3xTD4hKomNwj6XXy3PSonhKKNEe4LAVtqOAKsvjq_MCgmlkgnY0gmlwhKwSfpaKbXVsdGlhZGRyc5YACASsEn6WBnzEAAoErBJ-lgZ8xd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxsnMMBfaS3l6GTvugeBriqg-7s_fH8Bkh0frjj_J8O6DdGNwgnzEg3VkcIJ8xoV3YWt1MgM"}'
2025-02-11 14:54:18.880 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:54:18.886 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:54:18.886 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_14-54-15__aff3a423-33d3-4b91-9677-d229256bb2b1__wakuorg_go-waku:latest.log
2025-02-11 14:54:18.886 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:54:18.887 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:54:18.888 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:54:18.888 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.47
2025-02-11 14:54:18.888 DEBUG [src.node.docker_mananger] Generated ports ['29102', '29103', '29104', '29105', '29106']
2025-02-11 14:54:18.889 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:54:18.889 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:54:18.889 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:54:18.889 DEBUG [src.node.docker_mananger] docker run -i -t -p 29102:29102 -p 29103:29103 -p 29104:29104 -p 29105:29105 -p 29106:29106 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29104 --rest-port=29102 --tcp-port=29103 --discv5-udp-port=29105 --rest-address=0.0.0.0 --nat=extip:172.18.106.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d1c6fd2b4321aad709bcebd5052f5d16b0daa0f51509c63dcd4f95cefe0127ab --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true --discv5-bootstrap-node=enr:-L24QGNQuCJQ7no-qszE0jgzXKK8wODPF9Gz5jfNYmOatxuZI3xTD4hKomNwj6XXy3PSonhKKNEe4LAVtqOAKsvjq_MCgmlkgnY0gmlwhKwSfpaKbXVsdGlhZGRyc5YACASsEn6WBnzEAAoErBJ-lgZ8xd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxsnMMBfaS3l6GTvugeBriqg-7s_fH8Bkh0frjj_J8O6DdGNwgnzEg3VkcIJ8xoV3YWt1MgM --storenode=/ip4/172.18.126.150/tcp/31940/p2p/16Uiu2HAmS2yYbhJihm6mMGnDo5oKCf2pMJk2dKzaS8RiGK3vWdWu
2025-02-11 14:54:21.585 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.47 waku 24a4ddada6ebffdecd196c29656fcf8a9f9da16cf609555000d303b5a1c7bb4a
2025-02-11 14:54:21.644 DEBUG [src.node.docker_mananger] Container started with ID 24a4ddada6eb. Setting up logs at ./log/docker/node1_2025-02-11_14-54-15__aff3a423-33d3-4b91-9677-d229256bb2b1__wakuorg_go-waku:latest.log
2025-02-11 14:54:21.646 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 29102
2025-02-11 14:54:21.646 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:54:22.647 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29102/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:22.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLfQUcQPpxaVhSDw1p5PpJYsyHqppI_I-wLcMF6qgTwHOrKJ5dgvHpmkqUL6jc39ZKe8husztA-DNPbDSFebcBuGAZT1gQfFgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaED3TiT4vy08HAUJUahwYajzKwvhp10nLEesive19BRoamDdGNwgnGvg3VkcIJxsYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/29103/p2p/16Uiu2HAmTYYVLfprqgH9t4kQ8CSwqPephSbU2GEH7cR2Lkvmcufe","/ip4/127.0.0.1/tcp/29104/ws/p2p/16Uiu2HAmTYYVLfprqgH9t4kQ8CSwqPephSbU2GEH7cR2Lkvmcufe","/ip4/172.17.0.3/tcp/29103/p2p/16Uiu2HAmTYYVLfprqgH9t4kQ8CSwqPephSbU2GEH7cR2Lkvmcufe","/ip4/172.17.0.3/tcp/29104/ws/p2p/16Uiu2HAmTYYVLfprqgH9t4kQ8CSwqPephSbU2GEH7cR2Lkvmcufe"]}'
2025-02-11 14:54:22.649 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:54:22.650 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31939/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:54:22.669 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:54:22.669 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29102/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 14:54:22.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:54:22.673 DEBUG [src.steps.store] Relaying message
2025-02-11 14:54:22.674 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31939/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:54:22.687 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:54:22.687 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 14:54:22.888 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 14:54:22.888 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29102/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:22.893 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"7027ab8b486ab75ded74649e3ce984ee4ed16884bbe91e4fef000696e36f665b","status_code":200,"status_desc":"OK","messages":[{"message_hash":"SPgNyD9Z72U/kZeh0duj0JlnHxYbQ/tofR+mWewwKwQ="}]}'
2025-02-11 14:54:22.896 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:54:22.897 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:54:22.897 DEBUG [src.node.waku_node] Stopping container with id 0bb9d597f898
2025-02-11 14:54:23.477 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:54:23.477 DEBUG [src.node.waku_node] Stopping container with id 24a4ddada6eb
2025-02-11 14:54:24.143 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:54:24.144 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:54:24.154 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:54:24.157 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
