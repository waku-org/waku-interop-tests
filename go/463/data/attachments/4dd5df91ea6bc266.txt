2025-02-11 14:59:15.433 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:59:15.434 DEBUG [tests.conftest] Running test: test_store_node_paused_and_unpaused with id: 2025-02-11_14-59-15__9b73c6a1-64dc-4c34-8ef2-80b05af730d6
2025-02-11 14:59:15.434 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:59:15.434 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 14:59:15.434 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 14:59:15.441 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:59:15.441 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_14-59-15__9b73c6a1-64dc-4c34-8ef2-80b05af730d6__wakuorg_nwaku:latest.log
2025-02-11 14:59:15.441 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:59:15.441 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:59:15.443 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:59:15.443 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.148.251
2025-02-11 14:59:15.443 DEBUG [src.node.docker_mananger] Generated ports ['61998', '61999', '62000', '62001', '62002']
2025-02-11 14:59:15.443 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:59:15.443 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:59:15.443 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:59:15.444 DEBUG [src.node.docker_mananger] docker run -i -t -p 61998:61998 -p 61999:61999 -p 62000:62000 -p 62001:62001 -p 62002:62002 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62000 --rest-port=61998 --tcp-port=61999 --discv5-udp-port=62001 --rest-address=0.0.0.0 --nat=extip:172.18.148.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=463b9e382516e1dc3a8afa2c09a0ff1ee053b66ca3ffd3e8d328d2677bce9e1f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62002 --metrics-logging=true --store=true --relay=true
2025-02-11 14:59:15.676 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.148.251 waku 4165afe6a4e6483b38ece50efc60ac1dcb51353aa0e91e15bc01d7081696e6e9
2025-02-11 14:59:15.726 DEBUG [src.node.docker_mananger] Container started with ID 4165afe6a4e6. Setting up logs at ./log/docker/publishing_node1_2025-02-11_14-59-15__9b73c6a1-64dc-4c34-8ef2-80b05af730d6__wakuorg_nwaku:latest.log
2025-02-11 14:59:15.728 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61998
2025-02-11 14:59:15.728 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:59:15.740 ERROR [src.node.docker_mananger] Max retries reached for container 0de42d7a499f. Exiting log stream.
2025-02-11 14:59:16.239 ERROR [src.node.docker_mananger] Max retries reached for container 52e7f1df4baa. Exiting log stream.
2025-02-11 14:59:16.729 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61998/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:16.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:59:16.732 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:59:16.732 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61998/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:16.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.251/tcp/61999/p2p/16Uiu2HAmBHwhAU9Bi2wN7rPMd3G7iut6aRV5LsWnHheD2fPdREva","/ip4/172.18.148.251/tcp/62000/ws/p2p/16Uiu2HAmBHwhAU9Bi2wN7rPMd3G7iut6aRV5LsWnHheD2fPdREva"],"enrUri":"enr:-L24QFoKEKqhd0JYI27Hz3-KkK1TV-hhjqk8dty5GvC60FT2TRfTZeHxXSQPDTCzKucnU_6UT1Zg53-DH7KvtHPcuuICgmlkgnY0gmlwhKwSlPuKbXVsdGlhZGRyc5YACASsEpT7BvIvAAoErBKU-wbyMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC68AchdbOb7fXNQGSOBV5sOtHkGNVEQqQSKhTBPGrsreDdGNwgvIvg3VkcILyMYV3YWt1MgM"}'
2025-02-11 14:59:16.734 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:59:16.741 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:59:16.741 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_14-59-15__9b73c6a1-64dc-4c34-8ef2-80b05af730d6__wakuorg_go-waku:latest.log
2025-02-11 14:59:16.741 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:59:16.741 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:59:16.743 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:59:16.743 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.40.167
2025-02-11 14:59:16.743 DEBUG [src.node.docker_mananger] Generated ports ['62323', '62324', '62325', '62326', '62327']
2025-02-11 14:59:16.743 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:59:16.743 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:59:16.743 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:59:16.743 DEBUG [src.node.docker_mananger] docker run -i -t -p 62323:62323 -p 62324:62324 -p 62325:62325 -p 62326:62326 -p 62327:62327 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=62325 --rest-port=62323 --tcp-port=62324 --discv5-udp-port=62326 --rest-address=0.0.0.0 --nat=extip:172.18.40.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=35e3d75bbbe86feb00ddcdcc0f272d28cd7a08ace7eba85f0b8d16b480aecbf1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QFoKEKqhd0JYI27Hz3-KkK1TV-hhjqk8dty5GvC60FT2TRfTZeHxXSQPDTCzKucnU_6UT1Zg53-DH7KvtHPcuuICgmlkgnY0gmlwhKwSlPuKbXVsdGlhZGRyc5YACASsEpT7BvIvAAoErBKU-wbyMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC68AchdbOb7fXNQGSOBV5sOtHkGNVEQqQSKhTBPGrsreDdGNwgvIvg3VkcILyMYV3YWt1MgM --storenode=/ip4/172.18.148.251/tcp/61999/p2p/16Uiu2HAmBHwhAU9Bi2wN7rPMd3G7iut6aRV5LsWnHheD2fPdREva --store=true --relay=true
2025-02-11 14:59:16.974 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.40.167 waku 7276ec8fdc9d3c3bedec574935ce6a828213801afc958891f0ef49b90c2fa17c
2025-02-11 14:59:17.026 DEBUG [src.node.docker_mananger] Container started with ID 7276ec8fdc9d. Setting up logs at ./log/docker/store_node1_2025-02-11_14-59-15__9b73c6a1-64dc-4c34-8ef2-80b05af730d6__wakuorg_go-waku:latest.log
2025-02-11 14:59:17.027 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 62323
2025-02-11 14:59:17.027 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:59:18.028 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62323/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:18.030 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLio5didFbiEgy3i8_f98cTvfnHXeDhRAMKf-a4_ONsTWjMpzDN_yrDLOCfeKwSa1SNIu2MpJ63ucsrgJhzYcFuGAZT1hYmjgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDov3a0Oh24GBAtn3vpgqgupMQLKzYRi-8Ki7IwfiXDj6DdGNwgvN0g3VkcILzdoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/62324/p2p/16Uiu2HAmPdEud5ZWwQiN3LPFzTy92kdDDFVUgezFZf1EjYxi4qwT","/ip4/127.0.0.1/tcp/62325/ws/p2p/16Uiu2HAmPdEud5ZWwQiN3LPFzTy92kdDDFVUgezFZf1EjYxi4qwT","/ip4/172.17.0.3/tcp/62324/p2p/16Uiu2HAmPdEud5ZWwQiN3LPFzTy92kdDDFVUgezFZf1EjYxi4qwT","/ip4/172.17.0.3/tcp/62325/ws/p2p/16Uiu2HAmPdEud5ZWwQiN3LPFzTy92kdDDFVUgezFZf1EjYxi4qwT"]}'
2025-02-11 14:59:18.031 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:59:18.031 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62323/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.148.251/tcp/61999/p2p/16Uiu2HAmBHwhAU9Bi2wN7rPMd3G7iut6aRV5LsWnHheD2fPdREva", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:59:18.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:59:18.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61998/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:59:18.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:59:18.072 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62323/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:59:18.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 14:59:18.077 DEBUG [src.steps.store] Relaying message
2025-02-11 14:59:18.078 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:59:18.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:59:18.094 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 14:59:18.295 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 14:59:18.295 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61998/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:18.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xe8cd3ad2d039897d86ee944bd783bfe71194c018f475cc72387ced81fb9e30dc"}]}'
2025-02-11 14:59:18.299 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 14:59:18.299 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62323/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:18.304 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"e28d0aeec2e4c4a24e891d492cc60628a133c3565f2fa2d2ad3e1d5b4092ee02","status_code":200,"status_desc":"OK","messages":[{"message_hash":"6M060tA5iX2G7pRL14O/5xGUwBj0dcxyOHztgfueMNw="}]}'
2025-02-11 14:59:18.305 DEBUG [src.node.waku_node] Pausing container with id 7276ec8fdc9d
2025-02-11 14:59:18.314 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:59:19.315 DEBUG [src.node.waku_node] Unpause container with id 7276ec8fdc9d
2025-02-11 14:59:19.325 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62323/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:19.327 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QKsFHQvpxaF7MJ8K81e9rKUqgktfJN4UfuVstcRVofevb6B77ZfPFVizCTQp-pNgsSeVzuLlPK8fffKh57HSG2aGAZT1hYmkgmlkgnY0gmlwhKwRAAOCcnOFAAMBAACJc2VjcDI1NmsxoQOi_drQ6HbgYEC2fe-mCqC6kxAsrNhGL7wqLsjB-JcOPoN0Y3CC83SDdWRwgvN2hXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/62324/p2p/16Uiu2HAmPdEud5ZWwQiN3LPFzTy92kdDDFVUgezFZf1EjYxi4qwT","/ip4/127.0.0.1/tcp/62325/ws/p2p/16Uiu2HAmPdEud5ZWwQiN3LPFzTy92kdDDFVUgezFZf1EjYxi4qwT","/ip4/172.17.0.3/tcp/62324/p2p/16Uiu2HAmPdEud5ZWwQiN3LPFzTy92kdDDFVUgezFZf1EjYxi4qwT","/ip4/172.17.0.3/tcp/62325/ws/p2p/16Uiu2HAmPdEud5ZWwQiN3LPFzTy92kdDDFVUgezFZf1EjYxi4qwT"]}'
2025-02-11 14:59:19.327 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:59:19.327 DEBUG [src.steps.store] Relaying message
2025-02-11 14:59:19.328 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61998/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 14:59:19.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:59:19.333 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 14:59:19.534 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 14:59:19.534 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61998/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:19.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xe8cd3ad2d039897d86ee944bd783bfe71194c018f475cc72387ced81fb9e30dc"},{"messageHash":"0x8e658dae54feca7e3b7631cdf5e98a0e1cf1c9e9262801e6d34e6e771826569f"}]}'
2025-02-11 14:59:19.537 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 14:59:19.538 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62323/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:19.543 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"d6b3801685fb29564886ac6ef3eaf9ef7ebbe3f292aadd58a0d85501d9c6f666","status_code":200,"status_desc":"OK","messages":[{"message_hash":"6M060tA5iX2G7pRL14O/5xGUwBj0dcxyOHztgfueMNw="},{"message_hash":"jmWNrlT+yn47djHN9emKDhzxyekmKAHm005udxgmVp8="}]}'
2025-02-11 14:59:19.544 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61998/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:19.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xe8cd3ad2d039897d86ee944bd783bfe71194c018f475cc72387ced81fb9e30dc"},{"messageHash":"0x8e658dae54feca7e3b7631cdf5e98a0e1cf1c9e9262801e6d34e6e771826569f"}]}'
2025-02-11 14:59:19.547 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62323/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:59:19.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"a3ba9878cc8bc4bd5ea84b82c43f794abe332634a53f5c8ee656d86b74569ad0","status_code":200,"status_desc":"OK","messages":[{"message_hash":"6M060tA5iX2G7pRL14O/5xGUwBj0dcxyOHztgfueMNw="},{"message_hash":"jmWNrlT+yn47djHN9emKDhzxyekmKAHm005udxgmVp8="}]}'
2025-02-11 14:59:19.672 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:59:19.673 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:59:19.673 DEBUG [src.node.waku_node] Stopping container with id 4165afe6a4e6
2025-02-11 14:59:20.267 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:59:20.268 DEBUG [src.node.waku_node] Stopping container with id 7276ec8fdc9d
2025-02-11 14:59:20.782 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:59:20.783 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:59:20.792 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:59:20.794 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
