2025-02-11 14:54:52.919 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 14:54:52.920 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-11_14-54-52__04fcb354-c0f4-4aa9-8b5c-95cac892a6f9
2025-02-11 14:54:52.920 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 14:54:52.920 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 14:54:52.926 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:54:52.926 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_14-54-52__04fcb354-c0f4-4aa9-8b5c-95cac892a6f9__wakuorg_nwaku:latest.log
2025-02-11 14:54:52.926 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:54:52.927 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:54:52.928 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:54:52.928 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.61.174
2025-02-11 14:54:52.928 DEBUG [src.node.docker_mananger] Generated ports ['64607', '64608', '64609', '64610', '64611']
2025-02-11 14:54:52.928 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:54:52.928 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:54:52.929 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:54:52.929 DEBUG [src.node.docker_mananger] docker run -i -t -p 64607:64607 -p 64608:64608 -p 64609:64609 -p 64610:64610 -p 64611:64611 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64609 --rest-port=64607 --tcp-port=64608 --discv5-udp-port=64610 --rest-address=0.0.0.0 --nat=extip:172.18.61.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=984d5599110ed3917dedcef0d47aab89eaf3f8c2fdb8cc94dad8c5a2deb20d51 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64611 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 14:54:53.158 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.61.174 waku 71222f26e41aeceebc767e30672ab64844959f328f6a97145f95ae7a309b7199
2025-02-11 14:54:53.195 ERROR [src.node.docker_mananger] Max retries reached for container 25acade5aab1. Exiting log stream.
2025-02-11 14:54:53.205 DEBUG [src.node.docker_mananger] Container started with ID 71222f26e41a. Setting up logs at ./log/docker/receiving_node1_2025-02-11_14-54-52__04fcb354-c0f4-4aa9-8b5c-95cac892a6f9__wakuorg_nwaku:latest.log
2025-02-11 14:54:53.206 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64607
2025-02-11 14:54:53.207 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:54:53.683 ERROR [src.node.docker_mananger] Max retries reached for container 4427e84b4ad3. Exiting log stream.
2025-02-11 14:54:54.207 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64607/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:54.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:54:54.210 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:54:54.210 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64607/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:54.213 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.174/tcp/64608/p2p/16Uiu2HAmRrBuG2DK27nRm3QdaSbjto7sdmK5T8Bxt1e9tz6RXyFP","/ip4/172.18.61.174/tcp/64609/ws/p2p/16Uiu2HAmRrBuG2DK27nRm3QdaSbjto7sdmK5T8Bxt1e9tz6RXyFP"],"enrUri":"enr:-L24QOcYTQb285CuHIyOgH2I0RI18E81L0lqFhCVICC9lvKBZN0-w52ovRDTybba80A6MD4FOR2RTOin-b3aisX-BKkCgmlkgnY0gmlwhKwSPa6KbXVsdGlhZGRyc5YACASsEj2uBvxgAAoErBI9rgb8Yd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxAZhQzvEYF-5MIHTJFlK3rTKwheS9dhCWgCV8z6yBzKDdGNwgvxgg3VkcIL8YoV3YWt1Mgk"}'
2025-02-11 14:54:54.213 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:54:54.219 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 14:54:54.220 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_14-54-52__04fcb354-c0f4-4aa9-8b5c-95cac892a6f9__wakuorg_nwaku:latest.log
2025-02-11 14:54:54.220 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:54:54.220 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:54:54.221 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:54:54.221 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.40
2025-02-11 14:54:54.222 DEBUG [src.node.docker_mananger] Generated ports ['34559', '34560', '34561', '34562', '34563']
2025-02-11 14:54:54.222 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:54:54.222 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:54:54.222 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:54:54.222 DEBUG [src.node.docker_mananger] docker run -i -t -p 34559:34559 -p 34560:34560 -p 34561:34561 -p 34562:34562 -p 34563:34563 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34561 --rest-port=34559 --tcp-port=34560 --discv5-udp-port=34562 --rest-address=0.0.0.0 --nat=extip:172.18.234.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0a17fbdf6a1ea0e2b9bf016ffa39cfda0c3ebb26ad1fcb4e658d0dc54a20eeb8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34563 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 14:54:54.442 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.40 waku bd4e97375ae70bd0810ad08d5da652d78f1030d610fc903b64cff2f80ae8d87b
2025-02-11 14:54:54.488 DEBUG [src.node.docker_mananger] Container started with ID bd4e97375ae7. Setting up logs at ./log/docker/receiving_node2_2025-02-11_14-54-52__04fcb354-c0f4-4aa9-8b5c-95cac892a6f9__wakuorg_nwaku:latest.log
2025-02-11 14:54:54.488 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34559
2025-02-11 14:54:54.488 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:54:55.489 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34559/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:55.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 14:54:55.492 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 14:54:55.492 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34559/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:55.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.40/tcp/34560/p2p/16Uiu2HAm6akEw9wE76mEv54QecH8dXQspwgXcHmyURhXtttwCcu2","/ip4/172.18.234.40/tcp/34561/ws/p2p/16Uiu2HAm6akEw9wE76mEv54QecH8dXQspwgXcHmyURhXtttwCcu2"],"enrUri":"enr:-L24QBnqhXydX3cSjsRLy4U2dIQtHtoFT4JleQLPsDhlUZ0MeTrlhGvt3VfWWBmFuVyG34DKkoABIyFCq2O7eBIYuWECgmlkgnY0gmlwhKwS6iiKbXVsdGlhZGRyc5YACASsEuooBocAAAoErBLqKAaHAd0DgnJzhQADAQAAiXNlY3AyNTZrMaECpcOZ-SUWWbkNkiW6MnFJQJn9Wkfohv2jIvtrWLUrY-2DdGNwgocAg3VkcIKHAoV3YWt1MgE"}'
2025-02-11 14:54:55.494 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:54:55.495 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34559/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.61.174/tcp/64608/p2p/16Uiu2HAmRrBuG2DK27nRm3QdaSbjto7sdmK5T8Bxt1e9tz6RXyFP"]'
2025-02-11 14:54:55.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:54:55.544 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 14:54:55.544 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_14-54-52__04fcb354-c0f4-4aa9-8b5c-95cac892a6f9__wakuorg_go-waku:latest.log
2025-02-11 14:54:55.545 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 14:54:55.545 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 14:54:55.546 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 14:54:55.546 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.51.50
2025-02-11 14:54:55.546 DEBUG [src.node.docker_mananger] Generated ports ['7765', '7766', '7767', '7768', '7769']
2025-02-11 14:54:55.547 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 14:54:55.547 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 14:54:55.547 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 14:54:55.547 DEBUG [src.node.docker_mananger] docker run -i -t -p 7765:7765 -p 7766:7766 -p 7767:7767 -p 7768:7768 -p 7769:7769 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7767 --rest-port=7765 --tcp-port=7766 --discv5-udp-port=7768 --rest-address=0.0.0.0 --nat=extip:172.18.51.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6af7ae39bba9c8978f111cda21c83fc601f14c7f5def0949d9ba081b4a66b4bf --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QOcYTQb285CuHIyOgH2I0RI18E81L0lqFhCVICC9lvKBZN0-w52ovRDTybba80A6MD4FOR2RTOin-b3aisX-BKkCgmlkgnY0gmlwhKwSPa6KbXVsdGlhZGRyc5YACASsEj2uBvxgAAoErBI9rgb8Yd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxAZhQzvEYF-5MIHTJFlK3rTKwheS9dhCWgCV8z6yBzKDdGNwgvxgg3VkcIL8YoV3YWt1Mgk --lightpushnode=/ip4/172.18.61.174/tcp/64608/p2p/16Uiu2HAmRrBuG2DK27nRm3QdaSbjto7sdmK5T8Bxt1e9tz6RXyFP --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 14:54:55.784 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.51.50 waku d30ac5140869dd1e46df8a835898c5f709a5dc03dce1faf48a3eddf1b0bf8729
2025-02-11 14:54:55.836 DEBUG [src.node.docker_mananger] Container started with ID d30ac5140869. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_14-54-52__04fcb354-c0f4-4aa9-8b5c-95cac892a6f9__wakuorg_go-waku:latest.log
2025-02-11 14:54:55.838 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 7765
2025-02-11 14:54:55.839 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 14:54:56.839 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7765/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 14:54:56.842 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QAYZ5irQkSw9rqjzWzLJQPF7h7XAu8dzl85SVry4YCHBJJS_XUUPRWHFMzfK-cI0XyfHtmarwIVepKtCE-hc0TuGAZT1gY1XgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNooPxW0TLvNViWbyG6ZT08hSxODGG_rrFlK7ha3WLAS4N0Y3CCHlaDdWRwgh5YhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/7766/p2p/16Uiu2HAmKhR8N3yd2RuDb5HodxqARerU4wxMYSJ2d4udNz17hEci","/ip4/127.0.0.1/tcp/7767/ws/p2p/16Uiu2HAmKhR8N3yd2RuDb5HodxqARerU4wxMYSJ2d4udNz17hEci","/ip4/172.17.0.4/tcp/7766/p2p/16Uiu2HAmKhR8N3yd2RuDb5HodxqARerU4wxMYSJ2d4udNz17hEci","/ip4/172.17.0.4/tcp/7767/ws/p2p/16Uiu2HAmKhR8N3yd2RuDb5HodxqARerU4wxMYSJ2d4udNz17hEci"]}'
2025-02-11 14:54:56.842 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 14:54:56.843 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7765/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.61.174/tcp/64608/p2p/16Uiu2HAmRrBuG2DK27nRm3QdaSbjto7sdmK5T8Bxt1e9tz6RXyFP", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:54:56.844 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:54:56.845 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7765/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.234.40/tcp/34560/p2p/16Uiu2HAm6akEw9wE76mEv54QecH8dXQspwgXcHmyURhXtttwCcu2", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 14:54:56.863 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 14:54:56.867 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64607/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:54:56.872 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:54:56.872 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34559/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 14:54:56.875 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 14:54:56.876 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 14:54:56.876 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7765/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739285696876339200, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-11 14:54:56.878 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:7765/lightpush/v1/message. Response content: b'invalid length for Meta field'
2025-02-11 14:54:56.880 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 14:54:56.881 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 14:54:56.881 DEBUG [src.node.waku_node] Stopping container with id 71222f26e41a
2025-02-11 14:54:57.473 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:54:57.473 DEBUG [src.node.waku_node] Stopping container with id bd4e97375ae7
2025-02-11 14:54:58.286 ERROR [src.node.docker_mananger] Max retries reached for container 71222f26e41a. Exiting log stream.
2025-02-11 14:54:58.994 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:54:58.994 DEBUG [src.node.waku_node] Stopping container with id d30ac5140869
2025-02-11 14:54:59.808 ERROR [src.node.docker_mananger] Max retries reached for container bd4e97375ae7. Exiting log stream.
2025-02-11 14:55:00.504 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 14:55:00.505 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 14:55:00.511 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:55:00.518 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 14:55:00.521 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
