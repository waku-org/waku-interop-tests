[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_while_store_node_is_stopped_without_removing with id: 2025-02-05_03-08-24__9bf5c3e8-1c44-4fcd-8026-77ae608cab4a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-05_03-08-24__9bf5c3e8-1c44-4fcd-8026-77ae608cab4a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.189.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38995', '38996', '38997', '38998', '38999']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38995:38995 -p 38996:38996 -p 38997:38997 -p 38998:38998 -p 38999:38999 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38997 --rest-port=38995 --tcp-port=38996 --discv5-udp-port=38998 --rest-address=0.0.0.0 --nat=extip:172.18.189.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=75c34bc0bbc0a00b76ed227f5274f12bba19fdabea6253e13ec4f840bfc38e87 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38999 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.189.79 waku abd6bbecaa28f1987a470ecfcf616cf6dce478f7a13e91a0e75ed58071ebcecf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID abd6bbecaa28. Setting up logs at ./log/docker/publishing_node1_2025-02-05_03-08-24__9bf5c3e8-1c44-4fcd-8026-77ae608cab4a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 38995
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5c1d356089f3. Exiting log stream.
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 30b9aa18f02d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38995/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38995/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.79/tcp/38996/p2p/16Uiu2HAmEykaGkkAAsngnc7LB3FequTCzsnx9rxnigo5fSKwxAgn","/ip4/172.18.189.79/tcp/38997/ws/p2p/16Uiu2HAmEykaGkkAAsngnc7LB3FequTCzsnx9rxnigo5fSKwxAgn"],"enrUri":"enr:-L24QEZrOrZeVxC-YLdL3DDxIRdqp8qvWzOaRbMCJJg8NB1qOmu78HNHqp7eRuDyzJ-VH5ZJOYiF8_msuWcOqTWZRjcCgmlkgnY0gmlwhKwSvU-KbXVsdGlhZGRyc5YACASsEr1PBphUAAoErBK9TwaYVd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIoXVHKT-J_mM5-oi4ReDqRXxXp_Pjj7D8tBisOO307-DdGNwgphUg3VkcIKYVoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-05_03-08-24__9bf5c3e8-1c44-4fcd-8026-77ae608cab4a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.102.216
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47838', '47839', '47840', '47841', '47842']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47838:47838 -p 47839:47839 -p 47840:47840 -p 47841:47841 -p 47842:47842 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=47840 --rest-port=47838 --tcp-port=47839 --discv5-udp-port=47841 --rest-address=0.0.0.0 --nat=extip:172.18.102.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a49e08985ada9e1782c1732a3e1efc82194c7e83bbdbcc5b9b4b6339ea8b3b1b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QEZrOrZeVxC-YLdL3DDxIRdqp8qvWzOaRbMCJJg8NB1qOmu78HNHqp7eRuDyzJ-VH5ZJOYiF8_msuWcOqTWZRjcCgmlkgnY0gmlwhKwSvU-KbXVsdGlhZGRyc5YACASsEr1PBphUAAoErBK9TwaYVd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIoXVHKT-J_mM5-oi4ReDqRXxXp_Pjj7D8tBisOO307-DdGNwgphUg3VkcIKYVoV3YWt1MgM --storenode=/ip4/172.18.189.79/tcp/38996/p2p/16Uiu2HAmEykaGkkAAsngnc7LB3FequTCzsnx9rxnigo5fSKwxAgn --store=false --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.102.216 waku 56d0dbd10ddf567b995608f0041504e3f50d1bc63c32b9b1ab5b4e0af4099371
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 56d0dbd10ddf. Setting up logs at ./log/docker/store_node1_2025-02-05_03-08-24__9bf5c3e8-1c44-4fcd-8026-77ae608cab4a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 47838
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QAQECX00zl0qFyVR00AJikFVnlaErCFnjAoR1VeW5gYlUyY1YYiGJlzl3nhoNMdlZ2sGgTWrpyVEbQ_zRRToR2CGAZTUFJKCgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQOesPxvdpb2bHsH-QtseOBaCGYJaEAtMKwb3Yinuk3gJoN0Y3CCut-DdWRwgrrhhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/47839/p2p/16Uiu2HAmPLTJ28itr6mTdLzEcNwJ7UcuPEDivcTEmtKfuGGR4o81","/ip4/127.0.0.1/tcp/47840/ws/p2p/16Uiu2HAmPLTJ28itr6mTdLzEcNwJ7UcuPEDivcTEmtKfuGGR4o81","/ip4/172.17.0.3/tcp/47839/p2p/16Uiu2HAmPLTJ28itr6mTdLzEcNwJ7UcuPEDivcTEmtKfuGGR4o81","/ip4/172.17.0.3/tcp/47840/ws/p2p/16Uiu2HAmPLTJ28itr6mTdLzEcNwJ7UcuPEDivcTEmtKfuGGR4o81"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47838/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.189.79/tcp/38996/p2p/16Uiu2HAmEykaGkkAAsngnc7LB3FequTCzsnx9rxnigo5fSKwxAgn", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38995/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x3bd8f8c856cb439c54c56b4f9f24dedd13d0fde127d1215d3b6895cc877881db"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47838/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"a9661d0a788b8140b0c21bf1e83e9760930bca6d5b75d5ca70b584d6399a8448","status_code":200,"status_desc":"OK","messages":[{"message_hash":"O9j4yFbLQ5xUxWtPnyTe3RPQ/eEn0SFdO2iVzId4gds="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id abd6bbecaa28
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 56d0dbd10ddf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-05_03-08-24__9bf5c3e8-1c44-4fcd-8026-77ae608cab4a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-05_03-08-24__9bf5c3e8-1c44-4fcd-8026-77ae608cab4a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_while_store_node_is_stopped_without_removing with id: 2025-02-05_03-08-28__ace0ef7e-1520-412b-960b-e959651dcda4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-05_03-08-28__ace0ef7e-1520-412b-960b-e959651dcda4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.248.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56096', '56097', '56098', '56099', '56100']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56096:56096 -p 56097:56097 -p 56098:56098 -p 56099:56099 -p 56100:56100 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56098 --rest-port=56096 --tcp-port=56097 --discv5-udp-port=56099 --rest-address=0.0.0.0 --nat=extip:172.18.248.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db9eaaf9f83cae9c2bce95416ab102fda3d1edd7f4f78c738ba7de8cbbbfc2fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56100 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container abd6bbecaa28. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.248.50 waku e997a7a5df9947749d4c77dcbc6a09de8cd00c0c75193159a847c01ce057a666
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e997a7a5df99. Setting up logs at ./log/docker/publishing_node1_2025-02-05_03-08-28__ace0ef7e-1520-412b-960b-e959651dcda4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56096
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 56d0dbd10ddf. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56096/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56096/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.50/tcp/56097/p2p/16Uiu2HAmEG6BY3jkkUV7YkaBCJufoiqeT7h8MyqESkY3S9DHieMV","/ip4/172.18.248.50/tcp/56098/ws/p2p/16Uiu2HAmEG6BY3jkkUV7YkaBCJufoiqeT7h8MyqESkY3S9DHieMV"],"enrUri":"enr:-L24QO2Jt8jCQNWxKpclkriC41f7wR8Ir6gTfqK4RtPgNMqpS8TiW6MG-KPmrMjSRarj0eHwrMFtoCy5lBfPYw0f1uQCgmlkgnY0gmlwhKwS-DKKbXVsdGlhZGRyc5YACASsEvgyBtshAAoErBL4MgbbIt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDF9mb_DQSyltTO-seV8wtVWAfdMFcfH9RH--zw54jdECDdGNwgtshg3VkcILbI4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-05_03-08-28__ace0ef7e-1520-412b-960b-e959651dcda4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.117.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13322', '13323', '13324', '13325', '13326']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13322:13322 -p 13323:13323 -p 13324:13324 -p 13325:13325 -p 13326:13326 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13324 --rest-port=13322 --tcp-port=13323 --discv5-udp-port=13325 --rest-address=0.0.0.0 --nat=extip:172.18.117.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ce473cec7dfc4fea0583dae8ee4ae3b1b053055ab3e1cfadf16cd92d37e23f1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QO2Jt8jCQNWxKpclkriC41f7wR8Ir6gTfqK4RtPgNMqpS8TiW6MG-KPmrMjSRarj0eHwrMFtoCy5lBfPYw0f1uQCgmlkgnY0gmlwhKwS-DKKbXVsdGlhZGRyc5YACASsEvgyBtshAAoErBL4MgbbIt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDF9mb_DQSyltTO-seV8wtVWAfdMFcfH9RH--zw54jdECDdGNwgtshg3VkcILbI4V3YWt1MgM --storenode=/ip4/172.18.248.50/tcp/56097/p2p/16Uiu2HAmEG6BY3jkkUV7YkaBCJufoiqeT7h8MyqESkY3S9DHieMV --store=false --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.117.11 waku 34f71b6c2a24fb15351076fc2a775bd8c9a2a87f56c9224493e312ed2a47bd22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 34f71b6c2a24. Setting up logs at ./log/docker/store_node1_2025-02-05_03-08-28__ace0ef7e-1520-412b-960b-e959651dcda4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 13322
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13322/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QI8zl5SHaxotfa5-ZG1vUs2rs8LUr-63xqfOwA2v4qODUS3SD_VzvIW6UXYcEyvnDa6x5088Gxq8kdGXH33jYoKGAZTUFKJ3gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQMUO-MgC0Wm288NdJSdkJ2J2tjHstwbFOMs0VPq-1LvFoN0Y3CCNAuDdWRwgjQNhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/13323/p2p/16Uiu2HAmE1yUARCrdFVD1r927vhUf45EC4NCDZAPdNYDWfPxdXgy","/ip4/127.0.0.1/tcp/13324/ws/p2p/16Uiu2HAmE1yUARCrdFVD1r927vhUf45EC4NCDZAPdNYDWfPxdXgy","/ip4/172.17.0.3/tcp/13323/p2p/16Uiu2HAmE1yUARCrdFVD1r927vhUf45EC4NCDZAPdNYDWfPxdXgy","/ip4/172.17.0.3/tcp/13324/ws/p2p/16Uiu2HAmE1yUARCrdFVD1r927vhUf45EC4NCDZAPdNYDWfPxdXgy"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13322/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.248.50/tcp/56097/p2p/16Uiu2HAmEG6BY3jkkUV7YkaBCJufoiqeT7h8MyqESkY3S9DHieMV", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56096/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56096/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56096/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x25aaa2af898d382e7337128c9f1915ba3eb5d619b31f3f142dcc38849a4753ab"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13322/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"77cf3a99c01ccffb1b9a552fafe203e234f31a9975ca7fc7ba79791f4ce1995d","status_code":200,"status_desc":"OK","messages":[{"message_hash":"Jaqir4mNOC5zNxKMnxkVuj611hmzHz8ULcw4hJpHU6s="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e997a7a5df99
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 34f71b6c2a24
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-05_03-08-28__ace0ef7e-1520-412b-960b-e959651dcda4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-05_03-08-28__ace0ef7e-1520-412b-960b-e959651dcda4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_while_store_node_is_stopped_without_removing with id: 2025-02-05_03-08-32__1f80531d-7b63-45ca-b982-6708e369ae13
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-05_03-08-32__1f80531d-7b63-45ca-b982-6708e369ae13__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.71.147
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55930', '55931', '55932', '55933', '55934']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55930:55930 -p 55931:55931 -p 55932:55932 -p 55933:55933 -p 55934:55934 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55932 --rest-port=55930 --tcp-port=55931 --discv5-udp-port=55933 --rest-address=0.0.0.0 --nat=extip:172.18.71.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aee566bcb05a4fec52baa598972a8d493ffaea3e8e5e4dbfdde3fcc7550eea34 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55934 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e997a7a5df99. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.71.147 waku eabc523d11fe64d94166916776f728632bf2145633a0f9cc7de25edb514e3168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID eabc523d11fe. Setting up logs at ./log/docker/publishing_node1_2025-02-05_03-08-32__1f80531d-7b63-45ca-b982-6708e369ae13__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55930
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 34f71b6c2a24. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55930/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55930/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.147/tcp/55931/p2p/16Uiu2HAkw67B9KD2mcjmQYCPZEiQQFGnQiCdxMcZMz4uLCR8iZGi","/ip4/172.18.71.147/tcp/55932/ws/p2p/16Uiu2HAkw67B9KD2mcjmQYCPZEiQQFGnQiCdxMcZMz4uLCR8iZGi"],"enrUri":"enr:-L24QNvogxb8bEAUT5NUOdEDassqGcVEtyuVVyXvmSosHKkPBXPPtsosIzMkjs0XUNy9sgSa7IypPG32-99tIB4ZLJQCgmlkgnY0gmlwhKwSR5OKbXVsdGlhZGRyc5YACASsEkeTBtp7AAoErBJHkwbafN0DgnJzhQADAQAAiXNlY3AyNTZrMaECGLQ_HU0lGLYY2V2iQX0qXyt894exJyC-vqRIXQn57SeDdGNwgtp7g3VkcILafYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-05_03-08-32__1f80531d-7b63-45ca-b982-6708e369ae13__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.5.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31968', '31969', '31970', '31971', '31972']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31968:31968 -p 31969:31969 -p 31970:31970 -p 31971:31971 -p 31972:31972 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31970 --rest-port=31968 --tcp-port=31969 --discv5-udp-port=31971 --rest-address=0.0.0.0 --nat=extip:172.18.5.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0be959aeebd8c28bfbba305a874c90d6c31f26aaf3dd517db6bd20d4e3ae3bfc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QNvogxb8bEAUT5NUOdEDassqGcVEtyuVVyXvmSosHKkPBXPPtsosIzMkjs0XUNy9sgSa7IypPG32-99tIB4ZLJQCgmlkgnY0gmlwhKwSR5OKbXVsdGlhZGRyc5YACASsEkeTBtp7AAoErBJHkwbafN0DgnJzhQADAQAAiXNlY3AyNTZrMaECGLQ_HU0lGLYY2V2iQX0qXyt894exJyC-vqRIXQn57SeDdGNwgtp7g3VkcILafYV3YWt1MgM --storenode=/ip4/172.18.71.147/tcp/55931/p2p/16Uiu2HAkw67B9KD2mcjmQYCPZEiQQFGnQiCdxMcZMz4uLCR8iZGi --store=false --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.5.50 waku b9bbeddb57b351d760cce1be9ef89b4b6ecfe876b3121a978b47e9157fac41b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b9bbeddb57b3. Setting up logs at ./log/docker/store_node1_2025-02-05_03-08-32__1f80531d-7b63-45ca-b982-6708e369ae13__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 31968
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31968/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QGj_HLPxlFJQBeXnwKDE93Jc-Tsl6Xk-WnhMwPAiaiBDTcKtADou28yYc7viExcgPBszcx8w4NWWuBSsSV0Bcs6GAZTUFLJ_gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQJQ_xJuX1wA6jpBuNfMU_YeRvGTnEXxQCRIA4Lvjo2OxoN0Y3CCfOGDdWRwgnzjhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/31969/p2p/16Uiu2HAkzsrBZ9yfuKcJuZVhNAXgjXs3Fkx7wyM8vvzudUEDtxGD","/ip4/127.0.0.1/tcp/31970/ws/p2p/16Uiu2HAkzsrBZ9yfuKcJuZVhNAXgjXs3Fkx7wyM8vvzudUEDtxGD","/ip4/172.17.0.3/tcp/31969/p2p/16Uiu2HAkzsrBZ9yfuKcJuZVhNAXgjXs3Fkx7wyM8vvzudUEDtxGD","/ip4/172.17.0.3/tcp/31970/ws/p2p/16Uiu2HAkzsrBZ9yfuKcJuZVhNAXgjXs3Fkx7wyM8vvzudUEDtxGD"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31968/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.71.147/tcp/55931/p2p/16Uiu2HAkw67B9KD2mcjmQYCPZEiQQFGnQiCdxMcZMz4uLCR8iZGi", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55930/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55930/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55930/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6e1d384935edb721e206fe0ad941f859f6f5cc3d711ce2fb9fbe1a2e8faea8cf"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31968/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"689db461d1875bf308013820dca92ae6434e9934035bc41968ddfc88f48469da","status_code":200,"status_desc":"OK","messages":[{"message_hash":"bh04STXttyHiBv4K2UH4Wfb1zD1xHOL7n74aLo+uqM8="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id eabc523d11fe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b9bbeddb57b3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-05_03-08-32__1f80531d-7b63-45ca-b982-6708e369ae13__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-05_03-08-32__1f80531d-7b63-45ca-b982-6708e369ae13__wakuorg_go-waku:latest.log