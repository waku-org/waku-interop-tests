[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2024-09-13_03-13-45__ae7294c5-2eff-4d70-9fe7-baa73dfc4933
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_03-13-45__ae7294c5-2eff-4d70-9fe7-baa73dfc4933__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_03-13-45__ae7294c5-2eff-4d70-9fe7-baa73dfc4933__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-13_03-13-45__ae7294c5-2eff-4d70-9fe7-baa73dfc4933__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.220.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53580', '53581', '53582', '53583', '53584']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53580:53580 -p 53581:53581 -p 53582:53582 -p 53583:53583 -p 53584:53584 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=53582 --rest-port=53580 --tcp-port=53581 --discv5-udp-port=53583 --rest-address=0.0.0.0 --nat=extip:172.18.220.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9baa4bfce6cb65457838ed1b9b6f6196d8dcefdac950ca6a5430abce353b63fd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.220.194 waku 82c9828210a35c55a34e0af321695709ca9ad3e239466ac027c4ea19ed4ccfef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 82c9828210a3. Setting up logs at ./log/docker/node1_2024-09-13_03-13-45__ae7294c5-2eff-4d70-9fe7-baa73dfc4933__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 53580
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53580/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QFIg8WpaZl_sxg4pYCLXnXdWfl7dfRsUpHqTExeTs0nKG5TKKoNNLi9w20nEdUgKO1ZQJ7Pe9BPfG1iQil501pOGAZHpX1tigmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQKelwyg9o7knsNrSPiRAfQHX43jMgrSW6w4VvPPvocmpYN0Y3CC0U2DdWRwgtFPhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/53581/p2p/16Uiu2HAm66jz5w6RA1uYhaQUHwkpyk4bmUMBJdwh4dzZd75uUnSp","/ip4/127.0.0.1/tcp/53582/ws/p2p/16Uiu2HAm66jz5w6RA1uYhaQUHwkpyk4bmUMBJdwh4dzZd75uUnSp","/ip4/172.17.0.2/tcp/53581/p2p/16Uiu2HAm66jz5w6RA1uYhaQUHwkpyk4bmUMBJdwh4dzZd75uUnSp","/ip4/172.17.0.2/tcp/53582/ws/p2p/16Uiu2HAm66jz5w6RA1uYhaQUHwkpyk4bmUMBJdwh4dzZd75uUnSp"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.222.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50891', '50892', '50893', '50894', '50895']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50891:50891 -p 50892:50892 -p 50893:50893 -p 50894:50894 -p 50895:50895 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50893 --rest-port=50891 --tcp-port=50892 --discv5-udp-port=50894 --rest-address=0.0.0.0 --nat=extip:172.18.222.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=21fbfd1ba9752fc2afbf0ec9da69ed1fdedf62ec5796f97db86cc4d0ac53ddab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50895 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-Ji4QFIg8WpaZl_sxg4pYCLXnXdWfl7dfRsUpHqTExeTs0nKG5TKKoNNLi9w20nEdUgKO1ZQJ7Pe9BPfG1iQil501pOGAZHpX1tigmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQKelwyg9o7knsNrSPiRAfQHX43jMgrSW6w4VvPPvocmpYN0Y3CC0U2DdWRwgtFPhXdha3UyCQ --lightpushnode=/ip4/172.18.220.194/tcp/53581/p2p/16Uiu2HAm66jz5w6RA1uYhaQUHwkpyk4bmUMBJdwh4dzZd75uUnSp
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.222.52 waku 15a7878615fcca03c27b4dfe3a7d3a6215272fb3535fa03bcb0721d82558dff4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 15a7878615fc. Setting up logs at ./log/docker/node2_2024-09-13_03-13-45__ae7294c5-2eff-4d70-9fe7-baa73dfc4933__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50891
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50891/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50891/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.52/tcp/50892/p2p/16Uiu2HAmJkbNaxGNshty87CDcvBUP75CvCVptaC4ZXTA1iDjmx3e","/ip4/172.18.222.52/tcp/50893/ws/p2p/16Uiu2HAmJkbNaxGNshty87CDcvBUP75CvCVptaC4ZXTA1iDjmx3e"],"enrUri":"enr:-LO4QIFZsiSJIwyUBfOUJ1r_5cbiE-b1JN6guUFtlFQyPRVbX-_f_tlIhcYILgG3VMtz-jr3hbxmmRTzdQ5AA3ANetYBgmlkgnY0gmlwhKwS3jSKbXVsdGlhZGRyc4wACgSsEt40BsbN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNalaAg3pkPgUvggGQvk2etvScE7ZYzPCmlJzpiQKLvlYN0Y3CCxsyDdWRwgsbOhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.82.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7578', '7579', '7580', '7581', '7582']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7578:7578 -p 7579:7579 -p 7580:7580 -p 7581:7581 -p 7582:7582 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7580 --rest-port=7578 --tcp-port=7579 --discv5-udp-port=7581 --rest-address=0.0.0.0 --nat=extip:172.18.82.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0aacafcf14ba1fb9fcac4ac2e8bffe0b551d7bbcfc2a041d1f470ca5cc87ad9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.222.52/tcp/50892/p2p/16Uiu2HAmJkbNaxGNshty87CDcvBUP75CvCVptaC4ZXTA1iDjmx3e --discv5-bootstrap-node=enr:-LO4QIFZsiSJIwyUBfOUJ1r_5cbiE-b1JN6guUFtlFQyPRVbX-_f_tlIhcYILgG3VMtz-jr3hbxmmRTzdQ5AA3ANetYBgmlkgnY0gmlwhKwS3jSKbXVsdGlhZGRyc4wACgSsEt40BsbN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNalaAg3pkPgUvggGQvk2etvScE7ZYzPCmlJzpiQKLvlYN0Y3CCxsyDdWRwgsbOhXdha3UyDQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.82.213 waku dc41f37865ef045883887034c7fe344ccb1a547b21e641d70a910e877b369ccd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dc41f37865ef. Setting up logs at ./log/docker/node3_2024-09-13_03-13-45__ae7294c5-2eff-4d70-9fe7-baa73dfc4933__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 7578
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7578/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QNj29-5ShBGpCFn2W_5-SjKoxg7sL7pt9P195IOnWqAlSM92w4TJVFxKuoJLQqgmFL_HKqyszVStEst244S0AMiGAZHpX2lUgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQJHwZsjZj9_laCn6dgci9lVcW9jo9VRINzbEQqGonLlUoN0Y3CCHZuDdWRwgh2dhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/7579/p2p/16Uiu2HAkzFn9orxYMXRC8TLSPyppJXFoNnV6k4Gaosj3umokFiNm","/ip4/127.0.0.1/tcp/7580/ws/p2p/16Uiu2HAkzFn9orxYMXRC8TLSPyppJXFoNnV6k4Gaosj3umokFiNm","/ip4/172.17.0.4/tcp/7579/p2p/16Uiu2HAkzFn9orxYMXRC8TLSPyppJXFoNnV6k4Gaosj3umokFiNm","/ip4/172.17.0.4/tcp/7580/ws/p2p/16Uiu2HAkzFn9orxYMXRC8TLSPyppJXFoNnV6k4Gaosj3umokFiNm"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53580/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50891/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7578/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53580/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmJkbNaxGNshty87CDcvBUP75CvCVptaC4ZXTA1iDjmx3e","multiaddrs":["/ip4/172.18.222.52/tcp/50892/p2p/16Uiu2HAmJkbNaxGNshty87CDcvBUP75CvCVptaC4ZXTA1iDjmx3e","/ip4/172.18.222.52/tcp/50893/ws/p2p/16Uiu2HAmJkbNaxGNshty87CDcvBUP75CvCVptaC4ZXTA1iDjmx3e"],"protocols":["/vac/waku/lightpush/2.0.0-beta1","/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50891/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/53581/p2p/16Uiu2HAm66jz5w6RA1uYhaQUHwkpyk4bmUMBJdwh4dzZd75uUnSp","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.4/tcp/7579/p2p/16Uiu2HAkzFn9orxYMXRC8TLSPyppJXFoNnV6k4Gaosj3umokFiNm","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7578/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmJkbNaxGNshty87CDcvBUP75CvCVptaC4ZXTA1iDjmx3e","multiaddrs":["/ip4/172.18.222.52/tcp/50892/p2p/16Uiu2HAmJkbNaxGNshty87CDcvBUP75CvCVptaC4ZXTA1iDjmx3e","/ip4/172.18.222.52/tcp/50893/ws/p2p/16Uiu2HAmJkbNaxGNshty87CDcvBUP75CvCVptaC4ZXTA1iDjmx3e"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1","/waku/2/rs/3/0"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53580/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1726197263625723904}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7578/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1726197263625723904,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 82c9828210a3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 15a7878615fc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dc41f37865ef
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.