[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_peers_after_node1_was_restarted with id: 2024-09-09_03-22-15__9df0fbbd-debf-46b1-b628-01b71f790635
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-09_03-22-15__9df0fbbd-debf-46b1-b628-01b71f790635__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.15.54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63182', '63183', '63184', '63185', '63186']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63182:63182 -p 63183:63183 -p 63184:63184 -p 63185:63185 -p 63186:63186 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63184 --rest-port=63182 --tcp-port=63183 --discv5-udp-port=63185 --rest-address=0.0.0.0 --nat=extip:172.18.15.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f8554d3108d8cce9f1c5bedbd16d15c3fa0bb5e5576cb4f6f9ef8f9b7b5b24af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63186 --metrics-logging=true --relay=true --relay-peer-exchange=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.15.54 waku 2660f32d1637f3d685a67ed71831ed493e5b223840d40fec3829484c767bb028
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2660f32d1637. Setting up logs at ./log/docker/node1_2024-09-09_03-22-15__9df0fbbd-debf-46b1-b628-01b71f790635__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63182
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63182/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63182/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.54/tcp/63183/p2p/16Uiu2HAmKWvKiK72x9DD2EwdkvyV6meFQWxr6UESVqmoCpTWiDjP","/ip4/172.18.15.54/tcp/63184/ws/p2p/16Uiu2HAmKWvKiK72x9DD2EwdkvyV6meFQWxr6UESVqmoCpTWiDjP"],"enrUri":"enr:-LO4QBTACghIfqAfZQDiwwxxPwrDgfurDQZa7zvYLkT65_DZeW8RsDim5Ic_UBgHLG10ElZNwtHsGqbbZ_B-D8MafzMBgmlkgnY0gmlwhKwSDzaKbXVsdGlhZGRyc4wACgSsEg82BvbQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNl8JvD68nKeoL3T4JX66WQcpTp0OWf_LjTTL0TlSkUAoN0Y3CC9s-DdWRwgvbRhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-09_03-22-15__9df0fbbd-debf-46b1-b628-01b71f790635__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.42.170
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29880', '29881', '29882', '29883', '29884']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29880:29880 -p 29881:29881 -p 29882:29882 -p 29883:29883 -p 29884:29884 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29882 --rest-port=29880 --tcp-port=29881 --discv5-udp-port=29883 --rest-address=0.0.0.0 --nat=extip:172.18.42.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbcf05742c9f8bacddb24cf1617e85b5bc4bc9bf2ef2c1bb29ed6b8ac11bde11 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QBTACghIfqAfZQDiwwxxPwrDgfurDQZa7zvYLkT65_DZeW8RsDim5Ic_UBgHLG10ElZNwtHsGqbbZ_B-D8MafzMBgmlkgnY0gmlwhKwSDzaKbXVsdGlhZGRyc4wACgSsEg82BvbQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNl8JvD68nKeoL3T4JX66WQcpTp0OWf_LjTTL0TlSkUAoN0Y3CC9s-DdWRwgvbRhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.42.170 waku 24fd2485b7c4f014feacd5417e9001e3fe0183c40c4f1ae3b15a61f019dc3d4d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 24fd2485b7c4. Setting up logs at ./log/docker/node2_2024-09-09_03-22-15__9df0fbbd-debf-46b1-b628-01b71f790635__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 29880
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29880/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHrm83-nHAqjC2hSHC4KpvEOfBFGbPBIIlOzkVHeWyoBIlDD0vbAvAzYpVNf1KljTkwlcWXMMg7QnAZ9gGFoCT6GAZHUzbhdgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQPASSKsucdSIqndowE4XaprOGZml4EPkgQ0f6OKsjNEMoN0Y3CCdLmDdWRwgnS7hXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/29881/p2p/16Uiu2HAmRbbJvxRfSNriw6qHBNhkAXG6iXH58rZSSP77PnmPfF69","/ip4/127.0.0.1/tcp/29882/ws/p2p/16Uiu2HAmRbbJvxRfSNriw6qHBNhkAXG6iXH58rZSSP77PnmPfF69","/ip4/172.17.0.9/tcp/29881/p2p/16Uiu2HAmRbbJvxRfSNriw6qHBNhkAXG6iXH58rZSSP77PnmPfF69","/ip4/172.17.0.9/tcp/29882/ws/p2p/16Uiu2HAmRbbJvxRfSNriw6qHBNhkAXG6iXH58rZSSP77PnmPfF69"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29880/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.15.54/tcp/63183/p2p/16Uiu2HAmKWvKiK72x9DD2EwdkvyV6meFQWxr6UESVqmoCpTWiDjP", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63182/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29880/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63182/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.9/tcp/29881/p2p/16Uiu2HAmRbbJvxRfSNriw6qHBNhkAXG6iXH58rZSSP77PnmPfF69","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:244 Restarting container with id 2660f32d1637
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-09_03-22-15__9df0fbbd-debf-46b1-b628-01b71f790635__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.84.139
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1871', '1872', '1873', '1874', '1875']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1871:1871 -p 1872:1872 -p 1873:1873 -p 1874:1874 -p 1875:1875 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=1873 --rest-port=1871 --tcp-port=1872 --discv5-udp-port=1874 --rest-address=0.0.0.0 --nat=extip:172.18.84.139 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --nodekey=9dda9ef10ab0a54dbf19dfff2719800f5c2d271fa33adeeb0dbcbaac4ad018a9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.9/tcp/29881/p2p/16Uiu2HAmRbbJvxRfSNriw6qHBNhkAXG6iXH58rZSSP77PnmPfF69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.84.139 waku 14d184585f40c38b618ce4d892c00a305fa29be89fccaa9e8e43abf11d8f64c3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 14d184585f40. Setting up logs at ./log/docker/node3_2024-09-09_03-22-15__9df0fbbd-debf-46b1-b628-01b71f790635__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 1871
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1871/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-JG4QHiky8jSdNswnGWAoY-oHJNhL3fjCSXNrwsfmMfwvFdkZkiuPE0wR1vHk640ReP_aiKC6v-Ou6clire0f2TBQBCGAZHUzc7YgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQItmQhwk8WkCzQZO2sOaQGOWgpN2pwMeXMoKzXA0mEWMYN0Y3CCB1CFd2FrdTKA","listenAddresses":["/ip4/127.0.0.1/tcp/1872/p2p/16Uiu2HAkxVffnZZjujBxY4xw7xC8wxuAwT9pYp1JzeBrDSHYHJme","/ip4/127.0.0.1/tcp/1873/ws/p2p/16Uiu2HAkxVffnZZjujBxY4xw7xC8wxuAwT9pYp1JzeBrDSHYHJme","/ip4/172.17.0.5/tcp/1872/p2p/16Uiu2HAkxVffnZZjujBxY4xw7xC8wxuAwT9pYp1JzeBrDSHYHJme","/ip4/172.17.0.5/tcp/1873/ws/p2p/16Uiu2HAkxVffnZZjujBxY4xw7xC8wxuAwT9pYp1JzeBrDSHYHJme"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1871/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.15.54/tcp/63183/p2p/16Uiu2HAmKWvKiK72x9DD2EwdkvyV6meFQWxr6UESVqmoCpTWiDjP", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1871/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmKWvKiK72x9DD2EwdkvyV6meFQWxr6UESVqmoCpTWiDjP","multiaddrs":["/ip4/172.18.15.54/tcp/63183/p2p/16Uiu2HAmKWvKiK72x9DD2EwdkvyV6meFQWxr6UESVqmoCpTWiDjP","/ip4/172.18.15.54/tcp/63184/ws/p2p/16Uiu2HAmKWvKiK72x9DD2EwdkvyV6meFQWxr6UESVqmoCpTWiDjP"],"protocols":["/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/2","/waku/2/rs/3/7","/waku/2/rs/3/8","/waku/2/rs/3/1","/waku/2/rs/3/3","/waku/2/rs/3/4","/waku/2/rs/3/5","/waku/2/rs/3/6"]},{"id":"16Uiu2HAmRbbJvxRfSNriw6qHBNhkAXG6iXH58rZSSP77PnmPfF69","multiaddrs":["/ip4/172.17.0.9/tcp/29881/p2p/16Uiu2HAmRbbJvxRfSNriw6qHBNhkAXG6iXH58rZSSP77PnmPfF69","/ip4/172.17.0.9/tcp/29882/ws/p2p/16Uiu2HAmRbbJvxRfSNriw6qHBNhkAXG6iXH58rZSSP77PnmPfF69"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/default-waku/proto"]}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2660f32d1637
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 24fd2485b7c4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 14d184585f40
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.