[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-03_03-12-21__7d810c58-a273-449a-9213-6be7be018092
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-03_03-12-21__7d810c58-a273-449a-9213-6be7be018092__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-03_03-12-21__7d810c58-a273-449a-9213-6be7be018092__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-03_03-12-21__7d810c58-a273-449a-9213-6be7be018092__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.245.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28558', '28559', '28560', '28561', '28562']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28558:28558 -p 28559:28559 -p 28560:28560 -p 28561:28561 -p 28562:28562 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=28560 --rest-port=28558 --tcp-port=28559 --discv5-udp-port=28561 --rest-address=0.0.0.0 --nat=extip:172.18.245.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=85afe3b55aba3fb1cccddc1f6adcd1fbf5b49c3e7654bdbd07109d8682f1cce8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.245.215 waku d0e19cff33605adb43abe3b437c48f1cebc069a1c2cba724b00dc443628bfa67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d0e19cff3360. Setting up logs at ./log/docker/node1_2024-09-03_03-12-21__7d810c58-a273-449a-9213-6be7be018092__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 28558
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28558/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QIorcxTQoEhcTLpsZoockK91DARLgxhQ7vXUBJCqgUeUVIbKLXb0mrUFUsy5rfKk_V29OdGmeXl48qf0CW8cGP-GAZG13nlLgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQM9uyhNJEFtmNE7WcCfKUmXfArJ0gon0ak79ONMJkVBM4N0Y3CCb4-DdWRwgm-RhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/28559/p2p/16Uiu2HAmGoxk4GoYck6tBuzEymRV4aYcwqfi8URF1s9vPEqjRpup","/ip4/127.0.0.1/tcp/28560/ws/p2p/16Uiu2HAmGoxk4GoYck6tBuzEymRV4aYcwqfi8URF1s9vPEqjRpup","/ip4/172.17.0.4/tcp/28559/p2p/16Uiu2HAmGoxk4GoYck6tBuzEymRV4aYcwqfi8URF1s9vPEqjRpup","/ip4/172.17.0.4/tcp/28560/ws/p2p/16Uiu2HAmGoxk4GoYck6tBuzEymRV4aYcwqfi8URF1s9vPEqjRpup"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.13.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19890', '19891', '19892', '19893', '19894']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19890:19890 -p 19891:19891 -p 19892:19892 -p 19893:19893 -p 19894:19894 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19892 --rest-port=19890 --tcp-port=19891 --discv5-udp-port=19893 --rest-address=0.0.0.0 --nat=extip:172.18.13.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c0bf3a5f640a5efaaa53bdb40becfdcd8f36d7d7bafbd86ed7d8ad1eeaca3ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19894 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QIorcxTQoEhcTLpsZoockK91DARLgxhQ7vXUBJCqgUeUVIbKLXb0mrUFUsy5rfKk_V29OdGmeXl48qf0CW8cGP-GAZG13nlLgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQM9uyhNJEFtmNE7WcCfKUmXfArJ0gon0ak79ONMJkVBM4N0Y3CCb4-DdWRwgm-RhXdha3UyCQ --lightpushnode=/ip4/172.18.245.215/tcp/28559/p2p/16Uiu2HAmGoxk4GoYck6tBuzEymRV4aYcwqfi8URF1s9vPEqjRpup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.13.18 waku 53ab64ad5fb8f89b27ae0c5f29126dc72afb70af2076134835ddabceb1e4b260
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 53ab64ad5fb8. Setting up logs at ./log/docker/node2_2024-09-03_03-12-21__7d810c58-a273-449a-9213-6be7be018092__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19890
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19890/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19890/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.18/tcp/19891/p2p/16Uiu2HAmF6E6BaWZxyUZbroja7wJqVzH2FbgpAZtpCbnkjfMgmvk","/ip4/172.18.13.18/tcp/19892/ws/p2p/16Uiu2HAmF6E6BaWZxyUZbroja7wJqVzH2FbgpAZtpCbnkjfMgmvk"],"enrUri":"enr:-LO4QCmt-eDH9yiNxHWUHbNdF82XUaWqxV-jygYbYEsJZUguBXdoT7mtvghWFhqIbn8B2_RHhx5rMrMPisWLfmMp2MIBgmlkgnY0gmlwhKwSDRKKbXVsdGlhZGRyc4wACgSsEg0SBk203QOCcnOFAAMBAACJc2VjcDI1NmsxoQMkLm3u69Djxh6hci7cgaS7vLHLmLJ_4Dj5IByAMzykdYN0Y3CCTbODdWRwgk21hXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.96.70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10744', '10745', '10746', '10747', '10748']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10744:10744 -p 10745:10745 -p 10746:10746 -p 10747:10747 -p 10748:10748 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=10746 --rest-port=10744 --tcp-port=10745 --discv5-udp-port=10747 --rest-address=0.0.0.0 --nat=extip:172.18.96.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=99b3b5c99fe02fbdc39b8b5e65ecfa3c1bd9e658ff1e9d5011c0d1c17f5aa218 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.13.18/tcp/19891/p2p/16Uiu2HAmF6E6BaWZxyUZbroja7wJqVzH2FbgpAZtpCbnkjfMgmvk --discv5-bootstrap-node=enr:-LO4QCmt-eDH9yiNxHWUHbNdF82XUaWqxV-jygYbYEsJZUguBXdoT7mtvghWFhqIbn8B2_RHhx5rMrMPisWLfmMp2MIBgmlkgnY0gmlwhKwSDRKKbXVsdGlhZGRyc4wACgSsEg0SBk203QOCcnOFAAMBAACJc2VjcDI1NmsxoQMkLm3u69Djxh6hci7cgaS7vLHLmLJ_4Dj5IByAMzykdYN0Y3CCTbODdWRwgk21hXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.96.70 waku af1f27bc8538de0f3a77415c33d02841416db73f3889fab7247df1326ba03d8f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID af1f27bc8538. Setting up logs at ./log/docker/node3_2024-09-03_03-12-21__7d810c58-a273-449a-9213-6be7be018092__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 10744
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10744/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QNgxg08trwnEstVm1RQVDlgR3yz92q2RmPZ9kzVvlZywdP_PjV05a_ayb9GE-pqM6EgyndXnp4eCTQtU_vM29oeGAZG13oS8gmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQK_7i1FoLoLilSkHpd1eh5hSoxVc_-0QCL_kGO0T-cUI4N0Y3CCKfmDdWRwgin7hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/10745/p2p/16Uiu2HAm8LtVfi1HETiPUZaisZwQ3V347Jsd13Nh2Q9kAocCuvm8","/ip4/127.0.0.1/tcp/10746/ws/p2p/16Uiu2HAm8LtVfi1HETiPUZaisZwQ3V347Jsd13Nh2Q9kAocCuvm8","/ip4/172.17.0.10/tcp/10745/p2p/16Uiu2HAm8LtVfi1HETiPUZaisZwQ3V347Jsd13Nh2Q9kAocCuvm8","/ip4/172.17.0.10/tcp/10746/ws/p2p/16Uiu2HAm8LtVfi1HETiPUZaisZwQ3V347Jsd13Nh2Q9kAocCuvm8"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28558/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19890/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28558/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm8LtVfi1HETiPUZaisZwQ3V347Jsd13Nh2Q9kAocCuvm8","multiaddrs":["/ip4/172.17.0.10/tcp/10745/p2p/16Uiu2HAm8LtVfi1HETiPUZaisZwQ3V347Jsd13Nh2Q9kAocCuvm8","/ip4/172.17.0.10/tcp/10746/ws/p2p/16Uiu2HAm8LtVfi1HETiPUZaisZwQ3V347Jsd13Nh2Q9kAocCuvm8"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19890/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.10/tcp/10745/p2p/16Uiu2HAm8LtVfi1HETiPUZaisZwQ3V347Jsd13Nh2Q9kAocCuvm8","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28558/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1725333175831221760}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10744/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"e2cb49d0d5ac5eee563929bbd27b30a90213e96526b7a7e8195c18d9c7f56dec","status_code":200,"status_desc":"OK","messages":[{"message_hash":"Y/FsKRdgdVTiUniBI2uCHV1/5HfyyZy86/GNmxvEHFQ="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d0e19cff3360
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 53ab64ad5fb8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id af1f27bc8538
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.