[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:349 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29678', '29679', '29680', '29681', '29682']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29678:29678 -p 29679:29679 -p 29680:29680 -p 29681:29681 -p 29682:29682 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29680 --rest-port=29678 --tcp-port=29679 --discv5-udp-port=29681 --rest-address=0.0.0.0 --nat=extip:172.18.41.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abd1f0a4b28a9bd7dbc21fa3e55cee6ee785bb5a8e50a0b9e81cdfbc9d1cab63 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.141 waku b1b7dd468ca10ac9a48a329bf325c6a170f7927517050216322112ddf4dfc3a9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b1b7dd468ca1. Setting up logs at ./log/docker/node1_2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 29678
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29678/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QEuh6cPGGIK9ZyvDUgAOCKXcOQZ6POZKzkvYPT0T1zDEaEkt1k9F_A5ndtsQY5p_QzJ744LYyeeN6Vq-HtGC7BKGAZS1KhytgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDGLG0wcTHaAOtie_eDmMFBWZWrB6kptHCT11jdcVFniqDdGNwgnPvg3VkcIJz8YV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/29679/p2p/16Uiu2HAmEKPJKtJH86vJVNd812VS3CTrHJCVrpX2EFx7gh3f5YEV","/ip4/127.0.0.1/tcp/29680/ws/p2p/16Uiu2HAmEKPJKtJH86vJVNd812VS3CTrHJCVrpX2EFx7gh3f5YEV","/ip4/172.17.0.2/tcp/29679/p2p/16Uiu2HAmEKPJKtJH86vJVNd812VS3CTrHJCVrpX2EFx7gh3f5YEV","/ip4/172.17.0.2/tcp/29680/ws/p2p/16Uiu2HAmEKPJKtJH86vJVNd812VS3CTrHJCVrpX2EFx7gh3f5YEV"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.217.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48262', '48263', '48264', '48265', '48266']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48262:48262 -p 48263:48263 -p 48264:48264 -p 48265:48265 -p 48266:48266 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48264 --rest-port=48262 --tcp-port=48263 --discv5-udp-port=48265 --rest-address=0.0.0.0 --nat=extip:172.18.217.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fecc71ec49cfcc59a36b7bed00a4fc6accadc2acdc1b27cdb5eb60cbfcff9d62 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48266 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QEuh6cPGGIK9ZyvDUgAOCKXcOQZ6POZKzkvYPT0T1zDEaEkt1k9F_A5ndtsQY5p_QzJ744LYyeeN6Vq-HtGC7BKGAZS1KhytgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDGLG0wcTHaAOtie_eDmMFBWZWrB6kptHCT11jdcVFniqDdGNwgnPvg3VkcIJz8YV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.217.37 waku 04686be9ec0c6d88f10ea67eb7f2e9e35fb35ab21fe3706c6dc7ea55212b4907
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 04686be9ec0c. Setting up logs at ./log/docker/node2_2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 48262
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48262/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48262/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.37/tcp/48263/p2p/16Uiu2HAmTUf98d4Bw3bWrv7jreU8wqhsqcDTe1viHZ8h5DLSwTwR","/ip4/172.18.217.37/tcp/48264/ws/p2p/16Uiu2HAmTUf98d4Bw3bWrv7jreU8wqhsqcDTe1viHZ8h5DLSwTwR"],"enrUri":"enr:-L24QOIbeknRKPpkVJln7Yh1Mq-kAys3fK_48uv8JTFlAVgvb0K7spzPGZnJnrhGSK2gZSjAyEdpTGy4kUH_tUx_QDUCgmlkgnY0gmlwhKwS2SWKbXVsdGlhZGRyc5YACASsEtklBryHAAoErBLZJQa8iN0DgnJzhQADAQAAiXNlY3AyNTZrMaED3DnGgi88Kw-g659SpNDxXjQHfvSY8fL-xF2HdcwyKtyDdGNwgryHg3VkcIK8iYV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.64.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39495', '39496', '39497', '39498', '39499']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39495:39495 -p 39496:39496 -p 39497:39497 -p 39498:39498 -p 39499:39499 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=39497 --rest-port=39495 --tcp-port=39496 --discv5-udp-port=39498 --rest-address=0.0.0.0 --nat=extip:172.18.64.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa5cffd299aff3245db0aeeb6c0bfffea1665e3713a24d0af69cbb6b105b7b97 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.217.37/tcp/48263/p2p/16Uiu2HAmTUf98d4Bw3bWrv7jreU8wqhsqcDTe1viHZ8h5DLSwTwR --store=false --pubsub-topic=/waku/2/rs/3/1 --discv5-bootstrap-node=enr:-L24QOIbeknRKPpkVJln7Yh1Mq-kAys3fK_48uv8JTFlAVgvb0K7spzPGZnJnrhGSK2gZSjAyEdpTGy4kUH_tUx_QDUCgmlkgnY0gmlwhKwS2SWKbXVsdGlhZGRyc5YACASsEtklBryHAAoErBLZJQa8iN0DgnJzhQADAQAAiXNlY3AyNTZrMaED3DnGgi88Kw-g659SpNDxXjQHfvSY8fL-xF2HdcwyKtyDdGNwgryHg3VkcIK8iYV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.64.230 waku 991d10fafb62975cf2425fa68e9d7577445fbdead774f75fab4558bce5dfe873
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 991d10fafb62. Setting up logs at ./log/docker/node3_2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 39495
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39495/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QENT7w_7ehJVY9zwMetX0AAYXnDKWEtPWOWvIzmVVLl0aMHYyE3jGXoYyoelqbv-8tXsKL9wa1F6kAcbqzhEadWGAZS1Ki67gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQP5oO0I4ZsbSWPFMjGjV1jLcGMq1WVpcM0FYMNxV_ramIN0Y3CCmkiDdWRwgppKhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/39496/p2p/16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs","/ip4/127.0.0.1/tcp/39497/ws/p2p/16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs","/ip4/172.17.0.4/tcp/39496/p2p/16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs","/ip4/172.17.0.4/tcp/39497/ws/p2p/16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:360 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29678/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48262/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:364 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29678/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs","multiaddrs":["/ip4/172.17.0.4/tcp/39496/p2p/16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs","/ip4/172.17.0.4/tcp/39497/ws/p2p/16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]},{"id":"16Uiu2HAmTUf98d4Bw3bWrv7jreU8wqhsqcDTe1viHZ8h5DLSwTwR","multiaddrs":["/ip4/172.18.217.37/tcp/48263/p2p/16Uiu2HAmTUf98d4Bw3bWrv7jreU8wqhsqcDTe1viHZ8h5DLSwTwR","/ip4/172.18.217.37/tcp/48264/ws/p2p/16Uiu2HAmTUf98d4Bw3bWrv7jreU8wqhsqcDTe1viHZ8h5DLSwTwR"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48262/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29678/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs","multiaddrs":["/ip4/172.17.0.4/tcp/39496/p2p/16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs","/ip4/172.17.0.4/tcp/39497/ws/p2p/16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]},{"id":"16Uiu2HAmTUf98d4Bw3bWrv7jreU8wqhsqcDTe1viHZ8h5DLSwTwR","multiaddrs":["/ip4/172.18.217.37/tcp/48263/p2p/16Uiu2HAmTUf98d4Bw3bWrv7jreU8wqhsqcDTe1viHZ8h5DLSwTwR","/ip4/172.18.217.37/tcp/48264/ws/p2p/16Uiu2HAmTUf98d4Bw3bWrv7jreU8wqhsqcDTe1viHZ8h5DLSwTwR"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48262/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/39496/p2p/16Uiu2HAmVTSC31A7LkHomdmW7a13aYcnmKyjwb9rBMfuX74bdpSs","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:368 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39495/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39495/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b1b7dd468ca1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 04686be9ec0c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b1b7dd468ca1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 991d10fafb62
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-30_03-03-40__e4b76aaa-596b-41d8-8812-b9b5801778ed__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:349 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.84.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10399', '10400', '10401', '10402', '10403']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10399:10399 -p 10400:10400 -p 10401:10401 -p 10402:10402 -p 10403:10403 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=10401 --rest-port=10399 --tcp-port=10400 --discv5-udp-port=10402 --rest-address=0.0.0.0 --nat=extip:172.18.84.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc4cecbbdaacc88ce261b6dea62637a2d9cfd4078ebeb0abc0cb78c6f27abd55 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.84.72 waku fb69640d2cbc5bde9ff691dff498c19ad5dd02d3889a060d967b51132905bd93
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 04686be9ec0c. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fb69640d2cbc. Setting up logs at ./log/docker/node1_2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 10399
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 991d10fafb62. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10399/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QL0fGMhm2s6045N9MU5MJczUUTcjcNTUEBXs0ElK_aZrBceKX0eGzW4CBh3XOCfb0oX0ImF3oAe5Xaw6evpVBV-GAZS1KrUcgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEC7schFBlBIZMppxXUWN95HTvHYHn9fkI5celXMNN88dCDdGNwgiigg3VkcIIoooV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/10400/p2p/16Uiu2HAmBVm85sQRRCD1UkRd5m5RCNMSv9Q4ukLWkrQY3diewxjq","/ip4/127.0.0.1/tcp/10401/ws/p2p/16Uiu2HAmBVm85sQRRCD1UkRd5m5RCNMSv9Q4ukLWkrQY3diewxjq","/ip4/172.17.0.2/tcp/10400/p2p/16Uiu2HAmBVm85sQRRCD1UkRd5m5RCNMSv9Q4ukLWkrQY3diewxjq","/ip4/172.17.0.2/tcp/10401/ws/p2p/16Uiu2HAmBVm85sQRRCD1UkRd5m5RCNMSv9Q4ukLWkrQY3diewxjq"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.93.55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62954', '62955', '62956', '62957', '62958']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62954:62954 -p 62955:62955 -p 62956:62956 -p 62957:62957 -p 62958:62958 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62956 --rest-port=62954 --tcp-port=62955 --discv5-udp-port=62957 --rest-address=0.0.0.0 --nat=extip:172.18.93.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=08ca53a3b975fdb8ada67daff0fcc4ad5f7ca5eab9894ee397706a8ad084b9f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62958 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QL0fGMhm2s6045N9MU5MJczUUTcjcNTUEBXs0ElK_aZrBceKX0eGzW4CBh3XOCfb0oX0ImF3oAe5Xaw6evpVBV-GAZS1KrUcgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEC7schFBlBIZMppxXUWN95HTvHYHn9fkI5celXMNN88dCDdGNwgiigg3VkcIIoooV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.93.55 waku f794ea5305728c9717550d8f474e1e119015763bb470a963cfda8930b8e856ac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f794ea530572. Setting up logs at ./log/docker/node2_2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 62954
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62954/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62954/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.55/tcp/62955/p2p/16Uiu2HAkwectYLHp3ytMinCXNgcRebndZnQr4LKivjpBZFyqShjf","/ip4/172.18.93.55/tcp/62956/ws/p2p/16Uiu2HAkwectYLHp3ytMinCXNgcRebndZnQr4LKivjpBZFyqShjf"],"enrUri":"enr:-L24QGBBHA9YYeR0NepCnwSZBVNUbdCm29o3Av9cpaZsC6PuGr-Aoz5ad4jsqiaGUDhyrckac33Znh9w0J2EnGhhRh4CgmlkgnY0gmlwhKwSXTeKbXVsdGlhZGRyc5YACASsEl03BvXrAAoErBJdNwb17N0DgnJzhQADAQAAiXNlY3AyNTZrMaECIQhuC4UIiTBPBIgsJwTuyLZpoeNgF2KrPPJmLH5VCrKDdGNwgvXrg3VkcIL17YV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.32.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35273', '35274', '35275', '35276', '35277']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35273:35273 -p 35274:35274 -p 35275:35275 -p 35276:35276 -p 35277:35277 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35275 --rest-port=35273 --tcp-port=35274 --discv5-udp-port=35276 --rest-address=0.0.0.0 --nat=extip:172.18.32.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e1dd5ce75dbcc6afbcec0bede13c3d4dfc3a2a6f3189a1a279befebff1b4bfbf --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.93.55/tcp/62955/p2p/16Uiu2HAkwectYLHp3ytMinCXNgcRebndZnQr4LKivjpBZFyqShjf --store=false --pubsub-topic=/waku/2/rs/3/1 --discv5-bootstrap-node=enr:-L24QGBBHA9YYeR0NepCnwSZBVNUbdCm29o3Av9cpaZsC6PuGr-Aoz5ad4jsqiaGUDhyrckac33Znh9w0J2EnGhhRh4CgmlkgnY0gmlwhKwSXTeKbXVsdGlhZGRyc5YACASsEl03BvXrAAoErBJdNwb17N0DgnJzhQADAQAAiXNlY3AyNTZrMaECIQhuC4UIiTBPBIgsJwTuyLZpoeNgF2KrPPJmLH5VCrKDdGNwgvXrg3VkcIL17YV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.32.218 waku 6713bb2dc0c1a810b4def03a54dbfecdc12d892333676d1f6ca21a0d2043fb21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6713bb2dc0c1. Setting up logs at ./log/docker/node3_2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 35273
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35273/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QBBnBOnBvkDLO6HnS8-XmKo_EW-K5P93AyyvFIp9EhPMDIHKImni1MYbG1I7trCLDUzaSfi5Dn_xDJxN9Gby7FWGAZS1Kr9cgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNgxdsObkPGEPFm3fjcG5_NXjZTmILO3PHtk3uhDv9FFYN0Y3CCicqDdWRwgonMhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/35274/p2p/16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE","/ip4/127.0.0.1/tcp/35275/ws/p2p/16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE","/ip4/172.17.0.4/tcp/35274/p2p/16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE","/ip4/172.17.0.4/tcp/35275/ws/p2p/16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:360 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10399/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62954/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:364 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10399/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE","multiaddrs":["/ip4/172.17.0.4/tcp/35274/p2p/16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE","/ip4/172.17.0.4/tcp/35275/ws/p2p/16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]},{"id":"16Uiu2HAkwectYLHp3ytMinCXNgcRebndZnQr4LKivjpBZFyqShjf","multiaddrs":["/ip4/172.18.93.55/tcp/62955/p2p/16Uiu2HAkwectYLHp3ytMinCXNgcRebndZnQr4LKivjpBZFyqShjf","/ip4/172.18.93.55/tcp/62956/ws/p2p/16Uiu2HAkwectYLHp3ytMinCXNgcRebndZnQr4LKivjpBZFyqShjf"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62954/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10399/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE","multiaddrs":["/ip4/172.17.0.4/tcp/35274/p2p/16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE","/ip4/172.17.0.4/tcp/35275/ws/p2p/16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]},{"id":"16Uiu2HAkwectYLHp3ytMinCXNgcRebndZnQr4LKivjpBZFyqShjf","multiaddrs":["/ip4/172.18.93.55/tcp/62955/p2p/16Uiu2HAkwectYLHp3ytMinCXNgcRebndZnQr4LKivjpBZFyqShjf","/ip4/172.18.93.55/tcp/62956/ws/p2p/16Uiu2HAkwectYLHp3ytMinCXNgcRebndZnQr4LKivjpBZFyqShjf"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62954/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/35274/p2p/16Uiu2HAmKAkUTRKLKhJJwa77sKY4LUBBhmEEQtPoJUw9qzDjuABE","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:368 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35273/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35273/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fb69640d2cbc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f794ea530572
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fb69640d2cbc. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6713bb2dc0c1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-30_03-04-22__b6fb0895-9d79-4915-b22d-e509c7782be1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:349 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.5.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5231', '5232', '5233', '5234', '5235']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5231:5231 -p 5232:5232 -p 5233:5233 -p 5234:5234 -p 5235:5235 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=5233 --rest-port=5231 --tcp-port=5232 --discv5-udp-port=5234 --rest-address=0.0.0.0 --nat=extip:172.18.5.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a7d38cfdbf7b95e4aae09caeb05cbfdb2e76aace780f7b5e9f993c5f6012e0ae --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.5.121 waku f0dbb1359668010fc7bce84f6f4b496bb3713731b143d90f824b7e3e93233c82
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f794ea530572. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f0dbb1359668. Setting up logs at ./log/docker/node1_2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 5231
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6713bb2dc0c1. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5231/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QHLBosp3yACUZeXHnGQqo93eiSW8AX3QkTPN_xuvxynhE7OmdKOviyp-p2folo9VceAx83tAkmiNgqYCy6j_r0CGAZS1K0VhgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECVwrYHGbAsuDr3-qFxYuZx_WFfgFcZhBAp4Nti-V7gvmDdGNwghRwg3VkcIIUcoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/5232/p2p/16Uiu2HAm1HT3J1pZ5V45F5J11REyyetZryTjKR4abhqSco7FNYSC","/ip4/127.0.0.1/tcp/5233/ws/p2p/16Uiu2HAm1HT3J1pZ5V45F5J11REyyetZryTjKR4abhqSco7FNYSC","/ip4/172.17.0.2/tcp/5232/p2p/16Uiu2HAm1HT3J1pZ5V45F5J11REyyetZryTjKR4abhqSco7FNYSC","/ip4/172.17.0.2/tcp/5233/ws/p2p/16Uiu2HAm1HT3J1pZ5V45F5J11REyyetZryTjKR4abhqSco7FNYSC"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.239.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22910', '22911', '22912', '22913', '22914']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22910:22910 -p 22911:22911 -p 22912:22912 -p 22913:22913 -p 22914:22914 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22912 --rest-port=22910 --tcp-port=22911 --discv5-udp-port=22913 --rest-address=0.0.0.0 --nat=extip:172.18.239.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ca707b8feaafe89faa1aad66054af1ddf2794d59c1c7e1adb3da336bc91bcbf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22914 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QHLBosp3yACUZeXHnGQqo93eiSW8AX3QkTPN_xuvxynhE7OmdKOviyp-p2folo9VceAx83tAkmiNgqYCy6j_r0CGAZS1K0VhgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECVwrYHGbAsuDr3-qFxYuZx_WFfgFcZhBAp4Nti-V7gvmDdGNwghRwg3VkcIIUcoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.239.10 waku 9cfa4ab7adab2d696aba9edbdd61c69ca034b40bb99d9bfa2a6746644d7d60ee
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9cfa4ab7adab. Setting up logs at ./log/docker/node2_2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22910
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22910/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22910/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.10/tcp/22911/p2p/16Uiu2HAm4sekVoz6CSNSkkCJeY5N8xtJc4PsAN6gKbhx5xReAmsr","/ip4/172.18.239.10/tcp/22912/ws/p2p/16Uiu2HAm4sekVoz6CSNSkkCJeY5N8xtJc4PsAN6gKbhx5xReAmsr"],"enrUri":"enr:-L24QM4ITynp4k19zDobL9s_C-yDlVnlc5H7wAZt15aS16K2HvvTe60ZhIkPBxeyRWQscloGqzaWlITNaqT9XaB3uvECgmlkgnY0gmlwhKwS7wqKbXVsdGlhZGRyc5YACASsEu8KBll_AAoErBLvCgZZgN0DgnJzhQADAQAAiXNlY3AyNTZrMaECjGDkui8umX1eBqV48m_tk6FgWEwGbtLKA0BkFaGDlC2DdGNwgll_g3VkcIJZgYV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.255.200
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58423', '58424', '58425', '58426', '58427']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58423:58423 -p 58424:58424 -p 58425:58425 -p 58426:58426 -p 58427:58427 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=58425 --rest-port=58423 --tcp-port=58424 --discv5-udp-port=58426 --rest-address=0.0.0.0 --nat=extip:172.18.255.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=79adece6bbc2c4e3f9d1f39be6adae003d26cde592fedd7a93fa7ba5ac8709b2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.239.10/tcp/22911/p2p/16Uiu2HAm4sekVoz6CSNSkkCJeY5N8xtJc4PsAN6gKbhx5xReAmsr --store=false --pubsub-topic=/waku/2/rs/3/1 --discv5-bootstrap-node=enr:-L24QM4ITynp4k19zDobL9s_C-yDlVnlc5H7wAZt15aS16K2HvvTe60ZhIkPBxeyRWQscloGqzaWlITNaqT9XaB3uvECgmlkgnY0gmlwhKwS7wqKbXVsdGlhZGRyc5YACASsEu8KBll_AAoErBLvCgZZgN0DgnJzhQADAQAAiXNlY3AyNTZrMaECjGDkui8umX1eBqV48m_tk6FgWEwGbtLKA0BkFaGDlC2DdGNwgll_g3VkcIJZgYV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.255.200 waku e665436f5379f2d15b4735b7417e5cea429c642d30f2852ca995a5f97e4aab86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e665436f5379. Setting up logs at ./log/docker/node3_2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 58423
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58423/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHCwcygfJX-EDkHBUtGm8z2bBIT4uwCk_n-yyCvZH95jY5GavUCMB7lNJGTZ18wnkxV2Js6qGMQ_lufA4MIQUV2GAZS1K096gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOTuFXWqkiz23woKcLTkLmlZExvE54cCSGh4ZbvYjD0UYN0Y3CC5DiDdWRwguQ6hXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/58424/p2p/16Uiu2HAmNbdJtfef8fKNGXCXut2JEjdhUaSSJPdFo3rgbwniKboW","/ip4/127.0.0.1/tcp/58425/ws/p2p/16Uiu2HAmNbdJtfef8fKNGXCXut2JEjdhUaSSJPdFo3rgbwniKboW","/ip4/172.17.0.4/tcp/58424/p2p/16Uiu2HAmNbdJtfef8fKNGXCXut2JEjdhUaSSJPdFo3rgbwniKboW","/ip4/172.17.0.4/tcp/58425/ws/p2p/16Uiu2HAmNbdJtfef8fKNGXCXut2JEjdhUaSSJPdFo3rgbwniKboW"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:360 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5231/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22910/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:364 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5231/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm4sekVoz6CSNSkkCJeY5N8xtJc4PsAN6gKbhx5xReAmsr","multiaddrs":["/ip4/172.18.239.10/tcp/22911/p2p/16Uiu2HAm4sekVoz6CSNSkkCJeY5N8xtJc4PsAN6gKbhx5xReAmsr","/ip4/172.18.239.10/tcp/22912/ws/p2p/16Uiu2HAm4sekVoz6CSNSkkCJeY5N8xtJc4PsAN6gKbhx5xReAmsr"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22910/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5231/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm4sekVoz6CSNSkkCJeY5N8xtJc4PsAN6gKbhx5xReAmsr","multiaddrs":["/ip4/172.18.239.10/tcp/22911/p2p/16Uiu2HAm4sekVoz6CSNSkkCJeY5N8xtJc4PsAN6gKbhx5xReAmsr","/ip4/172.18.239.10/tcp/22912/ws/p2p/16Uiu2HAm4sekVoz6CSNSkkCJeY5N8xtJc4PsAN6gKbhx5xReAmsr"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22910/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/58424/p2p/16Uiu2HAmNbdJtfef8fKNGXCXut2JEjdhUaSSJPdFo3rgbwniKboW","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:368 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58423/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:58423/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f0dbb1359668
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9cfa4ab7adab
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f0dbb1359668. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e665436f5379
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2025-01-30_03-04-59__e88d90ee-b254-44b7-95cd-994fe92c0aa8__wakuorg_go-waku:latest.log