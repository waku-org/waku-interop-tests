[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2025-01-30_03-06-55__522070b8-0634-47a6-9f47-729b23994408
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-30_03-06-55__522070b8-0634-47a6-9f47-729b23994408__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.89.101
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6130', '6131', '6132', '6133', '6134']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6130:6130 -p 6131:6131 -p 6132:6132 -p 6133:6133 -p 6134:6134 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6132 --rest-port=6130 --tcp-port=6131 --discv5-udp-port=6133 --rest-address=0.0.0.0 --nat=extip:172.18.89.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abbee97aaa8b6bccc69ea1cedfcdaaeec52978ab5ffede6e663a9385cabb4f5d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6134 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.89.101 waku 128c3436303be79816d871699d20941be487f4d945c2eb54274c56d76ec19aef
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3a646d791d50. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 128c3436303b. Setting up logs at ./log/docker/receiving_node1_2025-01-30_03-06-55__522070b8-0634-47a6-9f47-729b23994408__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6130
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9ccce69f0897. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6130/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6130/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.101/tcp/6131/p2p/16Uiu2HAmDEKiJk7sSYr1J76BPhz69YgNiUhSJZ4mr3xGFGvN8tUB","/ip4/172.18.89.101/tcp/6132/ws/p2p/16Uiu2HAmDEKiJk7sSYr1J76BPhz69YgNiUhSJZ4mr3xGFGvN8tUB"],"enrUri":"enr:-L24QAvJFgeSBYoMesgTv0psBhRXsUAQwxtmhk3913AHWO7nFpNo4ToTbU5PiWZYaaq6eXaUwnFnyDyxW2VnsRS1E6MCgmlkgnY0gmlwhKwSWWWKbXVsdGlhZGRyc5YACASsElllBhfzAAoErBJZZQYX9N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCIoPTlsMK18E5bX3iPNL5OIfAO-00QAvtoqLOUrcDZyDdGNwghfzg3VkcIIX9YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-30_03-06-55__522070b8-0634-47a6-9f47-729b23994408__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.31.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8867', '8868', '8869', '8870', '8871']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8867:8867 -p 8868:8868 -p 8869:8869 -p 8870:8870 -p 8871:8871 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8869 --rest-port=8867 --tcp-port=8868 --discv5-udp-port=8870 --rest-address=0.0.0.0 --nat=extip:172.18.31.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9bced1cd28de197c57ec3d79caf5acedb4125b5f7cb9a6bb1aa9bddbe3b4e6e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8871 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.31.11 waku 4a000cc573f7a37fd3fb030e5b35c5283b5f15bc2012e2aa235ad652424d834d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4a000cc573f7. Setting up logs at ./log/docker/receiving_node2_2025-01-30_03-06-55__522070b8-0634-47a6-9f47-729b23994408__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8867
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8867/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8867/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.11/tcp/8868/p2p/16Uiu2HAmKFGCt4MpeLmHuanQjBn1S9WM6zh7wGBrrcSEXjwLFaSb","/ip4/172.18.31.11/tcp/8869/ws/p2p/16Uiu2HAmKFGCt4MpeLmHuanQjBn1S9WM6zh7wGBrrcSEXjwLFaSb"],"enrUri":"enr:-L24QJPKwn6kWB8_0vGNHHPswqicHWAYB5xhgSdxC4P5W_-9P4eIvk6scoG_Iqi3yWIpq54rBfy1nNWSaaq2WPJPHmwCgmlkgnY0gmlwhKwSHwuKbXVsdGlhZGRyc5YACASsEh8LBiKkAAoErBIfCwYipd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYe3L4Kb9biR5rcfNrQbjFSVfsGZXqEbC4WEaC-xNChCDdGNwgiKkg3VkcIIipoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8867/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.89.101/tcp/6131/p2p/16Uiu2HAmDEKiJk7sSYr1J76BPhz69YgNiUhSJZ4mr3xGFGvN8tUB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-30_03-06-55__522070b8-0634-47a6-9f47-729b23994408__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.217.29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14859', '14860', '14861', '14862', '14863']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14859:14859 -p 14860:14860 -p 14861:14861 -p 14862:14862 -p 14863:14863 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=14861 --rest-port=14859 --tcp-port=14860 --discv5-udp-port=14862 --rest-address=0.0.0.0 --nat=extip:172.18.217.29 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0d5e6d530891d8cb669cceab76ffbcb1abfc92c7eea999ca6dc0834af3f8cc34 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QAvJFgeSBYoMesgTv0psBhRXsUAQwxtmhk3913AHWO7nFpNo4ToTbU5PiWZYaaq6eXaUwnFnyDyxW2VnsRS1E6MCgmlkgnY0gmlwhKwSWWWKbXVsdGlhZGRyc5YACASsElllBhfzAAoErBJZZQYX9N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCIoPTlsMK18E5bX3iPNL5OIfAO-00QAvtoqLOUrcDZyDdGNwghfzg3VkcIIX9YV3YWt1Mgk --lightpushnode=/ip4/172.18.89.101/tcp/6131/p2p/16Uiu2HAmDEKiJk7sSYr1J76BPhz69YgNiUhSJZ4mr3xGFGvN8tUB --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.217.29 waku 3cbc6a831a452c485bbd824be8090575db7c9e74a88d7097e0309454f19467d0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3cbc6a831a45. Setting up logs at ./log/docker/lightpush_node1_2025-01-30_03-06-55__522070b8-0634-47a6-9f47-729b23994408__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 14859
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14859/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMmC9hHvPEIyypX4WeDf9Q_JN84nxnc1KOct1WXmzwmVGyb0QgAV8jy9CqmY9U5Vqx3afIODyEDjBfXNU_RSkdSGAZS1LRSsgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOnIxFHDBP0eXvOnoI_DnrFtI7izh2nu5CQeWL_Fk0BvYN0Y3CCOgyDdWRwgjoOhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/14860/p2p/16Uiu2HAmPuRT483Eq1eW5o6V4mbAovaEGNg1y9LrWZJS2BtdfyX2","/ip4/127.0.0.1/tcp/14861/ws/p2p/16Uiu2HAmPuRT483Eq1eW5o6V4mbAovaEGNg1y9LrWZJS2BtdfyX2","/ip4/172.17.0.4/tcp/14860/p2p/16Uiu2HAmPuRT483Eq1eW5o6V4mbAovaEGNg1y9LrWZJS2BtdfyX2","/ip4/172.17.0.4/tcp/14861/ws/p2p/16Uiu2HAmPuRT483Eq1eW5o6V4mbAovaEGNg1y9LrWZJS2BtdfyX2"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14859/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.89.101/tcp/6131/p2p/16Uiu2HAmDEKiJk7sSYr1J76BPhz69YgNiUhSJZ4mr3xGFGvN8tUB", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14859/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.31.11/tcp/8868/p2p/16Uiu2HAmKFGCt4MpeLmHuanQjBn1S9WM6zh7wGBrrcSEXjwLFaSb", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6130/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8867/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14859/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738206419135027200}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14859/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14859/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738206419138606592}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14859/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14859/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738206419141254912}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14859/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14859/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738206419143749376}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14859/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 128c3436303b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4a000cc573f7
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 128c3436303b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3cbc6a831a45
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.