[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_relay_and_store with id: 2024-05-03_03-20-39__d7d9ac4d-24ae-4462-9f63-24578291c2e5
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-03_03-20-39__d7d9ac4d-24ae-4462-9f63-24578291c2e5__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.53.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['5056', '5057', '5058', '5059', '5060']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 5056:5056 -p 5057:5057 -p 5058:5058 -p 5059:5059 -p 5060:5060 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5058 --rest-port=5056 --tcp-port=5057 --discv5-udp-port=5059 --rest-address=0.0.0.0 --nat=extip:172.18.53.230 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5060 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.53.230 waku 75b8f813e9ffd85f47de5d42d5490de566cc0491fd705aec5e1817f7ed09f2c7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 75b8f813e9ff. Setting up logs at ./log/docker/publishing_node1_2024-05-03_03-20-39__d7d9ac4d-24ae-4462-9f63-24578291c2e5__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 5056
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5056/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.230/tcp/5057/p2p/16Uiu2HAkzsoM4RqrZkvMrUJSyYdUM1A6F7dY64oJmsApuYsDLTSM","/ip4/172.18.53.230/tcp/5058/ws/p2p/16Uiu2HAkzsoM4RqrZkvMrUJSyYdUM1A6F7dY64oJmsApuYsDLTSM"],"enrUri":"enr:-LO4QFKZ1h2eE6TrqyVC_CiWgjXOeQ2_6hn4DqsXz6sxa8vLHG-pQif4sedinO-xYnRZBHEIjpy-e61xItMoGMkmmjYBgmlkgnY0gmlwhKwSNeaKbXVsdGlhZGRyc4wACgSsEjXmBhPC3QOCcnOFAAABAACJc2VjcDI1NmsxoQJQ-918YtO6biOkwB4eVkOUZIIOQfMNk21IsPR1mWWXHoN0Y3CCE8GDdWRwghPDhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-03_03-20-39__d7d9ac4d-24ae-4462-9f63-24578291c2e5__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.8.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['1544', '1545', '1546', '1547', '1548']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 1544:1544 -p 1545:1545 -p 1546:1546 -p 1547:1547 -p 1548:1548 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=1546 --rest-port=1544 --tcp-port=1545 --discv5-udp-port=1547 --rest-address=0.0.0.0 --nat=extip:172.18.8.237 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QFKZ1h2eE6TrqyVC_CiWgjXOeQ2_6hn4DqsXz6sxa8vLHG-pQif4sedinO-xYnRZBHEIjpy-e61xItMoGMkmmjYBgmlkgnY0gmlwhKwSNeaKbXVsdGlhZGRyc4wACgSsEjXmBhPC3QOCcnOFAAABAACJc2VjcDI1NmsxoQJQ-918YtO6biOkwB4eVkOUZIIOQfMNk21IsPR1mWWXHoN0Y3CCE8GDdWRwghPDhXdha3UyAw --storenode=/ip4/172.18.53.230/tcp/5057/p2p/16Uiu2HAkzsoM4RqrZkvMrUJSyYdUM1A6F7dY64oJmsApuYsDLTSM --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.8.237 waku e780c066ce44777e81f545b18f48770b616d391dc66b4a3965bd19e754479ecb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e780c066ce44. Setting up logs at ./log/docker/store_node1_2024-05-03_03-20-39__d7d9ac4d-24ae-4462-9f63-24578291c2e5__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 1544
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1544/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QARAbMYmhx-NLcpairdsA9KTvHFQCRxKbrKTBUpFjwlSX3iNQbC1nrDrDNyelTA0d2WYF9GEU8DM3wZvSYk38iaGAY88d-X3gmlkgnY0gmlwhKwRAAiKbXVsdGlhZGRyc5gACgR_AAABBgYK3QMACgSsEQAIBgYK3QOJc2VjcDI1NmsxoQMcXQhaevJ7vQS4hLSgVfMEAWNDKPQV5Zkrz0Z6jfpaG4N0Y3CCBgmDdWRwggYLhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/1545/p2p/16Uiu2HAmEZi3YcHZ5Q4n5wjYpRNxUEJKxdZde9z7fJGyupPPPgQS","/ip4/127.0.0.1/tcp/1546/ws/p2p/16Uiu2HAmEZi3YcHZ5Q4n5wjYpRNxUEJKxdZde9z7fJGyupPPPgQS","/ip4/172.17.0.8/tcp/1545/p2p/16Uiu2HAmEZi3YcHZ5Q4n5wjYpRNxUEJKxdZde9z7fJGyupPPPgQS","/ip4/172.17.0.8/tcp/1546/ws/p2p/16Uiu2HAmEZi3YcHZ5Q4n5wjYpRNxUEJKxdZde9z7fJGyupPPPgQS"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1544/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.53.230/tcp/5057/p2p/16Uiu2HAkzsoM4RqrZkvMrUJSyYdUM1A6F7dY64oJmsApuYsDLTSM", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5056/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1544/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5056/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5056/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714706442777057536,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 75b8f813e9ff
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id e780c066ce44
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-03_03-20-39__d7d9ac4d-24ae-4462-9f63-24578291c2e5__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-03_03-20-39__d7d9ac4d-24ae-4462-9f63-24578291c2e5__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_relay_and_store with id: 2024-05-03_03-20-46__7b483431-bb78-4b60-9fec-bc286f984889
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-03_03-20-46__7b483431-bb78-4b60-9fec-bc286f984889__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.108.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['28561', '28562', '28563', '28564', '28565']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 28561:28561 -p 28562:28562 -p 28563:28563 -p 28564:28564 -p 28565:28565 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28563 --rest-port=28561 --tcp-port=28562 --discv5-udp-port=28564 --rest-address=0.0.0.0 --nat=extip:172.18.108.80 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28565 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.108.80 waku 0a6d52e97794c7b06c60482d7e385caf4cf191162ba1564d28c6d40fd3811446
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0a6d52e97794. Setting up logs at ./log/docker/publishing_node1_2024-05-03_03-20-46__7b483431-bb78-4b60-9fec-bc286f984889__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 28561
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28561/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.80/tcp/28562/p2p/16Uiu2HAmJR7hjx2imaUgzd35SkfYE7HXQc8xr5Mz8yGTYBPXNydz","/ip4/172.18.108.80/tcp/28563/ws/p2p/16Uiu2HAmJR7hjx2imaUgzd35SkfYE7HXQc8xr5Mz8yGTYBPXNydz"],"enrUri":"enr:-LO4QIZAvcLR6-nSX683TwsIXGTNlzScIK2pz0-MXwsqf33EOrNiTRWSgYlJ313cre2uLjV8QlEC_MJ87hRYjYFJawYBgmlkgnY0gmlwhKwSbFCKbXVsdGlhZGRyc4wACgSsEmxQBm-T3QOCcnOFAAABAACJc2VjcDI1NmsxoQNVmE3JbZ0sc6cx3GiqNo2LA2tikTnKKP-OICkSp899KYN0Y3CCb5KDdWRwgm-UhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-03_03-20-46__7b483431-bb78-4b60-9fec-bc286f984889__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.108.36
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['54883', '54884', '54885', '54886', '54887']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 54883:54883 -p 54884:54884 -p 54885:54885 -p 54886:54886 -p 54887:54887 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=54885 --rest-port=54883 --tcp-port=54884 --discv5-udp-port=54886 --rest-address=0.0.0.0 --nat=extip:172.18.108.36 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QIZAvcLR6-nSX683TwsIXGTNlzScIK2pz0-MXwsqf33EOrNiTRWSgYlJ313cre2uLjV8QlEC_MJ87hRYjYFJawYBgmlkgnY0gmlwhKwSbFCKbXVsdGlhZGRyc4wACgSsEmxQBm-T3QOCcnOFAAABAACJc2VjcDI1NmsxoQNVmE3JbZ0sc6cx3GiqNo2LA2tikTnKKP-OICkSp899KYN0Y3CCb5KDdWRwgm-UhXdha3UyAw --storenode=/ip4/172.18.108.80/tcp/28562/p2p/16Uiu2HAmJR7hjx2imaUgzd35SkfYE7HXQc8xr5Mz8yGTYBPXNydz --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.108.36 waku 1bd80dc7a9df13a68583be73b081df412c2dad1a0a1d19ff2fed22400012943a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1bd80dc7a9df. Setting up logs at ./log/docker/store_node1_2024-05-03_03-20-46__7b483431-bb78-4b60-9fec-bc286f984889__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 54883
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54883/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QCY0cO2sNb5oYv0PAjz1pKELNHul51gmik4VedZRY_ryeezBQg6MZmsHc0Ihp5Wu-2hy1hvPeTB1C8gI1Eq3LX-GAY88d_-3gmlkgnY0gmlwhKwRAAaKbXVsdGlhZGRyc5gACgR_AAABBtZl3QMACgSsEQAGBtZl3QOJc2VjcDI1NmsxoQIQEMpXJ0XbhrQzdQYjXzCFvfIaW_WF1dTLxWO3bqsbYIN0Y3CC1mSDdWRwgtZmhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/54884/p2p/16Uiu2HAkvWPMQeUxEuLWNPaDSWVHh3CtvrFivUhcoKhUo9MQWfxT","/ip4/127.0.0.1/tcp/54885/ws/p2p/16Uiu2HAkvWPMQeUxEuLWNPaDSWVHh3CtvrFivUhcoKhUo9MQWfxT","/ip4/172.17.0.6/tcp/54884/p2p/16Uiu2HAkvWPMQeUxEuLWNPaDSWVHh3CtvrFivUhcoKhUo9MQWfxT","/ip4/172.17.0.6/tcp/54885/ws/p2p/16Uiu2HAkvWPMQeUxEuLWNPaDSWVHh3CtvrFivUhcoKhUo9MQWfxT"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54883/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.108.80/tcp/28562/p2p/16Uiu2HAmJR7hjx2imaUgzd35SkfYE7HXQc8xr5Mz8yGTYBPXNydz", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28561/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54883/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28561/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28561/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714706449370792704,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 0a6d52e97794
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 1bd80dc7a9df
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-03_03-20-46__7b483431-bb78-4b60-9fec-bc286f984889__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-03_03-20-46__7b483431-bb78-4b60-9fec-bc286f984889__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_relay_and_store with id: 2024-05-03_03-20-52__20abfcff-4639-4dd0-bf51-eeb7d5345eb5
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-03_03-20-52__20abfcff-4639-4dd0-bf51-eeb7d5345eb5__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.156.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['63860', '63861', '63862', '63863', '63864']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 63860:63860 -p 63861:63861 -p 63862:63862 -p 63863:63863 -p 63864:63864 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63862 --rest-port=63860 --tcp-port=63861 --discv5-udp-port=63863 --rest-address=0.0.0.0 --nat=extip:172.18.156.89 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63864 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.156.89 waku c12dbae04443c1a43c6f7c727162df770b670490851c07bd93aef523679aa8d0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c12dbae04443. Setting up logs at ./log/docker/publishing_node1_2024-05-03_03-20-52__20abfcff-4639-4dd0-bf51-eeb7d5345eb5__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 63860
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63860/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.89/tcp/63861/p2p/16Uiu2HAmRMnWSBb6YFCF1GKfWZsKSKp2Yj88i2m8W1wXSRWFHdRu","/ip4/172.18.156.89/tcp/63862/ws/p2p/16Uiu2HAmRMnWSBb6YFCF1GKfWZsKSKp2Yj88i2m8W1wXSRWFHdRu"],"enrUri":"enr:-LO4QIitZluDCjMEcH_qaPmXMbjlxXchGVLlaEVU-MTBNl8oV9vyk51p0ppsdlv0WanCefDdB3zbfVJmTqzsMephTYkBgmlkgnY0gmlwhKwSnFmKbXVsdGlhZGRyc4wACgSsEpxZBvl23QOCcnOFAAABAACJc2VjcDI1NmsxoQO8v6qHYKlkz0-D5_-YlUW55YMqpo5F0Fu9iv6NpfsZtIN0Y3CC-XWDdWRwgvl3hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-03_03-20-52__20abfcff-4639-4dd0-bf51-eeb7d5345eb5__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.249.241
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['1152', '1153', '1154', '1155', '1156']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 1152:1152 -p 1153:1153 -p 1154:1154 -p 1155:1155 -p 1156:1156 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=1154 --rest-port=1152 --tcp-port=1153 --discv5-udp-port=1155 --rest-address=0.0.0.0 --nat=extip:172.18.249.241 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QIitZluDCjMEcH_qaPmXMbjlxXchGVLlaEVU-MTBNl8oV9vyk51p0ppsdlv0WanCefDdB3zbfVJmTqzsMephTYkBgmlkgnY0gmlwhKwSnFmKbXVsdGlhZGRyc4wACgSsEpxZBvl23QOCcnOFAAABAACJc2VjcDI1NmsxoQO8v6qHYKlkz0-D5_-YlUW55YMqpo5F0Fu9iv6NpfsZtIN0Y3CC-XWDdWRwgvl3hXdha3UyAw --storenode=/ip4/172.18.156.89/tcp/63861/p2p/16Uiu2HAmRMnWSBb6YFCF1GKfWZsKSKp2Yj88i2m8W1wXSRWFHdRu --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.249.241 waku 3f313f304d65759783791ef32c9367b807288d05c02866a65cd3ee43e00aeb1d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 3f313f304d65. Setting up logs at ./log/docker/store_node1_2024-05-03_03-20-52__20abfcff-4639-4dd0-bf51-eeb7d5345eb5__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 1152
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1152/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QMLG3Bevt4Qr22XOEtusPfSWWpFgcH8Cmj_npI8gGCavMmyz5JzxsgWABsvyyaqU4VZbPca2Z9ucRNvFb0VqwOyGAY88eBqkgmlkgnY0gmlwhKwRAASKbXVsdGlhZGRyc5gACgSsEQAEBgSC3QMACgR_AAABBgSC3QOJc2VjcDI1NmsxoQKdlbOXGb4irVK6eC7KNOWNKft4MnEOrU0139BsBc1FQ4N0Y3CCBIGDdWRwggSDhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/1153/p2p/16Uiu2HAm62pPJXUbTMKDMSof1UKSUXmDQXnhw7D1Ak42XWDdcJQr","/ip4/127.0.0.1/tcp/1154/ws/p2p/16Uiu2HAm62pPJXUbTMKDMSof1UKSUXmDQXnhw7D1Ak42XWDdcJQr","/ip4/172.17.0.4/tcp/1153/p2p/16Uiu2HAm62pPJXUbTMKDMSof1UKSUXmDQXnhw7D1Ak42XWDdcJQr","/ip4/172.17.0.4/tcp/1154/ws/p2p/16Uiu2HAm62pPJXUbTMKDMSof1UKSUXmDQXnhw7D1Ak42XWDdcJQr"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1152/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.156.89/tcp/63861/p2p/16Uiu2HAmRMnWSBb6YFCF1GKfWZsKSKp2Yj88i2m8W1wXSRWFHdRu", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63860/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1152/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63860/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63860/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714706456288705024,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id c12dbae04443
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 3f313f304d65
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-03_03-20-52__20abfcff-4639-4dd0-bf51-eeb7d5345eb5__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-03_03-20-52__20abfcff-4639-4dd0-bf51-eeb7d5345eb5__harbor.status.im_wakuorg_nwaku:latest.log