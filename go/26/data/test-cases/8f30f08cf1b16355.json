{"uid":"8f30f08cf1b16355","name":"test_filter_get_message_after_node_pauses_and_pauses","fullName":"tests.filter.test_get_messages.TestFilterGetMessages#test_filter_get_message_after_node_pauses_and_pauses","historyId":"42ea2b9be9d82b6ae105d3400381a69e","time":{"start":1709262734480,"stop":1709262734480,"duration":0},"status":"broken","statusMessage":"docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/ca58d5773e765942e8fe6f7c8140a7558f5d89c1bc32580732d0b39959223813/start: Internal Server Error (\"driver failed programming external connectivity on endpoint pensive_booth (9ea8bac77eeb4aa671e548ad57e81dc54a1a81c37b0b846f1cb94280681217b1): Error starting userland proxy: listen tcp4 0.0.0.0:38060: bind: address already in use\")","statusTrace":"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/api/client.py:265: in _raise_for_status\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http+docker://localhost/v1.43/containers/ca58d5773e765942e8fe6f7c8140a7558f5d89c1bc32580732d0b39959223813/start\n\nThe above exception was the direct cause of the following exception:\nsrc/steps/filter.py:34: in setup_main_relay_node\n    self.relay_node_start(NODE_1)\nsrc/steps/filter.py:64: in relay_node_start\n    self.node1.start(**start_args)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:289: in wrapped_f\n    return self(f, *args, **kw)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:379: in __call__\n    do = self.iter(retry_state=retry_state)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:325: in iter\n    raise retry_exc.reraise()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:158: in reraise\n    raise self.last_attempt.result()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/concurrent/futures/_base.py:449: in result\n    return self.__get_result()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:382: in __call__\n    result = fn(*args, **kwargs)\nsrc/node/waku_node.py:117: in start\n    self._container = self._docker_manager.start_container(\nsrc/node/docker_mananger.py:47: in start_container\n    container = self._client.containers.run(\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/models/containers.py:880: in run\n    container.start()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/models/containers.py:417: in start\n    return self.client.api.start(self.id, **kwargs)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/utils/decorators.py:19: in wrapped\n    return f(self, resource_id, *args, **kwargs)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/api/container.py:1135: in start\n    self._raise_for_status(res)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/api/client.py:267: in _raise_for_status\n    raise create_api_error_from_http_exception(e) from e\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/errors.py:39: in create_api_error_from_http_exception\n    raise cls(e, response=response, explanation=explanation) from e\nE   docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/ca58d5773e765942e8fe6f7c8140a7558f5d89c1bc32580732d0b39959223813/start: Internal Server Error (\"driver failed programming external connectivity on endpoint pensive_booth (9ea8bac77eeb4aa671e548ad57e81dc54a1a81c37b0b846f1cb94280681217b1): Error starting userland proxy: listen tcp4 0.0.0.0:38060: bind: address already in use\")","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1709262734482,"stop":1709262734482,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1709262734483,"stop":1709262734483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1709262734483,"stop":1709262734483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1709262734483,"stop":1709262734483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1709262734484,"stop":1709262734484,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_node","time":{"start":1709262734484,"stop":1709262743080,"duration":8596},"status":"broken","statusMessage":"docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/ca58d5773e765942e8fe6f7c8140a7558f5d89c1bc32580732d0b39959223813/start: Internal Server Error (\"driver failed programming external connectivity on endpoint pensive_booth (9ea8bac77eeb4aa671e548ad57e81dc54a1a81c37b0b846f1cb94280681217b1): Error starting userland proxy: listen tcp4 0.0.0.0:38060: bind: address already in use\")\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/pluggy/_callers.py\", line 166, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/pluggy/_callers.py\", line 102, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1140, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/_pytest/fixtures.py\", line 917, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 34, in setup_main_relay_node\n    self.relay_node_start(NODE_1)\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 64, in relay_node_start\n    self.node1.start(**start_args)\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py\", line 289, in wrapped_f\n    return self(f, *args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py\", line 379, in __call__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py\", line 325, in iter\n    raise retry_exc.reraise()\n          ^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py\", line 158, in reraise\n    raise self.last_attempt.result()\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/concurrent/futures/_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/concurrent/futures/_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py\", line 382, in __call__\n    result = fn(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 117, in start\n    self._container = self._docker_manager.start_container(\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/docker_mananger.py\", line 47, in start_container\n    container = self._client.containers.run(\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/models/containers.py\", line 880, in run\n    container.start()\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/models/containers.py\", line 417, in start\n    return self.client.api.start(self.id, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/utils/decorators.py\", line 19, in wrapped\n    return f(self, resource_id, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/api/container.py\", line 1135, in start\n    self._raise_for_status(res)\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/api/client.py\", line 267, in _raise_for_status\n    raise create_api_error_from_http_exception(e) from e\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/errors.py\", line 39, in create_api_error_from_http_exception\n    raise cls(e, response=response, explanation=explanation) from e\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"filter_setup","time":{"start":1709262734484,"stop":1709262734484,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_filter_node","time":{"start":1709262744880,"stop":1709262753728,"duration":8848},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"subscribe_main_nodes","time":{"start":1709262753728,"stop":1709262758351,"duration":4623},"status":"passed","steps":[{"name":"wait_for_subscriptions_on_main_nodes","time":{"start":1709262753728,"stop":1709262758351,"duration":4623},"status":"passed","steps":[{"name":"create_filter_subscription_with_retry","time":{"start":1709262753731,"stop":1709262758351,"duration":4620},"status":"passed","steps":[{"name":"create_filter_subscription","time":{"start":1709262753731,"stop":1709262758350,"duration":4619},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '74b9d4d7-a36b-4841-ac17-017798a2032f', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '74b9d4d7-a36b-4841-ac17-017798a2032f', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topic_list","value":"['/test/1/waku-filter/proto']"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/ca58d5773e765942e8fe6f7c8140a7558f5d89c1bc32580732d0b39959223813/start: Internal Server Error (\"driver failed programming external connectivity on endpoint pensive_booth (9ea8bac77eeb4aa671e548ad57e81dc54a1a81c37b0b846f1cb94280681217b1): Error starting userland proxy: listen tcp4 0.0.0.0:38060: bind: address already in use\")","statusTrace":"/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/api/client.py:265: in _raise_for_status\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http+docker://localhost/v1.43/containers/ca58d5773e765942e8fe6f7c8140a7558f5d89c1bc32580732d0b39959223813/start\n\nThe above exception was the direct cause of the following exception:\nsrc/steps/filter.py:34: in setup_main_relay_node\n    self.relay_node_start(NODE_1)\nsrc/steps/filter.py:64: in relay_node_start\n    self.node1.start(**start_args)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:289: in wrapped_f\n    return self(f, *args, **kw)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:379: in __call__\n    do = self.iter(retry_state=retry_state)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:325: in iter\n    raise retry_exc.reraise()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:158: in reraise\n    raise self.last_attempt.result()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/concurrent/futures/_base.py:449: in result\n    return self.__get_result()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/tenacity/__init__.py:382: in __call__\n    result = fn(*args, **kwargs)\nsrc/node/waku_node.py:117: in start\n    self._container = self._docker_manager.start_container(\nsrc/node/docker_mananger.py:47: in start_container\n    container = self._client.containers.run(\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/models/containers.py:880: in run\n    container.start()\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/models/containers.py:417: in start\n    return self.client.api.start(self.id, **kwargs)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/utils/decorators.py:19: in wrapped\n    return f(self, resource_id, *args, **kwargs)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/api/container.py:1135: in start\n    self._raise_for_status(res)\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/api/client.py:267: in _raise_for_status\n    raise create_api_error_from_http_exception(e) from e\n/opt/hostedtoolcache/Python/3.12.2/x64/lib/python3.12/site-packages/docker/errors.py:39: in create_api_error_from_http_exception\n    raise cls(e, response=response, explanation=explanation) from e\nE   docker.errors.APIError: 500 Server Error for http+docker://localhost/v1.43/containers/ca58d5773e765942e8fe6f7c8140a7558f5d89c1bc32580732d0b39959223813/start: Internal Server Error (\"driver failed programming external connectivity on endpoint pensive_booth (9ea8bac77eeb4aa671e548ad57e81dc54a1a81c37b0b846f1cb94280681217b1): Error starting userland proxy: listen tcp4 0.0.0.0:38060: bind: address already in use\")","steps":[],"attachments":[{"uid":"d8397860559ba42d","name":"log","source":"d8397860559ba42d.txt","type":"text/plain","size":2684}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1709262743312,"stop":1709262743313,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1709262743313,"stop":1709262743313,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1709262743314,"stop":1709262743314,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1709263155641,"stop":1709263155641,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node', 'subscribe_main_nodes')"},{"name":"parentSuite","value":"tests.filter"},{"name":"suite","value":"test_get_messages"},{"name":"subSuite","value":"TestFilterGetMessages"},{"name":"host","value":"fv-az887-104"},{"name":"thread","value":"2150-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.filter.test_get_messages"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node', 'subscribe_main_nodes')"]},"source":"8f30f08cf1b16355.json","parameterValues":[]}