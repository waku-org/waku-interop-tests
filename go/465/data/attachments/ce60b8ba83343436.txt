2025-02-13 03:06:14.143 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 03:06:14.143 DEBUG [tests.conftest] Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-02-13_03-06-14__985fb610-8433-4178-ad1e-cbbaf5396dc3
2025-02-13 03:06:14.144 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 03:06:14.144 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 03:06:14.144 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 03:06:14.152 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:06:14.153 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_03-06-14__985fb610-8433-4178-ad1e-cbbaf5396dc3__wakuorg_go-waku:latest.log
2025-02-13 03:06:14.158 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:06:14.158 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_03-06-14__985fb610-8433-4178-ad1e-cbbaf5396dc3__wakuorg_nwaku:latest.log
2025-02-13 03:06:14.164 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:06:14.164 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-13_03-06-14__985fb610-8433-4178-ad1e-cbbaf5396dc3__wakuorg_go-waku:latest.log
2025-02-13 03:06:14.165 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 03:06:14.165 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 03:06:14.166 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:14.166 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:14.230 DEBUG [src.node.docker_mananger] Network waku created
2025-02-13 03:06:14.230 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.242.255
2025-02-13 03:06:14.230 DEBUG [src.node.docker_mananger] Generated ports ['31347', '31348', '31349', '31350', '31351']
2025-02-13 03:06:14.230 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:14.231 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:14.231 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:14.231 DEBUG [src.node.docker_mananger] docker run -i -t -p 31347:31347 -p 31348:31348 -p 31349:31349 -p 31350:31350 -p 31351:31351 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31349 --rest-port=31347 --tcp-port=31348 --discv5-udp-port=31350 --rest-address=0.0.0.0 --nat=extip:172.18.242.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=29fde4cdaf9d1f60df6e61baaa05ffacbd558bd748bb79b1d210d85dceacbe31 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --filter=true --relay=true
2025-02-13 03:06:17.056 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.242.255 waku ed5d4510d3fb7b6e03afe443833a44b5a4c573fbdfd6cc68b0616d4c0206d4a6
2025-02-13 03:06:17.111 DEBUG [src.node.docker_mananger] Container started with ID ed5d4510d3fb. Setting up logs at ./log/docker/node1_2025-02-13_03-06-14__985fb610-8433-4178-ad1e-cbbaf5396dc3__wakuorg_go-waku:latest.log
2025-02-13 03:06:17.113 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 31347
2025-02-13 03:06:17.113 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:18.114 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31347/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:18.117 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QCVfHUuZelywy_e9fCiuCBQicfYbXcTfLxus3VymZTslYn13XGXr6LKLvMFhrUSckCp-keb621FpmyF7RXR25cCGAZT9RXyTgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECfcezp5Rn9Y8QT29zDQ-XqnkImGKQWdM_QqQuJhfkQCWDdGNwgnp0g3VkcIJ6doV3YWt1MgU","listenAddresses":["/ip4/127.0.0.1/tcp/31348/p2p/16Uiu2HAm3tfZQMk23VGYCxSrhGumrF5jWrNPTFXqcPGFuQsPjM2k","/ip4/127.0.0.1/tcp/31349/ws/p2p/16Uiu2HAm3tfZQMk23VGYCxSrhGumrF5jWrNPTFXqcPGFuQsPjM2k","/ip4/172.17.0.2/tcp/31348/p2p/16Uiu2HAm3tfZQMk23VGYCxSrhGumrF5jWrNPTFXqcPGFuQsPjM2k","/ip4/172.17.0.2/tcp/31349/ws/p2p/16Uiu2HAm3tfZQMk23VGYCxSrhGumrF5jWrNPTFXqcPGFuQsPjM2k"]}'
2025-02-13 03:06:18.117 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:18.117 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:18.118 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:18.119 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:18.119 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.248.170
2025-02-13 03:06:18.119 DEBUG [src.node.docker_mananger] Generated ports ['25138', '25139', '25140', '25141', '25142']
2025-02-13 03:06:18.120 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:18.120 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:18.120 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:18.120 DEBUG [src.node.docker_mananger] docker run -i -t -p 25138:25138 -p 25139:25139 -p 25140:25140 -p 25141:25141 -p 25142:25142 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25140 --rest-port=25138 --tcp-port=25139 --discv5-udp-port=25141 --rest-address=0.0.0.0 --nat=extip:172.18.248.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abdfffffa04eeea56ccccb8cef63cc5b888e71aea4a5b1a6eadc3852edd4cc8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25142 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-J-4QCVfHUuZelywy_e9fCiuCBQicfYbXcTfLxus3VymZTslYn13XGXr6LKLvMFhrUSckCp-keb621FpmyF7RXR25cCGAZT9RXyTgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECfcezp5Rn9Y8QT29zDQ-XqnkImGKQWdM_QqQuJhfkQCWDdGNwgnp0g3VkcIJ6doV3YWt1MgU
2025-02-13 03:06:20.234 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.248.170 waku 3228f1a0b544268203e0ed1607aebc77eee3ad3faec9a5fb5f7237d0184e23a9
2025-02-13 03:06:20.287 DEBUG [src.node.docker_mananger] Container started with ID 3228f1a0b544. Setting up logs at ./log/docker/node2_2025-02-13_03-06-14__985fb610-8433-4178-ad1e-cbbaf5396dc3__wakuorg_nwaku:latest.log
2025-02-13 03:06:20.287 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25138
2025-02-13 03:06:20.287 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:21.288 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25138/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:21.292 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:06:21.292 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:06:21.292 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25138/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:21.295 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.170/tcp/25139/p2p/16Uiu2HAm4LaYZpMq8dUwntP3SGyU7pRxR8pvienhe27P5MzxUT3V","/ip4/172.18.248.170/tcp/25140/ws/p2p/16Uiu2HAm4LaYZpMq8dUwntP3SGyU7pRxR8pvienhe27P5MzxUT3V"],"enrUri":"enr:-L24QMCr1wOSTY_pvgfrzhrQPF1xC8pzlRn_5jvuDhSHDXElVI7085_crUMNyaNn8Sjp_fAN1VFm7BaOZklxOtVoByoCgmlkgnY0gmlwhKwS-KqKbXVsdGlhZGRyc5YACASsEviqBmIzAAoErBL4qgZiNN0DgnJzhQADAQAAiXNlY3AyNTZrMaEChGsiCtuFK5MCNszMkOqm7TDvZtdK9XcJb9rKEPgg_ICDdGNwgmIzg3VkcIJiNYV3YWt1MgU"}'
2025-02-13 03:06:21.295 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:21.295 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:21.295 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:21.297 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:21.297 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.222.212
2025-02-13 03:06:21.297 DEBUG [src.node.docker_mananger] Generated ports ['23257', '23258', '23259', '23260', '23261']
2025-02-13 03:06:21.297 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:21.297 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:21.297 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:21.297 DEBUG [src.node.docker_mananger] docker run -i -t -p 23257:23257 -p 23258:23258 -p 23259:23259 -p 23260:23260 -p 23261:23261 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23259 --rest-port=23257 --tcp-port=23258 --discv5-udp-port=23260 --rest-address=0.0.0.0 --nat=extip:172.18.222.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac990defefeaaa9beeccdbef2c22fd73d2d66d9db62a5f0b1fad3c9aa8f6ff1d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.248.170/tcp/25139/p2p/16Uiu2HAm4LaYZpMq8dUwntP3SGyU7pRxR8pvienhe27P5MzxUT3V --discv5-bootstrap-node=enr:-L24QMCr1wOSTY_pvgfrzhrQPF1xC8pzlRn_5jvuDhSHDXElVI7085_crUMNyaNn8Sjp_fAN1VFm7BaOZklxOtVoByoCgmlkgnY0gmlwhKwS-KqKbXVsdGlhZGRyc5YACASsEviqBmIzAAoErBL4qgZiNN0DgnJzhQADAQAAiXNlY3AyNTZrMaEChGsiCtuFK5MCNszMkOqm7TDvZtdK9XcJb9rKEPgg_ICDdGNwgmIzg3VkcIJiNYV3YWt1MgU --pubsub-topic=/waku/2/rs/3/1
2025-02-13 03:06:21.537 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.222.212 waku e695c01fc218df11e26ad89d485d073a69c550909cf62b543618edafdbb379d3
2025-02-13 03:06:21.590 DEBUG [src.node.docker_mananger] Container started with ID e695c01fc218. Setting up logs at ./log/docker/node3_2025-02-13_03-06-14__985fb610-8433-4178-ad1e-cbbaf5396dc3__wakuorg_go-waku:latest.log
2025-02-13 03:06:21.592 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 23257
2025-02-13 03:06:21.594 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:22.595 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23257/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:22.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QIrFbnJs9wtJImzWOz_Ga1lTWKfKRzu1P4Btlk9yOD1BdnCFLOvIVe_lmOOgpU5kIQzVfx5UcfP8n849Ax88oNaGAZT9RY4SgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQKZZ5kPlqBviMGqPpYkcYlQlnA3vGorbIw45FdM8khuF4N0Y3CCWtqDdWRwglrchXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/23258/p2p/16Uiu2HAm5kVyorQwkkBh4jXR4iDnmVLUj5S3EZf76za7jRe19y98","/ip4/127.0.0.1/tcp/23259/ws/p2p/16Uiu2HAm5kVyorQwkkBh4jXR4iDnmVLUj5S3EZf76za7jRe19y98","/ip4/172.17.0.4/tcp/23258/p2p/16Uiu2HAm5kVyorQwkkBh4jXR4iDnmVLUj5S3EZf76za7jRe19y98","/ip4/172.17.0.4/tcp/23259/ws/p2p/16Uiu2HAm5kVyorQwkkBh4jXR4iDnmVLUj5S3EZf76za7jRe19y98"]}'
2025-02-13 03:06:22.598 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:22.598 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31347/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:06:22.600 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-13 03:06:22.601 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25138/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:06:22.604 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:22.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23257/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 03:06:28.169 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-13 03:06:28.170 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31347/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:28.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAm4LaYZpMq8dUwntP3SGyU7pRxR8pvienhe27P5MzxUT3V","multiaddrs":["/ip4/172.18.248.170/tcp/25139/p2p/16Uiu2HAm4LaYZpMq8dUwntP3SGyU7pRxR8pvienhe27P5MzxUT3V","/ip4/172.18.248.170/tcp/25140/ws/p2p/16Uiu2HAm4LaYZpMq8dUwntP3SGyU7pRxR8pvienhe27P5MzxUT3V"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
2025-02-13 03:06:28.173 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25138/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:28.176 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/31348/p2p/16Uiu2HAm3tfZQMk23VGYCxSrhGumrF5jWrNPTFXqcPGFuQsPjM2k","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.4/tcp/23258/p2p/16Uiu2HAm5kVyorQwkkBh4jXR4iDnmVLUj5S3EZf76za7jRe19y98","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-13 03:06:28.176 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23257/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:28.179 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAm4LaYZpMq8dUwntP3SGyU7pRxR8pvienhe27P5MzxUT3V","multiaddrs":["/ip4/172.18.248.170/tcp/25139/p2p/16Uiu2HAm4LaYZpMq8dUwntP3SGyU7pRxR8pvienhe27P5MzxUT3V","/ip4/172.18.248.170/tcp/25140/ws/p2p/16Uiu2HAm4LaYZpMq8dUwntP3SGyU7pRxR8pvienhe27P5MzxUT3V"],"protocols":["/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
2025-02-13 03:06:28.179 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-13 03:06:58.180 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31347/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 03:06:58.183 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-13 03:06:58.184 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:59.184 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-13 03:06:59.185 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23257/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:59.188 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739416018180190976,"ephemeral":false}]'
2025-02-13 03:06:59.192 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 03:06:59.193 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 03:06:59.193 DEBUG [src.node.waku_node] Stopping container with id ed5d4510d3fb
2025-02-13 03:06:59.724 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:59.725 DEBUG [src.node.waku_node] Stopping container with id 3228f1a0b544
2025-02-13 03:07:00.539 ERROR [src.node.docker_mananger] Max retries reached for container ed5d4510d3fb. Exiting log stream.
2025-02-13 03:07:00.838 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:07:00.838 DEBUG [src.node.waku_node] Stopping container with id e695c01fc218
2025-02-13 03:07:01.364 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:07:01.366 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 03:07:01.375 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:07:01.408 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:07:01.415 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
