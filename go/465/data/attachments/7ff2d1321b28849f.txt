2025-02-13 03:07:11.220 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 03:07:11.220 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_multiple_overlapping_content_topics with id: 2025-02-13_03-07-11__6f4401a0-8732-488b-a995-3a00f02a5866
2025-02-13 03:07:11.221 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 03:07:11.221 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 03:07:11.221 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 03:07:11.227 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:07:11.227 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_03-07-11__6f4401a0-8732-488b-a995-3a00f02a5866__wakuorg_nwaku:latest.log
2025-02-13 03:07:11.227 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:07:11.227 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:07:11.228 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:07:11.229 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.243
2025-02-13 03:07:11.229 DEBUG [src.node.docker_mananger] Generated ports ['18574', '18575', '18576', '18577', '18578']
2025-02-13 03:07:11.229 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:07:11.229 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:07:11.229 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:07:11.229 DEBUG [src.node.docker_mananger] docker run -i -t -p 18574:18574 -p 18575:18575 -p 18576:18576 -p 18577:18577 -p 18578:18578 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18576 --rest-port=18574 --tcp-port=18575 --discv5-udp-port=18577 --rest-address=0.0.0.0 --nat=extip:172.18.106.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffda73ff2edec99a26f3e964fb3456ccd16128ee29dfecaadb350096be66f58c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18578 --metrics-logging=true --relay=true --filter=true
2025-02-13 03:07:11.454 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.243 waku b7760e4f92b5bf0f77560ad433f5bdff28da6f08f938464a3b639c54cca51877
2025-02-13 03:07:11.500 DEBUG [src.node.docker_mananger] Container started with ID b7760e4f92b5. Setting up logs at ./log/docker/node1_2025-02-13_03-07-11__6f4401a0-8732-488b-a995-3a00f02a5866__wakuorg_nwaku:latest.log
2025-02-13 03:07:11.501 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18574
2025-02-13 03:07:11.501 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:07:12.027 ERROR [src.node.docker_mananger] Max retries reached for container 54336016d43a. Exiting log stream.
2025-02-13 03:07:12.501 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18574/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:12.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:07:12.505 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:07:12.505 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18574/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:12.507 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.243/tcp/18575/p2p/16Uiu2HAmNfek57FB7McBWQXkXVeVyMgZiQkSAsUsSSZFkWR87ewv","/ip4/172.18.106.243/tcp/18576/ws/p2p/16Uiu2HAmNfek57FB7McBWQXkXVeVyMgZiQkSAsUsSSZFkWR87ewv"],"enrUri":"enr:-L24QEhUcYvuQzGK6debpDOcpfimY_OSEU9ZVzpTPxfljf8DebgbtbrjViWfendecFTmeN6x9Au_VweADxRjDL3723oCgmlkgnY0gmlwhKwSavOKbXVsdGlhZGRyc5YACASsEmrzBkiPAAoErBJq8wZIkN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlMBHtn9rSfSdy1WDJlLiqkJlt9D5JktcbUhrY3V9hMWDdGNwgkiPg3VkcIJIkYV3YWt1MgU"}'
2025-02-13 03:07:12.507 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:07:12.508 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 03:07:12.514 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:07:12.514 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_03-07-11__6f4401a0-8732-488b-a995-3a00f02a5866__wakuorg_go-waku:latest.log
2025-02-13 03:07:12.514 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:07:12.514 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:07:12.516 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:07:12.516 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.112.7
2025-02-13 03:07:12.516 DEBUG [src.node.docker_mananger] Generated ports ['41190', '41191', '41192', '41193', '41194']
2025-02-13 03:07:12.516 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:07:12.516 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:07:12.516 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:07:12.516 DEBUG [src.node.docker_mananger] docker run -i -t -p 41190:41190 -p 41191:41191 -p 41192:41192 -p 41193:41193 -p 41194:41194 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=41192 --rest-port=41190 --tcp-port=41191 --discv5-udp-port=41193 --rest-address=0.0.0.0 --nat=extip:172.18.112.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8befb5e0ca00e1b75ec517f266d0bd3acccaa5bb3f88d0d0ac9a03cc698e2db9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QEhUcYvuQzGK6debpDOcpfimY_OSEU9ZVzpTPxfljf8DebgbtbrjViWfendecFTmeN6x9Au_VweADxRjDL3723oCgmlkgnY0gmlwhKwSavOKbXVsdGlhZGRyc5YACASsEmrzBkiPAAoErBJq8wZIkN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlMBHtn9rSfSdy1WDJlLiqkJlt9D5JktcbUhrY3V9hMWDdGNwgkiPg3VkcIJIkYV3YWt1MgU --filternode=/ip4/172.18.106.243/tcp/18575/p2p/16Uiu2HAmNfek57FB7McBWQXkXVeVyMgZiQkSAsUsSSZFkWR87ewv --pubsub-topic=/waku/2/rs/3/1
2025-02-13 03:07:12.744 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.112.7 waku e15a065786e858f703611086ee61e901163323eb416ab696462aaf1c74ba3dad
2025-02-13 03:07:12.795 DEBUG [src.node.docker_mananger] Container started with ID e15a065786e8. Setting up logs at ./log/docker/node2_2025-02-13_03-07-11__6f4401a0-8732-488b-a995-3a00f02a5866__wakuorg_go-waku:latest.log
2025-02-13 03:07:12.797 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 41190
2025-02-13 03:07:12.797 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:07:13.798 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41190/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:13.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QNtLQvPQSKc0GkbPMSUREirqSWIh4j7dGyq81Q0YRB9sRCjg-E5wxXb-IRGG5kd8G8ZoWSsJaS5XbZEn288_g22GAZT9RlYXgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQIH3HpQ7A0dXWcBe3VKJuQRaL_k3q9_nP-ID3jTU8Qq14N0Y3CCoOeDdWRwgqDphXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/41191/p2p/16Uiu2HAkuxMpqThnZE9y3eFb62XaX4ZRomwbrdoeHa9QTZp1Unz2","/ip4/127.0.0.1/tcp/41192/ws/p2p/16Uiu2HAkuxMpqThnZE9y3eFb62XaX4ZRomwbrdoeHa9QTZp1Unz2","/ip4/172.17.0.3/tcp/41191/p2p/16Uiu2HAkuxMpqThnZE9y3eFb62XaX4ZRomwbrdoeHa9QTZp1Unz2","/ip4/172.17.0.3/tcp/41192/ws/p2p/16Uiu2HAkuxMpqThnZE9y3eFb62XaX4ZRomwbrdoeHa9QTZp1Unz2"]}'
2025-02-13 03:07:13.800 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:07:13.801 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41190/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.106.243/tcp/18575/p2p/16Uiu2HAmNfek57FB7McBWQXkXVeVyMgZiQkSAsUsSSZFkWR87ewv", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-13 03:07:13.802 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-13 03:07:13.803 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18574/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:07:13.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:07:13.807 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41190/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6ed2ace4-c2d3-48cf-a31f-95e26a58c320", "contentFilters": ["Hello World!", "1234567890", "{\"key\": \"value\"}"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 03:07:13.812 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"6ed2ace4-c2d3-48cf-a31f-95e26a58c320","statusDesc":"OK"}'
2025-02-13 03:07:13.813 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18574/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:07:13.816 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:07:13.816 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41190/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3eb4b0cb-f3dc-41a0-9abb-e713fbba1a3d", "contentFilters": ["1234567890", "{\"key\": \"value\"}", "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 03:07:13.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3eb4b0cb-f3dc-41a0-9abb-e713fbba1a3d","statusDesc":"OK"}'
2025-02-13 03:07:13.822 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18574/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2025-02-13 03:07:13.830 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:07:13.830 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 03:07:13.930 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-13 03:07:13.931 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41190/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:13.933 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"Hello World!","version":0,"timestamp":1739416033822653696,"ephemeral":false}]'
2025-02-13 03:07:13.934 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18574/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2025-02-13 03:07:13.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:07:13.942 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 03:07:14.042 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-13 03:07:14.042 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41190/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/1234567890" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:14.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1739416033934711552,"ephemeral":false}]'
2025-02-13 03:07:14.046 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18574/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "{\"key\": \"value\"}", "timestamp": '$(date +%s%N)'}'
2025-02-13 03:07:14.052 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:07:14.053 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 03:07:14.153 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-13 03:07:14.153 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41190/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%7B%22key%22%3A%20%22value%22%7D" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:14.155 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"{\\"key\\": \\"value\\"}","version":0,"timestamp":1739416034045889280,"ephemeral":false}]'
2025-02-13 03:07:14.157 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18574/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587", "timestamp": '$(date +%s%N)'}'
2025-02-13 03:07:14.164 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:07:14.164 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 03:07:14.265 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-13 03:07:14.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41190/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%E8%BF%99%E6%98%AF%E4%B8%80%E4%BA%9B%E4%B8%AD%E6%96%87" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:14.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xba\x9b\xe4\xb8\xad\xe6\x96\x87","version":0,"timestamp":1739416034157217024,"ephemeral":false}]'
2025-02-13 03:07:14.270 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 03:07:14.270 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 03:07:14.271 DEBUG [src.node.waku_node] Stopping container with id b7760e4f92b5
2025-02-13 03:07:14.799 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:07:14.800 DEBUG [src.node.waku_node] Stopping container with id e15a065786e8
2025-02-13 03:07:15.284 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:07:15.286 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 03:07:15.292 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:07:15.295 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
