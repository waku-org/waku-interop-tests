2025-02-13 03:06:06.624 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 03:06:06.624 DEBUG [tests.conftest] Running test: test_light_push_with_payload_less_than_150_kb with id: 2025-02-13_03-06-06__0d0037a2-a755-417f-b049-a04f34777afd
2025-02-13 03:06:06.625 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 03:06:06.625 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 03:06:06.632 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:06:06.632 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-13_03-06-06__0d0037a2-a755-417f-b049-a04f34777afd__wakuorg_nwaku:latest.log
2025-02-13 03:06:06.633 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:06.633 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:06.634 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:06.634 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.152.187
2025-02-13 03:06:06.635 DEBUG [src.node.docker_mananger] Generated ports ['27703', '27704', '27705', '27706', '27707']
2025-02-13 03:06:06.635 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:06.635 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:06.635 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:06.635 DEBUG [src.node.docker_mananger] docker run -i -t -p 27703:27703 -p 27704:27704 -p 27705:27705 -p 27706:27706 -p 27707:27707 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27705 --rest-port=27703 --tcp-port=27704 --discv5-udp-port=27706 --rest-address=0.0.0.0 --nat=extip:172.18.152.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=14ed8f32cf30d24c06724e9ed8cdeafd262a88ba6a5991fcdcbd51bbe10be2bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27707 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 03:06:06.865 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.152.187 waku 8a39e03254dbc3afb8ad0182ee60d84fc747d6853122f0b8461c7a9e3ce2ef79
2025-02-13 03:06:06.913 DEBUG [src.node.docker_mananger] Container started with ID 8a39e03254db. Setting up logs at ./log/docker/receiving_node1_2025-02-13_03-06-06__0d0037a2-a755-417f-b049-a04f34777afd__wakuorg_nwaku:latest.log
2025-02-13 03:06:06.914 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27703
2025-02-13 03:06:06.914 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:07.439 ERROR [src.node.docker_mananger] Max retries reached for container e05ebcc98f5c. Exiting log stream.
2025-02-13 03:06:07.916 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27703/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:07.919 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:06:07.919 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:06:07.919 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27703/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:07.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.187/tcp/27704/p2p/16Uiu2HAmRqMqNcsmYa4bDzweaQ8ZiSasoPc8HK3MsJFEoz9XdMPt","/ip4/172.18.152.187/tcp/27705/ws/p2p/16Uiu2HAmRqMqNcsmYa4bDzweaQ8ZiSasoPc8HK3MsJFEoz9XdMPt"],"enrUri":"enr:-L24QNnw7NX3h8XrbERYnbycUPuoMgim6JxFTf1P_6h_dT0GEc7MhwQ8lDiS6Qu-hNFumWf8yL6hcJyYvSmKkPWxF6cCgmlkgnY0gmlwhKwSmLuKbXVsdGlhZGRyc5YACASsEpi7Bmw4AAoErBKYuwZsOd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDw9AHyBujCLEDouT1JXljNJ3LgPhWbv4-s5Vw9d0h4r-DdGNwgmw4g3VkcIJsOoV3YWt1Mgk"}'
2025-02-13 03:06:07.922 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:07.928 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:06:07.928 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-13_03-06-06__0d0037a2-a755-417f-b049-a04f34777afd__wakuorg_nwaku:latest.log
2025-02-13 03:06:07.929 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:07.929 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:07.930 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:07.930 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.34.24
2025-02-13 03:06:07.930 DEBUG [src.node.docker_mananger] Generated ports ['11028', '11029', '11030', '11031', '11032']
2025-02-13 03:06:07.930 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:07.930 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:07.931 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:07.931 DEBUG [src.node.docker_mananger] docker run -i -t -p 11028:11028 -p 11029:11029 -p 11030:11030 -p 11031:11031 -p 11032:11032 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11030 --rest-port=11028 --tcp-port=11029 --discv5-udp-port=11031 --rest-address=0.0.0.0 --nat=extip:172.18.34.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb4fa0c53aaea6ff2bb7fb91ec6c1bb2d7cbd2e12b9d356227d253907bb7ccf7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11032 --metrics-logging=true --lightpush=false --relay=true
2025-02-13 03:06:08.158 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.34.24 waku 08cec1190e202c9ff733aa415f7341cd3963d8cbc55f449ae11b9187b5a00d7a
2025-02-13 03:06:08.210 DEBUG [src.node.docker_mananger] Container started with ID 08cec1190e20. Setting up logs at ./log/docker/receiving_node2_2025-02-13_03-06-06__0d0037a2-a755-417f-b049-a04f34777afd__wakuorg_nwaku:latest.log
2025-02-13 03:06:08.211 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11028
2025-02-13 03:06:08.211 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:09.211 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11028/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:09.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:06:09.214 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:06:09.215 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11028/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:09.217 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.24/tcp/11029/p2p/16Uiu2HAkxuXuryb45rLvcsG2CwEDRWW9kyCKjpBLPCEPCuubJrTZ","/ip4/172.18.34.24/tcp/11030/ws/p2p/16Uiu2HAkxuXuryb45rLvcsG2CwEDRWW9kyCKjpBLPCEPCuubJrTZ"],"enrUri":"enr:-L24QO98K2co_ij-552bAf3aj8etYYSAyuf7qUXVpRklt-Rncnd8R6nK1OHA7Wt7Hf3m7dXgCP5OIDuJTypgkDFkzmoCgmlkgnY0gmlwhKwSIhiKbXVsdGlhZGRyc5YACASsEiIYBisVAAoErBIiGAYrFt0DgnJzhQADAQAAiXNlY3AyNTZrMaECM7Yzf84dlD66K7bHxNtRAdqI5CudFpAENaiCVfNo07CDdGNwgisVg3VkcIIrF4V3YWt1MgE"}'
2025-02-13 03:06:09.217 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:09.217 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11028/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.152.187/tcp/27704/p2p/16Uiu2HAmRqMqNcsmYa4bDzweaQ8ZiSasoPc8HK3MsJFEoz9XdMPt"]'
2025-02-13 03:06:09.256 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:09.266 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:06:09.266 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-13_03-06-06__0d0037a2-a755-417f-b049-a04f34777afd__wakuorg_go-waku:latest.log
2025-02-13 03:06:09.266 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:09.266 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:09.268 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:09.268 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.1
2025-02-13 03:06:09.268 DEBUG [src.node.docker_mananger] Generated ports ['58790', '58791', '58792', '58793', '58794']
2025-02-13 03:06:09.268 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:09.268 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:09.268 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:09.269 DEBUG [src.node.docker_mananger] docker run -i -t -p 58790:58790 -p 58791:58791 -p 58792:58792 -p 58793:58793 -p 58794:58794 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=58792 --rest-port=58790 --tcp-port=58791 --discv5-udp-port=58793 --rest-address=0.0.0.0 --nat=extip:172.18.71.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a686b09d94a74deae7cb589d0884dc25f3ccc3967cbf1aa17a8e6ca5e1bb9f1a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QNnw7NX3h8XrbERYnbycUPuoMgim6JxFTf1P_6h_dT0GEc7MhwQ8lDiS6Qu-hNFumWf8yL6hcJyYvSmKkPWxF6cCgmlkgnY0gmlwhKwSmLuKbXVsdGlhZGRyc5YACASsEpi7Bmw4AAoErBKYuwZsOd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDw9AHyBujCLEDouT1JXljNJ3LgPhWbv4-s5Vw9d0h4r-DdGNwgmw4g3VkcIJsOoV3YWt1Mgk --lightpushnode=/ip4/172.18.152.187/tcp/27704/p2p/16Uiu2HAmRqMqNcsmYa4bDzweaQ8ZiSasoPc8HK3MsJFEoz9XdMPt --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-13 03:06:09.509 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.1 waku b18580ac7ea08deb1751a6adec5564c050bb69e87ef30d5ff3ab8a6fa38f7735
2025-02-13 03:06:09.563 DEBUG [src.node.docker_mananger] Container started with ID b18580ac7ea0. Setting up logs at ./log/docker/lightpush_node1_2025-02-13_03-06-06__0d0037a2-a755-417f-b049-a04f34777afd__wakuorg_go-waku:latest.log
2025-02-13 03:06:09.563 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 58790
2025-02-13 03:06:09.565 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:10.565 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58790/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:10.567 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QA9c4x9qF0awKAcPyEf3e5oFWm-zxlMOq38x9ujRs5vhW88gBrxgFEyJva_rsf8yH3KD84l9r-i5TX3FDH4R3vWGAZT9RV8UgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOIw_XdUopR4hlKSXIVcb2tKpw2WBVQRBKWhYwNw3Emh4N0Y3CC5aeDdWRwguWphXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/58791/p2p/16Uiu2HAmMrs76WS9MgCJYrEGoVAT85UYtfEGhKAXJY9boakb1y7C","/ip4/127.0.0.1/tcp/58792/ws/p2p/16Uiu2HAmMrs76WS9MgCJYrEGoVAT85UYtfEGhKAXJY9boakb1y7C","/ip4/172.17.0.4/tcp/58791/p2p/16Uiu2HAmMrs76WS9MgCJYrEGoVAT85UYtfEGhKAXJY9boakb1y7C","/ip4/172.17.0.4/tcp/58792/ws/p2p/16Uiu2HAmMrs76WS9MgCJYrEGoVAT85UYtfEGhKAXJY9boakb1y7C"]}'
2025-02-13 03:06:10.568 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:10.568 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58790/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.152.187/tcp/27704/p2p/16Uiu2HAmRqMqNcsmYa4bDzweaQ8ZiSasoPc8HK3MsJFEoz9XdMPt", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-13 03:06:10.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-13 03:06:10.570 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58790/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.34.24/tcp/11029/p2p/16Uiu2HAkxuXuryb45rLvcsG2CwEDRWW9kyCKjpBLPCEPCuubJrTZ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-13 03:06:10.587 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-13 03:06:10.587 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27703/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 03:06:10.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:10.592 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11028/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 03:06:10.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:10.598 DEBUG [tests.light_push.test_publish] Running test with payload length of 143360 bytes
2025-02-13 03:06:10.600 DEBUG [src.steps.light_push] Lightpushing message
2025-02-13 03:06:10.601 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-13 03:06:10.625 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-13 03:06:10.626 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 03:06:10.727 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-13 03:06:10.727 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27703/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:10.732 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-13 03:06:10.734 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-13 03:06:10.734 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11028/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:10.739 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-13 03:06:10.743 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 03:06:10.744 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 03:06:10.744 DEBUG [src.node.waku_node] Stopping container with id 8a39e03254db
2025-02-13 03:06:11.308 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:11.309 DEBUG [src.node.waku_node] Stopping container with id 08cec1190e20
2025-02-13 03:06:12.121 ERROR [src.node.docker_mananger] Max retries reached for container 8a39e03254db. Exiting log stream.
2025-02-13 03:06:12.454 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:12.454 DEBUG [src.node.waku_node] Stopping container with id b18580ac7ea0
2025-02-13 03:06:12.955 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:12.956 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 03:06:12.964 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:06:12.971 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:06:12.974 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
