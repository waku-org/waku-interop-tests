2025-02-13 03:05:58.338 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 03:05:58.338 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_101_content_topics with id: 2025-02-13_03-05-58__a79985ee-ceb7-49f4-bf30-96ebfe0a157b
2025-02-13 03:05:58.338 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 03:05:58.339 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 03:05:58.339 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 03:05:58.346 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:05:58.346 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_03-05-58__a79985ee-ceb7-49f4-bf30-96ebfe0a157b__wakuorg_nwaku:latest.log
2025-02-13 03:05:58.346 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:05:58.346 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:05:58.348 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:05:58.348 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.14.132
2025-02-13 03:05:58.348 DEBUG [src.node.docker_mananger] Generated ports ['45758', '45759', '45760', '45761', '45762']
2025-02-13 03:05:58.349 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:05:58.349 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:05:58.349 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:05:58.349 DEBUG [src.node.docker_mananger] docker run -i -t -p 45758:45758 -p 45759:45759 -p 45760:45760 -p 45761:45761 -p 45762:45762 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45760 --rest-port=45758 --tcp-port=45759 --discv5-udp-port=45761 --rest-address=0.0.0.0 --nat=extip:172.18.14.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fdef4ace2b7a808e6cf4cea06ef07d1dfee7e25c32d6add894dffe4b557c8e98 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45762 --metrics-logging=true --relay=true --filter=true
2025-02-13 03:05:58.608 ERROR [src.node.docker_mananger] Max retries reached for container a397618ab649. Exiting log stream.
2025-02-13 03:05:58.642 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.14.132 waku 88e89825752569873796ae13fe48955861c7bd8335cef7de126fd12f4f7867e1
2025-02-13 03:05:58.704 DEBUG [src.node.docker_mananger] Container started with ID 88e898257525. Setting up logs at ./log/docker/node1_2025-02-13_03-05-58__a79985ee-ceb7-49f4-bf30-96ebfe0a157b__wakuorg_nwaku:latest.log
2025-02-13 03:05:58.705 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45758
2025-02-13 03:05:58.705 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:05:59.145 ERROR [src.node.docker_mananger] Max retries reached for container b947e77ff3e5. Exiting log stream.
2025-02-13 03:05:59.706 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45758/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:05:59.708 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:05:59.709 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:05:59.709 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45758/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:05:59.711 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.132/tcp/45759/p2p/16Uiu2HAmS7gfSwiU4SQhKWDS6c3W8s8arw9Ke9FeW9WGc5ReR9bx","/ip4/172.18.14.132/tcp/45760/ws/p2p/16Uiu2HAmS7gfSwiU4SQhKWDS6c3W8s8arw9Ke9FeW9WGc5ReR9bx"],"enrUri":"enr:-L24QDFKDQKTHOmimqSsk2b11ww66kSpgC1AVegemOodSZN9SL5YPWHjsmmj7aaNf0-zZ8EZMwECkQzsQtcA0XSqY2QCgmlkgnY0gmlwhKwSDoSKbXVsdGlhZGRyc5YACASsEg6EBrK_AAoErBIOhAaywN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx_6c-7KcnnhZsVC_kIoRpg8kiwAL-B-jX0BAlUwUUJuDdGNwgrK_g3VkcIKywYV3YWt1MgU"}'
2025-02-13 03:05:59.711 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:05:59.712 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 03:05:59.718 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:05:59.718 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_03-05-58__a79985ee-ceb7-49f4-bf30-96ebfe0a157b__wakuorg_go-waku:latest.log
2025-02-13 03:05:59.718 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:05:59.718 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:05:59.719 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:05:59.720 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.244.179
2025-02-13 03:05:59.720 DEBUG [src.node.docker_mananger] Generated ports ['22761', '22762', '22763', '22764', '22765']
2025-02-13 03:05:59.720 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:05:59.720 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:05:59.720 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:05:59.720 DEBUG [src.node.docker_mananger] docker run -i -t -p 22761:22761 -p 22762:22762 -p 22763:22763 -p 22764:22764 -p 22765:22765 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=22763 --rest-port=22761 --tcp-port=22762 --discv5-udp-port=22764 --rest-address=0.0.0.0 --nat=extip:172.18.244.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=daef0d0f2b69cefc2ad8cfdad8e4f46f16a08cccfca4ea647dd7fca8569fd6cc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QDFKDQKTHOmimqSsk2b11ww66kSpgC1AVegemOodSZN9SL5YPWHjsmmj7aaNf0-zZ8EZMwECkQzsQtcA0XSqY2QCgmlkgnY0gmlwhKwSDoSKbXVsdGlhZGRyc5YACASsEg6EBrK_AAoErBIOhAaywN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx_6c-7KcnnhZsVC_kIoRpg8kiwAL-B-jX0BAlUwUUJuDdGNwgrK_g3VkcIKywYV3YWt1MgU --filternode=/ip4/172.18.14.132/tcp/45759/p2p/16Uiu2HAmS7gfSwiU4SQhKWDS6c3W8s8arw9Ke9FeW9WGc5ReR9bx --pubsub-topic=/waku/2/rs/3/1
2025-02-13 03:05:59.960 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.244.179 waku 84d45c34f8b4f3a0f55c22d5059893a13c4ca30cca96484d8f0897d8af5b3254
2025-02-13 03:06:00.016 DEBUG [src.node.docker_mananger] Container started with ID 84d45c34f8b4. Setting up logs at ./log/docker/node2_2025-02-13_03-05-58__a79985ee-ceb7-49f4-bf30-96ebfe0a157b__wakuorg_go-waku:latest.log
2025-02-13 03:06:00.017 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 22761
2025-02-13 03:06:00.018 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:01.018 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22761/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:01.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QBGq_Z7ksKcPkHDqu3qqqId73YuoH1hgVK2_4edVeFJqJnr5mvd9y5rsnrFbsYsNEuCYsBN29qW9DOPP27FCw_yGAZT9RTnEgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQNDRUHkZPeLATW1YQ8TzBW2HOOh4TohLec2z-ncT7lmuYN0Y3CCWOqDdWRwgljshXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/22762/p2p/16Uiu2HAmHBavCHqVik35nyVTgJpALEtvY6qZLzpehNLjm7ow4r4G","/ip4/127.0.0.1/tcp/22763/ws/p2p/16Uiu2HAmHBavCHqVik35nyVTgJpALEtvY6qZLzpehNLjm7ow4r4G","/ip4/172.17.0.3/tcp/22762/p2p/16Uiu2HAmHBavCHqVik35nyVTgJpALEtvY6qZLzpehNLjm7ow4r4G","/ip4/172.17.0.3/tcp/22763/ws/p2p/16Uiu2HAmHBavCHqVik35nyVTgJpALEtvY6qZLzpehNLjm7ow4r4G"]}'
2025-02-13 03:06:01.021 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:01.021 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22761/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.14.132/tcp/45759/p2p/16Uiu2HAmS7gfSwiU4SQhKWDS6c3W8s8arw9Ke9FeW9WGc5ReR9bx", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-13 03:06:01.023 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-13 03:06:01.024 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-13 03:06:01.024 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45758/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:06:01.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:01.027 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22761/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "50a80a5c-651d-44a1-91f9-a435ce4f20cc", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 03:06:01.033 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"50a80a5c-651d-44a1-91f9-a435ce4f20cc","statusDesc":"OK"}'
2025-02-13 03:06:01.035 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22761/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "100"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 03:06:01.036 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22761/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
2025-02-13 03:06:01.039 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 03:06:01.040 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 03:06:01.040 DEBUG [src.node.waku_node] Stopping container with id 88e898257525
2025-02-13 03:06:01.637 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:01.637 DEBUG [src.node.waku_node] Stopping container with id 84d45c34f8b4
2025-02-13 03:06:02.450 ERROR [src.node.docker_mananger] Max retries reached for container 88e898257525. Exiting log stream.
2025-02-13 03:06:02.491 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:02.492 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 03:06:02.497 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:06:02.499 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
