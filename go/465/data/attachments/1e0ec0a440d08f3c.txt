2025-02-13 03:06:37.497 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 03:06:37.498 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-13_03-06-37__44eb44cd-039a-415e-bb56-32c2dc3c5474
2025-02-13 03:06:37.498 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 03:06:37.498 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 03:06:37.498 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 03:06:37.499 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 03:06:37.499 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 03:06:37.506 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:06:37.506 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_03-06-37__44eb44cd-039a-415e-bb56-32c2dc3c5474__wakuorg_nwaku:latest.log
2025-02-13 03:06:37.506 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:37.506 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:37.507 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:37.507 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.158.139
2025-02-13 03:06:37.508 DEBUG [src.node.docker_mananger] Generated ports ['47094', '47095', '47096', '47097', '47098']
2025-02-13 03:06:37.508 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:37.508 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:37.508 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:37.508 DEBUG [src.node.docker_mananger] docker run -i -t -p 47094:47094 -p 47095:47095 -p 47096:47096 -p 47097:47097 -p 47098:47098 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47096 --rest-port=47094 --tcp-port=47095 --discv5-udp-port=47097 --rest-address=0.0.0.0 --nat=extip:172.18.158.139 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b99bfa9e5aeaea7c4dad9fdf46dc56ec2b7d6ef4949ea6bf237293d59f57aed7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47098 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 03:06:37.756 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.158.139 waku 7c9e2afc6c09e98653c9f6598ebf3bedf959f0b99a1058ff4831b86b1160c780
2025-02-13 03:06:37.812 DEBUG [src.node.docker_mananger] Container started with ID 7c9e2afc6c09. Setting up logs at ./log/docker/node1_2025-02-13_03-06-37__44eb44cd-039a-415e-bb56-32c2dc3c5474__wakuorg_nwaku:latest.log
2025-02-13 03:06:37.813 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47094
2025-02-13 03:06:37.814 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:37.863 ERROR [src.node.docker_mananger] Max retries reached for container 909941df5f97. Exiting log stream.
2025-02-13 03:06:38.304 ERROR [src.node.docker_mananger] Max retries reached for container 9e77c9bf56bf. Exiting log stream.
2025-02-13 03:06:38.815 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47094/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:38.818 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:06:38.818 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:06:38.818 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47094/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:38.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.139/tcp/47095/p2p/16Uiu2HAmM3XmHXhSrcbZur8W3PzPFJkaENGB2kU2ksSwESLVGoiE","/ip4/172.18.158.139/tcp/47096/ws/p2p/16Uiu2HAmM3XmHXhSrcbZur8W3PzPFJkaENGB2kU2ksSwESLVGoiE"],"enrUri":"enr:-L24QM6sY0ACOloSvNt3sxUj-N925g2BZuidqPgVPi2X54vYJghz3gUv7Kaiz4wiDEpWorNzxk3_psFXgVRqJwAi5vACgmlkgnY0gmlwhKwSnouKbXVsdGlhZGRyc5YACASsEp6LBrf3AAoErBKeiwa3-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfKPK9kNth4nqLurJ4EBTJMzjhmr2Vdac6WOXtQWDK4eDdGNwgrf3g3VkcIK3-YV3YWt1Mgk"}'
2025-02-13 03:06:38.821 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:38.827 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:06:38.828 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_03-06-37__44eb44cd-039a-415e-bb56-32c2dc3c5474__wakuorg_nwaku:latest.log
2025-02-13 03:06:38.828 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:38.828 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:38.829 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:38.829 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.202.58
2025-02-13 03:06:38.829 DEBUG [src.node.docker_mananger] Generated ports ['34005', '34006', '34007', '34008', '34009']
2025-02-13 03:06:38.830 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:38.830 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:38.830 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:38.830 DEBUG [src.node.docker_mananger] docker run -i -t -p 34005:34005 -p 34006:34006 -p 34007:34007 -p 34008:34008 -p 34009:34009 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34007 --rest-port=34005 --tcp-port=34006 --discv5-udp-port=34008 --rest-address=0.0.0.0 --nat=extip:172.18.202.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5ca4c39052c47b48ddbaac42372c70ed25f7d3e46b4eecb4524112991cfdfc4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34009 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QM6sY0ACOloSvNt3sxUj-N925g2BZuidqPgVPi2X54vYJghz3gUv7Kaiz4wiDEpWorNzxk3_psFXgVRqJwAi5vACgmlkgnY0gmlwhKwSnouKbXVsdGlhZGRyc5YACASsEp6LBrf3AAoErBKeiwa3-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfKPK9kNth4nqLurJ4EBTJMzjhmr2Vdac6WOXtQWDK4eDdGNwgrf3g3VkcIK3-YV3YWt1Mgk
2025-02-13 03:06:39.075 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.202.58 waku c7ea5df1061528d2c392cfd5b6479f78eaf683397f8d424df3c74c35049d5c37
2025-02-13 03:06:39.124 DEBUG [src.node.docker_mananger] Container started with ID c7ea5df10615. Setting up logs at ./log/docker/node1_2025-02-13_03-06-37__44eb44cd-039a-415e-bb56-32c2dc3c5474__wakuorg_nwaku:latest.log
2025-02-13 03:06:39.124 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34005
2025-02-13 03:06:39.125 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:40.126 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34005/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:40.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:06:40.134 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:06:40.135 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34005/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:40.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.58/tcp/34006/p2p/16Uiu2HAmVmVBaNa7NN2Saw6f2zBz4w7vqqYCCvar7jJcTFxJHFCK","/ip4/172.18.202.58/tcp/34007/ws/p2p/16Uiu2HAmVmVBaNa7NN2Saw6f2zBz4w7vqqYCCvar7jJcTFxJHFCK"],"enrUri":"enr:-L24QJ14LyjYYv8uiR45ONMNfszeIQfMTvI8exzh4hdXC-5FAJ1wVOqNX1GVl3QRlxHIfUJwFkA0JECAQE0QBfb9b78CgmlkgnY0gmlwhKwSyjqKbXVsdGlhZGRyc5YACASsEso6BoTWAAoErBLKOgaE190DgnJzhQADAQAAiXNlY3AyNTZrMaED_kDDfeY6sg79w_WvgNchHrXplcK8WC1QUhGpGhj3LfiDdGNwgoTWg3VkcIKE2IV3YWt1MgE"}'
2025-02-13 03:06:40.143 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:40.150 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:06:40.151 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_03-06-37__44eb44cd-039a-415e-bb56-32c2dc3c5474__wakuorg_go-waku:latest.log
2025-02-13 03:06:40.151 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:40.151 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:40.152 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:40.152 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.135.233
2025-02-13 03:06:40.152 DEBUG [src.node.docker_mananger] Generated ports ['4689', '4690', '4691', '4692', '4693']
2025-02-13 03:06:40.153 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:40.153 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:40.153 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:40.153 DEBUG [src.node.docker_mananger] docker run -i -t -p 4689:4689 -p 4690:4690 -p 4691:4691 -p 4692:4692 -p 4693:4693 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=4691 --rest-port=4689 --tcp-port=4690 --discv5-udp-port=4692 --rest-address=0.0.0.0 --nat=extip:172.18.135.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6afc0dccaf3a429ff25db9ba3d22833c4356f786fcbfb5fdbf89ba5e69f3ecd6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QM6sY0ACOloSvNt3sxUj-N925g2BZuidqPgVPi2X54vYJghz3gUv7Kaiz4wiDEpWorNzxk3_psFXgVRqJwAi5vACgmlkgnY0gmlwhKwSnouKbXVsdGlhZGRyc5YACASsEp6LBrf3AAoErBKeiwa3-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfKPK9kNth4nqLurJ4EBTJMzjhmr2Vdac6WOXtQWDK4eDdGNwgrf3g3VkcIK3-YV3YWt1Mgk --lightpushnode=/ip4/172.18.158.139/tcp/47095/p2p/16Uiu2HAmM3XmHXhSrcbZur8W3PzPFJkaENGB2kU2ksSwESLVGoiE --pubsub-topic=/waku/2/rs/3/1
2025-02-13 03:06:40.382 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.135.233 waku 130e875041db0d5cd9c9b46c1862bca0c8b1216767be49f6dd1da25f0071df4c
2025-02-13 03:06:40.438 DEBUG [src.node.docker_mananger] Container started with ID 130e875041db. Setting up logs at ./log/docker/node1_2025-02-13_03-06-37__44eb44cd-039a-415e-bb56-32c2dc3c5474__wakuorg_go-waku:latest.log
2025-02-13 03:06:40.439 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 4689
2025-02-13 03:06:40.440 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:41.440 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4689/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:41.442 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QGC1_l3OLM4GHqcI8_IVWhhF1lXhXpU1Za-3dz5HKDzaE59Mfcbqo3kaf6I81KZbU7WLWgJ_OrTGzTQ6L9QqSkaGAZT9RdergmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQLXWWjwWmg4lTO4zm3Tk29qhAYC3ohtvpGGJUlvpp8hPoN0Y3CCElKDdWRwghJUhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/4690/p2p/16Uiu2HAm9vJi7MwLvnYcTqKyhg6pWk9PXgxhESnMedGHCMq9FW5K","/ip4/127.0.0.1/tcp/4691/ws/p2p/16Uiu2HAm9vJi7MwLvnYcTqKyhg6pWk9PXgxhESnMedGHCMq9FW5K","/ip4/172.17.0.4/tcp/4690/p2p/16Uiu2HAm9vJi7MwLvnYcTqKyhg6pWk9PXgxhESnMedGHCMq9FW5K","/ip4/172.17.0.4/tcp/4691/ws/p2p/16Uiu2HAm9vJi7MwLvnYcTqKyhg6pWk9PXgxhESnMedGHCMq9FW5K"]}'
2025-02-13 03:06:41.443 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:41.443 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47094/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:06:41.448 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:41.448 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34005/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:06:41.453 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:41.454 DEBUG [src.steps.light_push] Lightpushing message
2025-02-13 03:06:41.454 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4689/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739416001454456576}}'
2025-02-13 03:06:52.571 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-13 03:06:52.573 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 03:06:52.674 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-13 03:06:52.674 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47094/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:52.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739416001454456576,"ephemeral":false}]'
2025-02-13 03:06:52.678 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-13 03:06:52.678 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34005/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:52.681 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739416001454456576,"ephemeral":false}]'
2025-02-13 03:06:52.684 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 03:06:52.684 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 03:06:52.685 DEBUG [src.node.waku_node] Stopping container with id 7c9e2afc6c09
2025-02-13 03:06:53.294 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:53.295 DEBUG [src.node.waku_node] Stopping container with id c7ea5df10615
2025-02-13 03:06:54.106 ERROR [src.node.docker_mananger] Max retries reached for container 7c9e2afc6c09. Exiting log stream.
2025-02-13 03:06:54.137 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:54.139 DEBUG [src.node.waku_node] Stopping container with id 130e875041db
2025-02-13 03:06:54.650 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:54.651 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 03:06:54.667 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:06:54.684 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:06:54.687 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
