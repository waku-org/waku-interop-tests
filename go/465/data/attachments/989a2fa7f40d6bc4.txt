2025-02-13 03:05:21.833 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 03:05:21.834 DEBUG [tests.conftest] Running test: test_store with id: 2025-02-13_03-05-21__df7ac29e-a546-4e31-8a70-ba202cf81239
2025-02-13 03:05:21.834 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 03:05:21.834 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 03:05:21.834 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 03:05:21.835 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 03:05:21.835 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 03:05:21.844 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:05:21.844 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_03-05-21__df7ac29e-a546-4e31-8a70-ba202cf81239__wakuorg_nwaku:latest.log
2025-02-13 03:05:21.845 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:05:21.845 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:05:21.908 DEBUG [src.node.docker_mananger] Network waku created
2025-02-13 03:05:21.908 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.13.68
2025-02-13 03:05:21.908 DEBUG [src.node.docker_mananger] Generated ports ['12657', '12658', '12659', '12660', '12661']
2025-02-13 03:05:21.908 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:05:21.908 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:05:21.908 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:05:21.909 DEBUG [src.node.docker_mananger] docker run -i -t -p 12657:12657 -p 12658:12658 -p 12659:12659 -p 12660:12660 -p 12661:12661 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12659 --rest-port=12657 --tcp-port=12658 --discv5-udp-port=12660 --rest-address=0.0.0.0 --nat=extip:172.18.13.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=84592faa6dab7cd03d3ebdf0ef1d3ea69860adab797bec7cb052f0d1e046d42c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12661 --metrics-logging=true --relay=true --store=true
2025-02-13 03:05:24.136 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.13.68 waku 12adf6484199e9011ad6c479c71e3aa43abd28f02e1e362cb206dd5fabedf55e
2025-02-13 03:05:24.184 DEBUG [src.node.docker_mananger] Container started with ID 12adf6484199. Setting up logs at ./log/docker/node1_2025-02-13_03-05-21__df7ac29e-a546-4e31-8a70-ba202cf81239__wakuorg_nwaku:latest.log
2025-02-13 03:05:24.186 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12657
2025-02-13 03:05:24.186 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:05:25.186 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12657/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:05:25.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:05:25.190 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:05:25.190 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12657/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:05:25.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.68/tcp/12658/p2p/16Uiu2HAmRkNEfZQTFQRu9Es4cKygxdrCZgESeS1uut2vdNiGpRLQ","/ip4/172.18.13.68/tcp/12659/ws/p2p/16Uiu2HAmRkNEfZQTFQRu9Es4cKygxdrCZgESeS1uut2vdNiGpRLQ"],"enrUri":"enr:-L24QNP2UrrEuuYdeB5JDYycIXnzsJ840JLcQVP60wT6QVxCeDMaPMG1-oLhnB9NmCRRFFvn2Dq1525UUJmfETNNrSgCgmlkgnY0gmlwhKwSDUSKbXVsdGlhZGRyc5YACASsEg1EBjFyAAoErBINRAYxc90DgnJzhQADAQAAiXNlY3AyNTZrMaEDwoiUlvBrnvAAfiOxL9HlrrO2352eVTTSxjuoqJp8n-2DdGNwgjFyg3VkcIIxdIV3YWt1MgM"}'
2025-02-13 03:05:25.192 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:05:25.198 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:05:25.199 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_03-05-21__df7ac29e-a546-4e31-8a70-ba202cf81239__wakuorg_go-waku:latest.log
2025-02-13 03:05:25.199 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:05:25.199 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:05:25.200 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:05:25.200 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.82.5
2025-02-13 03:05:25.201 DEBUG [src.node.docker_mananger] Generated ports ['42302', '42303', '42304', '42305', '42306']
2025-02-13 03:05:25.201 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:05:25.201 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:05:25.201 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:05:25.201 DEBUG [src.node.docker_mananger] docker run -i -t -p 42302:42302 -p 42303:42303 -p 42304:42304 -p 42305:42305 -p 42306:42306 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=42304 --rest-port=42302 --tcp-port=42303 --discv5-udp-port=42305 --rest-address=0.0.0.0 --nat=extip:172.18.82.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9bebd5e20dfb95eaed824db5a51397dfbc3428fc4f84c72fda8c89cf4848e60b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true --discv5-bootstrap-node=enr:-L24QNP2UrrEuuYdeB5JDYycIXnzsJ840JLcQVP60wT6QVxCeDMaPMG1-oLhnB9NmCRRFFvn2Dq1525UUJmfETNNrSgCgmlkgnY0gmlwhKwSDUSKbXVsdGlhZGRyc5YACASsEg1EBjFyAAoErBINRAYxc90DgnJzhQADAQAAiXNlY3AyNTZrMaEDwoiUlvBrnvAAfiOxL9HlrrO2352eVTTSxjuoqJp8n-2DdGNwgjFyg3VkcIIxdIV3YWt1MgM --storenode=/ip4/172.18.13.68/tcp/12658/p2p/16Uiu2HAmRkNEfZQTFQRu9Es4cKygxdrCZgESeS1uut2vdNiGpRLQ
2025-02-13 03:05:27.977 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.82.5 waku 0bade4b56c4d56eae9a23583c562e65e48b935fb64e348f6d0b0c70d72a3ec4e
2025-02-13 03:05:28.032 DEBUG [src.node.docker_mananger] Container started with ID 0bade4b56c4d. Setting up logs at ./log/docker/node1_2025-02-13_03-05-21__df7ac29e-a546-4e31-8a70-ba202cf81239__wakuorg_go-waku:latest.log
2025-02-13 03:05:28.033 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 42302
2025-02-13 03:05:28.033 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:05:29.034 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42302/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:05:29.036 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPLWUksWTuaDu2MmIKFznWNvXNbQiD8GUZVowJ7KOIs9WRpkSa3naZFaLohOBlehbGqubCOmPmkcnM32GkL2H52GAZT9RLzhgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDIG5q2NnCr27azIu5u2blbAfI-CummEkDQGYqtSERSTuDdGNwgqU_g3VkcIKlQYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/42303/p2p/16Uiu2HAmEqb3tc1hJHyavSK3tVLZ8GQxGFT48GkKGv1mzpKL3qx6","/ip4/127.0.0.1/tcp/42304/ws/p2p/16Uiu2HAmEqb3tc1hJHyavSK3tVLZ8GQxGFT48GkKGv1mzpKL3qx6","/ip4/172.17.0.3/tcp/42303/p2p/16Uiu2HAmEqb3tc1hJHyavSK3tVLZ8GQxGFT48GkKGv1mzpKL3qx6","/ip4/172.17.0.3/tcp/42304/ws/p2p/16Uiu2HAmEqb3tc1hJHyavSK3tVLZ8GQxGFT48GkKGv1mzpKL3qx6"]}'
2025-02-13 03:05:29.037 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:05:29.037 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12657/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:05:29.057 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:05:29.057 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42302/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:05:29.059 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-13 03:05:29.060 DEBUG [src.steps.store] Relaying message
2025-02-13 03:05:29.060 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12657/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 03:05:29.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:05:29.076 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 03:05:29.276 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-13 03:05:29.277 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42302/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:05:32.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"9471f290b252cbe8902e47521c2f4b41720c4db1806dc76778707c1c3604e795","status_code":200,"status_desc":"OK","messages":[{"message_hash":"lGh8FFWTCgoFrM6g2QPIAjOF1PNVCEOq4kUrHhjAMhM="}]}'
2025-02-13 03:05:32.318 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 03:05:32.319 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 03:05:32.319 DEBUG [src.node.waku_node] Stopping container with id 12adf6484199
2025-02-13 03:05:32.840 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:05:32.840 DEBUG [src.node.waku_node] Stopping container with id 0bade4b56c4d
2025-02-13 03:05:33.337 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:05:33.340 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 03:05:33.346 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:05:33.351 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
