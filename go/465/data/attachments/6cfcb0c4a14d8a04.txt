2025-02-13 03:06:26.897 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 03:06:26.897 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-13_03-06-26__c50a556a-4274-4c2f-b531-cbce62614484
2025-02-13 03:06:26.898 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 03:06:26.898 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 03:06:26.904 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:06:26.904 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-13_03-06-26__c50a556a-4274-4c2f-b531-cbce62614484__wakuorg_nwaku:latest.log
2025-02-13 03:06:26.904 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:26.904 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:26.906 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:26.906 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.225
2025-02-13 03:06:26.906 DEBUG [src.node.docker_mananger] Generated ports ['14031', '14032', '14033', '14034', '14035']
2025-02-13 03:06:26.906 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:26.906 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:26.906 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:26.907 DEBUG [src.node.docker_mananger] docker run -i -t -p 14031:14031 -p 14032:14032 -p 14033:14033 -p 14034:14034 -p 14035:14035 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14033 --rest-port=14031 --tcp-port=14032 --discv5-udp-port=14034 --rest-address=0.0.0.0 --nat=extip:172.18.39.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8ac7182aea12f2ce3dcb1eeeddda78b7ef6f4e341b5e29ded6bceda78e3fd0dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14035 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 03:06:27.133 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.225 waku 8b1eb44dbf84803e785e15e04bfbf3e19c2d878bc18a93a91650f2084245c946
2025-02-13 03:06:27.178 DEBUG [src.node.docker_mananger] Container started with ID 8b1eb44dbf84. Setting up logs at ./log/docker/receiving_node1_2025-02-13_03-06-26__c50a556a-4274-4c2f-b531-cbce62614484__wakuorg_nwaku:latest.log
2025-02-13 03:06:27.179 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14031
2025-02-13 03:06:27.179 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:27.188 ERROR [src.node.docker_mananger] Max retries reached for container a079c78f0da2. Exiting log stream.
2025-02-13 03:06:27.660 ERROR [src.node.docker_mananger] Max retries reached for container c77c614674a0. Exiting log stream.
2025-02-13 03:06:28.179 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14031/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:28.182 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:06:28.183 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:06:28.183 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14031/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:28.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.225/tcp/14032/p2p/16Uiu2HAmGLCgbbjrWPDi9xvbFBQWnZSaTjxbmMeUrAZYXj97pzvR","/ip4/172.18.39.225/tcp/14033/ws/p2p/16Uiu2HAmGLCgbbjrWPDi9xvbFBQWnZSaTjxbmMeUrAZYXj97pzvR"],"enrUri":"enr:-L24QB42qWyRyfviYprMMhxohIV6MfLBKC8bFZgRxZuZyrnuBy_3_DJv7UjZ4qQ_QJUkRAVdb_8EsXFsE8E8u0VMKdUCgmlkgnY0gmlwhKwSJ-GKbXVsdGlhZGRyc5YACASsEifhBjbQAAoErBIn4QY20d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNp6oPIKqA05zvgpdJDgmTRnR4aZf5gM4cAkJCtmQ3laDdGNwgjbQg3VkcII20oV3YWt1Mgk"}'
2025-02-13 03:06:28.185 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:28.192 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:06:28.192 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-13_03-06-26__c50a556a-4274-4c2f-b531-cbce62614484__wakuorg_nwaku:latest.log
2025-02-13 03:06:28.192 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:28.192 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:28.194 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:28.194 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.124.172
2025-02-13 03:06:28.194 DEBUG [src.node.docker_mananger] Generated ports ['32960', '32961', '32962', '32963', '32964']
2025-02-13 03:06:28.194 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:28.194 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:28.194 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:28.194 DEBUG [src.node.docker_mananger] docker run -i -t -p 32960:32960 -p 32961:32961 -p 32962:32962 -p 32963:32963 -p 32964:32964 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32962 --rest-port=32960 --tcp-port=32961 --discv5-udp-port=32963 --rest-address=0.0.0.0 --nat=extip:172.18.124.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2d1ba5f2c061cacd54437f44f95d1dc348a0bf38c66b1dd825ec5a035a7d9c8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32964 --metrics-logging=true --lightpush=false --relay=true
2025-02-13 03:06:28.430 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.124.172 waku 8afa49d6e8007308535bee2886094b18df1d44902f525b08c48e4df3bd7f3661
2025-02-13 03:06:28.482 DEBUG [src.node.docker_mananger] Container started with ID 8afa49d6e800. Setting up logs at ./log/docker/receiving_node2_2025-02-13_03-06-26__c50a556a-4274-4c2f-b531-cbce62614484__wakuorg_nwaku:latest.log
2025-02-13 03:06:28.483 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32960
2025-02-13 03:06:28.483 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:29.483 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32960/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:29.486 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:06:29.486 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:06:29.486 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32960/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:29.488 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.172/tcp/32961/p2p/16Uiu2HAm4dvf5oBxD4q8LryUbW4sp6Wzz4A3DAnfWbCsH3mbEjyW","/ip4/172.18.124.172/tcp/32962/ws/p2p/16Uiu2HAm4dvf5oBxD4q8LryUbW4sp6Wzz4A3DAnfWbCsH3mbEjyW"],"enrUri":"enr:-L24QNulCwc9n93WUdwmS2RJG4gr4yAk_7tYPAJIm1TCozRwH-uPHIGSc95m0L_1k6xYNxAsgsTV5y2tE2ioN2D6FjcCgmlkgnY0gmlwhKwSfKyKbXVsdGlhZGRyc5YACASsEnysBoDBAAoErBJ8rAaAwt0DgnJzhQADAQAAiXNlY3AyNTZrMaECiNy_cyQbCuofN8WjYPmlhGmd4AhTUquZ1talfVqX0N2DdGNwgoDBg3VkcIKAw4V3YWt1MgE"}'
2025-02-13 03:06:29.489 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:29.489 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32960/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.225/tcp/14032/p2p/16Uiu2HAmGLCgbbjrWPDi9xvbFBQWnZSaTjxbmMeUrAZYXj97pzvR"]'
2025-02-13 03:06:29.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:29.536 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:06:29.537 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-13_03-06-26__c50a556a-4274-4c2f-b531-cbce62614484__wakuorg_go-waku:latest.log
2025-02-13 03:06:29.537 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:29.537 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:29.538 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:29.538 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.29.116
2025-02-13 03:06:29.539 DEBUG [src.node.docker_mananger] Generated ports ['64609', '64610', '64611', '64612', '64613']
2025-02-13 03:06:29.539 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:29.539 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:29.539 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:29.539 DEBUG [src.node.docker_mananger] docker run -i -t -p 64609:64609 -p 64610:64610 -p 64611:64611 -p 64612:64612 -p 64613:64613 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=64611 --rest-port=64609 --tcp-port=64610 --discv5-udp-port=64612 --rest-address=0.0.0.0 --nat=extip:172.18.29.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=81acb5b63de020c5d2bb8799ddd192edca9ae7dffbfdc8f35ebb9e4da2d02e63 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QB42qWyRyfviYprMMhxohIV6MfLBKC8bFZgRxZuZyrnuBy_3_DJv7UjZ4qQ_QJUkRAVdb_8EsXFsE8E8u0VMKdUCgmlkgnY0gmlwhKwSJ-GKbXVsdGlhZGRyc5YACASsEifhBjbQAAoErBIn4QY20d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNp6oPIKqA05zvgpdJDgmTRnR4aZf5gM4cAkJCtmQ3laDdGNwgjbQg3VkcII20oV3YWt1Mgk --lightpushnode=/ip4/172.18.39.225/tcp/14032/p2p/16Uiu2HAmGLCgbbjrWPDi9xvbFBQWnZSaTjxbmMeUrAZYXj97pzvR --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-13 03:06:29.773 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.29.116 waku e0a875827826aa03e39a63ddc76ff5d3d51ab41fcd0d4c4f6a66a8d8a210d47b
2025-02-13 03:06:29.829 DEBUG [src.node.docker_mananger] Container started with ID e0a875827826. Setting up logs at ./log/docker/lightpush_node1_2025-02-13_03-06-26__c50a556a-4274-4c2f-b531-cbce62614484__wakuorg_go-waku:latest.log
2025-02-13 03:06:29.829 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 64609
2025-02-13 03:06:29.830 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:30.831 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64609/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:30.833 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QPFvI_pU0ehQMXNX-j-UWKMTclB0NSFhuO5h1E4bg4aZbVpjifNs40a-UB93g0nJ3sZ9gLKRvwle0Es3d-JsuMGGAZT9Ra49gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQKMPBe3ZUW8owsZl5MJ61pHEYLeoDufQYnEyy3sOwFN_YN0Y3CC_GKDdWRwgvxkhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/64610/p2p/16Uiu2HAm4s6CnFtYsBdDjXPvKFUtiYtmSwcbTgVTHnED9fJr2Zvc","/ip4/127.0.0.1/tcp/64611/ws/p2p/16Uiu2HAm4s6CnFtYsBdDjXPvKFUtiYtmSwcbTgVTHnED9fJr2Zvc","/ip4/172.17.0.4/tcp/64610/p2p/16Uiu2HAm4s6CnFtYsBdDjXPvKFUtiYtmSwcbTgVTHnED9fJr2Zvc","/ip4/172.17.0.4/tcp/64611/ws/p2p/16Uiu2HAm4s6CnFtYsBdDjXPvKFUtiYtmSwcbTgVTHnED9fJr2Zvc"]}'
2025-02-13 03:06:30.834 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:30.834 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64609/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.39.225/tcp/14032/p2p/16Uiu2HAmGLCgbbjrWPDi9xvbFBQWnZSaTjxbmMeUrAZYXj97pzvR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-13 03:06:30.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-13 03:06:30.836 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64609/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.124.172/tcp/32961/p2p/16Uiu2HAm4dvf5oBxD4q8LryUbW4sp6Wzz4A3DAnfWbCsH3mbEjyW", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-13 03:06:30.851 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-13 03:06:30.852 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14031/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 03:06:30.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:30.858 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32960/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 03:06:30.862 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:30.863 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64609/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739415990863591424}}'
2025-02-13 03:06:30.865 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64609/lightpush/v1/message. Response content: b'missing ContentTopic field'
2025-02-13 03:06:30.867 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 03:06:30.868 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 03:06:30.868 DEBUG [src.node.waku_node] Stopping container with id 8b1eb44dbf84
2025-02-13 03:06:31.463 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:31.463 DEBUG [src.node.waku_node] Stopping container with id 8afa49d6e800
2025-02-13 03:06:32.276 ERROR [src.node.docker_mananger] Max retries reached for container 8b1eb44dbf84. Exiting log stream.
2025-02-13 03:06:32.986 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:32.987 DEBUG [src.node.waku_node] Stopping container with id e0a875827826
2025-02-13 03:06:33.492 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:33.494 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 03:06:33.501 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:06:33.508 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:06:33.510 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
