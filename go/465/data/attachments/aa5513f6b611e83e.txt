2025-02-13 03:07:15.298 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 03:07:15.299 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_no_request_id with id: 2025-02-13_03-07-15__34b9ef04-1d44-4306-ba9f-14dd78e1c994
2025-02-13 03:07:15.299 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 03:07:15.299 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 03:07:15.300 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 03:07:15.305 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:07:15.305 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_03-07-15__34b9ef04-1d44-4306-ba9f-14dd78e1c994__wakuorg_nwaku:latest.log
2025-02-13 03:07:15.306 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:07:15.306 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:07:15.307 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:07:15.307 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.164.57
2025-02-13 03:07:15.307 DEBUG [src.node.docker_mananger] Generated ports ['16874', '16875', '16876', '16877', '16878']
2025-02-13 03:07:15.307 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:07:15.307 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:07:15.308 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:07:15.308 DEBUG [src.node.docker_mananger] docker run -i -t -p 16874:16874 -p 16875:16875 -p 16876:16876 -p 16877:16877 -p 16878:16878 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16876 --rest-port=16874 --tcp-port=16875 --discv5-udp-port=16877 --rest-address=0.0.0.0 --nat=extip:172.18.164.57 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ad7fea4ef7bda7efd9bc24ed1ba5ade8c581627524c59bf2924fe49aedef2ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16878 --metrics-logging=true --relay=true --filter=true
2025-02-13 03:07:15.535 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.164.57 waku 0909ca0938205a7c788a6b9bc2a27c5a9e6e2e49ec1f055b717ae463cc73118b
2025-02-13 03:07:15.584 DEBUG [src.node.docker_mananger] Container started with ID 0909ca093820. Setting up logs at ./log/docker/node1_2025-02-13_03-07-15__34b9ef04-1d44-4306-ba9f-14dd78e1c994__wakuorg_nwaku:latest.log
2025-02-13 03:07:15.585 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16874
2025-02-13 03:07:15.585 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:07:15.611 ERROR [src.node.docker_mananger] Max retries reached for container b7760e4f92b5. Exiting log stream.
2025-02-13 03:07:16.101 ERROR [src.node.docker_mananger] Max retries reached for container e15a065786e8. Exiting log stream.
2025-02-13 03:07:16.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16874/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:16.588 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:07:16.588 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:07:16.588 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16874/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:16.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.57/tcp/16875/p2p/16Uiu2HAmM8HBQDpgJNMU4fcYdNNwu4Zy3fYniYSemfHLcspPsWEw","/ip4/172.18.164.57/tcp/16876/ws/p2p/16Uiu2HAmM8HBQDpgJNMU4fcYdNNwu4Zy3fYniYSemfHLcspPsWEw"],"enrUri":"enr:-L24QFgMdrw1KVBSV269hNr8KG8-hKdJDnzRtzOhOKbDwNosMI9NLU_cfKWvFLCvjxcgdQpucSFiNUNE-6CEQQ6DUF8CgmlkgnY0gmlwhKwSpDmKbXVsdGlhZGRyc5YACASsEqQ5BkHrAAoErBKkOQZB7N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfds02SBDUjuYDSdLYmAVRVg009YkAqjuMCaKSsG61syDdGNwgkHrg3VkcIJB7YV3YWt1MgU"}'
2025-02-13 03:07:16.591 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:07:16.591 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 03:07:16.597 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:07:16.597 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_03-07-15__34b9ef04-1d44-4306-ba9f-14dd78e1c994__wakuorg_go-waku:latest.log
2025-02-13 03:07:16.598 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:07:16.598 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:07:16.599 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:07:16.599 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.138
2025-02-13 03:07:16.599 DEBUG [src.node.docker_mananger] Generated ports ['35801', '35802', '35803', '35804', '35805']
2025-02-13 03:07:16.600 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:07:16.600 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:07:16.600 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:07:16.600 DEBUG [src.node.docker_mananger] docker run -i -t -p 35801:35801 -p 35802:35802 -p 35803:35803 -p 35804:35804 -p 35805:35805 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35803 --rest-port=35801 --tcp-port=35802 --discv5-udp-port=35804 --rest-address=0.0.0.0 --nat=extip:172.18.44.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8ce4df3bdd73ac8f054eff4d1af8a360035ec7ffc36e598deacbeb2e5c65fcb1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QFgMdrw1KVBSV269hNr8KG8-hKdJDnzRtzOhOKbDwNosMI9NLU_cfKWvFLCvjxcgdQpucSFiNUNE-6CEQQ6DUF8CgmlkgnY0gmlwhKwSpDmKbXVsdGlhZGRyc5YACASsEqQ5BkHrAAoErBKkOQZB7N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfds02SBDUjuYDSdLYmAVRVg009YkAqjuMCaKSsG61syDdGNwgkHrg3VkcIJB7YV3YWt1MgU --filternode=/ip4/172.18.164.57/tcp/16875/p2p/16Uiu2HAmM8HBQDpgJNMU4fcYdNNwu4Zy3fYniYSemfHLcspPsWEw --pubsub-topic=/waku/2/rs/3/1
2025-02-13 03:07:16.828 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.138 waku 88a42b90e79a0d75efa344fa455f46a051cf5674a68670f9cbfe6c3cfd6b46e8
2025-02-13 03:07:16.877 DEBUG [src.node.docker_mananger] Container started with ID 88a42b90e79a. Setting up logs at ./log/docker/node2_2025-02-13_03-07-15__34b9ef04-1d44-4306-ba9f-14dd78e1c994__wakuorg_go-waku:latest.log
2025-02-13 03:07:16.878 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 35801
2025-02-13 03:07:16.878 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:07:17.878 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35801/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:07:17.881 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QBMn10VGZdNchOQdmX4rXzdd6CR5Z09wY2LVA6Mf3qLQYNgtw8s2lqI4McRdUNLPk1D8ohrftcx-TQ2tMyeHWcqGAZT9RmYKgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQKRNfb8idQHfclRzltkTxxZHYjUlzwvtJ6pMuMgB8xl34N0Y3CCi9qDdWRwgovchXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/35802/p2p/16Uiu2HAm5CWpgXWb1WB3K4UucirxZsAM9JGJswdsXMCnWPDiiSyt","/ip4/127.0.0.1/tcp/35803/ws/p2p/16Uiu2HAm5CWpgXWb1WB3K4UucirxZsAM9JGJswdsXMCnWPDiiSyt","/ip4/172.17.0.3/tcp/35802/p2p/16Uiu2HAm5CWpgXWb1WB3K4UucirxZsAM9JGJswdsXMCnWPDiiSyt","/ip4/172.17.0.3/tcp/35803/ws/p2p/16Uiu2HAm5CWpgXWb1WB3K4UucirxZsAM9JGJswdsXMCnWPDiiSyt"]}'
2025-02-13 03:07:17.881 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:07:17.881 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35801/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.164.57/tcp/16875/p2p/16Uiu2HAmM8HBQDpgJNMU4fcYdNNwu4Zy3fYniYSemfHLcspPsWEw", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-13 03:07:17.883 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-13 03:07:17.884 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-13 03:07:17.884 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16874/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 03:07:17.887 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:07:17.887 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35801/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6d1b56cb-1e1d-4b8a-9814-fa2b36fd4ab7", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 03:07:17.893 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"6d1b56cb-1e1d-4b8a-9814-fa2b36fd4ab7","statusDesc":"OK"}'
2025-02-13 03:07:17.894 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35801/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 03:07:17.896 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35801/filter/v2/subscriptions. Response content: b'{"requestId":"","statusDesc":"subscription failed"}'
2025-02-13 03:07:17.898 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 03:07:17.899 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 03:07:17.900 DEBUG [src.node.waku_node] Stopping container with id 0909ca093820
2025-02-13 03:07:18.493 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:07:18.494 DEBUG [src.node.waku_node] Stopping container with id 88a42b90e79a
2025-02-13 03:07:19.310 ERROR [src.node.docker_mananger] Max retries reached for container 0909ca093820. Exiting log stream.
2025-02-13 03:07:19.382 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:07:19.384 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 03:07:19.389 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:07:19.391 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
