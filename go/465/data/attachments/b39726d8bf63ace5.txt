2025-02-13 03:06:33.513 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 03:06:33.514 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-13_03-06-33__1097f5c6-8f75-49e0-823b-5146a50f4d4d
2025-02-13 03:06:33.514 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 03:06:33.514 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 03:06:33.520 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:06:33.521 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-13_03-06-33__1097f5c6-8f75-49e0-823b-5146a50f4d4d__wakuorg_nwaku:latest.log
2025-02-13 03:06:33.521 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:33.521 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:33.522 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:33.522 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.98
2025-02-13 03:06:33.523 DEBUG [src.node.docker_mananger] Generated ports ['18298', '18299', '18300', '18301', '18302']
2025-02-13 03:06:33.523 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:33.523 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:33.523 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:33.523 DEBUG [src.node.docker_mananger] docker run -i -t -p 18298:18298 -p 18299:18299 -p 18300:18300 -p 18301:18301 -p 18302:18302 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18300 --rest-port=18298 --tcp-port=18299 --discv5-udp-port=18301 --rest-address=0.0.0.0 --nat=extip:172.18.45.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0031d69e4fafff72ad1bef33f8838dbfdded3d53cae2662515d5ccfada3ec75a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18302 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 03:06:33.748 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.98 waku 1b94058b39e05999f35d897cf93656e2f6283f1e5120ac5157a9eb57278fc3da
2025-02-13 03:06:33.799 ERROR [src.node.docker_mananger] Max retries reached for container 8afa49d6e800. Exiting log stream.
2025-02-13 03:06:33.801 DEBUG [src.node.docker_mananger] Container started with ID 1b94058b39e0. Setting up logs at ./log/docker/receiving_node1_2025-02-13_03-06-33__1097f5c6-8f75-49e0-823b-5146a50f4d4d__wakuorg_nwaku:latest.log
2025-02-13 03:06:33.802 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18298
2025-02-13 03:06:33.802 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:34.305 ERROR [src.node.docker_mananger] Max retries reached for container e0a875827826. Exiting log stream.
2025-02-13 03:06:34.802 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18298/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:34.805 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:06:34.805 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:06:34.806 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18298/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:34.808 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.98/tcp/18299/p2p/16Uiu2HAkzZ1CEEbg2igMXyPNZczqrtkZtYpg6gw4j7avg252mjF7","/ip4/172.18.45.98/tcp/18300/ws/p2p/16Uiu2HAkzZ1CEEbg2igMXyPNZczqrtkZtYpg6gw4j7avg252mjF7"],"enrUri":"enr:-L24QFRQOLlQou7e7zh3z5FrN4r47mSprJ5VRUrVrDhFYz_dOr4XbhDwy1Y8Oh-FSGStqzBmnLVA-n45vixoO45IzKECgmlkgnY0gmlwhKwSLWKKbXVsdGlhZGRyc5YACASsEi1iBkd7AAoErBItYgZHfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECTCs54SuhdGw-ECfkY6vN4RERm0Tef5z3KJyjGMaedEqDdGNwgkd7g3VkcIJHfYV3YWt1Mgk"}'
2025-02-13 03:06:34.808 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:34.815 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 03:06:34.815 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-13_03-06-33__1097f5c6-8f75-49e0-823b-5146a50f4d4d__wakuorg_nwaku:latest.log
2025-02-13 03:06:34.815 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:34.815 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:34.817 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:34.817 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.198
2025-02-13 03:06:34.817 DEBUG [src.node.docker_mananger] Generated ports ['45946', '45947', '45948', '45949', '45950']
2025-02-13 03:06:34.817 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:34.817 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:34.817 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:34.817 DEBUG [src.node.docker_mananger] docker run -i -t -p 45946:45946 -p 45947:45947 -p 45948:45948 -p 45949:45949 -p 45950:45950 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45948 --rest-port=45946 --tcp-port=45947 --discv5-udp-port=45949 --rest-address=0.0.0.0 --nat=extip:172.18.187.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbb3ac74e467ce9d16b0dffe7ef1277fe6dcc120bceb8ad2b66fc5b3e8e8fc28 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45950 --metrics-logging=true --lightpush=false --relay=true
2025-02-13 03:06:35.060 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.198 waku 05bbf742e72e762c469e5fc0dc18ef1091808bfea74b531b13849453043c62ab
2025-02-13 03:06:35.108 DEBUG [src.node.docker_mananger] Container started with ID 05bbf742e72e. Setting up logs at ./log/docker/receiving_node2_2025-02-13_03-06-33__1097f5c6-8f75-49e0-823b-5146a50f4d4d__wakuorg_nwaku:latest.log
2025-02-13 03:06:35.108 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45946
2025-02-13 03:06:35.108 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:36.109 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45946/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:36.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 03:06:36.112 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 03:06:36.112 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45946/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:36.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.198/tcp/45947/p2p/16Uiu2HAky33hXDEQojbGLK9hmt9gYG1SC3Tpouyquh3vuQN8tnVN","/ip4/172.18.187.198/tcp/45948/ws/p2p/16Uiu2HAky33hXDEQojbGLK9hmt9gYG1SC3Tpouyquh3vuQN8tnVN"],"enrUri":"enr:-L24QFAvEOk0WbmTa-7wRMUCYPvoSD3a2h1IRWXpdKrBjGhae-8FCPCrNpyPPvUfo0PA7NLFHNIguGLBs6JeTjDm5qICgmlkgnY0gmlwhKwSu8aKbXVsdGlhZGRyc5YACASsErvGBrN7AAoErBK7xgazfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECNaLyhhehKQfNI1gE1qTmrr-APsbmtaxd8e7FHsvdaAmDdGNwgrN7g3VkcIKzfYV3YWt1MgE"}'
2025-02-13 03:06:36.114 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:36.114 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45946/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.98/tcp/18299/p2p/16Uiu2HAkzZ1CEEbg2igMXyPNZczqrtkZtYpg6gw4j7avg252mjF7"]'
2025-02-13 03:06:36.157 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:36.165 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-13 03:06:36.165 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-13_03-06-33__1097f5c6-8f75-49e0-823b-5146a50f4d4d__wakuorg_go-waku:latest.log
2025-02-13 03:06:36.165 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 03:06:36.165 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 03:06:36.167 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 03:06:36.167 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.240.98
2025-02-13 03:06:36.167 DEBUG [src.node.docker_mananger] Generated ports ['23661', '23662', '23663', '23664', '23665']
2025-02-13 03:06:36.167 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 03:06:36.167 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 03:06:36.167 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 03:06:36.167 DEBUG [src.node.docker_mananger] docker run -i -t -p 23661:23661 -p 23662:23662 -p 23663:23663 -p 23664:23664 -p 23665:23665 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23663 --rest-port=23661 --tcp-port=23662 --discv5-udp-port=23664 --rest-address=0.0.0.0 --nat=extip:172.18.240.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d08aac4a66ef6f794c01866abbf8b9d4511ad64dbc6ba9740b0fd4ef0abd9ca9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QFRQOLlQou7e7zh3z5FrN4r47mSprJ5VRUrVrDhFYz_dOr4XbhDwy1Y8Oh-FSGStqzBmnLVA-n45vixoO45IzKECgmlkgnY0gmlwhKwSLWKKbXVsdGlhZGRyc5YACASsEi1iBkd7AAoErBItYgZHfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECTCs54SuhdGw-ECfkY6vN4RERm0Tef5z3KJyjGMaedEqDdGNwgkd7g3VkcIJHfYV3YWt1Mgk --lightpushnode=/ip4/172.18.45.98/tcp/18299/p2p/16Uiu2HAkzZ1CEEbg2igMXyPNZczqrtkZtYpg6gw4j7avg252mjF7 --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-13 03:06:36.409 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.240.98 waku d5ac710cd03df014838d015b7201921e3c9f26e7f096dc74ec9a0b26aa2060bd
2025-02-13 03:06:36.463 DEBUG [src.node.docker_mananger] Container started with ID d5ac710cd03d. Setting up logs at ./log/docker/lightpush_node1_2025-02-13_03-06-33__1097f5c6-8f75-49e0-823b-5146a50f4d4d__wakuorg_go-waku:latest.log
2025-02-13 03:06:36.463 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 23661
2025-02-13 03:06:36.465 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 03:06:37.465 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23661/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 03:06:37.467 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHX1az70jSY3E06217y2alwYZcW0ISQVdXFJoylWumWKTNqF3eJxhr8u4WI8WzStatXw0cYNnLswhBywO4NAi3WGAZT9RcgogmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOuFv2QYdmVxOwzWOravBnUCz6Zjhmj9_jadwImfgXHyYN0Y3CCXG6DdWRwglxwhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/23662/p2p/16Uiu2HAmQNZd5pcSjTwrqc92Ddxr88jfxCGTH6Gb7HG3ZnbXWtpG","/ip4/127.0.0.1/tcp/23663/ws/p2p/16Uiu2HAmQNZd5pcSjTwrqc92Ddxr88jfxCGTH6Gb7HG3ZnbXWtpG","/ip4/172.17.0.4/tcp/23662/p2p/16Uiu2HAmQNZd5pcSjTwrqc92Ddxr88jfxCGTH6Gb7HG3ZnbXWtpG","/ip4/172.17.0.4/tcp/23663/ws/p2p/16Uiu2HAmQNZd5pcSjTwrqc92Ddxr88jfxCGTH6Gb7HG3ZnbXWtpG"]}'
2025-02-13 03:06:37.468 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 03:06:37.468 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23661/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.45.98/tcp/18299/p2p/16Uiu2HAkzZ1CEEbg2igMXyPNZczqrtkZtYpg6gw4j7avg252mjF7", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-13 03:06:37.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-13 03:06:37.470 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23661/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.187.198/tcp/45947/p2p/16Uiu2HAky33hXDEQojbGLK9hmt9gYG1SC3Tpouyquh3vuQN8tnVN", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-13 03:06:37.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-13 03:06:37.487 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18298/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 03:06:37.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:37.492 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45946/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 03:06:37.496 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 03:06:37.498 DEBUG [src.steps.light_push] Lightpushing message
2025-02-13 03:06:37.498 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23661/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739415997498055680}}'
2025-02-13 03:06:37.502 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:23661/lightpush/v1/message. Response content: b'lightpush errornot_published_to_any_peer'
2025-02-13 03:06:37.505 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 03:06:37.506 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 03:06:37.506 DEBUG [src.node.waku_node] Stopping container with id 1b94058b39e0
2025-02-13 03:06:38.101 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:38.102 DEBUG [src.node.waku_node] Stopping container with id 05bbf742e72e
2025-02-13 03:06:38.914 ERROR [src.node.docker_mananger] Max retries reached for container 1b94058b39e0. Exiting log stream.
2025-02-13 03:06:38.951 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:38.951 DEBUG [src.node.waku_node] Stopping container with id d5ac710cd03d
2025-02-13 03:06:39.444 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 03:06:39.445 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 03:06:39.453 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:06:39.460 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 03:06:39.463 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
