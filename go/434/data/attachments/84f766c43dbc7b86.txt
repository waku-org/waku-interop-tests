[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-17_03-12-38__d1ce8345-dc70-4779-9848-2f542cfd3250
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_03-12-38__d1ce8345-dc70-4779-9848-2f542cfd3250__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.204.36
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44501', '44502', '44503', '44504', '44505']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44501:44501 -p 44502:44502 -p 44503:44503 -p 44504:44504 -p 44505:44505 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44503 --rest-port=44501 --tcp-port=44502 --discv5-udp-port=44504 --rest-address=0.0.0.0 --nat=extip:172.18.204.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=862ca4e97f5b7a3ebdd9cd5a94faaf24df4ff719796abf28aac4df25fd4e1b7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44505 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container df274e986696. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.204.36 waku ff9cc900ba3e9b094f41e9ef66b6873f149e3ebc6b0194225bdeceae73e25ee5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ff9cc900ba3e. Setting up logs at ./log/docker/publishing_node1_2025-01-17_03-12-38__d1ce8345-dc70-4779-9848-2f542cfd3250__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 44501
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3e87a4a98832. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44501/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44501/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.36/tcp/44502/p2p/16Uiu2HAkzoSv49A6rGwFCvX25XVqVuB72pSqmd84pRcW91BHUdnF","/ip4/172.18.204.36/tcp/44503/ws/p2p/16Uiu2HAkzoSv49A6rGwFCvX25XVqVuB72pSqmd84pRcW91BHUdnF"],"enrUri":"enr:-L24QDc30YHH_vZ9U4AmgxZRetMFHHHF5Mj8PRkbMJ_my90maTdNRIt_w1NURLN_7oPITmjZM6r-mKLyPxw30u6kMz4CgmlkgnY0gmlwhKwSzCSKbXVsdGlhZGRyc5YACASsEswkBq3WAAoErBLMJAat190DgnJzhQADAQAAiXNlY3AyNTZrMaECT95wvi3C1eUoaDSfDhfZXiWgeCFzBQNR-fNxX7IktciDdGNwgq3Wg3VkcIKt2IV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_03-12-38__d1ce8345-dc70-4779-9848-2f542cfd3250__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.25.167
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5943', '5944', '5945', '5946', '5947']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5943:5943 -p 5944:5944 -p 5945:5945 -p 5946:5946 -p 5947:5947 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=5945 --rest-port=5943 --tcp-port=5944 --discv5-udp-port=5946 --rest-address=0.0.0.0 --nat=extip:172.18.25.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=525f365a0f5fb84da5c5efbf642e0eceffb95da39dc2c8ded21bbbaea66adedf --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QDc30YHH_vZ9U4AmgxZRetMFHHHF5Mj8PRkbMJ_my90maTdNRIt_w1NURLN_7oPITmjZM6r-mKLyPxw30u6kMz4CgmlkgnY0gmlwhKwSzCSKbXVsdGlhZGRyc5YACASsEswkBq3WAAoErBLMJAat190DgnJzhQADAQAAiXNlY3AyNTZrMaECT95wvi3C1eUoaDSfDhfZXiWgeCFzBQNR-fNxX7IktciDdGNwgq3Wg3VkcIKt2IV3YWt1MgM --storenode=/ip4/172.18.204.36/tcp/44502/p2p/16Uiu2HAkzoSv49A6rGwFCvX25XVqVuB72pSqmd84pRcW91BHUdnF --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.25.167 waku 2ed0175d1308aed6558bd50a2d776eae0301458c07074c25eef5714c9edf1676
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2ed0175d1308. Setting up logs at ./log/docker/store_node1_2025-01-17_03-12-38__d1ce8345-dc70-4779-9848-2f542cfd3250__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 5943
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5943/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QMguF4pSvTfzhA6mntUFsHML1w-01Z6sPN8YW6DZXuFYdA9-0AIGx5spTEuhosVTThXl6PGsL0oGILs2buiAyAaGAZRyP6FLgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECHSN5lagKvfINPda36tCY8pwV12PM-1JvQLTPQ6pYyGKDdGNwghc4g3VkcIIXOoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/5944/p2p/16Uiu2HAkwPRBFCqiAJ7atv3MrjXK6hpASBdEDLZadj3QyrxA3xPj","/ip4/127.0.0.1/tcp/5945/ws/p2p/16Uiu2HAkwPRBFCqiAJ7atv3MrjXK6hpASBdEDLZadj3QyrxA3xPj","/ip4/172.17.0.3/tcp/5944/p2p/16Uiu2HAkwPRBFCqiAJ7atv3MrjXK6hpASBdEDLZadj3QyrxA3xPj","/ip4/172.17.0.3/tcp/5945/ws/p2p/16Uiu2HAkwPRBFCqiAJ7atv3MrjXK6hpASBdEDLZadj3QyrxA3xPj"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5943/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.204.36/tcp/44502/p2p/16Uiu2HAkzoSv49A6rGwFCvX25XVqVuB72pSqmd84pRcW91BHUdnF", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44501/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5943/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44501/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44501/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ff9cc900ba3e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2ed0175d1308
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-17_03-12-38__d1ce8345-dc70-4779-9848-2f542cfd3250__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-17_03-12-38__d1ce8345-dc70-4779-9848-2f542cfd3250__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-17_03-12-42__16e9bb52-b248-4b11-bd2d-e62192702688
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_03-12-42__16e9bb52-b248-4b11-bd2d-e62192702688__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.104.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10325', '10326', '10327', '10328', '10329']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10325:10325 -p 10326:10326 -p 10327:10327 -p 10328:10328 -p 10329:10329 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10327 --rest-port=10325 --tcp-port=10326 --discv5-udp-port=10328 --rest-address=0.0.0.0 --nat=extip:172.18.104.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1d0a5b0fca139831eddefdb2f97da40c5b10e60ac56cdf8ac4fbce5a1ab9e7fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10329 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ff9cc900ba3e. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.104.37 waku c093d281212c6d83c9ea64f3052ef5e29620f4f9546d55b125cf5e9c5223dfe6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c093d281212c. Setting up logs at ./log/docker/publishing_node1_2025-01-17_03-12-42__16e9bb52-b248-4b11-bd2d-e62192702688__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10325
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2ed0175d1308. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10325/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10325/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.37/tcp/10326/p2p/16Uiu2HAm4GSZ6TXtCKjrwUaZz2GsafPNXekwMKCgWbTcUsC1cVcG","/ip4/172.18.104.37/tcp/10327/ws/p2p/16Uiu2HAm4GSZ6TXtCKjrwUaZz2GsafPNXekwMKCgWbTcUsC1cVcG"],"enrUri":"enr:-L24QKvxcfTBvh824kEAYITGHfgGbGMIz3ftcWTfNeEb6PknCqPrvISMrNIOW99wL4snluWy01pk6WvDZOppG7V5dzQCgmlkgnY0gmlwhKwSaCWKbXVsdGlhZGRyc5YACASsEmglBihWAAoErBJoJQYoV90DgnJzhQADAQAAiXNlY3AyNTZrMaECg1vGP93IEMAEZwbLG9eQDmCpQqoV3UHB6Hy3Ifzt9EWDdGNwgihWg3VkcIIoWIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_03-12-42__16e9bb52-b248-4b11-bd2d-e62192702688__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.66.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55444', '55445', '55446', '55447', '55448']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55444:55444 -p 55445:55445 -p 55446:55446 -p 55447:55447 -p 55448:55448 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=55446 --rest-port=55444 --tcp-port=55445 --discv5-udp-port=55447 --rest-address=0.0.0.0 --nat=extip:172.18.66.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa5da3c67a334669b82e9edafd1c37ac6c11ffb1a284a96f04e0f8ffbcfeddd2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QKvxcfTBvh824kEAYITGHfgGbGMIz3ftcWTfNeEb6PknCqPrvISMrNIOW99wL4snluWy01pk6WvDZOppG7V5dzQCgmlkgnY0gmlwhKwSaCWKbXVsdGlhZGRyc5YACASsEmglBihWAAoErBJoJQYoV90DgnJzhQADAQAAiXNlY3AyNTZrMaECg1vGP93IEMAEZwbLG9eQDmCpQqoV3UHB6Hy3Ifzt9EWDdGNwgihWg3VkcIIoWIV3YWt1MgM --storenode=/ip4/172.18.104.37/tcp/10326/p2p/16Uiu2HAm4GSZ6TXtCKjrwUaZz2GsafPNXekwMKCgWbTcUsC1cVcG --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.66.52 waku 08860019f07e41f4a4be91645da0a4060cf0a67c20373fbb809c57ed7d75c068
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 08860019f07e. Setting up logs at ./log/docker/store_node1_2025-01-17_03-12-42__16e9bb52-b248-4b11-bd2d-e62192702688__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 55444
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55444/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QKbZncRAJlNdq67lUVntz9hIPYTO00NrJ8ffusYZK0sVTMG6SGuqHG-3DfpVvrDisIpWPHfFVqo20uX5GXq_rcyGAZRyP7GFgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDvvK1ncJYBqAs-f-Oo6BVsdJLRVvTW1POD-TiXEy_7X2DdGNwgtiVg3VkcILYl4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/55445/p2p/16Uiu2HAmRWNU26iCqeyBuxV5cV4qXriG39CmPYJDi5dz2o4X18SQ","/ip4/127.0.0.1/tcp/55446/ws/p2p/16Uiu2HAmRWNU26iCqeyBuxV5cV4qXriG39CmPYJDi5dz2o4X18SQ","/ip4/172.17.0.3/tcp/55445/p2p/16Uiu2HAmRWNU26iCqeyBuxV5cV4qXriG39CmPYJDi5dz2o4X18SQ","/ip4/172.17.0.3/tcp/55446/ws/p2p/16Uiu2HAmRWNU26iCqeyBuxV5cV4qXriG39CmPYJDi5dz2o4X18SQ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55444/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.104.37/tcp/10326/p2p/16Uiu2HAm4GSZ6TXtCKjrwUaZz2GsafPNXekwMKCgWbTcUsC1cVcG", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10325/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55444/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10325/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10325/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c093d281212c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 08860019f07e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-17_03-12-42__16e9bb52-b248-4b11-bd2d-e62192702688__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-17_03-12-42__16e9bb52-b248-4b11-bd2d-e62192702688__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-17_03-12-46__640c9c76-ed86-4db1-83bf-de609436e646
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_03-12-46__640c9c76-ed86-4db1-83bf-de609436e646__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.0.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19910', '19911', '19912', '19913', '19914']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19910:19910 -p 19911:19911 -p 19912:19912 -p 19913:19913 -p 19914:19914 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19912 --rest-port=19910 --tcp-port=19911 --discv5-udp-port=19913 --rest-address=0.0.0.0 --nat=extip:172.18.0.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cce7a2dc5e7c4feaa00fbe83f4980e8c1a0cc4ce4231f9de463c08ec1ec3afb4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19914 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c093d281212c. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.0.58 waku 26833b57706d8884ad21b5cb803e17d2a96eae88e7ac7fb2c2517a7d1387f5e8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 26833b57706d. Setting up logs at ./log/docker/publishing_node1_2025-01-17_03-12-46__640c9c76-ed86-4db1-83bf-de609436e646__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19910
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 08860019f07e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19910/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19910/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.58/tcp/19911/p2p/16Uiu2HAm6LD1RTg7Wen2TxNk1UYsV3hZ3Y7h5X1uvpG8SKUfxrYq","/ip4/172.18.0.58/tcp/19912/ws/p2p/16Uiu2HAm6LD1RTg7Wen2TxNk1UYsV3hZ3Y7h5X1uvpG8SKUfxrYq"],"enrUri":"enr:-L24QLUQGdVLL6xppCKxt94EiFlE_LR5OEK0zZL_VpZ47XdtU411CBrSX2v7tSa04gH_6p3LsOomP9QAw5vo_f9gmZsCgmlkgnY0gmlwhKwSADqKbXVsdGlhZGRyc5YACASsEgA6Bk3HAAoErBIAOgZNyN0DgnJzhQADAQAAiXNlY3AyNTZrMaECogonp9bZuAcxp0bQONv3QEMb-Poc0YBCcwVzd1zCqfKDdGNwgk3Hg3VkcIJNyYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_03-12-46__640c9c76-ed86-4db1-83bf-de609436e646__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.240.231
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28904', '28905', '28906', '28907', '28908']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28904:28904 -p 28905:28905 -p 28906:28906 -p 28907:28907 -p 28908:28908 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=28906 --rest-port=28904 --tcp-port=28905 --discv5-udp-port=28907 --rest-address=0.0.0.0 --nat=extip:172.18.240.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf736dc5a6e65ecebaed74d8de4aea7cd3704cfcc39313c14febd7472a9c14f9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QLUQGdVLL6xppCKxt94EiFlE_LR5OEK0zZL_VpZ47XdtU411CBrSX2v7tSa04gH_6p3LsOomP9QAw5vo_f9gmZsCgmlkgnY0gmlwhKwSADqKbXVsdGlhZGRyc5YACASsEgA6Bk3HAAoErBIAOgZNyN0DgnJzhQADAQAAiXNlY3AyNTZrMaECogonp9bZuAcxp0bQONv3QEMb-Poc0YBCcwVzd1zCqfKDdGNwgk3Hg3VkcIJNyYV3YWt1MgM --storenode=/ip4/172.18.0.58/tcp/19911/p2p/16Uiu2HAm6LD1RTg7Wen2TxNk1UYsV3hZ3Y7h5X1uvpG8SKUfxrYq --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.240.231 waku 5cf8eae499f15f76532885f22253eb1648d6ad2610e3e870b0ee60bbf6c0321a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5cf8eae499f1. Setting up logs at ./log/docker/store_node1_2025-01-17_03-12-46__640c9c76-ed86-4db1-83bf-de609436e646__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 28904
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28904/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QNU3cRvYLgfoaNPw5ve1JdX2VuucIz8h2_iLfbiy76XCLhC8aRR2TrMQL-sQEQhXLdIRqzWnm4nk1itWy4GDityGAZRyP8GqgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaED_4m-7M9KiiOgY850j_QAbEVSaHDqdgUz95-W4bj-D8-DdGNwgnDpg3VkcIJw64V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/28905/p2p/16Uiu2HAmVrW8sv7RS8VWLu6VMQQz6kpymEifY99VZKXaXiunUpG6","/ip4/127.0.0.1/tcp/28906/ws/p2p/16Uiu2HAmVrW8sv7RS8VWLu6VMQQz6kpymEifY99VZKXaXiunUpG6","/ip4/172.17.0.3/tcp/28905/p2p/16Uiu2HAmVrW8sv7RS8VWLu6VMQQz6kpymEifY99VZKXaXiunUpG6","/ip4/172.17.0.3/tcp/28906/ws/p2p/16Uiu2HAmVrW8sv7RS8VWLu6VMQQz6kpymEifY99VZKXaXiunUpG6"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28904/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.0.58/tcp/19911/p2p/16Uiu2HAm6LD1RTg7Wen2TxNk1UYsV3hZ3Y7h5X1uvpG8SKUfxrYq", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19910/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28904/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19910/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19910/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 26833b57706d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5cf8eae499f1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-17_03-12-46__640c9c76-ed86-4db1-83bf-de609436e646__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-17_03-12-46__640c9c76-ed86-4db1-83bf-de609436e646__wakuorg_go-waku:latest.log