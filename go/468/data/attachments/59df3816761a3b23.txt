2025-02-16 03:08:15.754 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 03:08:15.754 DEBUG [tests.conftest] Running test: test_filter with id: 2025-02-16_03-08-15__dd8a0564-6c64-43e7-bcaf-6d672cf434d1
2025-02-16 03:08:15.754 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 03:08:15.755 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 03:08:15.755 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 03:08:15.755 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 03:08:15.755 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 03:08:15.764 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 03:08:15.764 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_03-08-15__dd8a0564-6c64-43e7-bcaf-6d672cf434d1__wakuorg_nwaku:latest.log
2025-02-16 03:08:15.765 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:08:15.765 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:08:15.832 DEBUG [src.node.docker_mananger] Network waku created
2025-02-16 03:08:15.832 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.139
2025-02-16 03:08:15.833 DEBUG [src.node.docker_mananger] Generated ports ['38162', '38163', '38164', '38165', '38166']
2025-02-16 03:08:15.833 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:08:15.833 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:08:15.833 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:08:15.833 DEBUG [src.node.docker_mananger] docker run -i -t -p 38162:38162 -p 38163:38163 -p 38164:38164 -p 38165:38165 -p 38166:38166 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38164 --rest-port=38162 --tcp-port=38163 --discv5-udp-port=38165 --rest-address=0.0.0.0 --nat=extip:172.18.229.139 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=85cd2cac9736bbd5bbcf580cc8a6a3572f286227d7f8dde8f766e396253de38f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38166 --metrics-logging=true --relay=true --filter=true
2025-02-16 03:08:19.608 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.139 waku 7c7affa17443d43f15b53db6449f9e0d41803e0e2ce8befd7447744c06a0acdb
2025-02-16 03:08:19.654 DEBUG [src.node.docker_mananger] Container started with ID 7c7affa17443. Setting up logs at ./log/docker/node1_2025-02-16_03-08-15__dd8a0564-6c64-43e7-bcaf-6d672cf434d1__wakuorg_nwaku:latest.log
2025-02-16 03:08:19.654 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38162
2025-02-16 03:08:19.655 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:08:20.656 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38162/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:08:20.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 03:08:20.659 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 03:08:20.659 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38162/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:08:20.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.139/tcp/38163/p2p/16Uiu2HAmSYc5q4dqAPbvvBEPYF2MMzzuJxmZ1SXx8TWw5tpWuLAM","/ip4/172.18.229.139/tcp/38164/ws/p2p/16Uiu2HAmSYc5q4dqAPbvvBEPYF2MMzzuJxmZ1SXx8TWw5tpWuLAM"],"enrUri":"enr:-L24QGmd-ZZB4tW-Q_lD-Tu1TmNQy8E9zKJFCon7xJVod0GsMeh9pd4rFhoYcDnsqVlP7l3ZxC_iJiDrOXjDcc8n2EwCgmlkgnY0gmlwhKwS5YuKbXVsdGlhZGRyc5YACASsEuWLBpUTAAoErBLliwaVFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzmD0imF_7rrgPYPeepFFxy5nN8t7ayGUKBWtp4pkf9qDdGNwgpUTg3VkcIKVFYV3YWt1MgU"}'
2025-02-16 03:08:20.662 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:08:20.668 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-16 03:08:20.668 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_03-08-15__dd8a0564-6c64-43e7-bcaf-6d672cf434d1__wakuorg_go-waku:latest.log
2025-02-16 03:08:20.668 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:08:20.668 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:08:20.670 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:08:20.670 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.94
2025-02-16 03:08:20.670 DEBUG [src.node.docker_mananger] Generated ports ['2751', '2752', '2753', '2754', '2755']
2025-02-16 03:08:20.670 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:08:20.670 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:08:20.670 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:08:20.670 DEBUG [src.node.docker_mananger] docker run -i -t -p 2751:2751 -p 2752:2752 -p 2753:2753 -p 2754:2754 -p 2755:2755 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=2753 --rest-port=2751 --tcp-port=2752 --discv5-udp-port=2754 --rest-address=0.0.0.0 --nat=extip:172.18.64.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1af001000b8c9050a0dda98562c3fb9e0004caa0d75a549495f19af8afded90e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QGmd-ZZB4tW-Q_lD-Tu1TmNQy8E9zKJFCon7xJVod0GsMeh9pd4rFhoYcDnsqVlP7l3ZxC_iJiDrOXjDcc8n2EwCgmlkgnY0gmlwhKwS5YuKbXVsdGlhZGRyc5YACASsEuWLBpUTAAoErBLliwaVFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzmD0imF_7rrgPYPeepFFxy5nN8t7ayGUKBWtp4pkf9qDdGNwgpUTg3VkcIKVFYV3YWt1MgU --filternode=/ip4/172.18.229.139/tcp/38163/p2p/16Uiu2HAmSYc5q4dqAPbvvBEPYF2MMzzuJxmZ1SXx8TWw5tpWuLAM --pubsub-topic=/waku/2/rs/3/1
2025-02-16 03:08:24.276 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.94 waku 9abaf23649cb7dc3ef804480d7b6e4cd928de40e5d7e1e825f45008cee396d1b
2025-02-16 03:08:24.328 DEBUG [src.node.docker_mananger] Container started with ID 9abaf23649cb. Setting up logs at ./log/docker/node1_2025-02-16_03-08-15__dd8a0564-6c64-43e7-bcaf-6d672cf434d1__wakuorg_go-waku:latest.log
2025-02-16 03:08:24.328 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 2751
2025-02-16 03:08:24.330 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:08:25.330 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2751/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:08:25.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QOsx5sJKOjdneuKLUsofatAHe1hGZD7M7yqBAh11Asd4M26Sw7Hv5C-RPat4gzR-HXhLBW_HUnHAPQUNjADf9MOGAZUMuoGFgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQOk4P5-Q6-gku6jUFedNAjelbAN23XaDvQtc-TD9OEBAYN0Y3CCCsCDdWRwggrChXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/2752/p2p/16Uiu2HAmPkcCVgAmhWyKjgR24Qe6BZckbYJSAzRxk3afg9qky4Rv","/ip4/127.0.0.1/tcp/2753/ws/p2p/16Uiu2HAmPkcCVgAmhWyKjgR24Qe6BZckbYJSAzRxk3afg9qky4Rv","/ip4/172.17.0.3/tcp/2752/p2p/16Uiu2HAmPkcCVgAmhWyKjgR24Qe6BZckbYJSAzRxk3afg9qky4Rv","/ip4/172.17.0.3/tcp/2753/ws/p2p/16Uiu2HAmPkcCVgAmhWyKjgR24Qe6BZckbYJSAzRxk3afg9qky4Rv"]}'
2025-02-16 03:08:25.333 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:08:25.333 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38162/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 03:08:25.336 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:08:25.337 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2751/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7a00aef4-a074-4f01-b9ed-06e163fa9355", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-16 03:08:27.007 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7a00aef4-a074-4f01-b9ed-06e163fa9355","statusDesc":"OK"}'
2025-02-16 03:08:27.008 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38162/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 03:08:27.016 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:08:27.016 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 03:08:27.116 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-16 03:08:27.117 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2751/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:08:27.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675307008676864,"ephemeral":false}]'
2025-02-16 03:08:27.122 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 03:08:27.123 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 03:08:27.123 DEBUG [src.node.waku_node] Stopping container with id 7c7affa17443
2025-02-16 03:08:28.215 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:08:28.216 DEBUG [src.node.waku_node] Stopping container with id 9abaf23649cb
2025-02-16 03:08:28.685 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:08:28.687 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 03:08:28.692 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 03:08:28.695 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
