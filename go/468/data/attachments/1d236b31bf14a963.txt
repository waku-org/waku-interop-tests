2025-02-16 03:09:25.787 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 03:09:25.788 DEBUG [tests.conftest] Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2025-02-16_03-09-25__64b5c130-d526-4fdf-a2f2-9ac7b2d34aa4
2025-02-16 03:09:25.788 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 03:09:25.788 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 03:09:25.788 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 03:09:25.798 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-16 03:09:25.798 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_03-09-25__64b5c130-d526-4fdf-a2f2-9ac7b2d34aa4__wakuorg_go-waku:latest.log
2025-02-16 03:09:25.803 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 03:09:25.803 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_03-09-25__64b5c130-d526-4fdf-a2f2-9ac7b2d34aa4__wakuorg_nwaku:latest.log
2025-02-16 03:09:25.809 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-16 03:09:25.809 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-16_03-09-25__64b5c130-d526-4fdf-a2f2-9ac7b2d34aa4__wakuorg_go-waku:latest.log
2025-02-16 03:09:25.809 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 03:09:25.809 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-16 03:09:25.810 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:09:25.810 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:09:25.882 DEBUG [src.node.docker_mananger] Network waku created
2025-02-16 03:09:25.882 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.172.79
2025-02-16 03:09:25.882 DEBUG [src.node.docker_mananger] Generated ports ['32272', '32273', '32274', '32275', '32276']
2025-02-16 03:09:25.882 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:09:25.882 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:09:25.883 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:09:25.883 DEBUG [src.node.docker_mananger] docker run -i -t -p 32272:32272 -p 32273:32273 -p 32274:32274 -p 32275:32275 -p 32276:32276 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32274 --rest-port=32272 --tcp-port=32273 --discv5-udp-port=32275 --rest-address=0.0.0.0 --nat=extip:172.18.172.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2d02cd0eefa6adc9cbf641b6bd0bd99c9b4ffdcfb4d194b5686cf49c817c4a2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-16 03:09:29.342 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.172.79 waku b1fd512a2e8def2012249f80ab99bb420305c1f2a030d69dc68e0fb6a45f024a
2025-02-16 03:09:29.420 DEBUG [src.node.docker_mananger] Container started with ID b1fd512a2e8d. Setting up logs at ./log/docker/node1_2025-02-16_03-09-25__64b5c130-d526-4fdf-a2f2-9ac7b2d34aa4__wakuorg_go-waku:latest.log
2025-02-16 03:09:29.421 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 32272
2025-02-16 03:09:29.421 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:09:30.421 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32272/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:30.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QIdV7atsbiZesYaa86-wq7RWSTEdx-FG-lXVdPI6ZBBWTjUhskD4Sh4aj0EIBqGgIZLtXkreDukFZLyCakxz8SSGAZUMu3-MgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECZamEIAcF0B6i9qXJjU8v95q682TOpmH5tQMRK4Tzcq-DdGNwgn4Rg3VkcIJ-E4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/32273/p2p/16Uiu2HAm2GX5VwadNZd5Zcq5K8eRqrdh6JwQm3oaPpZwEud9zSN2","/ip4/127.0.0.1/tcp/32274/ws/p2p/16Uiu2HAm2GX5VwadNZd5Zcq5K8eRqrdh6JwQm3oaPpZwEud9zSN2","/ip4/172.17.0.2/tcp/32273/p2p/16Uiu2HAm2GX5VwadNZd5Zcq5K8eRqrdh6JwQm3oaPpZwEud9zSN2","/ip4/172.17.0.2/tcp/32274/ws/p2p/16Uiu2HAm2GX5VwadNZd5Zcq5K8eRqrdh6JwQm3oaPpZwEud9zSN2"]}'
2025-02-16 03:09:30.424 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:09:30.424 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:09:30.425 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:09:30.426 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:09:30.426 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.120.179
2025-02-16 03:09:30.426 DEBUG [src.node.docker_mananger] Generated ports ['39814', '39815', '39816', '39817', '39818']
2025-02-16 03:09:30.427 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:09:30.427 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:09:30.427 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:09:30.427 DEBUG [src.node.docker_mananger] docker run -i -t -p 39814:39814 -p 39815:39815 -p 39816:39816 -p 39817:39817 -p 39818:39818 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39816 --rest-port=39814 --tcp-port=39815 --discv5-udp-port=39817 --rest-address=0.0.0.0 --nat=extip:172.18.120.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8906dcf8abfd01ccccdc4c7cdc0338cdbf6cde13fbde48bed2ecff5c500f4faa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39818 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-J-4QIdV7atsbiZesYaa86-wq7RWSTEdx-FG-lXVdPI6ZBBWTjUhskD4Sh4aj0EIBqGgIZLtXkreDukFZLyCakxz8SSGAZUMu3-MgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECZamEIAcF0B6i9qXJjU8v95q682TOpmH5tQMRK4Tzcq-DdGNwgn4Rg3VkcIJ-E4V3YWt1MgE
2025-02-16 03:09:32.662 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.120.179 waku 6498806153a0941ed458f8e7078a902cfd403f664db436002773aa440341ef0b
2025-02-16 03:09:32.709 DEBUG [src.node.docker_mananger] Container started with ID 6498806153a0. Setting up logs at ./log/docker/node2_2025-02-16_03-09-25__64b5c130-d526-4fdf-a2f2-9ac7b2d34aa4__wakuorg_nwaku:latest.log
2025-02-16 03:09:32.709 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39814
2025-02-16 03:09:32.710 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:09:33.710 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39814/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:33.714 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 03:09:33.714 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 03:09:33.714 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39814/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:33.716 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.179/tcp/39815/p2p/16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q","/ip4/172.18.120.179/tcp/39816/ws/p2p/16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q"],"enrUri":"enr:-L24QMbMnSH3YqWaMgYLucNVS8a9582L2fZH5OyRLs45VvMDX_5EotBENZeeQrt8Pb1miSdh4PfmSbORCeGzBBhAZqwCgmlkgnY0gmlwhKwSeLOKbXVsdGlhZGRyc5YACASsEnizBpuHAAoErBJ4swabiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDdamDOCh3ZwT3Ipiv7ZHny6h4fNU0WuBxlgEbBDuKl2DdGNwgpuHg3VkcIKbiYV3YWt1MgE"}'
2025-02-16 03:09:33.717 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:09:33.717 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:09:33.717 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:09:33.718 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:09:33.719 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.202
2025-02-16 03:09:33.719 DEBUG [src.node.docker_mananger] Generated ports ['12202', '12203', '12204', '12205', '12206']
2025-02-16 03:09:33.719 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:09:33.719 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:09:33.719 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:09:33.719 DEBUG [src.node.docker_mananger] docker run -i -t -p 12202:12202 -p 12203:12203 -p 12204:12204 -p 12205:12205 -p 12206:12206 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=12204 --rest-port=12202 --tcp-port=12203 --discv5-udp-port=12205 --rest-address=0.0.0.0 --nat=extip:172.18.109.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b54dfad64dd1ee0af7c7863bc6195b633d597f8a5d1ab2d3f1d59eb00aa9b4c2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QMbMnSH3YqWaMgYLucNVS8a9582L2fZH5OyRLs45VvMDX_5EotBENZeeQrt8Pb1miSdh4PfmSbORCeGzBBhAZqwCgmlkgnY0gmlwhKwSeLOKbXVsdGlhZGRyc5YACASsEnizBpuHAAoErBJ4swabiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDdamDOCh3ZwT3Ipiv7ZHny6h4fNU0WuBxlgEbBDuKl2DdGNwgpuHg3VkcIKbiYV3YWt1MgE
2025-02-16 03:09:33.948 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.202 waku 879187aca179dc47186aaa1363c202690e91a28d23635f3500b56d4726a47ef7
2025-02-16 03:09:34.006 DEBUG [src.node.docker_mananger] Container started with ID 879187aca179. Setting up logs at ./log/docker/node3_2025-02-16_03-09-25__64b5c130-d526-4fdf-a2f2-9ac7b2d34aa4__wakuorg_go-waku:latest.log
2025-02-16 03:09:34.007 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 12202
2025-02-16 03:09:34.007 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:09:35.008 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12202/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:35.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QERf1CknwzVNnzY08x-iCIRoZMl_O-y9HsNa9moWVosRQwVUpVyg5zrwvKUaqg-lphpt_vD3Q0-1o2KiEwl5WRGGAZUMu5GvgmlkgnY0gmlwhKwRAASCcnODAAMAiXNlY3AyNTZrMaEDyqJGc41H4EZrfksL3RP8EyrqT1Gt7t3gwo8idyrI2TSDdGNwgi-rg3VkcIIvrYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/12203/p2p/16Uiu2HAmSHzDs2qybU9iK26Cf18zwEJMwmcvVFtvHoz3vW4KxY7d","/ip4/127.0.0.1/tcp/12204/ws/p2p/16Uiu2HAmSHzDs2qybU9iK26Cf18zwEJMwmcvVFtvHoz3vW4KxY7d","/ip4/172.17.0.4/tcp/12203/p2p/16Uiu2HAmSHzDs2qybU9iK26Cf18zwEJMwmcvVFtvHoz3vW4KxY7d","/ip4/172.17.0.4/tcp/12204/ws/p2p/16Uiu2HAmSHzDs2qybU9iK26Cf18zwEJMwmcvVFtvHoz3vW4KxY7d"]}'
2025-02-16 03:09:35.011 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:09:35.011 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32272/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 03:09:35.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-16 03:09:35.014 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39814/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 03:09:35.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:09:35.018 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12202/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 03:09:35.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-16 03:09:35.022 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32272/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:35.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q","multiaddrs":["/ip4/172.18.120.179/tcp/39815/p2p/16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q","/ip4/172.18.120.179/tcp/39816/ws/p2p/16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-16 03:09:35.027 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39814/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:35.035 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-16 03:09:36.037 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32272/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:36.039 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q","multiaddrs":["/ip4/172.18.120.179/tcp/39815/p2p/16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q","/ip4/172.18.120.179/tcp/39816/ws/p2p/16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-16 03:09:36.039 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39814/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:36.042 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/12203/p2p/16Uiu2HAmSHzDs2qybU9iK26Cf18zwEJMwmcvVFtvHoz3vW4KxY7d","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-16 03:09:36.042 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12202/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:36.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q","multiaddrs":["/ip4/172.18.120.179/tcp/39815/p2p/16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q","/ip4/172.18.120.179/tcp/39816/ws/p2p/16Uiu2HAmDb1VCeopgoY8Gbq1jFbxy6xATqAYQ9gMzA5mE6rfk94Q"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
2025-02-16 03:09:36.045 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-16 03:10:06.045 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32272/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 03:10:06.048 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-16 03:10:06.049 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:10:07.050 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/go-waku:latest can find the published message
2025-02-16 03:10:07.051 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12202/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:10:07.053 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","timestamp":1739675406045780736,"ephemeral":null}]'
2025-02-16 03:10:07.057 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 03:10:07.058 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 03:10:07.058 DEBUG [src.node.waku_node] Stopping container with id b1fd512a2e8d
2025-02-16 03:10:07.581 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:10:07.581 DEBUG [src.node.waku_node] Stopping container with id 6498806153a0
2025-02-16 03:10:08.394 ERROR [src.node.docker_mananger] Max retries reached for container b1fd512a2e8d. Exiting log stream.
2025-02-16 03:10:08.484 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:10:08.485 DEBUG [src.node.waku_node] Stopping container with id 879187aca179
2025-02-16 03:10:08.973 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:10:08.974 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 03:10:08.979 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 03:10:08.994 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 03:10:08.999 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
