2025-02-16 03:09:17.220 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 03:09:17.221 DEBUG [tests.conftest] Running test: test_filter_get_message_with_150_kb_payload with id: 2025-02-16_03-09-17__2ec5407f-3be4-4f0a-8801-1f327c028a86
2025-02-16 03:09:17.221 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 03:09:17.221 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 03:09:17.222 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-16 03:09:17.228 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 03:09:17.228 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_03-09-17__2ec5407f-3be4-4f0a-8801-1f327c028a86__wakuorg_nwaku:latest.log
2025-02-16 03:09:17.228 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:09:17.228 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:09:17.229 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:09:17.230 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.101.70
2025-02-16 03:09:17.230 DEBUG [src.node.docker_mananger] Generated ports ['36816', '36817', '36818', '36819', '36820']
2025-02-16 03:09:17.230 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:09:17.230 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:09:17.230 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:09:17.230 DEBUG [src.node.docker_mananger] docker run -i -t -p 36816:36816 -p 36817:36817 -p 36818:36818 -p 36819:36819 -p 36820:36820 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36818 --rest-port=36816 --tcp-port=36817 --discv5-udp-port=36819 --rest-address=0.0.0.0 --nat=extip:172.18.101.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1a9fc4b4da73eeccab2372ed2c45ebe4fe6293de4c0dddefbcc9cc83c0192a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36820 --metrics-logging=true --relay=true --filter=true
2025-02-16 03:09:17.263 ERROR [src.node.docker_mananger] Max retries reached for container cf2bceea753c. Exiting log stream.
2025-02-16 03:09:17.456 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.101.70 waku 1533fe294246b844e9033a04b7d0c05e3b4bbbe30516b376696cb6279e7649f6
2025-02-16 03:09:17.504 DEBUG [src.node.docker_mananger] Container started with ID 1533fe294246. Setting up logs at ./log/docker/node1_2025-02-16_03-09-17__2ec5407f-3be4-4f0a-8801-1f327c028a86__wakuorg_nwaku:latest.log
2025-02-16 03:09:17.504 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36816
2025-02-16 03:09:17.505 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:09:18.025 ERROR [src.node.docker_mananger] Max retries reached for container e5c8c235adad. Exiting log stream.
2025-02-16 03:09:18.506 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36816/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:18.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 03:09:18.509 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 03:09:18.510 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36816/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:18.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.70/tcp/36817/p2p/16Uiu2HAmNTxREKEXrX2qERVb797oEx44WyXnjCyqFJqd2mi6QKpz","/ip4/172.18.101.70/tcp/36818/ws/p2p/16Uiu2HAmNTxREKEXrX2qERVb797oEx44WyXnjCyqFJqd2mi6QKpz"],"enrUri":"enr:-L24QANiuR36P_mcufUZO_IolD2GfYvwWzlm_bbBIjquYcJvOzbHIEUbWNroPekxaToLwpBB8X_DiBJM1fEegFmi2TUCgmlkgnY0gmlwhKwSZUaKbXVsdGlhZGRyc5YACASsEmVGBo_RAAoErBJlRgaP0t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkcFLt_sHyuJPlg3FOvuu0OUoTvP-Qo-NiW4P9wY7_m-DdGNwgo_Rg3VkcIKP04V3YWt1MgU"}'
2025-02-16 03:09:18.512 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:09:18.512 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-16 03:09:18.518 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-16 03:09:18.518 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_03-09-17__2ec5407f-3be4-4f0a-8801-1f327c028a86__wakuorg_go-waku:latest.log
2025-02-16 03:09:18.519 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:09:18.519 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:09:18.520 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:09:18.520 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.148.197
2025-02-16 03:09:18.520 DEBUG [src.node.docker_mananger] Generated ports ['33227', '33228', '33229', '33230', '33231']
2025-02-16 03:09:18.520 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:09:18.521 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:09:18.521 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:09:18.521 DEBUG [src.node.docker_mananger] docker run -i -t -p 33227:33227 -p 33228:33228 -p 33229:33229 -p 33230:33230 -p 33231:33231 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33229 --rest-port=33227 --tcp-port=33228 --discv5-udp-port=33230 --rest-address=0.0.0.0 --nat=extip:172.18.148.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea28bdd69aebb6fb4cd723c4cc79d7dbcac0dcaba8dd615bf00d581a372c2f74 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QANiuR36P_mcufUZO_IolD2GfYvwWzlm_bbBIjquYcJvOzbHIEUbWNroPekxaToLwpBB8X_DiBJM1fEegFmi2TUCgmlkgnY0gmlwhKwSZUaKbXVsdGlhZGRyc5YACASsEmVGBo_RAAoErBJlRgaP0t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkcFLt_sHyuJPlg3FOvuu0OUoTvP-Qo-NiW4P9wY7_m-DdGNwgo_Rg3VkcIKP04V3YWt1MgU --filternode=/ip4/172.18.101.70/tcp/36817/p2p/16Uiu2HAmNTxREKEXrX2qERVb797oEx44WyXnjCyqFJqd2mi6QKpz --pubsub-topic=/waku/2/rs/3/1
2025-02-16 03:09:18.764 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.148.197 waku d0ef036f7701946a9b283170ca8943dcd596121b33ca8b9feb7e8e56e4716938
2025-02-16 03:09:18.831 DEBUG [src.node.docker_mananger] Container started with ID d0ef036f7701. Setting up logs at ./log/docker/node2_2025-02-16_03-09-17__2ec5407f-3be4-4f0a-8801-1f327c028a86__wakuorg_go-waku:latest.log
2025-02-16 03:09:18.832 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 33227
2025-02-16 03:09:18.832 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:09:19.833 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33227/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:19.835 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJr11glPkAqNx8N7Mv55UpwaPwAn0scRMyIFX2jQNUpMamYlDCEff18PJMI2UBGvhwgYDUubmlbN3ZtcHML_nLKGAZUMu1ZfgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQKzM9HdIx-g25urxB_wqM5Ygx6TDVZApxaP4Fg2NZYj14N0Y3CCgcyDdWRwgoHOhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/33228/p2p/16Uiu2HAm7VCndfPSCDUnUBWpouqMpsxi52DnvFwNGjpzV3ubqHcA","/ip4/127.0.0.1/tcp/33229/ws/p2p/16Uiu2HAm7VCndfPSCDUnUBWpouqMpsxi52DnvFwNGjpzV3ubqHcA","/ip4/172.17.0.3/tcp/33228/p2p/16Uiu2HAm7VCndfPSCDUnUBWpouqMpsxi52DnvFwNGjpzV3ubqHcA","/ip4/172.17.0.3/tcp/33229/ws/p2p/16Uiu2HAm7VCndfPSCDUnUBWpouqMpsxi52DnvFwNGjpzV3ubqHcA"]}'
2025-02-16 03:09:19.835 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:09:19.836 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33227/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.101.70/tcp/36817/p2p/16Uiu2HAmNTxREKEXrX2qERVb797oEx44WyXnjCyqFJqd2mi6QKpz", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-16 03:09:19.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-16 03:09:19.838 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-16 03:09:19.838 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36816/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 03:09:19.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:09:19.842 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33227/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "cefb0c28-46e3-460b-b705-e2ea909e7e3b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-16 03:09:19.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"cefb0c28-46e3-460b-b705-e2ea909e7e3b","statusDesc":"OK"}'
2025-02-16 03:09:19.851 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-16 03:09:19.871 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:09:19.872 DEBUG [src.libs.common] Sleeping for 2 seconds
2025-02-16 03:09:21.872 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-16 03:09:21.873 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33227/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:09:21.876 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-16 03:09:21.879 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 03:09:21.880 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 03:09:21.880 DEBUG [src.node.waku_node] Stopping container with id 1533fe294246
2025-02-16 03:09:23.378 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:09:23.378 DEBUG [src.node.waku_node] Stopping container with id d0ef036f7701
2025-02-16 03:09:23.882 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:09:23.883 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 03:09:23.893 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 03:09:23.896 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
