2025-02-16 03:13:05.155 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 03:13:05.155 DEBUG [tests.conftest] Running test: test_relay_subscribe_with_multiple_overlapping_pubsub_topics with id: 2025-02-16_03-13-05__8ce2be75-aba4-4f56-b069-a70ffdedbb7f
2025-02-16 03:13:05.155 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 03:13:05.156 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 03:13:05.156 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-16 03:13:05.162 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 03:13:05.162 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_03-13-05__8ce2be75-aba4-4f56-b069-a70ffdedbb7f__wakuorg_nwaku:latest.log
2025-02-16 03:13:05.162 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:13:05.162 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:13:05.164 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:13:05.164 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.123
2025-02-16 03:13:05.164 DEBUG [src.node.docker_mananger] Generated ports ['13711', '13712', '13713', '13714', '13715']
2025-02-16 03:13:05.164 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:13:05.164 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:13:05.164 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:13:05.165 DEBUG [src.node.docker_mananger] docker run -i -t -p 13711:13711 -p 13712:13712 -p 13713:13713 -p 13714:13714 -p 13715:13715 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13713 --rest-port=13711 --tcp-port=13712 --discv5-udp-port=13714 --rest-address=0.0.0.0 --nat=extip:172.18.109.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=caba47b22cb9e6e48f64cdae876e2f9c6c5e3abdad42bbc6e5be77582d93bcfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13715 --metrics-logging=true --relay=true
2025-02-16 03:13:05.391 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.123 waku a3899ddd79b535e572123bd8aee72e4e30b608fcaee7e98952d9c1f89b76a047
2025-02-16 03:13:05.432 ERROR [src.node.docker_mananger] Max retries reached for container f0962f3bc888. Exiting log stream.
2025-02-16 03:13:05.439 DEBUG [src.node.docker_mananger] Container started with ID a3899ddd79b5. Setting up logs at ./log/docker/node1_2025-02-16_03-13-05__8ce2be75-aba4-4f56-b069-a70ffdedbb7f__wakuorg_nwaku:latest.log
2025-02-16 03:13:05.440 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13711
2025-02-16 03:13:05.440 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:13:05.951 ERROR [src.node.docker_mananger] Max retries reached for container 96b3ee19419a. Exiting log stream.
2025-02-16 03:13:06.440 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13711/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:06.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 03:13:06.443 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 03:13:06.443 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13711/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:06.445 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.123/tcp/13712/p2p/16Uiu2HAmVHST9PhMT8f3hBhYLq9YCEYuvpqj8r28kr8CYqTfLUhx","/ip4/172.18.109.123/tcp/13713/ws/p2p/16Uiu2HAmVHST9PhMT8f3hBhYLq9YCEYuvpqj8r28kr8CYqTfLUhx"],"enrUri":"enr:-L24QO9jhnmm8l4UTIh-AXbSAZwg0_GeUi5wHY2pslZGwfplAPH0Zk1X6D660-rwHld9lswHB0LKBU2dOA7ae0GUGbECgmlkgnY0gmlwhKwSbXuKbXVsdGlhZGRyc5YACASsEm17BjWQAAoErBJtewY1kd0DgnJzhQADAQAAiXNlY3AyNTZrMaED9xFpktRcYQWzItu04iRZ3a1Jq1k-YOlbN1KerI76HiuDdGNwgjWQg3VkcII1koV3YWt1MgE"}'
2025-02-16 03:13:06.446 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:13:06.451 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-16 03:13:06.452 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_03-13-05__8ce2be75-aba4-4f56-b069-a70ffdedbb7f__wakuorg_go-waku:latest.log
2025-02-16 03:13:06.452 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:13:06.452 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:13:06.453 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:13:06.453 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.224.71
2025-02-16 03:13:06.453 DEBUG [src.node.docker_mananger] Generated ports ['6014', '6015', '6016', '6017', '6018']
2025-02-16 03:13:06.454 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:13:06.454 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:13:06.454 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:13:06.454 DEBUG [src.node.docker_mananger] docker run -i -t -p 6014:6014 -p 6015:6015 -p 6016:6016 -p 6017:6017 -p 6018:6018 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=6016 --rest-port=6014 --tcp-port=6015 --discv5-udp-port=6017 --rest-address=0.0.0.0 --nat=extip:172.18.224.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eae4db8c15a9efdeac3bb8bb9fee62f09cd2d49b7da08ba6d5f930278eeb3bdd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QO9jhnmm8l4UTIh-AXbSAZwg0_GeUi5wHY2pslZGwfplAPH0Zk1X6D660-rwHld9lswHB0LKBU2dOA7ae0GUGbECgmlkgnY0gmlwhKwSbXuKbXVsdGlhZGRyc5YACASsEm17BjWQAAoErBJtewY1kd0DgnJzhQADAQAAiXNlY3AyNTZrMaED9xFpktRcYQWzItu04iRZ3a1Jq1k-YOlbN1KerI76HiuDdGNwgjWQg3VkcII1koV3YWt1MgE
2025-02-16 03:13:06.682 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.224.71 waku 67931446a1e701135bd7ec5511079ea9644ac5aeef1c18d0a5844b5dfff41cf0
2025-02-16 03:13:06.736 DEBUG [src.node.docker_mananger] Container started with ID 67931446a1e7. Setting up logs at ./log/docker/node2_2025-02-16_03-13-05__8ce2be75-aba4-4f56-b069-a70ffdedbb7f__wakuorg_go-waku:latest.log
2025-02-16 03:13:06.738 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 6014
2025-02-16 03:13:06.739 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:13:07.740 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6014/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:07.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QHBU1yuyzoLngTFDwN6li-gjoKW4vLqDFnNHicgsK-19ap9pvqAaTpEFl8f8cNSMyOz3lYA8X2EdFAPhCOeid4eGAZUMvtCngmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDGsHtW02yqGt4xLSsrRFMJ6HMJBvimgQYmwYUUTQhHG-DdGNwghd_g3VkcIIXgYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/6015/p2p/16Uiu2HAmETSTgskeCcmVqQH93WxcLpRBpWJimp7tJqbgeC6iQFqG","/ip4/127.0.0.1/tcp/6016/ws/p2p/16Uiu2HAmETSTgskeCcmVqQH93WxcLpRBpWJimp7tJqbgeC6iQFqG","/ip4/172.17.0.3/tcp/6015/p2p/16Uiu2HAmETSTgskeCcmVqQH93WxcLpRBpWJimp7tJqbgeC6iQFqG","/ip4/172.17.0.3/tcp/6016/ws/p2p/16Uiu2HAmETSTgskeCcmVqQH93WxcLpRBpWJimp7tJqbgeC6iQFqG"]}'
2025-02-16 03:13:07.743 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:13:07.743 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6014/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.109.123/tcp/13712/p2p/16Uiu2HAmVHST9PhMT8f3hBhYLq9YCEYuvpqj8r28kr8CYqTfLUhx", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-16 03:13:07.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-16 03:13:07.762 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13711/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-16 03:13:07.784 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:13:07.785 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6014/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-16 03:13:07.788 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-16 03:13:07.788 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13711/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-16 03:13:07.792 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:13:07.793 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6014/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-16 03:13:07.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-16 03:13:07.800 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 03:13:07.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:13:07.819 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 03:13:07.919 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 03:13:07.919 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:07.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675587800251648,"ephemeral":false,"proof":""}]'
2025-02-16 03:13:07.924 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-16 03:13:07.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6014/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:07.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675587800251648,"ephemeral":false}]'
2025-02-16 03:13:07.927 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 03:13:07.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:13:07.932 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 03:13:08.032 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 03:13:08.032 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:08.035 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675587927782656,"ephemeral":false,"proof":""}]'
2025-02-16 03:13:08.036 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-16 03:13:08.036 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6014/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:08.038 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675587927782656,"ephemeral":false}]'
2025-02-16 03:13:08.040 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 03:13:08.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:13:08.044 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 03:13:08.144 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 03:13:08.145 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:08.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675588040151040,"ephemeral":false,"proof":""}]'
2025-02-16 03:13:08.149 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-16 03:13:08.149 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6014/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:08.151 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675588040151040,"ephemeral":false}]'
2025-02-16 03:13:08.153 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 03:13:08.157 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:13:08.157 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 03:13:08.257 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 03:13:08.258 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:08.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675588152934400,"ephemeral":false,"proof":""}]'
2025-02-16 03:13:08.262 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-16 03:13:08.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6014/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:13:08.264 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675588152934400,"ephemeral":false}]'
2025-02-16 03:13:08.266 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 03:13:08.267 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 03:13:08.267 DEBUG [src.node.waku_node] Stopping container with id a3899ddd79b5
2025-02-16 03:13:08.811 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:13:08.811 DEBUG [src.node.waku_node] Stopping container with id 67931446a1e7
2025-02-16 03:13:09.331 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:13:09.332 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 03:13:09.340 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 03:13:09.344 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
