2025-02-16 03:08:14.957 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 03:08:14.958 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2025-02-16_03-08-14__a2524809-d475-4281-aeaf-2e17fa391468
2025-02-16 03:08:14.958 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 03:08:14.958 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-16 03:08:14.958 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-16 03:08:14.966 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 03:08:14.966 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_03-08-14__a2524809-d475-4281-aeaf-2e17fa391468__wakuorg_nwaku:latest.log
2025-02-16 03:08:14.966 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:08:14.967 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:08:15.027 DEBUG [src.node.docker_mananger] Network waku created
2025-02-16 03:08:15.027 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.199.122
2025-02-16 03:08:15.028 DEBUG [src.node.docker_mananger] Generated ports ['18335', '18336', '18337', '18338', '18339']
2025-02-16 03:08:15.028 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:08:15.028 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:08:15.028 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:08:15.028 DEBUG [src.node.docker_mananger] docker run -i -t -p 18335:18335 -p 18336:18336 -p 18337:18337 -p 18338:18338 -p 18339:18339 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18337 --rest-port=18335 --tcp-port=18336 --discv5-udp-port=18338 --rest-address=0.0.0.0 --nat=extip:172.18.199.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d55e5fea6ff83a1a4bedee06dd7a45600dfa29a38d8e1f822edce65aecfaf8c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18339 --metrics-logging=true --relay=true --filter=true
2025-02-16 03:08:18.789 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.199.122 waku 763cb96cc09fafdf724da774edf0bba11feb601a566668c0073f76bf4e53951f
2025-02-16 03:08:18.846 DEBUG [src.node.docker_mananger] Container started with ID 763cb96cc09f. Setting up logs at ./log/docker/node1_2025-02-16_03-08-14__a2524809-d475-4281-aeaf-2e17fa391468__wakuorg_nwaku:latest.log
2025-02-16 03:08:18.846 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18335
2025-02-16 03:08:18.847 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:08:19.847 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18335/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:08:19.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 03:08:19.850 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 03:08:19.850 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18335/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:08:19.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.122/tcp/18336/p2p/16Uiu2HAm6FnugSwhLA6bmWFphWmYtqW4QoYLbAWrydqvf1MuPQ1T","/ip4/172.18.199.122/tcp/18337/ws/p2p/16Uiu2HAm6FnugSwhLA6bmWFphWmYtqW4QoYLbAWrydqvf1MuPQ1T"],"enrUri":"enr:-L24QPEkRmvxFykb0O1SnzRffQRK6EGXev_URAuLiSnfBAmlJkgiLAdvDFvVoSiHCkmC7OB_YeeFxNri67TAfBdFC2QCgmlkgnY0gmlwhKwSx3qKbXVsdGlhZGRyc5YACASsEsd6BkegAAoErBLHegZHod0DgnJzhQADAQAAiXNlY3AyNTZrMaECoOiVNasdxdbxkX5O_Xe2V1pWNZbR_K2h3Gmb2hI4yYaDdGNwgkegg3VkcIJHooV3YWt1MgU"}'
2025-02-16 03:08:19.853 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:08:19.853 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-16 03:08:19.859 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-16 03:08:19.859 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_03-08-14__a2524809-d475-4281-aeaf-2e17fa391468__wakuorg_go-waku:latest.log
2025-02-16 03:08:19.859 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:08:19.859 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:08:19.860 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:08:19.861 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.119
2025-02-16 03:08:19.861 DEBUG [src.node.docker_mananger] Generated ports ['30552', '30553', '30554', '30555', '30556']
2025-02-16 03:08:19.861 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:08:19.861 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:08:19.861 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:08:19.861 DEBUG [src.node.docker_mananger] docker run -i -t -p 30552:30552 -p 30553:30553 -p 30554:30554 -p 30555:30555 -p 30556:30556 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=30554 --rest-port=30552 --tcp-port=30553 --discv5-udp-port=30555 --rest-address=0.0.0.0 --nat=extip:172.18.212.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=03bdef78bb80c40cefae4db2eec1efc3caaebc2b479a57b1bfde6b890bf504fe --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QPEkRmvxFykb0O1SnzRffQRK6EGXev_URAuLiSnfBAmlJkgiLAdvDFvVoSiHCkmC7OB_YeeFxNri67TAfBdFC2QCgmlkgnY0gmlwhKwSx3qKbXVsdGlhZGRyc5YACASsEsd6BkegAAoErBLHegZHod0DgnJzhQADAQAAiXNlY3AyNTZrMaECoOiVNasdxdbxkX5O_Xe2V1pWNZbR_K2h3Gmb2hI4yYaDdGNwgkegg3VkcIJHooV3YWt1MgU --filternode=/ip4/172.18.199.122/tcp/18336/p2p/16Uiu2HAm6FnugSwhLA6bmWFphWmYtqW4QoYLbAWrydqvf1MuPQ1T --pubsub-topic=/waku/2/rs/3/1
2025-02-16 03:08:23.352 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.119 waku a2d5deb5e10b70c4a1000234abc6f968e992e60202ac242dd62daf531876f415
2025-02-16 03:08:23.402 DEBUG [src.node.docker_mananger] Container started with ID a2d5deb5e10b. Setting up logs at ./log/docker/node2_2025-02-16_03-08-14__a2524809-d475-4281-aeaf-2e17fa391468__wakuorg_go-waku:latest.log
2025-02-16 03:08:23.402 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 30552
2025-02-16 03:08:23.403 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:08:24.403 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30552/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:08:24.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QOPcgR5IqNDPP0PmW38WfujBhc4M6PA7fKKUC3qiVGOrNdu5v603VCqKUzvtYJRmUotlRBJThAfeTont2VomndOGAZUMun3ogmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQKoLZBDOn-vTFJu3FLFsNjc2x5rYklKScL5wiQbJk3bNIN0Y3CCd1mDdWRwgndbhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/30553/p2p/16Uiu2HAm6kAmbzLtRYXz3sXSKMYBeTJBEZzs7U6cDpVStUHSGchH","/ip4/127.0.0.1/tcp/30554/ws/p2p/16Uiu2HAm6kAmbzLtRYXz3sXSKMYBeTJBEZzs7U6cDpVStUHSGchH","/ip4/172.17.0.3/tcp/30553/p2p/16Uiu2HAm6kAmbzLtRYXz3sXSKMYBeTJBEZzs7U6cDpVStUHSGchH","/ip4/172.17.0.3/tcp/30554/ws/p2p/16Uiu2HAm6kAmbzLtRYXz3sXSKMYBeTJBEZzs7U6cDpVStUHSGchH"]}'
2025-02-16 03:08:24.406 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:08:24.406 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30552/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.199.122/tcp/18336/p2p/16Uiu2HAm6FnugSwhLA6bmWFphWmYtqW4QoYLbAWrydqvf1MuPQ1T", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-16 03:08:24.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-16 03:08:24.409 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18335/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2025-02-16 03:08:24.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:08:24.412 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30552/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "21481702-4f36-4940-a36d-2ee13f4043f6", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
2025-02-16 03:08:45.452 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30552/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "21481702-4f36-4940-a36d-2ee13f4043f6", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
2025-02-16 03:09:06.458 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30552/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "21481702-4f36-4940-a36d-2ee13f4043f6", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
2025-02-16 03:09:26.729 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 03:09:26.730 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 03:09:26.730 DEBUG [src.node.waku_node] Stopping container with id 763cb96cc09f
2025-02-16 03:09:27.227 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:09:27.227 DEBUG [src.node.waku_node] Stopping container with id a2d5deb5e10b
2025-02-16 03:09:28.038 ERROR [src.node.docker_mananger] Max retries reached for container 763cb96cc09f. Exiting log stream.
2025-02-16 03:09:37.705 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:09:37.707 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 03:09:37.716 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 03:09:37.719 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
