2025-02-16 03:12:44.973 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 03:12:44.973 DEBUG [tests.conftest] Running test: test_publish_while_peer_is_paused with id: 2025-02-16_03-12-44__66777580-c1e3-4910-8a07-4db4f41efc8d
2025-02-16 03:12:44.973 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 03:12:44.974 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-16 03:12:44.974 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-16 03:12:44.981 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 03:12:44.982 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-16_03-12-44__66777580-c1e3-4910-8a07-4db4f41efc8d__wakuorg_nwaku:latest.log
2025-02-16 03:12:44.982 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:12:44.982 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:12:44.983 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:12:44.983 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.10.145
2025-02-16 03:12:44.983 DEBUG [src.node.docker_mananger] Generated ports ['15957', '15958', '15959', '15960', '15961']
2025-02-16 03:12:44.984 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:12:44.984 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:12:44.984 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:12:44.984 DEBUG [src.node.docker_mananger] docker run -i -t -p 15957:15957 -p 15958:15958 -p 15959:15959 -p 15960:15960 -p 15961:15961 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15959 --rest-port=15957 --tcp-port=15958 --discv5-udp-port=15960 --rest-address=0.0.0.0 --nat=extip:172.18.10.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8ea7cbfbdadeebebb15808cbe1e3a560ff9fedb501a9a7cac12d3093f347a5a8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15961 --metrics-logging=true --relay=true
2025-02-16 03:12:45.217 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.10.145 waku 2c5e0a674dd4d701132f0d7d40778e2ba1e92d290c86384cefabaf8b4c4c9d04
2025-02-16 03:12:45.261 ERROR [src.node.docker_mananger] Max retries reached for container c392aba66ac1. Exiting log stream.
2025-02-16 03:12:45.266 DEBUG [src.node.docker_mananger] Container started with ID 2c5e0a674dd4. Setting up logs at ./log/docker/node1_2025-02-16_03-12-44__66777580-c1e3-4910-8a07-4db4f41efc8d__wakuorg_nwaku:latest.log
2025-02-16 03:12:45.267 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15957
2025-02-16 03:12:45.267 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:12:45.790 ERROR [src.node.docker_mananger] Max retries reached for container efe2d366cbf0. Exiting log stream.
2025-02-16 03:12:46.267 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15957/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:12:46.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 03:12:46.270 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 03:12:46.270 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15957/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:12:46.272 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.145/tcp/15958/p2p/16Uiu2HAmA8LJVaCVG9gmpCqF5qtvpxHbFPLDqAnjRpce3rQMzayL","/ip4/172.18.10.145/tcp/15959/ws/p2p/16Uiu2HAmA8LJVaCVG9gmpCqF5qtvpxHbFPLDqAnjRpce3rQMzayL"],"enrUri":"enr:-L24QH0ipP8YR4IN09IaOxo9yGSPxys8WVAYsXPZ6YRRaVLINmm4ma0cyGT_6_7_bBZyytqaZMWDg4-vqiMTdU3nvx0CgmlkgnY0gmlwhKwSCpGKbXVsdGlhZGRyc5YACASsEgqRBj5WAAoErBIKkQY-V90DgnJzhQADAQAAiXNlY3AyNTZrMaEC2m4uPT0ClZwAZG0l97jvdTjhUFreL1nVlj0M7Yx6Pi-DdGNwgj5Wg3VkcII-WIV3YWt1MgE"}'
2025-02-16 03:12:46.273 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:12:46.279 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-16 03:12:46.279 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-16_03-12-44__66777580-c1e3-4910-8a07-4db4f41efc8d__wakuorg_go-waku:latest.log
2025-02-16 03:12:46.279 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:12:46.279 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:12:46.280 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:12:46.280 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.247.53
2025-02-16 03:12:46.280 DEBUG [src.node.docker_mananger] Generated ports ['37235', '37236', '37237', '37238', '37239']
2025-02-16 03:12:46.281 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:12:46.281 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:12:46.281 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:12:46.281 DEBUG [src.node.docker_mananger] docker run -i -t -p 37235:37235 -p 37236:37236 -p 37237:37237 -p 37238:37238 -p 37239:37239 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=37237 --rest-port=37235 --tcp-port=37236 --discv5-udp-port=37238 --rest-address=0.0.0.0 --nat=extip:172.18.247.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=26fabde2923ba82f65de7d0da5b2c0f71dd4f6bcab0128fadf52cef1e7fccdf7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QH0ipP8YR4IN09IaOxo9yGSPxys8WVAYsXPZ6YRRaVLINmm4ma0cyGT_6_7_bBZyytqaZMWDg4-vqiMTdU3nvx0CgmlkgnY0gmlwhKwSCpGKbXVsdGlhZGRyc5YACASsEgqRBj5WAAoErBIKkQY-V90DgnJzhQADAQAAiXNlY3AyNTZrMaEC2m4uPT0ClZwAZG0l97jvdTjhUFreL1nVlj0M7Yx6Pi-DdGNwgj5Wg3VkcII-WIV3YWt1MgE
2025-02-16 03:12:46.511 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.247.53 waku 1c61474e7448ce89b3fd361e64c492f5590c08a4afdc70c81ffc14202e49e93b
2025-02-16 03:12:46.562 DEBUG [src.node.docker_mananger] Container started with ID 1c61474e7448. Setting up logs at ./log/docker/node2_2025-02-16_03-12-44__66777580-c1e3-4910-8a07-4db4f41efc8d__wakuorg_go-waku:latest.log
2025-02-16 03:12:46.563 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 37235
2025-02-16 03:12:46.564 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:12:47.564 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37235/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:12:47.566 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QOGpOk8B65cLf7Uy8rCzuNkPFJxtMDy8-Ei2MQ6mW1U3d9CpXXcZHaMlBQolr7wqX7QmbrHNJ6-S6QTkiQozjFeGAZUMvoHfgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDemJ2y5cgb7S2Wl4tDYx_bWGlUMH-e_l1tjuvnx5Gn22DdGNwgpF0g3VkcIKRdoV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/37236/p2p/16Uiu2HAmLtjAvNZFeKPw4THRCTeaiZcLSX9xUPzjwiyHEY1HYr7N","/ip4/127.0.0.1/tcp/37237/ws/p2p/16Uiu2HAmLtjAvNZFeKPw4THRCTeaiZcLSX9xUPzjwiyHEY1HYr7N","/ip4/172.17.0.3/tcp/37236/p2p/16Uiu2HAmLtjAvNZFeKPw4THRCTeaiZcLSX9xUPzjwiyHEY1HYr7N","/ip4/172.17.0.3/tcp/37237/ws/p2p/16Uiu2HAmLtjAvNZFeKPw4THRCTeaiZcLSX9xUPzjwiyHEY1HYr7N"]}'
2025-02-16 03:12:47.567 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:12:47.567 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37235/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.10.145/tcp/15958/p2p/16Uiu2HAmA8LJVaCVG9gmpCqF5qtvpxHbFPLDqAnjRpce3rQMzayL", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-16 03:12:47.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-16 03:12:47.585 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-16 03:12:47.585 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15957/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 03:12:47.608 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:12:47.608 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37235/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-16 03:12:47.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-16 03:12:47.611 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15957/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 03:12:47.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:12:47.624 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 03:12:47.724 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 03:12:47.725 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15957/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:12:47.727 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675567611718912,"ephemeral":false,"proof":""}]'
2025-02-16 03:12:47.729 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-16 03:12:47.729 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37235/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:12:47.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-16 03:12:48.731 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15957/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 03:12:48.736 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:12:48.736 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-16 03:12:48.837 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-16 03:12:48.837 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15957/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:12:48.839 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675568731520512,"ephemeral":false,"proof":""}]'
2025-02-16 03:12:48.840 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-16 03:12:48.841 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37235/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:12:48.842 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675568731520512,"ephemeral":false}]'
2025-02-16 03:12:48.844 INFO [src.steps.relay] WARM UP successful!!
2025-02-16 03:12:48.845 DEBUG [src.node.waku_node] Pausing container with id 1c61474e7448
2025-02-16 03:12:48.854 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15957/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-16 03:12:48.858 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:12:48.858 DEBUG [src.node.waku_node] Unpause container with id 1c61474e7448
2025-02-16 03:12:48.866 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37235/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:12:48.868 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739675568845059072,"ephemeral":false}]'
2025-02-16 03:12:48.871 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 03:12:48.872 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 03:12:48.872 DEBUG [src.node.waku_node] Stopping container with id 2c5e0a674dd4
2025-02-16 03:12:49.436 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:12:49.438 DEBUG [src.node.waku_node] Stopping container with id 1c61474e7448
2025-02-16 03:12:49.964 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:12:49.966 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 03:12:49.973 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 03:12:49.976 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
