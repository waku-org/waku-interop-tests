2025-02-16 03:11:02.163 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-16 03:11:02.163 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-16_03-11-02__5ce1740b-abd0-488f-9475-1126dd3fb4b7
2025-02-16 03:11:02.163 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-16 03:11:02.164 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-16 03:11:02.170 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 03:11:02.170 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-16_03-11-02__5ce1740b-abd0-488f-9475-1126dd3fb4b7__wakuorg_nwaku:latest.log
2025-02-16 03:11:02.170 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:11:02.170 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:11:02.172 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:11:02.172 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.4.129
2025-02-16 03:11:02.172 DEBUG [src.node.docker_mananger] Generated ports ['58419', '58420', '58421', '58422', '58423']
2025-02-16 03:11:02.172 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:11:02.172 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:11:02.172 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:11:02.173 DEBUG [src.node.docker_mananger] docker run -i -t -p 58419:58419 -p 58420:58420 -p 58421:58421 -p 58422:58422 -p 58423:58423 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58421 --rest-port=58419 --tcp-port=58420 --discv5-udp-port=58422 --rest-address=0.0.0.0 --nat=extip:172.18.4.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a98e3aeeaee73bb52bfd3ae1240faa83156c9118b892aae7fec2d7815cfaeb3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58423 --metrics-logging=true --lightpush=true --relay=true
2025-02-16 03:11:02.411 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.4.129 waku 06b84b6e1f41c5f54779329fec178c0c29e20ddfee7a197ee082109cd59f486c
2025-02-16 03:11:02.453 ERROR [src.node.docker_mananger] Max retries reached for container 814f4b987845. Exiting log stream.
2025-02-16 03:11:02.461 DEBUG [src.node.docker_mananger] Container started with ID 06b84b6e1f41. Setting up logs at ./log/docker/receiving_node1_2025-02-16_03-11-02__5ce1740b-abd0-488f-9475-1126dd3fb4b7__wakuorg_nwaku:latest.log
2025-02-16 03:11:02.462 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58419
2025-02-16 03:11:02.462 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:11:02.967 ERROR [src.node.docker_mananger] Max retries reached for container 65329ee03290. Exiting log stream.
2025-02-16 03:11:03.463 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58419/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:11:03.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 03:11:03.466 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 03:11:03.466 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58419/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:11:03.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.129/tcp/58420/p2p/16Uiu2HAm2guFTYnCEJwKC7DJ9z8A1rp7Cd3qomZQ81iEdpCsg4w6","/ip4/172.18.4.129/tcp/58421/ws/p2p/16Uiu2HAm2guFTYnCEJwKC7DJ9z8A1rp7Cd3qomZQ81iEdpCsg4w6"],"enrUri":"enr:-L24QEX6sszJ1wxebjGNhT-OCopDMvhEN0qdBTiKdYYSlXs2PVvdcHc60GNTy59mKubviVIgaHdJ4yeL-1vUyuwVelYCgmlkgnY0gmlwhKwSBIGKbXVsdGlhZGRyc5YACASsEgSBBuQ0AAoErBIEgQbkNd0DgnJzhQADAQAAiXNlY3AyNTZrMaECa-iGcJRw2IAin5rhF1f9Ph8bUsGIecodm1pmaemyqYWDdGNwguQ0g3VkcILkNoV3YWt1Mgk"}'
2025-02-16 03:11:03.468 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:11:03.475 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-16 03:11:03.475 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-16_03-11-02__5ce1740b-abd0-488f-9475-1126dd3fb4b7__wakuorg_nwaku:latest.log
2025-02-16 03:11:03.475 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:11:03.475 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:11:03.476 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:11:03.476 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.230.226
2025-02-16 03:11:03.477 DEBUG [src.node.docker_mananger] Generated ports ['44410', '44411', '44412', '44413', '44414']
2025-02-16 03:11:03.477 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:11:03.477 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:11:03.477 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:11:03.477 DEBUG [src.node.docker_mananger] docker run -i -t -p 44410:44410 -p 44411:44411 -p 44412:44412 -p 44413:44413 -p 44414:44414 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44412 --rest-port=44410 --tcp-port=44411 --discv5-udp-port=44413 --rest-address=0.0.0.0 --nat=extip:172.18.230.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7cae6be61198af5fa6a3d22f12d5063499c90b89f3a49ecbfc4e9bd1eaca0eeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44414 --metrics-logging=true --lightpush=false --relay=true
2025-02-16 03:11:03.704 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.230.226 waku e4121a0da477fd65ca8f52ac23bc73d144c2cc41c9de53f43d9e21dba824a21b
2025-02-16 03:11:03.754 DEBUG [src.node.docker_mananger] Container started with ID e4121a0da477. Setting up logs at ./log/docker/receiving_node2_2025-02-16_03-11-02__5ce1740b-abd0-488f-9475-1126dd3fb4b7__wakuorg_nwaku:latest.log
2025-02-16 03:11:03.754 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44410
2025-02-16 03:11:03.754 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:11:04.755 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44410/health" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:11:04.757 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-16 03:11:04.758 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-16 03:11:04.758 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44410/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:11:04.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.226/tcp/44411/p2p/16Uiu2HAm861wzWoZ3HymdaU7aNp2gbDbWpzU9eXUf6o7uttbCEA3","/ip4/172.18.230.226/tcp/44412/ws/p2p/16Uiu2HAm861wzWoZ3HymdaU7aNp2gbDbWpzU9eXUf6o7uttbCEA3"],"enrUri":"enr:-L24QC5XUT34HdJfSYI0SJaGN4HUec8_IrTVjT5PQR24QYXJXUj9PexCk9p1t0BHtKv-EH2ZDQpTgZnMAMWRCw4UUkcCgmlkgnY0gmlwhKwS5uKKbXVsdGlhZGRyc5YACASsEubiBq17AAoErBLm4gatfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECvB7kj-85xNi5SsSzsrRqinGczpl7ylGIzrr2WiXD3liDdGNwgq17g3VkcIKtfYV3YWt1MgE"}'
2025-02-16 03:11:04.760 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:11:04.760 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44410/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.4.129/tcp/58420/p2p/16Uiu2HAm2guFTYnCEJwKC7DJ9z8A1rp7Cd3qomZQ81iEdpCsg4w6"]'
2025-02-16 03:11:04.796 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:11:04.805 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-16 03:11:04.805 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-16_03-11-02__5ce1740b-abd0-488f-9475-1126dd3fb4b7__wakuorg_go-waku:latest.log
2025-02-16 03:11:04.805 DEBUG [src.node.waku_node] Starting Node...
2025-02-16 03:11:04.805 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-16 03:11:04.807 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-16 03:11:04.807 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.186
2025-02-16 03:11:04.807 DEBUG [src.node.docker_mananger] Generated ports ['42240', '42241', '42242', '42243', '42244']
2025-02-16 03:11:04.807 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-16 03:11:04.807 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-16 03:11:04.807 DEBUG [src.node.waku_node] Using volumes []
2025-02-16 03:11:04.808 DEBUG [src.node.docker_mananger] docker run -i -t -p 42240:42240 -p 42241:42241 -p 42242:42242 -p 42243:42243 -p 42244:42244 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=42242 --rest-port=42240 --tcp-port=42241 --discv5-udp-port=42243 --rest-address=0.0.0.0 --nat=extip:172.18.121.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5d83b1ed5483e2dd033fadafb6a18d6ebc419b861aabd52c49ec37a199ffbdd3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QEX6sszJ1wxebjGNhT-OCopDMvhEN0qdBTiKdYYSlXs2PVvdcHc60GNTy59mKubviVIgaHdJ4yeL-1vUyuwVelYCgmlkgnY0gmlwhKwSBIGKbXVsdGlhZGRyc5YACASsEgSBBuQ0AAoErBIEgQbkNd0DgnJzhQADAQAAiXNlY3AyNTZrMaECa-iGcJRw2IAin5rhF1f9Ph8bUsGIecodm1pmaemyqYWDdGNwguQ0g3VkcILkNoV3YWt1Mgk --lightpushnode=/ip4/172.18.4.129/tcp/58420/p2p/16Uiu2HAm2guFTYnCEJwKC7DJ9z8A1rp7Cd3qomZQ81iEdpCsg4w6 --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-16 03:11:05.050 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.186 waku b0a2fb6c11adf7e122ec552c7a8faffc2c44d4cdd820da6b8e2e3422da34272f
2025-02-16 03:11:05.107 DEBUG [src.node.docker_mananger] Container started with ID b0a2fb6c11ad. Setting up logs at ./log/docker/lightpush_node1_2025-02-16_03-11-02__5ce1740b-abd0-488f-9475-1126dd3fb4b7__wakuorg_go-waku:latest.log
2025-02-16 03:11:05.107 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 42240
2025-02-16 03:11:05.108 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-16 03:11:06.109 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42240/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-16 03:11:06.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QBIQT0XOClSf1k2KvKViSFYG0KYA_ePN67qdt79OrD7IeQLp_a7K_UG-h3wvdXq-R5zNhgWFaiaY-eRGYyilil6GAZUMvPWGgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOHdQKBIAvrRxdsYxCO_QtjpgI79VKTL13xyYyRZrVNcIN0Y3CCpQGDdWRwgqUDhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/42241/p2p/16Uiu2HAmMmksdxMVdCq3Ws7ZmHT3gX6C5LM7FQMjtAMmjXroFfq9","/ip4/127.0.0.1/tcp/42242/ws/p2p/16Uiu2HAmMmksdxMVdCq3Ws7ZmHT3gX6C5LM7FQMjtAMmjXroFfq9","/ip4/172.17.0.4/tcp/42241/p2p/16Uiu2HAmMmksdxMVdCq3Ws7ZmHT3gX6C5LM7FQMjtAMmjXroFfq9","/ip4/172.17.0.4/tcp/42242/ws/p2p/16Uiu2HAmMmksdxMVdCq3Ws7ZmHT3gX6C5LM7FQMjtAMmjXroFfq9"]}'
2025-02-16 03:11:06.111 INFO [src.node.waku_node] REST service is ready !!
2025-02-16 03:11:06.112 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42240/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.4.129/tcp/58420/p2p/16Uiu2HAm2guFTYnCEJwKC7DJ9z8A1rp7Cd3qomZQ81iEdpCsg4w6", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-16 03:11:06.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-16 03:11:06.114 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42240/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.230.226/tcp/44411/p2p/16Uiu2HAm861wzWoZ3HymdaU7aNp2gbDbWpzU9eXUf6o7uttbCEA3", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-16 03:11:06.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-16 03:11:06.130 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58419/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 03:11:06.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:11:06.135 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44410/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-16 03:11:06.140 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-16 03:11:06.141 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42240/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739675466141257728}}'
2025-02-16 03:11:26.154 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-16 03:11:26.156 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-16 03:11:26.156 DEBUG [src.node.waku_node] Stopping container with id 06b84b6e1f41
2025-02-16 03:11:26.669 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:11:26.670 DEBUG [src.node.waku_node] Stopping container with id e4121a0da477
2025-02-16 03:11:27.481 ERROR [src.node.docker_mananger] Max retries reached for container 06b84b6e1f41. Exiting log stream.
2025-02-16 03:11:27.660 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:11:27.661 DEBUG [src.node.waku_node] Stopping container with id b0a2fb6c11ad
2025-02-16 03:11:28.177 DEBUG [src.node.waku_node] Container stopped.
2025-02-16 03:11:28.180 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-16 03:11:28.187 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 03:11:28.203 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-16 03:11:28.206 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
