[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_get_message_after_one_peer_was_stopped with id: 2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node1_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.221.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['32414', '32415', '32416', '32417', '32418']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 32414:32414 -p 32415:32415 -p 32416:32416 -p 32417:32417 -p 32418:32418 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32416 --rest-port=32414 --tcp-port=32415 --discv5-udp-port=32417 --rest-address=0.0.0.0 --nat=extip:172.18.221.239 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32418 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.221.239 waku 2b3c465851459d173adfebefa3b76c2e162d777f29dc08871c55fdb51c1ad3b0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2b3c46585145. Setting up logs at ./log/docker/node1_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 32414
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32414/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32414/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.221.239/tcp/32416/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QE4Hfre-vBIKa0i83L8vJXx9DP1ede3un9XTqfVo1Ie1E2vFFHnd2zYdY1a60BTkJbTuCCH7-5tbY-S4XQxw5MYBgmlkgnY0gmlwhKwS3e-KbXVsdGlhZGRyc4wACgSsEt3vBn6g3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCfp-DdWRwgn6hhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node2_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.93.238
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['43883', '43884', '43885', '43886', '43887']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 43883:43883 -p 43884:43884 -p 43885:43885 -p 43886:43886 -p 43887:43887 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=43885 --rest-port=43883 --tcp-port=43884 --discv5-udp-port=43886 --rest-address=0.0.0.0 --nat=extip:172.18.93.238 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --relay=false --discv5-bootstrap-node=enr:-LO4QE4Hfre-vBIKa0i83L8vJXx9DP1ede3un9XTqfVo1Ie1E2vFFHnd2zYdY1a60BTkJbTuCCH7-5tbY-S4XQxw5MYBgmlkgnY0gmlwhKwS3e-KbXVsdGlhZGRyc4wACgSsEt3vBn6g3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCfp-DdWRwgn6hhXdha3UyBQ --filternode=/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.93.238 waku 46b7bcf92eae174b3f0650e0bb1dc1f8d0aa735993f87ac2dce412c5f70c17b0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 46b7bcf92eae. Setting up logs at ./log/docker/node2_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 43883
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43883/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QHMOMwtuYFNjgClLaVD-chbyeKyC3ckgasdLhN2v1V2FV5KSgvpzlCj8prS_sAtis0FRBSdVKXVsYDHlRVE_5RqGAY9loovYgmlkgnY0gmlwhKwRAASKbXVsdGlhZGRyc5gACgSsEQAEBqtt3QMACgR_AAABBqtt3QOJc2VjcDI1NmsxoQKeZqEMEb2G9-rEF7SNXg3Qrs98XQySB7H4cAj6ULaU7oN0Y3CCq2yDdWRwgqtuhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/43884/p2p/16Uiu2HAm661AM1Ay7YvD39MYk6qQ6ifK7a4NvXcZU9pTWoukb5g9","/ip4/127.0.0.1/tcp/43885/ws/p2p/16Uiu2HAm661AM1Ay7YvD39MYk6qQ6ifK7a4NvXcZU9pTWoukb5g9","/ip4/172.17.0.4/tcp/43884/p2p/16Uiu2HAm661AM1Ay7YvD39MYk6qQ6ifK7a4NvXcZU9pTWoukb5g9","/ip4/172.17.0.4/tcp/43885/ws/p2p/16Uiu2HAm661AM1Ay7YvD39MYk6qQ6ifK7a4NvXcZU9pTWoukb5g9"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43883/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node3_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.46.201
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['1896', '1897', '1898', '1899', '1900']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 1896:1896 -p 1897:1897 -p 1898:1898 -p 1899:1899 -p 1900:1900 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1898 --rest-port=1896 --tcp-port=1897 --discv5-udp-port=1899 --rest-address=0.0.0.0 --nat=extip:172.18.46.201 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1900 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QE4Hfre-vBIKa0i83L8vJXx9DP1ede3un9XTqfVo1Ie1E2vFFHnd2zYdY1a60BTkJbTuCCH7-5tbY-S4XQxw5MYBgmlkgnY0gmlwhKwS3e-KbXVsdGlhZGRyc4wACgSsEt3vBn6g3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCfp-DdWRwgn6hhXdha3UyBQ --filternode=/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.46.201 waku 7b02a3233beb380650be62f6108df85ecea78804de935fe36671a16143750226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7b02a3233beb. Setting up logs at ./log/docker/node3_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 1896
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1896/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1896/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.201/tcp/1897/p2p/16Uiu2HAmF4QjbdRjKf8zaTMVZ5ijcGYhtWCXGLYrZjUzUyQEG9xF","/ip4/172.18.46.201/tcp/1898/ws/p2p/16Uiu2HAmF4QjbdRjKf8zaTMVZ5ijcGYhtWCXGLYrZjUzUyQEG9xF"],"enrUri":"enr:-LO4QFRpEPESzVKcXcbdkyY0wgQN6mOpCGwvZxmzAtdY6FUxYcFty-5Q7hcIbqyaZa-KZCdL1I-y0add24Wzp-puY2YBgmlkgnY0gmlwhKwSLsmKbXVsdGlhZGRyc4wACgSsEi7JBgdq3QOCcnOFAAABAACJc2VjcDI1NmsxoQMjt03io0VpkliOdb2AL2jT-0YBv3Nre_DaBTvqfcNhrIN0Y3CCB2mDdWRwggdrhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1896/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node4_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.110.203
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['32423', '32424', '32425', '32426', '32427']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 32423:32423 -p 32424:32424 -p 32425:32425 -p 32426:32426 -p 32427:32427 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32425 --rest-port=32423 --tcp-port=32424 --discv5-udp-port=32426 --rest-address=0.0.0.0 --nat=extip:172.18.110.203 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --relay=false --discv5-bootstrap-node=enr:-LO4QE4Hfre-vBIKa0i83L8vJXx9DP1ede3un9XTqfVo1Ie1E2vFFHnd2zYdY1a60BTkJbTuCCH7-5tbY-S4XQxw5MYBgmlkgnY0gmlwhKwS3e-KbXVsdGlhZGRyc4wACgSsEt3vBn6g3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCfp-DdWRwgn6hhXdha3UyBQ --filternode=/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.110.203 waku 4e217a83f8d6ebf7bd8f0bf08d94e49582de482ffa24a696f69853d3de56a266
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4e217a83f8d6. Setting up logs at ./log/docker/node4_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 32423
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32423/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QE5p2Ozu0ssqAvFRDVOuWB9YsXjcHT0IGgxtyfumcN5jac90xzgQvmSSrYb7djT9yvOf_WBsYAYmq-q7-jv31_qGAY9lopo5gmlkgnY0gmlwhKwRAAqKbXVsdGlhZGRyc5gACgR_AAABBn6p3QMACgSsEQAKBn6p3QOJc2VjcDI1NmsxoQIyNtudFNBkA0EWSYM2riYIxAe7TowYsKX-8uUOGmVCFIN0Y3CCfqiDdWRwgn6qhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/32424/p2p/16Uiu2HAkxogt5VoKgipQf1e89EXTnCFSULzM53KNc9imgsBdBFTh","/ip4/127.0.0.1/tcp/32425/ws/p2p/16Uiu2HAkxogt5VoKgipQf1e89EXTnCFSULzM53KNc9imgsBdBFTh","/ip4/172.17.0.10/tcp/32424/p2p/16Uiu2HAkxogt5VoKgipQf1e89EXTnCFSULzM53KNc9imgsBdBFTh","/ip4/172.17.0.10/tcp/32425/ws/p2p/16Uiu2HAkxogt5VoKgipQf1e89EXTnCFSULzM53KNc9imgsBdBFTh"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32423/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node5_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.120.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['37693', '37694', '37695', '37696', '37697']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 37693:37693 -p 37694:37694 -p 37695:37695 -p 37696:37696 -p 37697:37697 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37695 --rest-port=37693 --tcp-port=37694 --discv5-udp-port=37696 --rest-address=0.0.0.0 --nat=extip:172.18.120.155 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37697 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QE4Hfre-vBIKa0i83L8vJXx9DP1ede3un9XTqfVo1Ie1E2vFFHnd2zYdY1a60BTkJbTuCCH7-5tbY-S4XQxw5MYBgmlkgnY0gmlwhKwS3e-KbXVsdGlhZGRyc4wACgSsEt3vBn6g3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCfp-DdWRwgn6hhXdha3UyBQ --filternode=/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.120.155 waku 98ae1024bf42eedec9d5e6a9ab2685f74f58abb2334d1cab1d0723a10aafbd65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 98ae1024bf42. Setting up logs at ./log/docker/node5_2024-05-11_03-11-40__29eca99c-18c1-47de-a2d2-bcb00b02de17__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 37693
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37693/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37693/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.155/tcp/37694/p2p/16Uiu2HAm8aCvoz1jAdeUUSjAhvstyJS78dyZznM5fw46saguLcSN","/ip4/172.18.120.155/tcp/37695/ws/p2p/16Uiu2HAm8aCvoz1jAdeUUSjAhvstyJS78dyZznM5fw46saguLcSN"],"enrUri":"enr:-LO4QEm7qUI4s8jqFAbFVD6bUtnwnjmFwQdkZB6aR0KWyUQFf49I3-rlK5ciUu7MuvYjhmaVClfUcOK-MUeBkycLqrsBgmlkgnY0gmlwhKwSeJuKbXVsdGlhZGRyc4wACgSsEnibBpM_3QOCcnOFAAABAACJc2VjcDI1NmsxoQLDV5H3WYuoKzW9FDlf1DZuy1NAwIJKoldDizGV6rKLg4N0Y3CCkz6DdWRwgpNAhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37693/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.239/tcp/32415/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32414/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43883/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "62af996d-149c-471a-aeae-e5980f9b2256", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"62af996d-149c-471a-aeae-e5980f9b2256","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1896/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "60b859f8-7999-4eb3-89bd-0635ebfbdf81", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"60b859f8-7999-4eb3-89bd-0635ebfbdf81","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32423/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "908c7a1e-524b-442e-bddf-d7579fa9d9f5", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"908c7a1e-524b-442e-bddf-d7579fa9d9f5","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37693/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8cb82280-199b-4500-b0e2-fc279e7feb71", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8cb82280-199b-4500-b0e2-fc279e7feb71","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32414/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:97 Checking that peer NODE_2:harbor.status.im/wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43883/filter/v2/messages/%2Fwaku%2F2%2Frs%2F0%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1715397118039162624,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.filter:filter.py:97 Checking that peer NODE_3:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1896/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1715397118039162624,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.filter:filter.py:97 Checking that peer NODE_4:harbor.status.im/wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32423/filter/v2/messages/%2Fwaku%2F2%2Frs%2F0%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1715397118039162624,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.filter:filter.py:97 Checking that peer NODE_5:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37693/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1715397118039162624,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 46b7bcf92eae
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32414/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:97 Checking that peer NODE_2:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1896/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1715397119799633152,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.filter:filter.py:97 Checking that peer NODE_3:harbor.status.im/wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32423/filter/v2/messages/%2Fwaku%2F2%2Frs%2F0%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1715397119799633152,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.filter:filter.py:97 Checking that peer NODE_4:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37693/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1715397119799633152,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 2b3c46585145
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 7b02a3233beb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 4e217a83f8d6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 98ae1024bf42
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.