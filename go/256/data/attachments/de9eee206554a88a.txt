[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_filter with id: 2024-08-26_16-42-26__73e2170c-e9a6-4132-a604-a74e570834b2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-26_16-42-26__73e2170c-e9a6-4132-a604-a74e570834b2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.245.14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40915', '40916', '40917', '40918', '40919']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40915:40915 -p 40916:40916 -p 40917:40917 -p 40918:40918 -p 40919:40919 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40917 --rest-port=40915 --tcp-port=40916 --discv5-udp-port=40918 --rest-address=0.0.0.0 --nat=extip:172.18.245.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=03ade7cf0bbff4d8c56665ddfaa2c4c607f4048dde767fa9af0bcaae678fda59 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40919 --metrics-logging=true --store=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.245.14 waku b44145707cd34db6da8a153348e0562c81730bf3ebbb7ef2acced2b6ae01554f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b44145707cd3. Setting up logs at ./log/docker/publishing_node1_2024-08-26_16-42-26__73e2170c-e9a6-4132-a604-a74e570834b2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40915
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40915/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40915/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.14/tcp/40916/p2p/16Uiu2HAkybw8yQE7kHWydEUEUsU9f3gaHv6DtRKnqfQNXNsc5ebC","/ip4/172.18.245.14/tcp/40917/ws/p2p/16Uiu2HAkybw8yQE7kHWydEUEUsU9f3gaHv6DtRKnqfQNXNsc5ebC"],"enrUri":"enr:-LO4QBw2-ASaLFaY77ocabs6WVDHoQnwlil9QnedSun1i0_jFt77tdoka5mvOIPFRAcV4M_z342BS0t-OczY-PbKRpIBgmlkgnY0gmlwhKwS9Q6KbXVsdGlhZGRyc4wACgSsEvUOBp_V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI-D7H_snbrqN1_OXsYlMBueTCI2ERTfJceS43TABWqQ4N0Y3CCn9SDdWRwgp_WhXdha3UyBw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-26_16-42-26__73e2170c-e9a6-4132-a604-a74e570834b2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.240.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44729', '44730', '44731', '44732', '44733']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44729:44729 -p 44730:44730 -p 44731:44731 -p 44732:44732 -p 44733:44733 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44731 --rest-port=44729 --tcp-port=44730 --discv5-udp-port=44732 --rest-address=0.0.0.0 --nat=extip:172.18.240.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffe11f2154da559d04a6bbedd9aadeadaef5d42ce3ae5ead74f9dc6f395ce07b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QBw2-ASaLFaY77ocabs6WVDHoQnwlil9QnedSun1i0_jFt77tdoka5mvOIPFRAcV4M_z342BS0t-OczY-PbKRpIBgmlkgnY0gmlwhKwS9Q6KbXVsdGlhZGRyc4wACgSsEvUOBp_V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI-D7H_snbrqN1_OXsYlMBueTCI2ERTfJceS43TABWqQ4N0Y3CCn9SDdWRwgp_WhXdha3UyBw --storenode=/ip4/172.18.245.14/tcp/40916/p2p/16Uiu2HAkybw8yQE7kHWydEUEUsU9f3gaHv6DtRKnqfQNXNsc5ebC --store=false --relay=false --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.240.81 waku adf8ece35e1e5a4743ef0986ea49d2fc501de03a3347a963757a4404cc66aad2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID adf8ece35e1e. Setting up logs at ./log/docker/store_node1_2024-08-26_16-42-26__73e2170c-e9a6-4132-a604-a74e570834b2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 44729
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44729/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBBZNrGJ7T5-3aAJACl8cv3drVYN7uQ0z3WxvXlOL7bEAJ9JRcDwfLbmB4kbgp9AfCX-qhLKjNQY6rcJ22ZMhkWGAZGPkUZBgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQLvLDDRzo4xAeNeX4QvrDteIsrvSt5ik2-ebR5GdAEgjoN0Y3CCrrqDdWRwgq68hXdha3UyBA","listenAddresses":["/ip4/127.0.0.1/tcp/44730/p2p/16Uiu2HAmBXJW5oxy5QQb8aU1Uu7xnQHgz1BfmBFgYZ3ZX7jUGpPo","/ip4/127.0.0.1/tcp/44731/ws/p2p/16Uiu2HAmBXJW5oxy5QQb8aU1Uu7xnQHgz1BfmBFgYZ3ZX7jUGpPo","/ip4/172.17.0.4/tcp/44730/p2p/16Uiu2HAmBXJW5oxy5QQb8aU1Uu7xnQHgz1BfmBFgYZ3ZX7jUGpPo","/ip4/172.17.0.4/tcp/44731/ws/p2p/16Uiu2HAmBXJW5oxy5QQb8aU1Uu7xnQHgz1BfmBFgYZ3ZX7jUGpPo"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44729/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.245.14/tcp/40916/p2p/16Uiu2HAkybw8yQE7kHWydEUEUsU9f3gaHv6DtRKnqfQNXNsc5ebC", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40915/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40915/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40915/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"D5kvaB5IA38OwiSijU0k1uR615G5k/bGfAnSZsAxtc0="}]}'
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44729/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"bc2f84473de93641e8506c43d96bb72469f3e77e5335d8cbde12d6151d7e79d2","status_code":200,"status_desc":"OK","messages":[{"message_hash":"D5kvaB5IA38OwiSijU0k1uR615G5k/bGfAnSZsAxtc0="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b44145707cd3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id adf8ece35e1e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.