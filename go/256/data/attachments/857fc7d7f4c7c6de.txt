[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_content_topic with id: 2024-08-26_16-32-25__a8dacc83-b842-43ff-a5b9-31f55e82f136
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-26_16-32-25__a8dacc83-b842-43ff-a5b9-31f55e82f136__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.194.102
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42262', '42263', '42264', '42265', '42266']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42262:42262 -p 42263:42263 -p 42264:42264 -p 42265:42265 -p 42266:42266 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42264 --rest-port=42262 --tcp-port=42263 --discv5-udp-port=42265 --rest-address=0.0.0.0 --nat=extip:172.18.194.102 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e178ca83efdb1ceceffe7ebd86b2b09de390db083c7fdcb52221be4e1f7f1c49 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42266 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.194.102 waku 49bc378af50369ca9e9b4ba967c4e27bf615605192b5800d92d3326f88c1ea22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 49bc378af503. Setting up logs at ./log/docker/receiving_node1_2024-08-26_16-32-25__a8dacc83-b842-43ff-a5b9-31f55e82f136__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42262
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42262/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42262/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.102/tcp/42263/p2p/16Uiu2HAmEtgwjP2AnZeyVwiHo37ohuAPj1aCWFA7YuGkpU6NFsCp","/ip4/172.18.194.102/tcp/42264/ws/p2p/16Uiu2HAmEtgwjP2AnZeyVwiHo37ohuAPj1aCWFA7YuGkpU6NFsCp"],"enrUri":"enr:-LO4QCv6kf-QkluoLuKu-ViKFJY3HJGBWXJiJvsvZxAt-U8DNVqKs7wAHnmMt4b4fsHuy2dOH0yoMOs7ptFHG7aYr88BgmlkgnY0gmlwhKwSwmaKbXVsdGlhZGRyc4wACgSsEsJmBqUY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMhOdLubBbT1v5hjmOIWSMSagT0BkdS8n9PwHZEyYkvlYN0Y3CCpReDdWRwgqUZhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-26_16-32-25__a8dacc83-b842-43ff-a5b9-31f55e82f136__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.218.31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60760', '60761', '60762', '60763', '60764']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60760:60760 -p 60761:60761 -p 60762:60762 -p 60763:60763 -p 60764:60764 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60762 --rest-port=60760 --tcp-port=60761 --discv5-udp-port=60763 --rest-address=0.0.0.0 --nat=extip:172.18.218.31 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b811886bab2b4baeeab3cf25ea7bc834fc46dee5c59f3ad9f5b2acccab0ea4c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60764 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.218.31 waku 7ca4913388ff9ddee42aff1ed89d9ca4f7b8aa43286b57b6cb8f0699c68e5264
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7ca4913388ff. Setting up logs at ./log/docker/receiving_node2_2024-08-26_16-32-25__a8dacc83-b842-43ff-a5b9-31f55e82f136__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60760
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60760/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60760/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.31/tcp/60761/p2p/16Uiu2HAmVhRut5jW45iCin37fPxnfctF4KHkaxj5zYGrg3TEKCZE","/ip4/172.18.218.31/tcp/60762/ws/p2p/16Uiu2HAmVhRut5jW45iCin37fPxnfctF4KHkaxj5zYGrg3TEKCZE"],"enrUri":"enr:-LO4QJdMdl0s87lykARCDLAnPQbHxY9LtkrIj_E_mmOU_U26eL6TD2ZabW0tigV3Egv6I27VS-JtyOmZkiqWak_9scQBgmlkgnY0gmlwhKwS2h-KbXVsdGlhZGRyc4wACgSsEtofBu1a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP9Nr4JJO1Znv6WPXvoL0lMxx1fcfNztgdTiZMPiV8ruYN0Y3CC7VmDdWRwgu1bhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60760/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.194.102/tcp/42263/p2p/16Uiu2HAmEtgwjP2AnZeyVwiHo37ohuAPj1aCWFA7YuGkpU6NFsCp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-26_16-32-25__a8dacc83-b842-43ff-a5b9-31f55e82f136__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.252.65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60758', '60759', '60760', '60761', '60762']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60758:60758 -p 60759:60759 -p 60760:60760 -p 60761:60761 -p 60762:60762 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=60760 --rest-port=60758 --tcp-port=60759 --discv5-udp-port=60761 --rest-address=0.0.0.0 --nat=extip:172.18.252.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=98d9675afedfce1cecf5403cdccd1e0a9ffeff9cb6c5ce4492dc03ba2bd3ee4f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QCv6kf-QkluoLuKu-ViKFJY3HJGBWXJiJvsvZxAt-U8DNVqKs7wAHnmMt4b4fsHuy2dOH0yoMOs7ptFHG7aYr88BgmlkgnY0gmlwhKwSwmaKbXVsdGlhZGRyc4wACgSsEsJmBqUY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMhOdLubBbT1v5hjmOIWSMSagT0BkdS8n9PwHZEyYkvlYN0Y3CCpReDdWRwgqUZhXdha3UyCQ --lightpushnode=/ip4/172.18.194.102/tcp/42263/p2p/16Uiu2HAmEtgwjP2AnZeyVwiHo37ohuAPj1aCWFA7YuGkpU6NFsCp --lightpush=true --relay=false
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.242.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48895', '48896', '48897', '48898', '48899']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48895:48895 -p 48896:48896 -p 48897:48897 -p 48898:48898 -p 48899:48899 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=48897 --rest-port=48895 --tcp-port=48896 --discv5-udp-port=48898 --rest-address=0.0.0.0 --nat=extip:172.18.242.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3ecb190a4ed97dabd2bedcfdf3ebaae5666f3a004a2fe7beeded09bffcbb35d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QCv6kf-QkluoLuKu-ViKFJY3HJGBWXJiJvsvZxAt-U8DNVqKs7wAHnmMt4b4fsHuy2dOH0yoMOs7ptFHG7aYr88BgmlkgnY0gmlwhKwSwmaKbXVsdGlhZGRyc4wACgSsEsJmBqUY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMhOdLubBbT1v5hjmOIWSMSagT0BkdS8n9PwHZEyYkvlYN0Y3CCpReDdWRwgqUZhXdha3UyCQ --lightpushnode=/ip4/172.18.194.102/tcp/42263/p2p/16Uiu2HAmEtgwjP2AnZeyVwiHo37ohuAPj1aCWFA7YuGkpU6NFsCp --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.242.246 waku 2c7f3d3776a39197392d2dfe3e2d3f2e248290d8cd254275a20a67d40074e8df
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2c7f3d3776a3. Setting up logs at ./log/docker/lightpush_node1_2024-08-26_16-32-25__a8dacc83-b842-43ff-a5b9-31f55e82f136__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 48895
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48895/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHCReka7AE7cCQcr04K7DISwtn6WAvMox4f4iNYvbDwXcz2cpABq-DDrebqr3havry_dM6iT8gCwTXyrf8704XaGAZGPiCWNgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQKProwKAsSS5BLdc_fHllz1S8VThT5Jf9M1fP8wU3aRRoN0Y3CCvwCDdWRwgr8ChXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/48896/p2p/16Uiu2HAm56YeiQjVWR3nod19XjxU12e6kqg5tFrGRjXpMQk2Kq17","/ip4/127.0.0.1/tcp/48897/ws/p2p/16Uiu2HAm56YeiQjVWR3nod19XjxU12e6kqg5tFrGRjXpMQk2Kq17","/ip4/172.17.0.7/tcp/48896/p2p/16Uiu2HAm56YeiQjVWR3nod19XjxU12e6kqg5tFrGRjXpMQk2Kq17","/ip4/172.17.0.7/tcp/48897/ws/p2p/16Uiu2HAm56YeiQjVWR3nod19XjxU12e6kqg5tFrGRjXpMQk2Kq17"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48895/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.194.102/tcp/42263/p2p/16Uiu2HAmEtgwjP2AnZeyVwiHo37ohuAPj1aCWFA7YuGkpU6NFsCp", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48895/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.218.31/tcp/60761/p2p/16Uiu2HAmVhRut5jW45iCin37fPxnfctF4KHkaxj5zYGrg3TEKCZE", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42262/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60760/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48895/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1724689951221291264}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:48895/lightpush/v1/message. Response content: b'missing ContentTopic field'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 49bc378af503
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7ca4913388ff
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2c7f3d3776a3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.