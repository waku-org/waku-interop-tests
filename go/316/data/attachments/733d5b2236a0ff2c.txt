[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_lightpushing_node with id: 2024-10-21_03-10-24__3717e02e-044e-4425-ab0c-0c016aefccde
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-21_03-10-24__3717e02e-044e-4425-ab0c-0c016aefccde__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-21_03-10-24__3717e02e-044e-4425-ab0c-0c016aefccde__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-21_03-10-24__3717e02e-044e-4425-ab0c-0c016aefccde__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.40.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12193', '12194', '12195', '12196', '12197']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12193:12193 -p 12194:12194 -p 12195:12195 -p 12196:12196 -p 12197:12197 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=12195 --rest-port=12193 --tcp-port=12194 --discv5-udp-port=12196 --rest-address=0.0.0.0 --nat=extip:172.18.40.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbecd62ac4adf0ee7c09f2ca8e057216bfa1ffb2afa8e7dc3b0835a93aeab306 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.40.137 waku 9c34fd183d177f1f34698c3ea1e2767dd4c54c52924fa893561da0b295a39570
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9c34fd183d17. Setting up logs at ./log/docker/node1_2024-10-21_03-10-24__3717e02e-044e-4425-ab0c-0c016aefccde__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 12193
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12193/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QKalICGblSdxsDrLD4ewq1WioG1jdGSFeRmEGK-oPc18Q-YChoF_AgcxuoUyCiwt9ckyapJ_FhGu2-2ATC2PihmGAZKtDfI6gmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQL115aw21_bV19mH-n4l3S0y47GCs7hMv2R8NOmzKm17oN0Y3CCL6KDdWRwgi-khXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/12194/p2p/16Uiu2HAmByLXuQKYHNEwTvGLcHuJtMvM4XX8fXBbjapsbsMoJRqf","/ip4/127.0.0.1/tcp/12195/ws/p2p/16Uiu2HAmByLXuQKYHNEwTvGLcHuJtMvM4XX8fXBbjapsbsMoJRqf","/ip4/172.17.0.9/tcp/12194/p2p/16Uiu2HAmByLXuQKYHNEwTvGLcHuJtMvM4XX8fXBbjapsbsMoJRqf","/ip4/172.17.0.9/tcp/12195/ws/p2p/16Uiu2HAmByLXuQKYHNEwTvGLcHuJtMvM4XX8fXBbjapsbsMoJRqf"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.207.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['54982', '54983', '54984', '54985', '54986']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 54982:54982 -p 54983:54983 -p 54984:54984 -p 54985:54985 -p 54986:54986 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54984 --rest-port=54982 --tcp-port=54983 --discv5-udp-port=54985 --rest-address=0.0.0.0 --nat=extip:172.18.207.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f64c0f1033cbd6756f5c0f4f1cbb804b5d4fac0fdc87e2befed14d5eba2ffafb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54986 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-Ji4QKalICGblSdxsDrLD4ewq1WioG1jdGSFeRmEGK-oPc18Q-YChoF_AgcxuoUyCiwt9ckyapJ_FhGu2-2ATC2PihmGAZKtDfI6gmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQL115aw21_bV19mH-n4l3S0y47GCs7hMv2R8NOmzKm17oN0Y3CCL6KDdWRwgi-khXdha3UyCQ --lightpushnode=/ip4/172.18.40.137/tcp/12194/p2p/16Uiu2HAmByLXuQKYHNEwTvGLcHuJtMvM4XX8fXBbjapsbsMoJRqf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.207.63 waku 3f045b998f031ab49ce2d15b32b819b497ab1e5115793070165f09de6727ba2b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3f045b998f03. Setting up logs at ./log/docker/node2_2024-10-21_03-10-24__3717e02e-044e-4425-ab0c-0c016aefccde__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54982
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54982/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54982/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.63/tcp/54983/p2p/16Uiu2HAm3xQDsDGjR7HK2in2Dgsn5ByDRwW6bUoxK1CE1NfRnK19","/ip4/172.18.207.63/tcp/54984/ws/p2p/16Uiu2HAm3xQDsDGjR7HK2in2Dgsn5ByDRwW6bUoxK1CE1NfRnK19"],"enrUri":"enr:-LO4QFWfDZnDB4G0CTr-KUK-XK-E0c2Wlm-Ktp9ty5XxzFHULIkm6f52jm1IhyuxpkJN6fbaDB1_EsRiPW_iqz0tfg8BgmlkgnY0gmlwhKwSzz-KbXVsdGlhZGRyc4wACgSsEs8_BtbI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ-vK7_hCQy0uiyqomUdBatF4Z3OcUTvw-cEx0R5vZjGIN0Y3CC1seDdWRwgtbJhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.103.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42136', '42137', '42138', '42139', '42140']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42136:42136 -p 42137:42137 -p 42138:42138 -p 42139:42139 -p 42140:42140 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=42138 --rest-port=42136 --tcp-port=42137 --discv5-udp-port=42139 --rest-address=0.0.0.0 --nat=extip:172.18.103.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bee9431795bccf67307b32db78ca5af4fabd5ab8b6eba3df472be0df5bba6b3a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QFWfDZnDB4G0CTr-KUK-XK-E0c2Wlm-Ktp9ty5XxzFHULIkm6f52jm1IhyuxpkJN6fbaDB1_EsRiPW_iqz0tfg8BgmlkgnY0gmlwhKwSzz-KbXVsdGlhZGRyc4wACgSsEs8_BtbI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ-vK7_hCQy0uiyqomUdBatF4Z3OcUTvw-cEx0R5vZjGIN0Y3CC1seDdWRwgtbJhXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.103.194 waku a05b28c88596c5da302636d62d6a02dc436bd8ba21e818a7f83ca8fab6880e3f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a05b28c88596. Setting up logs at ./log/docker/node3_2024-10-21_03-10-24__3717e02e-044e-4425-ab0c-0c016aefccde__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 42136
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42136/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHIi74AAY4sdKc4bTVnLsrCq3uQDX3DH4SaIhO5ZZqmZadb0AfIarvQVwgCFgYK0T3OaxHqEFrZwWWSmNZY78DCGAZKtDf3YgmlkgnY0gmlwhKwRABSJc2VjcDI1NmsxoQLR79j8zt9FBo19a1WXzKVFbWvT0Uq3-yStSmxgzhK5LoN0Y3CCpJmDdWRwgqSbhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/42137/p2p/16Uiu2HAm9ZBK1NoiYdFjpPr7kPiUVkSmhQ4vtrYRVqouU1fEzeP7","/ip4/127.0.0.1/tcp/42138/ws/p2p/16Uiu2HAm9ZBK1NoiYdFjpPr7kPiUVkSmhQ4vtrYRVqouU1fEzeP7","/ip4/172.17.0.20/tcp/42137/p2p/16Uiu2HAm9ZBK1NoiYdFjpPr7kPiUVkSmhQ4vtrYRVqouU1fEzeP7","/ip4/172.17.0.20/tcp/42138/ws/p2p/16Uiu2HAm9ZBK1NoiYdFjpPr7kPiUVkSmhQ4vtrYRVqouU1fEzeP7"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12193/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54982/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42136/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12193/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12193/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12193/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12193/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm3xQDsDGjR7HK2in2Dgsn5ByDRwW6bUoxK1CE1NfRnK19","multiaddrs":["/ip4/172.18.207.63/tcp/54984/ws/p2p/16Uiu2HAm3xQDsDGjR7HK2in2Dgsn5ByDRwW6bUoxK1CE1NfRnK19","/ip4/172.18.207.63/tcp/54983/p2p/16Uiu2HAm3xQDsDGjR7HK2in2Dgsn5ByDRwW6bUoxK1CE1NfRnK19"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54982/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.9/tcp/12194/p2p/16Uiu2HAmByLXuQKYHNEwTvGLcHuJtMvM4XX8fXBbjapsbsMoJRqf","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42136/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm3xQDsDGjR7HK2in2Dgsn5ByDRwW6bUoxK1CE1NfRnK19","multiaddrs":["/ip4/172.18.207.63/tcp/54983/p2p/16Uiu2HAm3xQDsDGjR7HK2in2Dgsn5ByDRwW6bUoxK1CE1NfRnK19","/ip4/172.18.207.63/tcp/54984/ws/p2p/16Uiu2HAm3xQDsDGjR7HK2in2Dgsn5ByDRwW6bUoxK1CE1NfRnK19"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12193/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1729480262382373376}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/go-waku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42136/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1729480262382373376,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9c34fd183d17
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3f045b998f03
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a05b28c88596
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.