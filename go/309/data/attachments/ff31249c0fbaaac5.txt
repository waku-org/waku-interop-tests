[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_lightpushing_node with id: 2024-10-14_03-20-59__57b79d8d-4b33-4646-a52f-15f4af448629
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-14_03-20-59__57b79d8d-4b33-4646-a52f-15f4af448629__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-14_03-20-59__57b79d8d-4b33-4646-a52f-15f4af448629__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-14_03-20-59__57b79d8d-4b33-4646-a52f-15f4af448629__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.47.222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40468', '40469', '40470', '40471', '40472']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40468:40468 -p 40469:40469 -p 40470:40470 -p 40471:40471 -p 40472:40472 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40470 --rest-port=40468 --tcp-port=40469 --discv5-udp-port=40471 --rest-address=0.0.0.0 --nat=extip:172.18.47.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=221629cff01240a7d81aca3dea26c3efe8a6d69f28deee6cccea8e1c741bbdcc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.47.222 waku 9690cc559a7a4c51a8328b2b472e502eb50783923f9059b841f879b5ddb032af
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9690cc559a7a. Setting up logs at ./log/docker/node1_2024-10-14_03-20-59__57b79d8d-4b33-4646-a52f-15f4af448629__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 40468
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40468/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QFJxO1XVNmu6azVNNFq1MgfuIxVpSPawGxT7TrC2czg3SdOnMMz7mdMI5QXh-eCI87ofe7Zr9yK_YCRrZCfuhn6GAZKJCxwHgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQPSvMmBHT5fqDA3EwEu1bnPwTNAAk_7rzsLlDBzfm2O3YN0Y3CCnhWDdWRwgp4XhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/40469/p2p/16Uiu2HAmSqcvyedmps3HL59c5DivPhixR2xGSzVzewrQ5LX76cZA","/ip4/127.0.0.1/tcp/40470/ws/p2p/16Uiu2HAmSqcvyedmps3HL59c5DivPhixR2xGSzVzewrQ5LX76cZA","/ip4/172.17.0.7/tcp/40469/p2p/16Uiu2HAmSqcvyedmps3HL59c5DivPhixR2xGSzVzewrQ5LX76cZA","/ip4/172.17.0.7/tcp/40470/ws/p2p/16Uiu2HAmSqcvyedmps3HL59c5DivPhixR2xGSzVzewrQ5LX76cZA"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.252.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['27261', '27262', '27263', '27264', '27265']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 27261:27261 -p 27262:27262 -p 27263:27263 -p 27264:27264 -p 27265:27265 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27263 --rest-port=27261 --tcp-port=27262 --discv5-udp-port=27264 --rest-address=0.0.0.0 --nat=extip:172.18.252.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fda8c016a2fe50c7cfbe1e49cac1c6c663bfdd01d691cd2acd9a2aedac5cffae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27265 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-Ji4QFJxO1XVNmu6azVNNFq1MgfuIxVpSPawGxT7TrC2czg3SdOnMMz7mdMI5QXh-eCI87ofe7Zr9yK_YCRrZCfuhn6GAZKJCxwHgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQPSvMmBHT5fqDA3EwEu1bnPwTNAAk_7rzsLlDBzfm2O3YN0Y3CCnhWDdWRwgp4XhXdha3UyCQ --lightpushnode=/ip4/172.18.47.222/tcp/40469/p2p/16Uiu2HAmSqcvyedmps3HL59c5DivPhixR2xGSzVzewrQ5LX76cZA
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.252.140 waku 945df5ee01ed908bd4744619e5a479e819d7b1176213ff8908b182933e62189d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 945df5ee01ed. Setting up logs at ./log/docker/node2_2024-10-14_03-20-59__57b79d8d-4b33-4646-a52f-15f4af448629__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 27261
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27261/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27261/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.140/tcp/27262/p2p/16Uiu2HAmE4qDiSnVj6zqdEJ4KTmbe27oqFyJusGc2fXQWBCbVxnN","/ip4/172.18.252.140/tcp/27263/ws/p2p/16Uiu2HAmE4qDiSnVj6zqdEJ4KTmbe27oqFyJusGc2fXQWBCbVxnN"],"enrUri":"enr:-LO4QGA1snyn4jo54xY4X-z8OfastqV20BVMq7oOnCGI_qnPQE62G6kU5ITAIzU7R-svWG8iIpp92GGFOnphNg8P0QgBgmlkgnY0gmlwhKwS_IyKbXVsdGlhZGRyc4wACgSsEvyMBmp_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMU901mqLM2rAZmkhZ_5wrn9Ai-fa6G_yArBJmB_6ilY4N0Y3CCan6DdWRwgmqAhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.113.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28426', '28427', '28428', '28429', '28430']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28426:28426 -p 28427:28427 -p 28428:28428 -p 28429:28429 -p 28430:28430 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=28428 --rest-port=28426 --tcp-port=28427 --discv5-udp-port=28429 --rest-address=0.0.0.0 --nat=extip:172.18.113.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7d1b6cfc76e877efbdc5bba195ff3ab9fcfbb5d16ccafdc3fc026f7bfc52b9e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QGA1snyn4jo54xY4X-z8OfastqV20BVMq7oOnCGI_qnPQE62G6kU5ITAIzU7R-svWG8iIpp92GGFOnphNg8P0QgBgmlkgnY0gmlwhKwS_IyKbXVsdGlhZGRyc4wACgSsEvyMBmp_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMU901mqLM2rAZmkhZ_5wrn9Ai-fa6G_yArBJmB_6ilY4N0Y3CCan6DdWRwgmqAhXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.113.151 waku 6c30d4d018b0e24896bb5fba1dd5b10e28b7e792bf3326530585da6d457ec42b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6c30d4d018b0. Setting up logs at ./log/docker/node3_2024-10-14_03-20-59__57b79d8d-4b33-4646-a52f-15f4af448629__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 28426
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28426/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QEtf5VWJK3yqucfmllKku6f6Hr8OwEVlE5AEAzBsbuHHHTBZk20QHOmWz_Sf09SfdJvC5TCIxpCXwsU897sdtviGAZKJCyolgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQO69sFqP4LNbOD_kTERS9KgNlKSTCttK1vQL0UTFJvGloN0Y3CCbwuDdWRwgm8NhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/28427/p2p/16Uiu2HAmREpQyo1DtV9LYZXT4v7nKcBDcVQbjMKEqK7LBdKiJvHB","/ip4/127.0.0.1/tcp/28428/ws/p2p/16Uiu2HAmREpQyo1DtV9LYZXT4v7nKcBDcVQbjMKEqK7LBdKiJvHB","/ip4/172.17.0.9/tcp/28427/p2p/16Uiu2HAmREpQyo1DtV9LYZXT4v7nKcBDcVQbjMKEqK7LBdKiJvHB","/ip4/172.17.0.9/tcp/28428/ws/p2p/16Uiu2HAmREpQyo1DtV9LYZXT4v7nKcBDcVQbjMKEqK7LBdKiJvHB"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40468/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27261/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28426/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40468/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40468/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40468/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmE4qDiSnVj6zqdEJ4KTmbe27oqFyJusGc2fXQWBCbVxnN","multiaddrs":["/ip4/172.18.252.140/tcp/27262/p2p/16Uiu2HAmE4qDiSnVj6zqdEJ4KTmbe27oqFyJusGc2fXQWBCbVxnN","/ip4/172.18.252.140/tcp/27263/ws/p2p/16Uiu2HAmE4qDiSnVj6zqdEJ4KTmbe27oqFyJusGc2fXQWBCbVxnN"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27261/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.7/tcp/40469/p2p/16Uiu2HAmSqcvyedmps3HL59c5DivPhixR2xGSzVzewrQ5LX76cZA","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28426/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmE4qDiSnVj6zqdEJ4KTmbe27oqFyJusGc2fXQWBCbVxnN","multiaddrs":["/ip4/172.18.252.140/tcp/27262/p2p/16Uiu2HAmE4qDiSnVj6zqdEJ4KTmbe27oqFyJusGc2fXQWBCbVxnN","/ip4/172.18.252.140/tcp/27263/ws/p2p/16Uiu2HAmE4qDiSnVj6zqdEJ4KTmbe27oqFyJusGc2fXQWBCbVxnN"],"protocols":["/vac/waku/relay/2.0.0"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40468/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1728876096487229952}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/go-waku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28426/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1728876096487229952,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9690cc559a7a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 945df5ee01ed
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6c30d4d018b0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.