[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-11-16_03-12-01__9064eadd-30bb-44c7-b7c8-85dbfa99a7c5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-16_03-12-01__9064eadd-30bb-44c7-b7c8-85dbfa99a7c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.254.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21431', '21432', '21433', '21434', '21435']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21431:21431 -p 21432:21432 -p 21433:21433 -p 21434:21434 -p 21435:21435 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21433 --rest-port=21431 --tcp-port=21432 --discv5-udp-port=21434 --rest-address=0.0.0.0 --nat=extip:172.18.254.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4abcfc9a2840538a0a4145afc13ce9bbbf1b23b7da2e7c7cdbec3ccae2e1a42f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21435 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.254.80 waku b8840077deeba21415fedddeb5fb45579199a26bf175ac9b4f9c4ae14e7bfe22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b8840077deeb. Setting up logs at ./log/docker/node1_2024-11-16_03-12-01__9064eadd-30bb-44c7-b7c8-85dbfa99a7c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 21431
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9433beb283d6. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21431/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21431/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.254.80/tcp/21432/p2p/16Uiu2HAm6WVAAg4tvyQNyxjxwhqXasDsTuPEWcS6cGa7H7U3g9ud","/ip4/172.18.254.80/tcp/21433/ws/p2p/16Uiu2HAm6WVAAg4tvyQNyxjxwhqXasDsTuPEWcS6cGa7H7U3g9ud"],"enrUri":"enr:-L24QNmmP6_iNjTFoV2wC_AzV6LEse0LH2gqmEIerzCbxUDZFwyWAUwSvMVWljTo5nEcvGfdZK8M5QIWuXx8c955yTwCgmlkgnY0gmlwhKwS_lCKbXVsdGlhZGRyc5YACASsEv5QBlO4AAoErBL-UAZTud0DgnJzhQADAQAAiXNlY3AyNTZrMaECpKw5iGFJ5gwwuELk1109wRtHZta1cobpMouQ_xgE5KSDdGNwglO4g3VkcIJTuoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-16_03-12-01__9064eadd-30bb-44c7-b7c8-85dbfa99a7c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.141.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['42480', '42481', '42482', '42483', '42484']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 42480:42480 -p 42481:42481 -p 42482:42482 -p 42483:42483 -p 42484:42484 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42482 --rest-port=42480 --tcp-port=42481 --discv5-udp-port=42483 --rest-address=0.0.0.0 --nat=extip:172.18.141.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=26b4ca5dec4d90f12ce64cfbfa598b9cabfaa4e4abdece51cb245f80ad2fdfd9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42484 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QNmmP6_iNjTFoV2wC_AzV6LEse0LH2gqmEIerzCbxUDZFwyWAUwSvMVWljTo5nEcvGfdZK8M5QIWuXx8c955yTwCgmlkgnY0gmlwhKwS_lCKbXVsdGlhZGRyc5YACASsEv5QBlO4AAoErBL-UAZTud0DgnJzhQADAQAAiXNlY3AyNTZrMaECpKw5iGFJ5gwwuELk1109wRtHZta1cobpMouQ_xgE5KSDdGNwglO4g3VkcIJTuoV3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.141.112 waku 4b8c5d3fe759477a8672d605e562fe2ffe173ed743ad1d3e8f97b8dc8263c5c4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4b8c5d3fe759. Setting up logs at ./log/docker/node1_2024-11-16_03-12-01__9064eadd-30bb-44c7-b7c8-85dbfa99a7c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 42480
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42480/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42480/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.112/tcp/42481/p2p/16Uiu2HAmCmKcqKMHGp2yvE4jCf7caQXsswFZWU2LixHdXu9uYvHC","/ip4/172.18.141.112/tcp/42482/ws/p2p/16Uiu2HAmCmKcqKMHGp2yvE4jCf7caQXsswFZWU2LixHdXu9uYvHC"],"enrUri":"enr:-L24QH4fOa89zTM-UMxk59TX7HPMwyZboPp1VhQUiu5Tl2jaawMQ0e8VXfgr2TI0lm8xO3aML7whbtb6iAvvfxN1dfwCgmlkgnY0gmlwhKwSjXCKbXVsdGlhZGRyc5YACASsEo1wBqXxAAoErBKNcAal8t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAZ9FcLb9wGw4YWKPiBVra-Q9AY3pZw_-SazdqE9kkzeDdGNwgqXxg3VkcIKl84V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-16_03-12-01__9064eadd-30bb-44c7-b7c8-85dbfa99a7c5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.35.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14355', '14356', '14357', '14358', '14359']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14355:14355 -p 14356:14356 -p 14357:14357 -p 14358:14358 -p 14359:14359 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=14357 --rest-port=14355 --tcp-port=14356 --discv5-udp-port=14358 --rest-address=0.0.0.0 --nat=extip:172.18.35.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9845e183c33ed5a23e8ca4b442ee88af4a6fbeefdbeff4979efcc7fafc7aab1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QNmmP6_iNjTFoV2wC_AzV6LEse0LH2gqmEIerzCbxUDZFwyWAUwSvMVWljTo5nEcvGfdZK8M5QIWuXx8c955yTwCgmlkgnY0gmlwhKwS_lCKbXVsdGlhZGRyc5YACASsEv5QBlO4AAoErBL-UAZTud0DgnJzhQADAQAAiXNlY3AyNTZrMaECpKw5iGFJ5gwwuELk1109wRtHZta1cobpMouQ_xgE5KSDdGNwglO4g3VkcIJTuoV3YWt1Mgk --lightpushnode=/ip4/172.18.254.80/tcp/21432/p2p/16Uiu2HAm6WVAAg4tvyQNyxjxwhqXasDsTuPEWcS6cGa7H7U3g9ud
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.35.100 waku b3817d25945bbc9f591a009f4b80018dff5a82ed3ea57432b7de267c1c51b10e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b3817d25945b. Setting up logs at ./log/docker/node1_2024-11-16_03-12-01__9064eadd-30bb-44c7-b7c8-85dbfa99a7c5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 14355
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14355/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJpKNOxmULqj6WQRog1vemFurgKMkIA-JTnTG1IoyqNqbLGAK8qZlKXZ5W9_dlBmjDHuO2N-FJ7bwWbvIDdIca-GAZMy9NA8gmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQJy_OKQZz4dOuWrBKnIguwwOL0tb1Zz4Ghf1R02-b_8rYN0Y3CCOBSDdWRwgjgWhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/14356/p2p/16Uiu2HAm3AY7MRY1JnJqaw7kJkNKAWeafbgG74bgPf7YP6nhjAqS","/ip4/127.0.0.1/tcp/14357/ws/p2p/16Uiu2HAm3AY7MRY1JnJqaw7kJkNKAWeafbgG74bgPf7YP6nhjAqS","/ip4/172.17.0.13/tcp/14356/p2p/16Uiu2HAm3AY7MRY1JnJqaw7kJkNKAWeafbgG74bgPf7YP6nhjAqS","/ip4/172.17.0.13/tcp/14357/ws/p2p/16Uiu2HAm3AY7MRY1JnJqaw7kJkNKAWeafbgG74bgPf7YP6nhjAqS"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21431/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42480/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14355/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1731726726231142912}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21431/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1731726726231142912,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42480/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1731726726231142912,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b8840077deeb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 4b8c5d3fe759
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b8840077deeb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b3817d25945b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4b8c5d3fe759. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.