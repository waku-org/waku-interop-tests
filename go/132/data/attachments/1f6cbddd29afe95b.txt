[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_lightpushed_message with id: 2024-05-19_03-22-10__62b41e48-aa34-4578-8df8-06dd28a63591
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-19_03-22-10__62b41e48-aa34-4578-8df8-06dd28a63591__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.213.127
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['62151', '62152', '62153', '62154', '62155']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 62151:62151 -p 62152:62152 -p 62153:62153 -p 62154:62154 -p 62155:62155 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62153 --rest-port=62151 --tcp-port=62152 --discv5-udp-port=62154 --rest-address=0.0.0.0 --nat=extip:172.18.213.127 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62155 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.213.127 waku 6ec8104e0f2759af01c62dec0b5a3d916db45ad827923cafc31bbba2e8cd8d21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6ec8104e0f27. Setting up logs at ./log/docker/publishing_node1_2024-05-19_03-22-10__62b41e48-aa34-4578-8df8-06dd28a63591__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 62151
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62151/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62151/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.127/tcp/62152/p2p/16Uiu2HAmN9yPr2FmG9diPyiYGqUjvVamSjVa7cbYiaf8CUndSgq2","/ip4/172.18.213.127/tcp/62153/ws/p2p/16Uiu2HAmN9yPr2FmG9diPyiYGqUjvVamSjVa7cbYiaf8CUndSgq2"],"enrUri":"enr:-LO4QETa3z1PHAwS3JR4O8_vz5hUkzW-yaIY3d4AvVEPjFzBYJ3xin0h9rjfCLFh54BOJ0kGKHIaYXkQRFhLhgjnCJ4BgmlkgnY0gmlwhKwS1X-KbXVsdGlhZGRyc4wACgSsEtV_BvLJ3QOCcnOFAAABAACJc2VjcDI1NmsxoQONJfHm1FR3QAsGr_5qX1E4a0XhmVzpwN2wOu36vV2X5YN0Y3CC8siDdWRwgvLKhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-19_03-22-10__62b41e48-aa34-4578-8df8-06dd28a63591__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.3.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['64841', '64842', '64843', '64844', '64845']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 64841:64841 -p 64842:64842 -p 64843:64843 -p 64844:64844 -p 64845:64845 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=64843 --rest-port=64841 --tcp-port=64842 --discv5-udp-port=64844 --rest-address=0.0.0.0 --nat=extip:172.18.3.230 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QETa3z1PHAwS3JR4O8_vz5hUkzW-yaIY3d4AvVEPjFzBYJ3xin0h9rjfCLFh54BOJ0kGKHIaYXkQRFhLhgjnCJ4BgmlkgnY0gmlwhKwS1X-KbXVsdGlhZGRyc4wACgSsEtV_BvLJ3QOCcnOFAAABAACJc2VjcDI1NmsxoQONJfHm1FR3QAsGr_5qX1E4a0XhmVzpwN2wOu36vV2X5YN0Y3CC8siDdWRwgvLKhXdha3UyCw --storenode=/ip4/172.18.213.127/tcp/62152/p2p/16Uiu2HAmN9yPr2FmG9diPyiYGqUjvVamSjVa7cbYiaf8CUndSgq2 --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.213.127/tcp/62152/p2p/16Uiu2HAmN9yPr2FmG9diPyiYGqUjvVamSjVa7cbYiaf8CUndSgq2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.3.230 waku fef636a772aff9ac2b811a770843bd7d3e75af1d9cf81ff9c3c46e8a54eb7c66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID fef636a772af. Setting up logs at ./log/docker/store_node1_2024-05-19_03-22-10__62b41e48-aa34-4578-8df8-06dd28a63591__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 64841
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64841/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QKAWdWZhBmy0HQX5kB5Cijiw7Hqo9_Y-D9tN57OeVZ2xP2wVFYS2R7VLrRSuU9NQTeFtVewWxfMMKYpF4LLoIZuGAY-O3whsgmlkgnY0gmlwhKwRAAmKbXVsdGlhZGRyc5gACgSsEQAJBv1L3QMACgR_AAABBv1L3QOJc2VjcDI1NmsxoQJvVvcihp3pAUJCamGuxlY8wqCcA2SbyJyZNAZTjbgS5IN0Y3CC_UqDdWRwgv1MhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/64842/p2p/16Uiu2HAm2vJ9UzFBe2oWmfaTwdhHPm9vp7GYUgazVDxDPg4GhANF","/ip4/127.0.0.1/tcp/64843/ws/p2p/16Uiu2HAm2vJ9UzFBe2oWmfaTwdhHPm9vp7GYUgazVDxDPg4GhANF","/ip4/172.17.0.9/tcp/64842/p2p/16Uiu2HAm2vJ9UzFBe2oWmfaTwdhHPm9vp7GYUgazVDxDPg4GhANF","/ip4/172.17.0.9/tcp/64843/ws/p2p/16Uiu2HAm2vJ9UzFBe2oWmfaTwdhHPm9vp7GYUgazVDxDPg4GhANF"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64841/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.213.127/tcp/62152/p2p/16Uiu2HAmN9yPr2FmG9diPyiYGqUjvVamSjVa7cbYiaf8CUndSgq2", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62151/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64841/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1716088933522648320}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62151/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1716088933522648320,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 6ec8104e0f27
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id fef636a772af
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-19_03-22-10__62b41e48-aa34-4578-8df8-06dd28a63591__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-19_03-22-10__62b41e48-aa34-4578-8df8-06dd28a63591__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_lightpushed_message with id: 2024-05-19_03-22-16__d66c2813-f615-4a15-a84c-87f7b3c19bb6
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-19_03-22-16__d66c2813-f615-4a15-a84c-87f7b3c19bb6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.172.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['63095', '63096', '63097', '63098', '63099']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 63095:63095 -p 63096:63096 -p 63097:63097 -p 63098:63098 -p 63099:63099 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63097 --rest-port=63095 --tcp-port=63096 --discv5-udp-port=63098 --rest-address=0.0.0.0 --nat=extip:172.18.172.132 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63099 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.172.132 waku 20f7e07dbf36aa094f0e0602abdb5ee0a31afe8e1751a73ee8864896c963ae93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 20f7e07dbf36. Setting up logs at ./log/docker/publishing_node1_2024-05-19_03-22-16__d66c2813-f615-4a15-a84c-87f7b3c19bb6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 63095
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63095/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63095/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.132/tcp/63096/p2p/16Uiu2HAmKHVkrko5ft2kE9cks1cHuJiGJ5JGZTwGAXiduC1Tu746","/ip4/172.18.172.132/tcp/63097/ws/p2p/16Uiu2HAmKHVkrko5ft2kE9cks1cHuJiGJ5JGZTwGAXiduC1Tu746"],"enrUri":"enr:-LO4QGahlU9iEHXoUCtNfp6GoOWcd7fkAmHKaqcCnW7wDWJlMW7FMXEQbT_xCBfJfuMeYxZxIiMq94tTIbVS35dFFlQBgmlkgnY0gmlwhKwSrISKbXVsdGlhZGRyc4wACgSsEqyEBvZ53QOCcnOFAAABAACJc2VjcDI1NmsxoQNigEfSy-CCMhwFWhvZctdeIr9dpBRzkj8P1bLNJ7_4C4N0Y3CC9niDdWRwgvZ6hXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-19_03-22-16__d66c2813-f615-4a15-a84c-87f7b3c19bb6__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.254.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36185', '36186', '36187', '36188', '36189']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36185:36185 -p 36186:36186 -p 36187:36187 -p 36188:36188 -p 36189:36189 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36187 --rest-port=36185 --tcp-port=36186 --discv5-udp-port=36188 --rest-address=0.0.0.0 --nat=extip:172.18.254.24 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QGahlU9iEHXoUCtNfp6GoOWcd7fkAmHKaqcCnW7wDWJlMW7FMXEQbT_xCBfJfuMeYxZxIiMq94tTIbVS35dFFlQBgmlkgnY0gmlwhKwSrISKbXVsdGlhZGRyc4wACgSsEqyEBvZ53QOCcnOFAAABAACJc2VjcDI1NmsxoQNigEfSy-CCMhwFWhvZctdeIr9dpBRzkj8P1bLNJ7_4C4N0Y3CC9niDdWRwgvZ6hXdha3UyCw --storenode=/ip4/172.18.172.132/tcp/63096/p2p/16Uiu2HAmKHVkrko5ft2kE9cks1cHuJiGJ5JGZTwGAXiduC1Tu746 --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.172.132/tcp/63096/p2p/16Uiu2HAmKHVkrko5ft2kE9cks1cHuJiGJ5JGZTwGAXiduC1Tu746
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.254.24 waku 619bbb09618b43f33edc28fa762ba25a92f0b4e666469988188724e6de7e4f7c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 619bbb09618b. Setting up logs at ./log/docker/store_node1_2024-05-19_03-22-16__d66c2813-f615-4a15-a84c-87f7b3c19bb6__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 36185
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36185/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QC-IlQPy8K_UvaS07thX4SITyaw-dwH0gkVaRMns2oMWfmjStRL0pKki8siPefk1iZQuqX6nKvl6UY3gCds3a5mGAY-O3yLHgmlkgnY0gmlwhKwRAASKbXVsdGlhZGRyc5gACgR_AAABBo1b3QMACgSsEQAEBo1b3QOJc2VjcDI1NmsxoQMxTnzbd7zisrumM98vAPBvRufzJ74lK7MfrQYRWIO1gIN0Y3CCjVqDdWRwgo1chXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/36186/p2p/16Uiu2HAmFyTk2ttJgqoS8ST1PD82ELbrTrDuGvyZVJydsWi3Mknb","/ip4/127.0.0.1/tcp/36187/ws/p2p/16Uiu2HAmFyTk2ttJgqoS8ST1PD82ELbrTrDuGvyZVJydsWi3Mknb","/ip4/172.17.0.4/tcp/36186/p2p/16Uiu2HAmFyTk2ttJgqoS8ST1PD82ELbrTrDuGvyZVJydsWi3Mknb","/ip4/172.17.0.4/tcp/36187/ws/p2p/16Uiu2HAmFyTk2ttJgqoS8ST1PD82ELbrTrDuGvyZVJydsWi3Mknb"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36185/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.172.132/tcp/63096/p2p/16Uiu2HAmKHVkrko5ft2kE9cks1cHuJiGJ5JGZTwGAXiduC1Tu746", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63095/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36185/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1716088940344584704}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63095/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1716088940344584704,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 20f7e07dbf36
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 619bbb09618b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-19_03-22-16__d66c2813-f615-4a15-a84c-87f7b3c19bb6__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-19_03-22-16__d66c2813-f615-4a15-a84c-87f7b3c19bb6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_lightpushed_message with id: 2024-05-19_03-22-24__897d991a-7309-4615-bf50-6f69a4acfdde
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-19_03-22-24__897d991a-7309-4615-bf50-6f69a4acfdde__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.46.240
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['35602', '35603', '35604', '35605', '35606']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 35602:35602 -p 35603:35603 -p 35604:35604 -p 35605:35605 -p 35606:35606 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35604 --rest-port=35602 --tcp-port=35603 --discv5-udp-port=35605 --rest-address=0.0.0.0 --nat=extip:172.18.46.240 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35606 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.46.240 waku bb3e4dd2d49c848fc89bcf9294e637c609236a6208698966fea4fc83f1ec87f5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID bb3e4dd2d49c. Setting up logs at ./log/docker/publishing_node1_2024-05-19_03-22-24__897d991a-7309-4615-bf50-6f69a4acfdde__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 35602
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35602/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35602/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.240/tcp/35603/p2p/16Uiu2HAmA1HNMGjwEH6t9pbgh3GonwbpLExFRJdk6pwx9KDABwK5","/ip4/172.18.46.240/tcp/35604/ws/p2p/16Uiu2HAmA1HNMGjwEH6t9pbgh3GonwbpLExFRJdk6pwx9KDABwK5"],"enrUri":"enr:-LO4QLT2mICcvUaT1EIDp01J9Xqg-M3ha65xrWPcfe2vdZ5fDX8C7FQscpzAe4KX8VhiDrHqwhxNrwe--1q9mhuAAXsBgmlkgnY0gmlwhKwSLvCKbXVsdGlhZGRyc4wACgSsEi7wBosU3QOCcnOFAAABAACJc2VjcDI1NmsxoQLYn8xMJ3rgwZCtO7GS8b7pg5KfKYv6HUbIlT7y3c7T0IN0Y3CCixODdWRwgosVhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-19_03-22-24__897d991a-7309-4615-bf50-6f69a4acfdde__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.102.71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['26945', '26946', '26947', '26948', '26949']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 26945:26945 -p 26946:26946 -p 26947:26947 -p 26948:26948 -p 26949:26949 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=26947 --rest-port=26945 --tcp-port=26946 --discv5-udp-port=26948 --rest-address=0.0.0.0 --nat=extip:172.18.102.71 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QLT2mICcvUaT1EIDp01J9Xqg-M3ha65xrWPcfe2vdZ5fDX8C7FQscpzAe4KX8VhiDrHqwhxNrwe--1q9mhuAAXsBgmlkgnY0gmlwhKwSLvCKbXVsdGlhZGRyc4wACgSsEi7wBosU3QOCcnOFAAABAACJc2VjcDI1NmsxoQLYn8xMJ3rgwZCtO7GS8b7pg5KfKYv6HUbIlT7y3c7T0IN0Y3CCixODdWRwgosVhXdha3UyCw --storenode=/ip4/172.18.46.240/tcp/35603/p2p/16Uiu2HAmA1HNMGjwEH6t9pbgh3GonwbpLExFRJdk6pwx9KDABwK5 --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.46.240/tcp/35603/p2p/16Uiu2HAmA1HNMGjwEH6t9pbgh3GonwbpLExFRJdk6pwx9KDABwK5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.102.71 waku e9d602152ed51e01ddb1a5d60ddb12a9575f526f2e1cc582123fceffc89b8ee5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e9d602152ed5. Setting up logs at ./log/docker/store_node1_2024-05-19_03-22-24__897d991a-7309-4615-bf50-6f69a4acfdde__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 26945
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26945/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QJaeeeh3fZbK5QcIbBW-yAxt19KaBQviNlcdzTSsVjn5CJPb9xe4eHNnw9SFFIBA5IyF_c6jmX5ld8tLSbofGG2GAY-O3z2igmlkgnY0gmlwhKwRAAeKbXVsdGlhZGRyc5gACgSsEQAHBmlD3QMACgR_AAABBmlD3QOJc2VjcDI1NmsxoQIw9zFV1AWjxKSWBvFxFaukQZZ6W0xqYp4Wm7kAkTyN4IN0Y3CCaUKDdWRwgmlEhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/26946/p2p/16Uiu2HAkxipAhMVrohuYtyPWaCL41H6Ld8sKNAecxwj3mnvKsdVh","/ip4/127.0.0.1/tcp/26947/ws/p2p/16Uiu2HAkxipAhMVrohuYtyPWaCL41H6Ld8sKNAecxwj3mnvKsdVh","/ip4/172.17.0.7/tcp/26946/p2p/16Uiu2HAkxipAhMVrohuYtyPWaCL41H6Ld8sKNAecxwj3mnvKsdVh","/ip4/172.17.0.7/tcp/26947/ws/p2p/16Uiu2HAkxipAhMVrohuYtyPWaCL41H6Ld8sKNAecxwj3mnvKsdVh"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26945/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.46.240/tcp/35603/p2p/16Uiu2HAmA1HNMGjwEH6t9pbgh3GonwbpLExFRJdk6pwx9KDABwK5", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35602/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26945/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1716088947161216512}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35602/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1716088947161216512,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id bb3e4dd2d49c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id e9d602152ed5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-19_03-22-24__897d991a-7309-4615-bf50-6f69a4acfdde__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-19_03-22-24__897d991a-7309-4615-bf50-6f69a4acfdde__harbor.status.im_wakuorg_go-waku:latest.log