[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2024-10-27_03-15-38__a83658b2-8a1e-4b22-aaca-ce1684d94002
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-27_03-15-38__a83658b2-8a1e-4b22-aaca-ce1684d94002__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.68.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35561', '35562', '35563', '35564', '35565']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35561:35561 -p 35562:35562 -p 35563:35563 -p 35564:35564 -p 35565:35565 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35563 --rest-port=35561 --tcp-port=35562 --discv5-udp-port=35564 --rest-address=0.0.0.0 --nat=extip:172.18.68.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbfacb9c7143abeb94c3d053eeda933b66dcc8e3bfef4b448ffafe13d440eab3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35565 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.68.230 waku d4f0e96b15f9cc32f93db4b2cb09936acf8ffc121203d04f2f1ad5b79ce790fd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d4f0e96b15f9. Setting up logs at ./log/docker/receiving_node1_2024-10-27_03-15-38__a83658b2-8a1e-4b22-aaca-ce1684d94002__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35561
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 84f7dd5c343d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35561/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35561/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.230/tcp/35562/p2p/16Uiu2HAmSCnzueqM8e49yuE3YTPDmduT7hARuehxMZwgFa7e4TSa","/ip4/172.18.68.230/tcp/35563/ws/p2p/16Uiu2HAmSCnzueqM8e49yuE3YTPDmduT7hARuehxMZwgFa7e4TSa"],"enrUri":"enr:-LO4QIKTDd6lkhLO3N1gYdFinT4NBAslGFGrXXgWWyoHHr8zEssHTiTGGW3JZG7OCBQzcP0Q68nmR5xKlwerfKTAtZQBgmlkgnY0gmlwhKwSROaKbXVsdGlhZGRyc4wACgSsEkTmBorr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPJTa5NB70HtAEi1QrcWJTuUGMbfxS2eLUWCXELMvNjO4N0Y3CCiuqDdWRwgorshXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-27_03-15-38__a83658b2-8a1e-4b22-aaca-ce1684d94002__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.107.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44545', '44546', '44547', '44548', '44549']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44545:44545 -p 44546:44546 -p 44547:44547 -p 44548:44548 -p 44549:44549 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44547 --rest-port=44545 --tcp-port=44546 --discv5-udp-port=44548 --rest-address=0.0.0.0 --nat=extip:172.18.107.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d3cba21dce53ca6aef329ef2a7bdafb018abaa763f4707cf99bca5c7ae38ac31 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44549 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.107.27 waku 66913579940dd848d7d64a285debfed2f0874b4afaa1e50b7fda176cb8faa42c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 66913579940d. Setting up logs at ./log/docker/receiving_node2_2024-10-27_03-15-38__a83658b2-8a1e-4b22-aaca-ce1684d94002__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44545
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44545/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44545/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.27/tcp/44546/p2p/16Uiu2HAm1XVLW7G5z4ww2sNykZuvueLkWFvgg3zEiSgJ96TzaftR","/ip4/172.18.107.27/tcp/44547/ws/p2p/16Uiu2HAm1XVLW7G5z4ww2sNykZuvueLkWFvgg3zEiSgJ96TzaftR"],"enrUri":"enr:-LO4QBDCcjvMuHnuFdQUmUjjGbntRvEtH0Aioj6r5fOriaq_Egcp3W_qpR68t33pS3HntWQjOjzlVEy_TGUsXyiX7HIBgmlkgnY0gmlwhKwSaxuKbXVsdGlhZGRyc4wACgSsEmsbBq4D3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJao5KIhnDGlwabhvXKpevfnkSs_9sj2SVIRyBNFMFvNoN0Y3CCrgKDdWRwgq4EhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44545/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.230/tcp/35562/p2p/16Uiu2HAmSCnzueqM8e49yuE3YTPDmduT7hARuehxMZwgFa7e4TSa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-27_03-15-38__a83658b2-8a1e-4b22-aaca-ce1684d94002__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.247.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51038', '51039', '51040', '51041', '51042']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51038:51038 -p 51039:51039 -p 51040:51040 -p 51041:51041 -p 51042:51042 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=51040 --rest-port=51038 --tcp-port=51039 --discv5-udp-port=51041 --rest-address=0.0.0.0 --nat=extip:172.18.247.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6f5fab79c8fe34d9cabdb51c62dc6e1b88ca6df0ff9426cdd1b84fdec3c4a8d9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QIKTDd6lkhLO3N1gYdFinT4NBAslGFGrXXgWWyoHHr8zEssHTiTGGW3JZG7OCBQzcP0Q68nmR5xKlwerfKTAtZQBgmlkgnY0gmlwhKwSROaKbXVsdGlhZGRyc4wACgSsEkTmBorr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPJTa5NB70HtAEi1QrcWJTuUGMbfxS2eLUWCXELMvNjO4N0Y3CCiuqDdWRwgorshXdha3UyCQ --lightpushnode=/ip4/172.18.68.230/tcp/35562/p2p/16Uiu2HAmSCnzueqM8e49yuE3YTPDmduT7hARuehxMZwgFa7e4TSa --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.247.144 waku 81383805b92c759899d51eefea2bea13563a49717fa1a35e8baf29b2aef7095b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 81383805b92c. Setting up logs at ./log/docker/lightpush_node1_2024-10-27_03-15-38__a83658b2-8a1e-4b22-aaca-ce1684d94002__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 51038
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51038/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QNiLmzIOKDyzuUZ8p2B91lD0nA35XEvw5efYcUbErakMVI-kBJhpQc5KeRym4vrjtqBgngS7UwvHv8mppBqPWLyGAZLL-PDPgmlkgnY0gmlwhKwRAA6Jc2VjcDI1NmsxoQIV_04S3DpoW4-D43pGK6y9BlDNEZWyBMCKIiCAdUQIToN0Y3CCx1-DdWRwgsdhhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/51039/p2p/16Uiu2HAkvuYLN5WEZCbEsF7fMVb6RTPqSXbkVqnJQhweeofGZaqT","/ip4/127.0.0.1/tcp/51040/ws/p2p/16Uiu2HAkvuYLN5WEZCbEsF7fMVb6RTPqSXbkVqnJQhweeofGZaqT","/ip4/172.17.0.14/tcp/51039/p2p/16Uiu2HAkvuYLN5WEZCbEsF7fMVb6RTPqSXbkVqnJQhweeofGZaqT","/ip4/172.17.0.14/tcp/51040/ws/p2p/16Uiu2HAkvuYLN5WEZCbEsF7fMVb6RTPqSXbkVqnJQhweeofGZaqT"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51038/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.68.230/tcp/35562/p2p/16Uiu2HAmSCnzueqM8e49yuE3YTPDmduT7hARuehxMZwgFa7e4TSa", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51038/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.107.27/tcp/44546/p2p/16Uiu2HAm1XVLW7G5z4ww2sNykZuvueLkWFvgg3zEiSgJ96TzaftR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35561/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44545/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51038/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729998943587176192}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:51038/lightpush/v1/message. Response content: b'missing Payload field'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51038/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729998943590747904}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51038/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51038/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729998943594285824}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51038/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51038/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729998943597026048}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51038/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51038/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729998943600936704}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51038/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51038/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729998943603681536}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51038/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d4f0e96b15f9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 66913579940d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d4f0e96b15f9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 81383805b92c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 66913579940d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.