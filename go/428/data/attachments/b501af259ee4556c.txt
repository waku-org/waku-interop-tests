[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2025-01-11_03-07-18__5b20ccd0-3c3b-46a7-b870-c2bdea00ee54
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-11_03-07-18__5b20ccd0-3c3b-46a7-b870-c2bdea00ee54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.172.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16186', '16187', '16188', '16189', '16190']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16186:16186 -p 16187:16187 -p 16188:16188 -p 16189:16189 -p 16190:16190 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16188 --rest-port=16186 --tcp-port=16187 --discv5-udp-port=16189 --rest-address=0.0.0.0 --nat=extip:172.18.172.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a1c0cf0cf55e32ede4dbeb75bdf05d2bd7325bd65dfe73fc8c700ecc7b29e43d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16190 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.172.116 waku 8bcc6d334d6743bdf50c2384f85d40e599a03e724a364f34bb6c5de3ab160c88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8bcc6d334d67. Setting up logs at ./log/docker/receiving_node1_2025-01-11_03-07-18__5b20ccd0-3c3b-46a7-b870-c2bdea00ee54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 16186
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a882dda79ef0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16186/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16186/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.116/tcp/16187/p2p/16Uiu2HAmRCgrY8BnLkPVD3ePmSFPg6yp2SAkEcDF6wVxJrC4Deea","/ip4/172.18.172.116/tcp/16188/ws/p2p/16Uiu2HAmRCgrY8BnLkPVD3ePmSFPg6yp2SAkEcDF6wVxJrC4Deea"],"enrUri":"enr:-L24QJfkzaygo0cfwr69a0H0sOwoaKVawXsugPoPB9hMQV38EMsxz6tFc_lrCA9_2vaLdqLESuBWM2cT6YefG1AbPUgCgmlkgnY0gmlwhKwSrHSKbXVsdGlhZGRyc5YACASsEqx0Bj87AAoErBKsdAY_PN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDumsL6LbVUxZzt-Z7KkaabxfWl2uOLVj_6CVoyCB8kWeDdGNwgj87g3VkcII_PYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-11_03-07-18__5b20ccd0-3c3b-46a7-b870-c2bdea00ee54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.176.71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11026', '11027', '11028', '11029', '11030']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11026:11026 -p 11027:11027 -p 11028:11028 -p 11029:11029 -p 11030:11030 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11028 --rest-port=11026 --tcp-port=11027 --discv5-udp-port=11029 --rest-address=0.0.0.0 --nat=extip:172.18.176.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=519fafbeb4ebb0e9789428ae2dea7ee92dd94dbc0fdf80d7ec6eb50dafc7dc13 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11030 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.176.71 waku 6dc7393c9b24e1c27b984c98d8fce40c6f4eceec900ca7b0f7c23044ce0af852
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6dc7393c9b24. Setting up logs at ./log/docker/receiving_node2_2025-01-11_03-07-18__5b20ccd0-3c3b-46a7-b870-c2bdea00ee54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11026
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11026/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11026/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.71/tcp/11027/p2p/16Uiu2HAmSp7EMHVjxowt2rEaZBNoXKDwrhDMiQhdt5EzWquhZCwU","/ip4/172.18.176.71/tcp/11028/ws/p2p/16Uiu2HAmSp7EMHVjxowt2rEaZBNoXKDwrhDMiQhdt5EzWquhZCwU"],"enrUri":"enr:-L24QPWl9VrsQzwW73Ze2-knFeFm080PdvmJFvgakldePszhINz8cHxdufJp4X1uimIuSVQm-w-oUjf6EUf2yTE_7XYCgmlkgnY0gmlwhKwSsEeKbXVsdGlhZGRyc5YACASsErBHBisTAAoErBKwRwYrFN0DgnJzhQADAQAAiXNlY3AyNTZrMaED0lmft4sSQ33CP7nsGc34VdZkH0KgAhIHXKG0AWJpYGODdGNwgisTg3VkcIIrFYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11026/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.172.116/tcp/16187/p2p/16Uiu2HAmRCgrY8BnLkPVD3ePmSFPg6yp2SAkEcDF6wVxJrC4Deea"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-11_03-07-18__5b20ccd0-3c3b-46a7-b870-c2bdea00ee54__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.88.159
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41800', '41801', '41802', '41803', '41804']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41800:41800 -p 41801:41801 -p 41802:41802 -p 41803:41803 -p 41804:41804 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=41802 --rest-port=41800 --tcp-port=41801 --discv5-udp-port=41803 --rest-address=0.0.0.0 --nat=extip:172.18.88.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=29aef7054feedb5da881acc4d08ece0e6ede88c1938aacdced68ebc74d94a7eb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QJfkzaygo0cfwr69a0H0sOwoaKVawXsugPoPB9hMQV38EMsxz6tFc_lrCA9_2vaLdqLESuBWM2cT6YefG1AbPUgCgmlkgnY0gmlwhKwSrHSKbXVsdGlhZGRyc5YACASsEqx0Bj87AAoErBKsdAY_PN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDumsL6LbVUxZzt-Z7KkaabxfWl2uOLVj_6CVoyCB8kWeDdGNwgj87g3VkcII_PYV3YWt1Mgk --lightpushnode=/ip4/172.18.172.116/tcp/16187/p2p/16Uiu2HAmRCgrY8BnLkPVD3ePmSFPg6yp2SAkEcDF6wVxJrC4Deea --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.88.159 waku 123258e5d4003ae825ddc3cb3127d3726ed923eb343573135b6d64f88593e116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 123258e5d400. Setting up logs at ./log/docker/lightpush_node1_2025-01-11_03-07-18__5b20ccd0-3c3b-46a7-b870-c2bdea00ee54__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 41800
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41800/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMum3kfSFpcKddCkprMlAmEo-QtZl7qROCdjYHil3_bBRO4gyaGDvJCLI_Lcjqw4p7hJXq5hFP7GfzwC5p-kFP2GAZRTVJwpgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQKkvVrmcDvNRbdoNPWJ27TYC6yRHMFMwFsaCXwFQcFpA4N0Y3CCo0mDdWRwgqNLhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/41801/p2p/16Uiu2HAm6WkJspFNLxJoEBMgqKiG6GBPFoHFGheABa935tUV6uVt","/ip4/127.0.0.1/tcp/41802/ws/p2p/16Uiu2HAm6WkJspFNLxJoEBMgqKiG6GBPFoHFGheABa935tUV6uVt","/ip4/172.17.0.4/tcp/41801/p2p/16Uiu2HAm6WkJspFNLxJoEBMgqKiG6GBPFoHFGheABa935tUV6uVt","/ip4/172.17.0.4/tcp/41802/ws/p2p/16Uiu2HAm6WkJspFNLxJoEBMgqKiG6GBPFoHFGheABa935tUV6uVt"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41800/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.172.116/tcp/16187/p2p/16Uiu2HAmRCgrY8BnLkPVD3ePmSFPg6yp2SAkEcDF6wVxJrC4Deea", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41800/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.176.71/tcp/11027/p2p/16Uiu2HAmSp7EMHVjxowt2rEaZBNoXKDwrhDMiQhdt5EzWquhZCwU", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16186/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11026/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41800/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736564842550052352}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41800/lightpush/v1/message. Response content: b'missing Payload field'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41800/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736564842553281536}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41800/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41800/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736564842556083456}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41800/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41800/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736564842558065152}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41800/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41800/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736564842560174336}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41800/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41800/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736564842562351360}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41800/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8bcc6d334d67
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6dc7393c9b24
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8bcc6d334d67. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 123258e5d400
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.