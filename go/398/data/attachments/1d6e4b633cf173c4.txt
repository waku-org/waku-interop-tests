[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4f60cb2c3f9a. Exiting log stream.
[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:36 Postgres container started
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_on_empty_postgress_db with id: 2024-12-18_03-27-15__c4895229-e843-4b23-9ce8-a452ecd8398c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-12-18_03-27-15__c4895229-e843-4b23-9ce8-a452ecd8398c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.18.53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35339', '35340', '35341', '35342', '35343']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35339:35339 -p 35340:35340 -p 35341:35341 -p 35342:35342 -p 35343:35343 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35341 --rest-port=35339 --tcp-port=35340 --discv5-udp-port=35342 --rest-address=0.0.0.0 --nat=extip:172.18.18.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edc42cfa22d6db5ee9cc8a2efa7fba2eaccc8de40a6ffca83e8efa7298967e1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35343 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.18.53 waku 4c7b9ef1468aeabd24f323bd8e5e7efffdcbb578497c53bc75960d1fe8f6faa0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4c7b9ef1468a. Setting up logs at ./log/docker/publishing_node1_2024-12-18_03-27-15__c4895229-e843-4b23-9ce8-a452ecd8398c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 35339
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35339/health" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.waku_node:waku_node.py:188 REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=35339): Read timed out. (read timeout=20)
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.147.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34141', '34142', '34143', '34144', '34145']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34141:34141 -p 34142:34142 -p 34143:34143 -p 34144:34144 -p 34145:34145 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34143 --rest-port=34141 --tcp-port=34142 --discv5-udp-port=34144 --rest-address=0.0.0.0 --nat=extip:172.18.147.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=68a952f1bcac697e35e8f7d07a2be3e6afd882daf9fe5b1ae0ecad2563d7fe10 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34145 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.147.224 waku 9b7698d5b0b65240d04a9f5c0551c84c0fe64681fe3a1fbc9d0f95f85cea1b26
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9b7698d5b0b6. Setting up logs at ./log/docker/publishing_node1_2024-12-18_03-27-15__c4895229-e843-4b23-9ce8-a452ecd8398c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34141
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34141/health" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.waku_node:waku_node.py:188 REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=34141): Read timed out. (read timeout=20)
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.178.69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58345', '58346', '58347', '58348', '58349']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58345:58345 -p 58346:58346 -p 58347:58347 -p 58348:58348 -p 58349:58349 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58347 --rest-port=58345 --tcp-port=58346 --discv5-udp-port=58348 --rest-address=0.0.0.0 --nat=extip:172.18.178.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dad0896fefa6bd4dc0f0110ccaac4edc32f97aead0721faf23bca2af5edfa30d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58349 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.178.69 waku 1f95ad5032f4dd0d881861dd9fb78616bc145fdb9255c81a3797a37eddde0ef6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1f95ad5032f4. Setting up logs at ./log/docker/publishing_node1_2024-12-18_03-27-15__c4895229-e843-4b23-9ce8-a452ecd8398c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58345
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58345/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58345/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58345/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58345/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.69/tcp/58346/p2p/16Uiu2HAmU8FwhN6nHqjhvPEusmMdqwM622qrwXE9GDbxWhq5iFem","/ip4/172.18.178.69/tcp/58347/ws/p2p/16Uiu2HAmU8FwhN6nHqjhvPEusmMdqwM622qrwXE9GDbxWhq5iFem"],"enrUri":"enr:-L24QMHjBVfczhmS_vj4wnHDJXnM2M9tbGvXWZ6UXISoa7CUGTc706GtrQcFVoDj_T1tJXKN2_0UabDy4SzB4T5U_7wCgmlkgnY0gmlwhKwSskWKbXVsdGlhZGRyc5YACASsErJFBuPqAAoErBKyRQbj690DgnJzhQADAQAAiXNlY3AyNTZrMaED5dud9yap23Ttf29-A_6BJtPoVR6Vk0Apfnqk7uSR0K6DdGNwguPqg3VkcILj7IV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-12-18_03-27-15__c4895229-e843-4b23-9ce8-a452ecd8398c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.236.182
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52083', '52084', '52085', '52086', '52087']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52083:52083 -p 52084:52084 -p 52085:52085 -p 52086:52086 -p 52087:52087 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52085 --rest-port=52083 --tcp-port=52084 --discv5-udp-port=52086 --rest-address=0.0.0.0 --nat=extip:172.18.236.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=81a213198c8036ee648ec3bdec9ca93d54a37be8ebf85ed0e691ec31f1ad63a4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QMHjBVfczhmS_vj4wnHDJXnM2M9tbGvXWZ6UXISoa7CUGTc706GtrQcFVoDj_T1tJXKN2_0UabDy4SzB4T5U_7wCgmlkgnY0gmlwhKwSskWKbXVsdGlhZGRyc5YACASsErJFBuPqAAoErBKyRQbj690DgnJzhQADAQAAiXNlY3AyNTZrMaED5dud9yap23Ttf29-A_6BJtPoVR6Vk0Apfnqk7uSR0K6DdGNwguPqg3VkcILj7IV3YWt1MgM --storenode=/ip4/172.18.178.69/tcp/58346/p2p/16Uiu2HAmU8FwhN6nHqjhvPEusmMdqwM622qrwXE9GDbxWhq5iFem --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.236.182 waku 0c86cc9ecbf50442b7cfcbfd9df48ddd2e8fc37461e54a2affe3d7e2d538801f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0c86cc9ecbf5. Setting up logs at ./log/docker/store_node1_2024-12-18_03-27-15__c4895229-e843-4b23-9ce8-a452ecd8398c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 52083
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52083/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QIwj4f5PxRceUM2KQS-xP0gsOWnb_xnPUCNf2JmzTbA9OFlh7PTeeWq-6BX6T533YPi1e-LQmR71J6Kc41vcSMuGAZPXzutGgmlkgnY0gmlwhKwRAAuCcnODAAMAiXNlY3AyNTZrMaECvWEXi3gu1e2TRctzUw84JOXwaB8kQn2wImMctv4jR2iDdGNwgst0g3VkcILLdoV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/52084/p2p/16Uiu2HAm8AvuMfLPgbmxhiBke96XJ6meSAcX33k8kwpufVTuCk63","/ip4/127.0.0.1/tcp/52085/ws/p2p/16Uiu2HAm8AvuMfLPgbmxhiBke96XJ6meSAcX33k8kwpufVTuCk63","/ip4/172.17.0.11/tcp/52084/p2p/16Uiu2HAm8AvuMfLPgbmxhiBke96XJ6meSAcX33k8kwpufVTuCk63","/ip4/172.17.0.11/tcp/52085/ws/p2p/16Uiu2HAm8AvuMfLPgbmxhiBke96XJ6meSAcX33k8kwpufVTuCk63"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52083/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.178.69/tcp/58346/p2p/16Uiu2HAmU8FwhN6nHqjhvPEusmMdqwM622qrwXE9GDbxWhq5iFem", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58345/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52083/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58345/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58345/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"G/FhQUc87dZeRLl2GlZuFB2nPJ4dEToMVehJFfwp/L8="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52083/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"378ec038c761cfaf6d3be0abdc5128944049b30e651641c88ff8a54cfcca6104","status_code":200,"status_desc":"OK","messages":[{"message_hash":"G/FhQUc87dZeRLl2GlZuFB2nPJ4dEToMVehJFfwp/L8="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1f95ad5032f4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0c86cc9ecbf5
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1f95ad5032f4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:44 Postgres container stopped and removed.