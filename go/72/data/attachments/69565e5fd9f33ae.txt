[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_filter_node2 with id: 2024-04-08_14-21-34__93dbea38-f7ad-47e9-bdb4-c8d6acd7ef24
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-04-08_14-21-34__93dbea38-f7ad-47e9-bdb4-c8d6acd7ef24__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.240.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['12799', '12800', '12801', '12802', '12803']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 12799:12799 -p 12800:12800 -p 12801:12801 -p 12802:12802 -p 12803:12803 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12801 --rest-port=12799 --tcp-port=12800 --discv5-udp-port=12802 --rest-address=0.0.0.0 --nat=extip:172.18.240.253 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12803 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.240.253 waku e4fd550bde9ea695bd629afc48f2d4d130b76730593d80eac9edee77b708702f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e4fd550bde9e. Setting up logs at ./log/docker/receiving_node1_2024-04-08_14-21-34__93dbea38-f7ad-47e9-bdb4-c8d6acd7ef24__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 12799
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12799/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.253/tcp/12800/p2p/16Uiu2HAkzbBEqVfMXfVqkVZpeV6bYDCRvkWKDd9zAB28MYND79XQ","/ip4/172.18.240.253/tcp/12801/ws/p2p/16Uiu2HAkzbBEqVfMXfVqkVZpeV6bYDCRvkWKDd9zAB28MYND79XQ"],"enrUri":"enr:-LG4QBUV3GGx4vM9YVAN7iaJO6njKRacerWp28EdAKHnsexlVZdWxGc2AiDlig0efEJ_fAv11F4e39l1zp5sm5HBhzwBgmlkgnY0gmlwhKwS8P2KbXVsdGlhZGRyc4wACgSsEvD9BjIB3QOCcnODAAAAiXNlY3AyNTZrMaECTLm-3tKqMfojeMRTObzdZgRFEGSj8F476mG3p7toBJODdGNwgjIAg3VkcIIyAoV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-04-08_14-21-34__93dbea38-f7ad-47e9-bdb4-c8d6acd7ef24__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.232.249
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['50069', '50070', '50071', '50072', '50073']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 50069:50069 -p 50070:50070 -p 50071:50071 -p 50072:50072 -p 50073:50073 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50071 --rest-port=50069 --tcp-port=50070 --discv5-udp-port=50072 --rest-address=0.0.0.0 --nat=extip:172.18.232.249 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50073 --metrics-logging=true --lightpush=false --relay=false --filternode=/ip4/172.18.240.253/tcp/12800/p2p/16Uiu2HAkzbBEqVfMXfVqkVZpeV6bYDCRvkWKDd9zAB28MYND79XQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.232.249 waku 60a5e24c0b3e9e3c35d102c051dc44bd3b98f4a59fa54459a112ee053931f0e9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 60a5e24c0b3e. Setting up logs at ./log/docker/receiving_node2_2024-04-08_14-21-34__93dbea38-f7ad-47e9-bdb4-c8d6acd7ef24__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 50069
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50069/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.249/tcp/50070/p2p/16Uiu2HAm5V3hv2hoDYSeTu94S68fG8vnM94WcSRYVHiyrSAiCrLX","/ip4/172.18.232.249/tcp/50071/ws/p2p/16Uiu2HAm5V3hv2hoDYSeTu94S68fG8vnM94WcSRYVHiyrSAiCrLX"],"enrUri":"enr:-LG4QJm0FoLky2BuEClwfWmlMhNmz4nUYeD6GjA-GuH76afzE_T1r9KjgD6DYM5pZKPK3CEWf-XX7NGV-msjBZCNeuYBgmlkgnY0gmlwhKwS6PmKbXVsdGlhZGRyc4wACgSsEuj5BsOX3QOCcnODAAAAiXNlY3AyNTZrMaEClXIteKjsYZlFKo5GJK2CBL9XGEkXcBWVjXMBYDSgUviDdGNwgsOWg3VkcILDmIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50069/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.240.253/tcp/12800/p2p/16Uiu2HAkzbBEqVfMXfVqkVZpeV6bYDCRvkWKDd9zAB28MYND79XQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-04-08_14-21-34__93dbea38-f7ad-47e9-bdb4-c8d6acd7ef24__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.113.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['26066', '26067', '26068', '26069', '26070']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 26066:26066 -p 26067:26067 -p 26068:26068 -p 26069:26069 -p 26070:26070 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=26068 --rest-port=26066 --tcp-port=26067 --discv5-udp-port=26069 --rest-address=0.0.0.0 --nat=extip:172.18.113.99 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LG4QBUV3GGx4vM9YVAN7iaJO6njKRacerWp28EdAKHnsexlVZdWxGc2AiDlig0efEJ_fAv11F4e39l1zp5sm5HBhzwBgmlkgnY0gmlwhKwS8P2KbXVsdGlhZGRyc4wACgSsEvD9BjIB3QOCcnODAAAAiXNlY3AyNTZrMaECTLm-3tKqMfojeMRTObzdZgRFEGSj8F476mG3p7toBJODdGNwgjIAg3VkcIIyAoV3YWt1Mg0 --lightpushnode=/ip4/172.18.240.253/tcp/12800/p2p/16Uiu2HAkzbBEqVfMXfVqkVZpeV6bYDCRvkWKDd9zAB28MYND79XQ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.113.99 waku d10f024e62436fea9c02f7fa8e472b1a0b70348f512fd3d4f082087e76de32f9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d10f024e6243. Setting up logs at ./log/docker/lightpush_node1_2024-04-08_14-21-34__93dbea38-f7ad-47e9-bdb4-c8d6acd7ef24__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 26066
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26066/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QADFndLrlGUOgEHC-CC3p6DTKo8Q935hEnnMXoyv14lKWaEt5U51KMHasPM1F7R1YR6j2e8tlFz1D8EaFcYTVZuGAY6-FgcPgmlkgnY0gmlwhKwRAAqKbXVsdGlhZGRyc5gACgSsEQAKBmXU3QMACgR_AAABBmXU3QOJc2VjcDI1NmsxoQOX0r7CoG9fu6yUG90RbfIyK8aHpHj9J5Vvv7mnWzF1WYN0Y3CCZdODdWRwgmXVhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/26067/p2p/16Uiu2HAmNseJBce2taJkz426g2GMNkKCCYTfVswTTXKTvAuPC5Bn","/ip4/127.0.0.1/tcp/26068/ws/p2p/16Uiu2HAmNseJBce2taJkz426g2GMNkKCCYTfVswTTXKTvAuPC5Bn","/ip4/172.17.0.10/tcp/26067/p2p/16Uiu2HAmNseJBce2taJkz426g2GMNkKCCYTfVswTTXKTvAuPC5Bn","/ip4/172.17.0.10/tcp/26068/ws/p2p/16Uiu2HAmNseJBce2taJkz426g2GMNkKCCYTfVswTTXKTvAuPC5Bn"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12799/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50069/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/0/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26066/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1712586099549007360}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:131 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12799/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1712586099549007360,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50069/filter/v2/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1712586099549007360,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id e4fd550bde9e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 60a5e24c0b3e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id d10f024e6243
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.