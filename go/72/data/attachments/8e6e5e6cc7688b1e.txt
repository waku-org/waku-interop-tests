[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_works_with_static_sharding with id: 2024-04-08_14-24-03__d06bc2b0-1233-40a4-a549-63f028067107
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node1_2024-04-08_14-24-03__d06bc2b0-1233-40a4-a549-63f028067107__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.sharding:sharding.py:243 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.27.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['8082', '8083', '8084', '8085', '8086']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 8082:8082 -p 8083:8083 -p 8084:8084 -p 8085:8085 -p 8086:8086 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8084 --rest-port=8082 --tcp-port=8083 --discv5-udp-port=8085 --rest-address=0.0.0.0 --nat=extip:172.18.27.218 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8086 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.128.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['9218', '9219', '9220', '9221', '9222']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 9218:9218 -p 9219:9219 -p 9220:9220 -p 9221:9221 -p 9222:9222 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9220 --rest-port=9218 --tcp-port=9219 --discv5-udp-port=9221 --rest-address=0.0.0.0 --nat=extip:172.18.128.84 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9222 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.128.84 waku 176080af9105b8bc19befcee97ee24b8f4d6e060d5472f1d01b4028f81b09d26
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 176080af9105. Setting up logs at ./log/docker/node1_2024-04-08_14-24-03__d06bc2b0-1233-40a4-a549-63f028067107__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 9218
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9218/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.84/tcp/9219/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.128.84/tcp/9220/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QAptUs49wVHX67CwAUo38QgwRoaS06nOEIWQlLL1NWBCZdBVDKi6MIQkwRfB8Zkb0wIo92uGFeKLp5CULK2raHsBgmlkgnY0gmlwhKwSgFSKbXVsdGlhZGRyc4wACgSsEoBUBiQE3QOCcnOFAAIBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCJAODdWRwgiQFhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node2_2024-04-08_14-24-03__d06bc2b0-1233-40a4-a549-63f028067107__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.sharding:sharding.py:243 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.86.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['32731', '32732', '32733', '32734', '32735']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 32731:32731 -p 32732:32732 -p 32733:32733 -p 32734:32734 -p 32735:32735 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32733 --rest-port=32731 --tcp-port=32732 --discv5-udp-port=32734 --rest-address=0.0.0.0 --nat=extip:172.18.86.81 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --relay=false --discv5-bootstrap-node=enr:-LO4QAptUs49wVHX67CwAUo38QgwRoaS06nOEIWQlLL1NWBCZdBVDKi6MIQkwRfB8Zkb0wIo92uGFeKLp5CULK2raHsBgmlkgnY0gmlwhKwSgFSKbXVsdGlhZGRyc4wACgSsEoBUBiQE3QOCcnOFAAIBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCJAODdWRwgiQFhXdha3UyBQ --filternode=/ip4/172.18.128.84/tcp/9219/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.86.81 waku dbb48ff7dd061f58b4674313fb369bda1d5acd16dc915efbf70e26245ff6d251
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID dbb48ff7dd06. Setting up logs at ./log/docker/node2_2024-04-08_14-24-03__d06bc2b0-1233-40a4-a549-63f028067107__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 32731
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32731/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QFc10kUBPAE49BNl_9bf-gB3ossKFTgpLOY9yyZ5JUe3O0doPJxPFDOficXo1Bt6N9QjQU0svW67yKPPU0X6fiaGAY6-GEchgmlkgnY0gmlwhKwRAAuKbXVsdGlhZGRyc5gACgR_AAABBn_d3QMACgSsEQALBn_d3QOJc2VjcDI1NmsxoQIvPteE0NES3wEgQRpqVGcPzA4TwBK_iSfG-hn01BPbbYN0Y3CCf9yDdWRwgn_ehXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/32732/p2p/16Uiu2HAkxc6igXr3izhKPsMiAFm4CfmtsNZfXbKpTPMPXJRZBuUp","/ip4/127.0.0.1/tcp/32733/ws/p2p/16Uiu2HAkxc6igXr3izhKPsMiAFm4CfmtsNZfXbKpTPMPXJRZBuUp","/ip4/172.17.0.11/tcp/32732/p2p/16Uiu2HAkxc6igXr3izhKPsMiAFm4CfmtsNZfXbKpTPMPXJRZBuUp","/ip4/172.17.0.11/tcp/32733/ws/p2p/16Uiu2HAkxc6igXr3izhKPsMiAFm4CfmtsNZfXbKpTPMPXJRZBuUp"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9218/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32731/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c0bd406f-1870-4e1a-9fed-331301082f68", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c0bd406f-1870-4e1a-9fed-331301082f68","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9218/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:205 Checking that peer NODE_2:harbor.status.im/wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32731/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F0/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1712586246986519040,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 176080af9105
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id dbb48ff7dd06
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.