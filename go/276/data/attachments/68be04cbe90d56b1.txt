[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_payload_less_than_150_kb with id: 2024-09-11_03-17-06__d374f0ba-d885-4767-8f3b-fe8ce5072d23
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-11_03-17-06__d374f0ba-d885-4767-8f3b-fe8ce5072d23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.147.201
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6750', '6751', '6752', '6753', '6754']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6750:6750 -p 6751:6751 -p 6752:6752 -p 6753:6753 -p 6754:6754 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6752 --rest-port=6750 --tcp-port=6751 --discv5-udp-port=6753 --rest-address=0.0.0.0 --nat=extip:172.18.147.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4145cbc540bcb7894ad4ab7ac4affa5cdaccbcdb3b9a4df26dbd8c7bcf8799c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6754 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.147.201 waku 8b1eb6d0d81219afc0c91baedb018b13daf5151e846a0bbe9ce328e241721e9e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8b1eb6d0d812. Setting up logs at ./log/docker/receiving_node1_2024-09-11_03-17-06__d374f0ba-d885-4767-8f3b-fe8ce5072d23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6750
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6750/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6750/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.201/tcp/6751/p2p/16Uiu2HAmHLV2uDvC9ypByJJMrZa3GMUxNV7sfTSyiBAkvLnEXLRa","/ip4/172.18.147.201/tcp/6752/ws/p2p/16Uiu2HAmHLV2uDvC9ypByJJMrZa3GMUxNV7sfTSyiBAkvLnEXLRa"],"enrUri":"enr:-LO4QJYs_6nFOM0dwqoB7HDs12MQFMoZkL5qEOfSHiPrnEpSGKKynZO7BIapFXBq1yH5yYCMpwtTp2vTc90OkE2X61ABgmlkgnY0gmlwhKwSk8mKbXVsdGlhZGRyc4wACgSsEpPJBhpg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNFjNTIIomIeFON2SYmkbEcqzlrXE1dh9EYboqwG9ZvHYN0Y3CCGl-DdWRwghphhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-11_03-17-06__d374f0ba-d885-4767-8f3b-fe8ce5072d23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.34.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['43791', '43792', '43793', '43794', '43795']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 43791:43791 -p 43792:43792 -p 43793:43793 -p 43794:43794 -p 43795:43795 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43793 --rest-port=43791 --tcp-port=43792 --discv5-udp-port=43794 --rest-address=0.0.0.0 --nat=extip:172.18.34.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0bb59a12c72a604a7aeea34e9b99fab60eba7ca508dac1fe9ee2e9aeeee76379 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43795 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.34.77 waku 26d72c31380ea622ce2f55c61534464cc7d9d815a02f299283ef80862068c4b4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 26d72c31380e. Setting up logs at ./log/docker/receiving_node2_2024-09-11_03-17-06__d374f0ba-d885-4767-8f3b-fe8ce5072d23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 43791
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43791/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43791/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.77/tcp/43792/p2p/16Uiu2HAkzW3C3bp1dy95mcMF6jPiGdSxPTErFBJNCUk1szRLT9vv","/ip4/172.18.34.77/tcp/43793/ws/p2p/16Uiu2HAkzW3C3bp1dy95mcMF6jPiGdSxPTErFBJNCUk1szRLT9vv"],"enrUri":"enr:-LO4QEYMV74QTsm6jqBldz6wcC39V292DaCbwFr2AhgiRYPQHgA_IbYV9ssw7hQwHfTi3WcwJJ-4NICQC7LZFnkiixIBgmlkgnY0gmlwhKwSIk2KbXVsdGlhZGRyc4wACgSsEiJNBqsR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJLaL3SytrBpsBcge4_4dlFWhG0_E5v74YRSRsBEmV_14N0Y3CCqxCDdWRwgqsShXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43791/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.201/tcp/6751/p2p/16Uiu2HAmHLV2uDvC9ypByJJMrZa3GMUxNV7sfTSyiBAkvLnEXLRa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-11_03-17-06__d374f0ba-d885-4767-8f3b-fe8ce5072d23__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.155.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52100', '52101', '52102', '52103', '52104']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52100:52100 -p 52101:52101 -p 52102:52102 -p 52103:52103 -p 52104:52104 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52102 --rest-port=52100 --tcp-port=52101 --discv5-udp-port=52103 --rest-address=0.0.0.0 --nat=extip:172.18.155.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c0967f2db20ab87dddcf80ed3c3af08e7deea5ce13b930e0ef1fd4afcc1f8bfe --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QJYs_6nFOM0dwqoB7HDs12MQFMoZkL5qEOfSHiPrnEpSGKKynZO7BIapFXBq1yH5yYCMpwtTp2vTc90OkE2X61ABgmlkgnY0gmlwhKwSk8mKbXVsdGlhZGRyc4wACgSsEpPJBhpg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNFjNTIIomIeFON2SYmkbEcqzlrXE1dh9EYboqwG9ZvHYN0Y3CCGl-DdWRwghphhXdha3UyCQ --lightpushnode=/ip4/172.18.147.201/tcp/6751/p2p/16Uiu2HAmHLV2uDvC9ypByJJMrZa3GMUxNV7sfTSyiBAkvLnEXLRa --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.155.5 waku 7ecd240bfc1955df28448d824b1c83afaa0a20ccd043335a3c10438b99f65fd4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7ecd240bfc19. Setting up logs at ./log/docker/lightpush_node1_2024-09-11_03-17-06__d374f0ba-d885-4767-8f3b-fe8ce5072d23__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 52100
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52100/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QKwGiQehCAe2eSFGPYEsbEHM6y77nq0ZQv0YDtzlLlnqJmB_8xhsexiQ-dA4PdCb_DLr2-yhNMx-vcamkj-bXrGGAZHfFb-GgmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQLu2V2bUvR83UvxH3BYXZi7lyOQVzmWd-7MNj7X8lgLl4N0Y3CCy4WDdWRwgsuHhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/52101/p2p/16Uiu2HAmBW3FXoW4hwnvaCBm8ws4oMdojVSJRSGxwoWSAfSvcsYa","/ip4/127.0.0.1/tcp/52102/ws/p2p/16Uiu2HAmBW3FXoW4hwnvaCBm8ws4oMdojVSJRSGxwoWSAfSvcsYa","/ip4/172.17.0.8/tcp/52101/p2p/16Uiu2HAmBW3FXoW4hwnvaCBm8ws4oMdojVSJRSGxwoWSAfSvcsYa","/ip4/172.17.0.8/tcp/52102/ws/p2p/16Uiu2HAmBW3FXoW4hwnvaCBm8ws4oMdojVSJRSGxwoWSAfSvcsYa"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52100/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.147.201/tcp/6751/p2p/16Uiu2HAmHLV2uDvC9ypByJJMrZa3GMUxNV7sfTSyiBAkvLnEXLRa", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52100/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.34.77/tcp/43792/p2p/16Uiu2HAkzW3C3bp1dy95mcMF6jPiGdSxPTErFBJNCUk1szRLT9vv", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6750/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43791/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:54 Running test with payload length of 143360 bytes
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:custom_logger.py:10 Log line was discarded because it's longer than max_log_line_length=5000
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6750/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:custom_logger.py:10 Log line was discarded because it's longer than max_log_line_length=5000
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43791/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:custom_logger.py:10 Log line was discarded because it's longer than max_log_line_length=5000
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8b1eb6d0d812
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 26d72c31380e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7ecd240bfc19
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.