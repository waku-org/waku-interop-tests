[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_with_filter with id: 2024-05-08_03-22-18__52e20bee-4b19-4888-b9c7-3014ba4f209a
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-08_03-22-18__52e20bee-4b19-4888-b9c7-3014ba4f209a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.160.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['8730', '8731', '8732', '8733', '8734']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 8730:8730 -p 8731:8731 -p 8732:8732 -p 8733:8733 -p 8734:8734 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8732 --rest-port=8730 --tcp-port=8731 --discv5-udp-port=8733 --rest-address=0.0.0.0 --nat=extip:172.18.160.253 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8734 --metrics-logging=true --store=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.160.253 waku 04de07ef8ee423edc6b31978bbaf59167ed3fb155d72593b24bfc13ff1dc3d11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 04de07ef8ee4. Setting up logs at ./log/docker/publishing_node1_2024-05-08_03-22-18__52e20bee-4b19-4888-b9c7-3014ba4f209a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 8730
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8730/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.253/tcp/8731/p2p/16Uiu2HAmGTZbd8UaHRmNkbpVTRUY6kWhxMxyZwA2ccHGqMmq8mQe","/ip4/172.18.160.253/tcp/8732/ws/p2p/16Uiu2HAmGTZbd8UaHRmNkbpVTRUY6kWhxMxyZwA2ccHGqMmq8mQe"],"enrUri":"enr:-LO4QGDyHxogtkXe3OxnIQ7rQtxgbGvpIaBEqzrA09bKH3FJTyZI3vO0itK0KHGY_MNXfew65eTeIVACnMspOIST1LIBgmlkgnY0gmlwhKwSoP2KbXVsdGlhZGRyc4wACgSsEqD9BiIc3QOCcnOFAAABAACJc2VjcDI1NmsxoQM4gV7jEkKcCU-J6y6yUfJyIemMmNUbyyQFRziuhq3hI4N0Y3CCIhuDdWRwgiIdhXdha3UyBw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-08_03-22-18__52e20bee-4b19-4888-b9c7-3014ba4f209a__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.198.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['21265', '21266', '21267', '21268', '21269']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 21265:21265 -p 21266:21266 -p 21267:21267 -p 21268:21268 -p 21269:21269 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=21267 --rest-port=21265 --tcp-port=21266 --discv5-udp-port=21268 --rest-address=0.0.0.0 --nat=extip:172.18.198.169 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QGDyHxogtkXe3OxnIQ7rQtxgbGvpIaBEqzrA09bKH3FJTyZI3vO0itK0KHGY_MNXfew65eTeIVACnMspOIST1LIBgmlkgnY0gmlwhKwSoP2KbXVsdGlhZGRyc4wACgSsEqD9BiIc3QOCcnOFAAABAACJc2VjcDI1NmsxoQM4gV7jEkKcCU-J6y6yUfJyIemMmNUbyyQFRziuhq3hI4N0Y3CCIhuDdWRwgiIdhXdha3UyBw --storenode=/ip4/172.18.160.253/tcp/8731/p2p/16Uiu2HAmGTZbd8UaHRmNkbpVTRUY6kWhxMxyZwA2ccHGqMmq8mQe --store=false --relay=false --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.198.169 waku c2fc2846f204214432169bdecffc35b24296249efb713f87b667447d7142dd2b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c2fc2846f204. Setting up logs at ./log/docker/store_node1_2024-05-08_03-22-18__52e20bee-4b19-4888-b9c7-3014ba4f209a__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 21265
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21265/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QOFoAXoiBEvbZ74nArPz0cr8zkoeUAaBYpDl_KOiR7oiDpf0K1o3pkHlL06v1V-1z1EbOTpDKoq7k1dwMDsiz0uGAY9WOTSGgmlkgnY0gmlwhKwRAAiKbXVsdGlhZGRyc5gACgR_AAABBlMT3QMACgSsEQAIBlMT3QOJc2VjcDI1NmsxoQKm5VsFVIh96oz4m4Tes97dshCkREXOlMIrVV0M9T0LN4N0Y3CCUxKDdWRwglMUhXdha3UyBA","listenAddresses":["/ip4/127.0.0.1/tcp/21266/p2p/16Uiu2HAm6fAW1kiPumNzpCCqb7sTSH4VzHB7sC9thBh5oDynSxk6","/ip4/127.0.0.1/tcp/21267/ws/p2p/16Uiu2HAm6fAW1kiPumNzpCCqb7sTSH4VzHB7sC9thBh5oDynSxk6","/ip4/172.17.0.8/tcp/21266/p2p/16Uiu2HAm6fAW1kiPumNzpCCqb7sTSH4VzHB7sC9thBh5oDynSxk6","/ip4/172.17.0.8/tcp/21267/ws/p2p/16Uiu2HAm6fAW1kiPumNzpCCqb7sTSH4VzHB7sC9thBh5oDynSxk6"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21265/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.160.253/tcp/8731/p2p/16Uiu2HAmGTZbd8UaHRmNkbpVTRUY6kWhxMxyZwA2ccHGqMmq8mQe", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8730/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8730/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8730/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715138541736082944,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 04de07ef8ee4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id c2fc2846f204
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-08_03-22-18__52e20bee-4b19-4888-b9c7-3014ba4f209a__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-08_03-22-18__52e20bee-4b19-4888-b9c7-3014ba4f209a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_with_filter with id: 2024-05-08_03-22-25__8d4bd3c1-4fe4-4a0d-b056-643ae41137ab
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-08_03-22-25__8d4bd3c1-4fe4-4a0d-b056-643ae41137ab__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.4.146
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['49457', '49458', '49459', '49460', '49461']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 49457:49457 -p 49458:49458 -p 49459:49459 -p 49460:49460 -p 49461:49461 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49459 --rest-port=49457 --tcp-port=49458 --discv5-udp-port=49460 --rest-address=0.0.0.0 --nat=extip:172.18.4.146 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49461 --metrics-logging=true --store=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.4.146 waku cf635feead3fe5d4e2c403a371c7e0bdca537cbffcbd9f5d789d1d01272e7461
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID cf635feead3f. Setting up logs at ./log/docker/publishing_node1_2024-05-08_03-22-25__8d4bd3c1-4fe4-4a0d-b056-643ae41137ab__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 49457
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49457/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.146/tcp/49458/p2p/16Uiu2HAmHwB9wre8cMeK6VzGhGgsddeGN41iBkU7mPZkHQsLub2F","/ip4/172.18.4.146/tcp/49459/ws/p2p/16Uiu2HAmHwB9wre8cMeK6VzGhGgsddeGN41iBkU7mPZkHQsLub2F"],"enrUri":"enr:-LO4QGuNSRecF2H4YqS-eccZTQD9oHBkw--lZMsmKmJwO7eRDBLh8gNkA3deR7cW82prjDbYYzzo6nLTjsDU7kBJI34BgmlkgnY0gmlwhKwSBJKKbXVsdGlhZGRyc4wACgSsEgSSBsEz3QOCcnOFAAABAACJc2VjcDI1NmsxoQNOb_G11eEwukuANm3GB2Ld7eSuXgs64TyAGEoPZuo7YIN0Y3CCwTKDdWRwgsE0hXdha3UyBw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-08_03-22-25__8d4bd3c1-4fe4-4a0d-b056-643ae41137ab__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.228.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['52092', '52093', '52094', '52095', '52096']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 52092:52092 -p 52093:52093 -p 52094:52094 -p 52095:52095 -p 52096:52096 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52094 --rest-port=52092 --tcp-port=52093 --discv5-udp-port=52095 --rest-address=0.0.0.0 --nat=extip:172.18.228.178 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QGuNSRecF2H4YqS-eccZTQD9oHBkw--lZMsmKmJwO7eRDBLh8gNkA3deR7cW82prjDbYYzzo6nLTjsDU7kBJI34BgmlkgnY0gmlwhKwSBJKKbXVsdGlhZGRyc4wACgSsEgSSBsEz3QOCcnOFAAABAACJc2VjcDI1NmsxoQNOb_G11eEwukuANm3GB2Ld7eSuXgs64TyAGEoPZuo7YIN0Y3CCwTKDdWRwgsE0hXdha3UyBw --storenode=/ip4/172.18.4.146/tcp/49458/p2p/16Uiu2HAmHwB9wre8cMeK6VzGhGgsddeGN41iBkU7mPZkHQsLub2F --store=false --relay=false --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.228.178 waku 983fcdefca4c8191f7de1711c942cdc605108092fc11c4a6e626f673ef2958a7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 983fcdefca4c. Setting up logs at ./log/docker/store_node1_2024-05-08_03-22-25__8d4bd3c1-4fe4-4a0d-b056-643ae41137ab__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 52092
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52092/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QBNwzgIm-wzFI1qtZk3wXzZ2H-SR3Fo8MS8xOZ7kdVJvJwpAShc5BaZfk52eY3FyP4Z1eWvs7MEq13UAlVATwvuGAY9WOU8ugmlkgnY0gmlwhKwRAAaKbXVsdGlhZGRyc5gACgSsEQAGBst-3QMACgR_AAABBst-3QOJc2VjcDI1NmsxoQI7Jj1nUAahaguPQUUyMBGc5f6Ye2zbsiwMKcVx7-ody4N0Y3CCy32DdWRwgst_hXdha3UyBA","listenAddresses":["/ip4/127.0.0.1/tcp/52093/p2p/16Uiu2HAkyQZrU5REDrfNH8t1B68L3p8rJ3XS8PEi15dQevSLeVC6","/ip4/127.0.0.1/tcp/52094/ws/p2p/16Uiu2HAkyQZrU5REDrfNH8t1B68L3p8rJ3XS8PEi15dQevSLeVC6","/ip4/172.17.0.6/tcp/52093/p2p/16Uiu2HAkyQZrU5REDrfNH8t1B68L3p8rJ3XS8PEi15dQevSLeVC6","/ip4/172.17.0.6/tcp/52094/ws/p2p/16Uiu2HAkyQZrU5REDrfNH8t1B68L3p8rJ3XS8PEi15dQevSLeVC6"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52092/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.4.146/tcp/49458/p2p/16Uiu2HAmHwB9wre8cMeK6VzGhGgsddeGN41iBkU7mPZkHQsLub2F", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49457/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49457/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49457/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715138548611005440,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id cf635feead3f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 983fcdefca4c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-08_03-22-25__8d4bd3c1-4fe4-4a0d-b056-643ae41137ab__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-08_03-22-25__8d4bd3c1-4fe4-4a0d-b056-643ae41137ab__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_with_filter with id: 2024-05-08_03-22-32__c723a35f-aaa7-483d-ad60-cfb8481e7444
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-08_03-22-32__c723a35f-aaa7-483d-ad60-cfb8481e7444__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.147.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60637', '60638', '60639', '60640', '60641']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60637:60637 -p 60638:60638 -p 60639:60639 -p 60640:60640 -p 60641:60641 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60639 --rest-port=60637 --tcp-port=60638 --discv5-udp-port=60640 --rest-address=0.0.0.0 --nat=extip:172.18.147.33 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60641 --metrics-logging=true --store=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.147.33 waku add6663d361067e9f4b96bf922628cf980457ec9f0ae9cf09ad53b2523e3758a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID add6663d3610. Setting up logs at ./log/docker/publishing_node1_2024-05-08_03-22-32__c723a35f-aaa7-483d-ad60-cfb8481e7444__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 60637
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60637/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.33/tcp/60638/p2p/16Uiu2HAkwjcCFUbLwwx6sFcp6FrkNK8FWhbxENRqgaE9oKC9iCWP","/ip4/172.18.147.33/tcp/60639/ws/p2p/16Uiu2HAkwjcCFUbLwwx6sFcp6FrkNK8FWhbxENRqgaE9oKC9iCWP"],"enrUri":"enr:-LO4QBfF05ps9abvCHRIQNZOHyD54_ufM12tX8L_Zq2fgiSGYGy-z-npHbNudekWDwBXFjFOJTogxWzoeG5Z4URh_20BgmlkgnY0gmlwhKwSkyGKbXVsdGlhZGRyc4wACgSsEpMhBuzf3QOCcnOFAAABAACJc2VjcDI1NmsxoQIiT4xnCGQfa391TXXMCty35RE1JuOUNro9g3xymevnfIN0Y3CC7N6DdWRwguzghXdha3UyBw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-08_03-22-32__c723a35f-aaa7-483d-ad60-cfb8481e7444__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.131.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['29672', '29673', '29674', '29675', '29676']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 29672:29672 -p 29673:29673 -p 29674:29674 -p 29675:29675 -p 29676:29676 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29674 --rest-port=29672 --tcp-port=29673 --discv5-udp-port=29675 --rest-address=0.0.0.0 --nat=extip:172.18.131.225 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QBfF05ps9abvCHRIQNZOHyD54_ufM12tX8L_Zq2fgiSGYGy-z-npHbNudekWDwBXFjFOJTogxWzoeG5Z4URh_20BgmlkgnY0gmlwhKwSkyGKbXVsdGlhZGRyc4wACgSsEpMhBuzf3QOCcnOFAAABAACJc2VjcDI1NmsxoQIiT4xnCGQfa391TXXMCty35RE1JuOUNro9g3xymevnfIN0Y3CC7N6DdWRwguzghXdha3UyBw --storenode=/ip4/172.18.147.33/tcp/60638/p2p/16Uiu2HAkwjcCFUbLwwx6sFcp6FrkNK8FWhbxENRqgaE9oKC9iCWP --store=false --relay=false --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.131.225 waku 55921f6b325499674fddb24512297d1f966d699bb2eaf56bd889248dcb6dddb6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 55921f6b3254. Setting up logs at ./log/docker/store_node1_2024-05-08_03-22-32__c723a35f-aaa7-483d-ad60-cfb8481e7444__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 29672
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29672/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QP12k8E6xl-tzjFoP2uBA0SofbwYuZlRVEtYU3-3jIuWaZz_TcYRBmqVQiiwG7VMZ7FIpty6NVxKrkkZ8GXuc36GAY9WOWq3gmlkgnY0gmlwhKwRAAKKbXVsdGlhZGRyc5gACgR_AAABBnPq3QMACgSsEQACBnPq3QOJc2VjcDI1NmsxoQOffVTVTsOrGmrDAyKRd0z9p_o01Ux_05glyKXcZOyUb4N0Y3CCc-mDdWRwgnPrhXdha3UyBA","listenAddresses":["/ip4/127.0.0.1/tcp/29673/p2p/16Uiu2HAmPPa21kFomkhbCiBPUFc5srdqKeKSyCsdhtCZTHt13EZk","/ip4/127.0.0.1/tcp/29674/ws/p2p/16Uiu2HAmPPa21kFomkhbCiBPUFc5srdqKeKSyCsdhtCZTHt13EZk","/ip4/172.17.0.2/tcp/29673/p2p/16Uiu2HAmPPa21kFomkhbCiBPUFc5srdqKeKSyCsdhtCZTHt13EZk","/ip4/172.17.0.2/tcp/29674/ws/p2p/16Uiu2HAmPPa21kFomkhbCiBPUFc5srdqKeKSyCsdhtCZTHt13EZk"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29672/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.147.33/tcp/60638/p2p/16Uiu2HAkwjcCFUbLwwx6sFcp6FrkNK8FWhbxENRqgaE9oKC9iCWP", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60637/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60637/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60637/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715138555684871424,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id add6663d3610
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 55921f6b3254
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-08_03-22-32__c723a35f-aaa7-483d-ad60-cfb8481e7444__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-08_03-22-32__c723a35f-aaa7-483d-ad60-cfb8481e7444__harbor.status.im_wakuorg_nwaku:latest.log