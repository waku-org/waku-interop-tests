[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-08-29_13-13-53__3e1e2dad-a965-4a43-bbc5-397b93921280
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-29_13-13-53__3e1e2dad-a965-4a43-bbc5-397b93921280__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.43.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64373', '64374', '64375', '64376', '64377']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64373:64373 -p 64374:64374 -p 64375:64375 -p 64376:64376 -p 64377:64377 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64375 --rest-port=64373 --tcp-port=64374 --discv5-udp-port=64376 --rest-address=0.0.0.0 --nat=extip:172.18.43.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7ec60bd5dce7ce46bc96c3fa54af1a9bf5aa5f8b93a6bd80fc935a4152c43c91 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64377 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.43.230 waku 361791683c1b2933feba21a7ab1394954497d3520864bc67f49aaca4a31c8993
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 361791683c1b. Setting up logs at ./log/docker/receiving_node1_2024-08-29_13-13-53__3e1e2dad-a965-4a43-bbc5-397b93921280__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64373
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64373/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64373/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.230/tcp/64374/p2p/16Uiu2HAmH4YUMFrKvrPGovsfhDXTX1ioNHvEna73u8rwexxZ2xeU","/ip4/172.18.43.230/tcp/64375/ws/p2p/16Uiu2HAmH4YUMFrKvrPGovsfhDXTX1ioNHvEna73u8rwexxZ2xeU"],"enrUri":"enr:-LO4QCsuVMY412-ZnWi33AT5T56kwXAf2pP1ms6D9Y6GRt_AeDts9pDy1anpcjl_NOUacpfy0_DIo7VZ6BYmOB6bD_EBgmlkgnY0gmlwhKwSK-aKbXVsdGlhZGRyc4wACgSsEivmBvt33QOCcnOFAAMBAACJc2VjcDI1NmsxoQNBd20s8GdxixBPUnmOHyBpbsw1VNjIDwTOZbnHHhtlAYN0Y3CC-3aDdWRwgvt4hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-29_13-13-53__3e1e2dad-a965-4a43-bbc5-397b93921280__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.85.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50444', '50445', '50446', '50447', '50448']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50444:50444 -p 50445:50445 -p 50446:50446 -p 50447:50447 -p 50448:50448 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50446 --rest-port=50444 --tcp-port=50445 --discv5-udp-port=50447 --rest-address=0.0.0.0 --nat=extip:172.18.85.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c581cdcabeb4d0f2ae7dda6eacedb4e2bdde59eb8af5d2eb61abf4caee854ad5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50448 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.85.76 waku 279345f4c08f5d3fdde077cf3a08e799d83b98b5002cdbd9ddc5d2492efe4d0e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 279345f4c08f. Setting up logs at ./log/docker/receiving_node2_2024-08-29_13-13-53__3e1e2dad-a965-4a43-bbc5-397b93921280__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50444
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50444/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50444/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.76/tcp/50445/p2p/16Uiu2HAm2UbuVDH8oat2KGgXy1iqCFYkyvimK8YDFSKGT8YG78CS","/ip4/172.18.85.76/tcp/50446/ws/p2p/16Uiu2HAm2UbuVDH8oat2KGgXy1iqCFYkyvimK8YDFSKGT8YG78CS"],"enrUri":"enr:-LO4QDqkRj9Lz1QzJj6hO_cNNNNrjpFTGHN_Ky7jWCpGcX_vCVbYWJrQiR8Kt22wAfVOiZ5sb7DkG2yC0bs66EUfLnMBgmlkgnY0gmlwhKwSVUyKbXVsdGlhZGRyc4wACgSsElVMBsUO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJowfGzlyaDWmXJBtjDJovuoMvtqvZCgmINAvfKBn1Rk4N0Y3CCxQ2DdWRwgsUPhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50444/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.43.230/tcp/64374/p2p/16Uiu2HAmH4YUMFrKvrPGovsfhDXTX1ioNHvEna73u8rwexxZ2xeU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-29_13-13-53__3e1e2dad-a965-4a43-bbc5-397b93921280__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.15.172
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24678', '24679', '24680', '24681', '24682']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24678:24678 -p 24679:24679 -p 24680:24680 -p 24681:24681 -p 24682:24682 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24680 --rest-port=24678 --tcp-port=24679 --discv5-udp-port=24681 --rest-address=0.0.0.0 --nat=extip:172.18.15.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfbb677e7bd2fc20c2ccb3446d6e1d9b8971391f7d50864045c476b4174b9a65 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QCsuVMY412-ZnWi33AT5T56kwXAf2pP1ms6D9Y6GRt_AeDts9pDy1anpcjl_NOUacpfy0_DIo7VZ6BYmOB6bD_EBgmlkgnY0gmlwhKwSK-aKbXVsdGlhZGRyc4wACgSsEivmBvt33QOCcnOFAAMBAACJc2VjcDI1NmsxoQNBd20s8GdxixBPUnmOHyBpbsw1VNjIDwTOZbnHHhtlAYN0Y3CC-3aDdWRwgvt4hXdha3UyCQ --lightpushnode=/ip4/172.18.43.230/tcp/64374/p2p/16Uiu2HAmH4YUMFrKvrPGovsfhDXTX1ioNHvEna73u8rwexxZ2xeU --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.15.172 waku fec027559eb92fef2033d9d33bd4e31ae8c2d9b913f2752f2f2221f2d83fb5ee
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fec027559eb9. Setting up logs at ./log/docker/lightpush_node1_2024-08-29_13-13-53__3e1e2dad-a965-4a43-bbc5-397b93921280__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 24678
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24678/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QMs99fOxxC7tZGgfWf97MPFba4UgF2pG4CNjQHAU4o8_FGSkz4FBmo4B8SZ3LbAfJC35LPLnEuVtAIs_NSOKdueGAZGeRXNygmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQLqPXyLPVdtbhlkjFuPF7gYlhoYlTnHhU63B_VN7lA7JYN0Y3CCYGeDdWRwgmBphXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/24679/p2p/16Uiu2HAmBC3m3jQvaopGKhP4jZv5wrb5Mh814NHUvvWrsxVKe5Bi","/ip4/127.0.0.1/tcp/24680/ws/p2p/16Uiu2HAmBC3m3jQvaopGKhP4jZv5wrb5Mh814NHUvvWrsxVKe5Bi","/ip4/172.17.0.2/tcp/24679/p2p/16Uiu2HAmBC3m3jQvaopGKhP4jZv5wrb5Mh814NHUvvWrsxVKe5Bi","/ip4/172.17.0.2/tcp/24680/ws/p2p/16Uiu2HAmBC3m3jQvaopGKhP4jZv5wrb5Mh814NHUvvWrsxVKe5Bi"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24678/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.43.230/tcp/64374/p2p/16Uiu2HAmH4YUMFrKvrPGovsfhDXTX1ioNHvEna73u8rwexxZ2xeU", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24678/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.85.76/tcp/50445/p2p/16Uiu2HAm2UbuVDH8oat2KGgXy1iqCFYkyvimK8YDFSKGT8YG78CS", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64373/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50444/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24678/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724937238465612032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:24678/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x7579cf2f632935e52bb9b5d702bc125e373a50c8b8c4cfbe0f63e4861b6d78c9'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 361791683c1b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 279345f4c08f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fec027559eb9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.