[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-18_03-11-09__5b290b74-418a-4cd1-bb5d-714612f3a727
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_03-11-09__5b290b74-418a-4cd1-bb5d-714612f3a727__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.24.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36120', '36121', '36122', '36123', '36124']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36120:36120 -p 36121:36121 -p 36122:36122 -p 36123:36123 -p 36124:36124 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36122 --rest-port=36120 --tcp-port=36121 --discv5-udp-port=36123 --rest-address=0.0.0.0 --nat=extip:172.18.24.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfc50cb4fc06cf760ecadea8de1b8ecaeb08ad99f0ac9ba0fed7bee2bb6ec5f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36124 --metrics-logging=true --store=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f6abc71ac5af. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.24.206 waku 362ae6cccec58e930dde686ccfcd51862d3df8a31adedeec16be00576d80094c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 362ae6cccec5. Setting up logs at ./log/docker/publishing_node1_2025-01-18_03-11-09__5b290b74-418a-4cd1-bb5d-714612f3a727__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36120
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9d9f5801918e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36120/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36120/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.206/tcp/36121/p2p/16Uiu2HAmFNJHhf5WePVqbujcD9cqjAZC51FakAEVPYe2KJXucykc","/ip4/172.18.24.206/tcp/36122/ws/p2p/16Uiu2HAmFNJHhf5WePVqbujcD9cqjAZC51FakAEVPYe2KJXucykc"],"enrUri":"enr:-L24QCJKfRI4iM4ZdMIT-ifuVjU2XD8xNuA28Y2PSA-e18trJY9UBBzjMqCGPjf2jZlBS6ooxCujFJPwGRa1-zeYFDACgmlkgnY0gmlwhKwSGM6KbXVsdGlhZGRyc5YACASsEhjOBo0ZAAoErBIYzgaNGt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDKEx4QOcmFBQxA-gjIHgP5YWMW8FtZWJWReM15aNBQ3mDdGNwgo0Zg3VkcIKNG4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_03-11-09__5b290b74-418a-4cd1-bb5d-714612f3a727__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.146.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7918', '7919', '7920', '7921', '7922']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7918:7918 -p 7919:7919 -p 7920:7920 -p 7921:7921 -p 7922:7922 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7920 --rest-port=7918 --tcp-port=7919 --discv5-udp-port=7921 --rest-address=0.0.0.0 --nat=extip:172.18.146.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1df7fdec2819081a499a3945f94a46ce69faf505d456cc2510f03eb8dfaaa9a5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QCJKfRI4iM4ZdMIT-ifuVjU2XD8xNuA28Y2PSA-e18trJY9UBBzjMqCGPjf2jZlBS6ooxCujFJPwGRa1-zeYFDACgmlkgnY0gmlwhKwSGM6KbXVsdGlhZGRyc5YACASsEhjOBo0ZAAoErBIYzgaNGt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDKEx4QOcmFBQxA-gjIHgP5YWMW8FtZWJWReM15aNBQ3mDdGNwgo0Zg3VkcIKNG4V3YWt1MgM --storenode=/ip4/172.18.24.206/tcp/36121/p2p/16Uiu2HAmFNJHhf5WePVqbujcD9cqjAZC51FakAEVPYe2KJXucykc --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.146.56 waku a94acd62c59a0e107d0c87b49fc66cdb259b1f1f0f366ab004c6e5a53c073665
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a94acd62c59a. Setting up logs at ./log/docker/store_node1_2025-01-18_03-11-09__5b290b74-418a-4cd1-bb5d-714612f3a727__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 7918
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7918/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QBje97pTUWQy3Bq8P6FYdPRzypS5KJXvcxuGL1uZVR8GTWsEW8s6u_MLGoxQcBCz3nHQSyLSJtPnUbEjehoEh0uGAZR3ZKHfgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECFYNTq2BYJKvsjtTJR7FexF4wJlvXB2XbYqNNqBKbPxmDdGNwgh7vg3VkcIIe8YV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/7919/p2p/16Uiu2HAkvsegqvAPwqfZ3GPrB51L4gCivEcYB14UZyonodPUiZ4L","/ip4/127.0.0.1/tcp/7920/ws/p2p/16Uiu2HAkvsegqvAPwqfZ3GPrB51L4gCivEcYB14UZyonodPUiZ4L","/ip4/172.17.0.3/tcp/7919/p2p/16Uiu2HAkvsegqvAPwqfZ3GPrB51L4gCivEcYB14UZyonodPUiZ4L","/ip4/172.17.0.3/tcp/7920/ws/p2p/16Uiu2HAkvsegqvAPwqfZ3GPrB51L4gCivEcYB14UZyonodPUiZ4L"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7918/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.24.206/tcp/36121/p2p/16Uiu2HAmFNJHhf5WePVqbujcD9cqjAZC51FakAEVPYe2KJXucykc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36120/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7918/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36120/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36120/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 362ae6cccec5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a94acd62c59a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_03-11-09__5b290b74-418a-4cd1-bb5d-714612f3a727__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_03-11-09__5b290b74-418a-4cd1-bb5d-714612f3a727__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-18_03-11-13__4c6fbb04-bfc2-47a6-bfd5-156b3358ed58
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_03-11-13__4c6fbb04-bfc2-47a6-bfd5-156b3358ed58__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.47.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59374', '59375', '59376', '59377', '59378']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59374:59374 -p 59375:59375 -p 59376:59376 -p 59377:59377 -p 59378:59378 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59376 --rest-port=59374 --tcp-port=59375 --discv5-udp-port=59377 --rest-address=0.0.0.0 --nat=extip:172.18.47.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ea2c0b5c998fbdedb6e8e66e868ec294cdc5fae3effdecbdaac99ad01f07bbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59378 --metrics-logging=true --store=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 362ae6cccec5. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.47.177 waku fae8a261c5638c8ac0bcdd9981ee62962d154fc4217984b17fb9043f0cf95350
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fae8a261c563. Setting up logs at ./log/docker/publishing_node1_2025-01-18_03-11-13__4c6fbb04-bfc2-47a6-bfd5-156b3358ed58__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 59374
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a94acd62c59a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59374/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59374/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.177/tcp/59375/p2p/16Uiu2HAmL67iUdFW9bHnNp4gJPRyRVkpGUgntKALqbvoPrK9zSER","/ip4/172.18.47.177/tcp/59376/ws/p2p/16Uiu2HAmL67iUdFW9bHnNp4gJPRyRVkpGUgntKALqbvoPrK9zSER"],"enrUri":"enr:-L24QC-2-F1r-GP3XSSiuuB31IL4nGWH1Mvv0_1Lbf7SHXjiCDLPA74O3wtGrpMGWvIkhtQJJ3YUX7nFveGXWdN2FhMCgmlkgnY0gmlwhKwSL7GKbXVsdGlhZGRyc5YACASsEi-xBufvAAoErBIvsQbn8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDbnGoHCNnK8rpQBlVJFRdIqtKfnmaGHKMEBpbXb67bXaDdGNwgufvg3VkcILn8YV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_03-11-13__4c6fbb04-bfc2-47a6-bfd5-156b3358ed58__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.50.172
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8032', '8033', '8034', '8035', '8036']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8032:8032 -p 8033:8033 -p 8034:8034 -p 8035:8035 -p 8036:8036 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=8034 --rest-port=8032 --tcp-port=8033 --discv5-udp-port=8035 --rest-address=0.0.0.0 --nat=extip:172.18.50.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9d516fe090b9e82b16a46fc11d8a4f98327ddbccc96a8dbb5fe1bdcbc55f9772 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QC-2-F1r-GP3XSSiuuB31IL4nGWH1Mvv0_1Lbf7SHXjiCDLPA74O3wtGrpMGWvIkhtQJJ3YUX7nFveGXWdN2FhMCgmlkgnY0gmlwhKwSL7GKbXVsdGlhZGRyc5YACASsEi-xBufvAAoErBIvsQbn8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDbnGoHCNnK8rpQBlVJFRdIqtKfnmaGHKMEBpbXb67bXaDdGNwgufvg3VkcILn8YV3YWt1MgM --storenode=/ip4/172.18.47.177/tcp/59375/p2p/16Uiu2HAmL67iUdFW9bHnNp4gJPRyRVkpGUgntKALqbvoPrK9zSER --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.50.172 waku 646ec3276b8989f8d9e62f733afd71e25a2a42fc13654eaa613d4aedfe9011e4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 646ec3276b89. Setting up logs at ./log/docker/store_node1_2025-01-18_03-11-13__4c6fbb04-bfc2-47a6-bfd5-156b3358ed58__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 8032
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8032/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QJe3x23GWUbw2sw5ssPiF5u21ZbzxazVD4ZPypz32tIadAorxodrnpV9wekAooQfiNdqdyul-O0Sce73yTEc8HCGAZR3ZLIFgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECx1llEPltaV7Hp4Xhg2a1B8kj9WD3RbMIlxmGbOc2ZnuDdGNwgh9hg3VkcIIfY4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/8033/p2p/16Uiu2HAm8qrAzS12f48e8EVU8wygH9vPgS6SvMRyyf5UUfJjG3tE","/ip4/127.0.0.1/tcp/8034/ws/p2p/16Uiu2HAm8qrAzS12f48e8EVU8wygH9vPgS6SvMRyyf5UUfJjG3tE","/ip4/172.17.0.3/tcp/8033/p2p/16Uiu2HAm8qrAzS12f48e8EVU8wygH9vPgS6SvMRyyf5UUfJjG3tE","/ip4/172.17.0.3/tcp/8034/ws/p2p/16Uiu2HAm8qrAzS12f48e8EVU8wygH9vPgS6SvMRyyf5UUfJjG3tE"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8032/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.47.177/tcp/59375/p2p/16Uiu2HAmL67iUdFW9bHnNp4gJPRyRVkpGUgntKALqbvoPrK9zSER", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59374/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8032/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59374/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59374/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fae8a261c563
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 646ec3276b89
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_03-11-13__4c6fbb04-bfc2-47a6-bfd5-156b3358ed58__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_03-11-13__4c6fbb04-bfc2-47a6-bfd5-156b3358ed58__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-01-18_03-11-17__300da5d3-c2aa-460e-ad21-0d92304a3c3f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_03-11-17__300da5d3-c2aa-460e-ad21-0d92304a3c3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.94.219
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33283', '33284', '33285', '33286', '33287']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33283:33283 -p 33284:33284 -p 33285:33285 -p 33286:33286 -p 33287:33287 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33285 --rest-port=33283 --tcp-port=33284 --discv5-udp-port=33286 --rest-address=0.0.0.0 --nat=extip:172.18.94.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=98bd5b3a24adef5de6db3cfab8ea16c8250efa8cafadf97b51a22bdc59ba7d0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33287 --metrics-logging=true --store=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fae8a261c563. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.94.219 waku c978574dc4bde830e0bf8501385d98c1526d603ec7c6c1cf6e73a899d95629b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c978574dc4bd. Setting up logs at ./log/docker/publishing_node1_2025-01-18_03-11-17__300da5d3-c2aa-460e-ad21-0d92304a3c3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 33283
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 646ec3276b89. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33283/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33283/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.219/tcp/33284/p2p/16Uiu2HAm1BbFdX4c3m6JyKqeVCgyxSEiqgGB7SyZ56egvUu1gT49","/ip4/172.18.94.219/tcp/33285/ws/p2p/16Uiu2HAm1BbFdX4c3m6JyKqeVCgyxSEiqgGB7SyZ56egvUu1gT49"],"enrUri":"enr:-L24QCFIj8wNh60L7SGsXQ6_rHbNNON3KNwGw08iF7ah_7__StimTbrOZfit-U3bt1F5P3kF2R_yzwGIZkF9tsDA13ECgmlkgnY0gmlwhKwSXtuKbXVsdGlhZGRyc5YACASsEl7bBoIEAAoErBJe2waCBd0DgnJzhQADAQAAiXNlY3AyNTZrMaECVYqlPFo69-i9XM5yRFLT2-2ExTMf0dEL6pXoA5cE6TaDdGNwgoIEg3VkcIKCBoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_03-11-17__300da5d3-c2aa-460e-ad21-0d92304a3c3f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.30.108
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45900', '45901', '45902', '45903', '45904']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45900:45900 -p 45901:45901 -p 45902:45902 -p 45903:45903 -p 45904:45904 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=45902 --rest-port=45900 --tcp-port=45901 --discv5-udp-port=45903 --rest-address=0.0.0.0 --nat=extip:172.18.30.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=02aee0adac5ccbf9f7f85aed1fc5c6e6fbaeeccff7d213966fba273bebb1c534 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QCFIj8wNh60L7SGsXQ6_rHbNNON3KNwGw08iF7ah_7__StimTbrOZfit-U3bt1F5P3kF2R_yzwGIZkF9tsDA13ECgmlkgnY0gmlwhKwSXtuKbXVsdGlhZGRyc5YACASsEl7bBoIEAAoErBJe2waCBd0DgnJzhQADAQAAiXNlY3AyNTZrMaECVYqlPFo69-i9XM5yRFLT2-2ExTMf0dEL6pXoA5cE6TaDdGNwgoIEg3VkcIKCBoV3YWt1MgM --storenode=/ip4/172.18.94.219/tcp/33284/p2p/16Uiu2HAm1BbFdX4c3m6JyKqeVCgyxSEiqgGB7SyZ56egvUu1gT49 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.30.108 waku c117ede622c6cc41285ea888b98d1494205cd65a529d1a8a539abd52d7f34527
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c117ede622c6. Setting up logs at ./log/docker/store_node1_2025-01-18_03-11-17__300da5d3-c2aa-460e-ad21-0d92304a3c3f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 45900
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45900/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QA64fDUI3gPgzX31LtTzCRIvxKUSYoLWeLMMyyuvzRl0f97kuZUsUJtUx9vYw8LWdAtsy3ZmYhm6knXOaRD8ptiGAZR3ZMIbgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEC94k5WmpNQE1UQIkU8-1PIuo7duhj5MM-i6Kj6MnLw0yDdGNwgrNNg3VkcIKzT4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/45901/p2p/16Uiu2HAmC5x3SqoJw2b3r8wmQmBxEziVohwSwYeAJVu3b3zbSUBM","/ip4/127.0.0.1/tcp/45902/ws/p2p/16Uiu2HAmC5x3SqoJw2b3r8wmQmBxEziVohwSwYeAJVu3b3zbSUBM","/ip4/172.17.0.3/tcp/45901/p2p/16Uiu2HAmC5x3SqoJw2b3r8wmQmBxEziVohwSwYeAJVu3b3zbSUBM","/ip4/172.17.0.3/tcp/45902/ws/p2p/16Uiu2HAmC5x3SqoJw2b3r8wmQmBxEziVohwSwYeAJVu3b3zbSUBM"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45900/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.94.219/tcp/33284/p2p/16Uiu2HAm1BbFdX4c3m6JyKqeVCgyxSEiqgGB7SyZ56egvUu1gT49", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33283/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45900/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33283/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c978574dc4bd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c117ede622c6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_03-11-17__300da5d3-c2aa-460e-ad21-0d92304a3c3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_03-11-17__300da5d3-c2aa-460e-ad21-0d92304a3c3f__wakuorg_go-waku:latest.log