[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_before_store_node_is_started with id: 2025-01-18_03-03-41__b4efced5-f388-4e11-b57a-b44a364cdcbc
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_03-03-41__b4efced5-f388-4e11-b57a-b44a364cdcbc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.187.70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5805', '5806', '5807', '5808', '5809']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5805:5805 -p 5806:5806 -p 5807:5807 -p 5808:5808 -p 5809:5809 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5807 --rest-port=5805 --tcp-port=5806 --discv5-udp-port=5808 --rest-address=0.0.0.0 --nat=extip:172.18.187.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a66aec4746fffadbfc7bcc9721bdbccec44f62afcb0d8dad1ddba5fbc25acba8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5809 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.187.70 waku aa6ce50700046290222227cff24d1d3d57484d8c78539885f6f91dab8bd4746b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7c7538366395. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID aa6ce5070004. Setting up logs at ./log/docker/publishing_node1_2025-01-18_03-03-41__b4efced5-f388-4e11-b57a-b44a364cdcbc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5805
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f3c7e98f3d07. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5805/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5805/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.70/tcp/5806/p2p/16Uiu2HAkyonWQVjtSXJMiPEA9ZgnGybmeC1HyaLUVxBkgVzhZn29","/ip4/172.18.187.70/tcp/5807/ws/p2p/16Uiu2HAkyonWQVjtSXJMiPEA9ZgnGybmeC1HyaLUVxBkgVzhZn29"],"enrUri":"enr:-L24QHWT1s1g_uNmj5n1Svmq2aacvoPJm6p1KZJPNa9SpXtXFfhXybZut8uqjTlzy-HnRit_ZNieCHM7cssCztVSZQYCgmlkgnY0gmlwhKwSu0aKbXVsdGlhZGRyc5YACASsErtGBhauAAoErBK7RgYWr90DgnJzhQADAQAAiXNlY3AyNTZrMaECQRjoESqjaMDzz7Co4B3DTB8pldbv78qoaTwigtaX8zaDdGNwghaug3VkcIIWsIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_03-03-41__b4efced5-f388-4e11-b57a-b44a364cdcbc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.78.249
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44287', '44288', '44289', '44290', '44291']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44287:44287 -p 44288:44288 -p 44289:44289 -p 44290:44290 -p 44291:44291 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44289 --rest-port=44287 --tcp-port=44288 --discv5-udp-port=44290 --rest-address=0.0.0.0 --nat=extip:172.18.78.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d791d43cabe1ade5bc9f6b8add12f01effd6b3ffcda68da7f0caaabac2acc784 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QHWT1s1g_uNmj5n1Svmq2aacvoPJm6p1KZJPNa9SpXtXFfhXybZut8uqjTlzy-HnRit_ZNieCHM7cssCztVSZQYCgmlkgnY0gmlwhKwSu0aKbXVsdGlhZGRyc5YACASsErtGBhauAAoErBK7RgYWr90DgnJzhQADAQAAiXNlY3AyNTZrMaECQRjoESqjaMDzz7Co4B3DTB8pldbv78qoaTwigtaX8zaDdGNwghaug3VkcIIWsIV3YWt1MgM --storenode=/ip4/172.18.187.70/tcp/5806/p2p/16Uiu2HAkyonWQVjtSXJMiPEA9ZgnGybmeC1HyaLUVxBkgVzhZn29 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.78.249 waku 0bc63985e4f2098b1686d6399021901195c7197df12062d4c72db267677c3ee4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0bc63985e4f2. Setting up logs at ./log/docker/store_node1_2025-01-18_03-03-41__b4efced5-f388-4e11-b57a-b44a364cdcbc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 44287
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44287/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QG0Jbx0bBPCZdTB4GcIS_KVju_qO5x2zQurzQIjwn2m7K6qsQCCXsu58CFty4liMSXBGsnAMNchQ6NiD8IEHTOSGAZR3XcutgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEC18LnCAhpfPvXFaW6DZhCl25_YucHRFKWPHmYnF0axHODdGNwgq0Ag3VkcIKtAoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/44288/p2p/16Uiu2HAm9wv1QKbcDT1BPLH2kxDTnfmHtY3pMAiTcdPUgqrsee6N","/ip4/127.0.0.1/tcp/44289/ws/p2p/16Uiu2HAm9wv1QKbcDT1BPLH2kxDTnfmHtY3pMAiTcdPUgqrsee6N","/ip4/172.17.0.3/tcp/44288/p2p/16Uiu2HAm9wv1QKbcDT1BPLH2kxDTnfmHtY3pMAiTcdPUgqrsee6N","/ip4/172.17.0.3/tcp/44289/ws/p2p/16Uiu2HAm9wv1QKbcDT1BPLH2kxDTnfmHtY3pMAiTcdPUgqrsee6N"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44287/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.187.70/tcp/5806/p2p/16Uiu2HAkyonWQVjtSXJMiPEA9ZgnGybmeC1HyaLUVxBkgVzhZn29", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5805/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44287/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5805/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id aa6ce5070004
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0bc63985e4f2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_03-03-41__b4efced5-f388-4e11-b57a-b44a364cdcbc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_03-03-41__b4efced5-f388-4e11-b57a-b44a364cdcbc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_before_store_node_is_started with id: 2025-01-18_03-03-45__d5d6742a-7308-4a90-886a-6e96317191b0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_03-03-45__d5d6742a-7308-4a90-886a-6e96317191b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.137.29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65526', '65527', '65528', '65529', '65530']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65526:65526 -p 65527:65527 -p 65528:65528 -p 65529:65529 -p 65530:65530 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65528 --rest-port=65526 --tcp-port=65527 --discv5-udp-port=65529 --rest-address=0.0.0.0 --nat=extip:172.18.137.29 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=443b311f80f89da3ad6c9ad454dfb518810f1afdbc681a87ffcf07beeda6c42e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65530 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container aa6ce5070004. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.137.29 waku 865eafc5e02accf0184cdc569d62211d1e7eebcd71437684dd635c0c5dbd6f61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 865eafc5e02a. Setting up logs at ./log/docker/publishing_node1_2025-01-18_03-03-45__d5d6742a-7308-4a90-886a-6e96317191b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 65526
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0bc63985e4f2. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65526/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65526/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.29/tcp/65527/p2p/16Uiu2HAmNXEbo8CVVbiirRFeZ56aZ7mkALUbjBKZB2Ub1fo2uaQv","/ip4/172.18.137.29/tcp/65528/ws/p2p/16Uiu2HAmNXEbo8CVVbiirRFeZ56aZ7mkALUbjBKZB2Ub1fo2uaQv"],"enrUri":"enr:-L24QLX0M1lRKNQrIO9zgfGNicMknB-79RSNvbeGKHQyQNRbeVfPWTV8UDUwX6bJu5MZxPjxVz1dkKUCxI-or0GBwNgCgmlkgnY0gmlwhKwSiR2KbXVsdGlhZGRyc5YACASsEokdBv_3AAoErBKJHQb_-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkphV30ETfVAcD7Us-qeiQ3G7fD_T53fPinj1JH-6uH-DdGNwgv_3g3VkcIL_-YV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_03-03-45__d5d6742a-7308-4a90-886a-6e96317191b0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.182.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43513', '43514', '43515', '43516', '43517']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43513:43513 -p 43514:43514 -p 43515:43515 -p 43516:43516 -p 43517:43517 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=43515 --rest-port=43513 --tcp-port=43514 --discv5-udp-port=43516 --rest-address=0.0.0.0 --nat=extip:172.18.182.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=52eeae09dadf12dea1cfc0243a12420bf9bfd49e94c4809f8a4cc485a9d1f7d7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QLX0M1lRKNQrIO9zgfGNicMknB-79RSNvbeGKHQyQNRbeVfPWTV8UDUwX6bJu5MZxPjxVz1dkKUCxI-or0GBwNgCgmlkgnY0gmlwhKwSiR2KbXVsdGlhZGRyc5YACASsEokdBv_3AAoErBKJHQb_-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkphV30ETfVAcD7Us-qeiQ3G7fD_T53fPinj1JH-6uH-DdGNwgv_3g3VkcIL_-YV3YWt1MgM --storenode=/ip4/172.18.137.29/tcp/65527/p2p/16Uiu2HAmNXEbo8CVVbiirRFeZ56aZ7mkALUbjBKZB2Ub1fo2uaQv --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.182.32 waku db2f7864727dd5595a14770d2589a7448d182602be54790f55af160abe3b269d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID db2f7864727d. Setting up logs at ./log/docker/store_node1_2025-01-18_03-03-45__d5d6742a-7308-4a90-886a-6e96317191b0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 43513
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43513/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QFbPhdpY1xwx3KoINXc7oOQB1d3jf2otO3Mqht3unKD2fMRJE1AU9Xct2yMHZJzyXXnl_e2vihIPA1bdX11Uw0eGAZR3XdvvgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECGr6BR0sy-jIQMTlt1hs87m54_u22XPBCn4ALsBbkkuSDdGNwgqn6g3VkcIKp_IV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/43514/p2p/16Uiu2HAkwE54edGN19L7kjvLidp2JZLSGfTBs2kBfqAbKZhHxvg3","/ip4/127.0.0.1/tcp/43515/ws/p2p/16Uiu2HAkwE54edGN19L7kjvLidp2JZLSGfTBs2kBfqAbKZhHxvg3","/ip4/172.17.0.3/tcp/43514/p2p/16Uiu2HAkwE54edGN19L7kjvLidp2JZLSGfTBs2kBfqAbKZhHxvg3","/ip4/172.17.0.3/tcp/43515/ws/p2p/16Uiu2HAkwE54edGN19L7kjvLidp2JZLSGfTBs2kBfqAbKZhHxvg3"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43513/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.137.29/tcp/65527/p2p/16Uiu2HAmNXEbo8CVVbiirRFeZ56aZ7mkALUbjBKZB2Ub1fo2uaQv", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65526/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43513/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65526/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65526/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 865eafc5e02a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id db2f7864727d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_03-03-45__d5d6742a-7308-4a90-886a-6e96317191b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_03-03-45__d5d6742a-7308-4a90-886a-6e96317191b0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_before_store_node_is_started with id: 2025-01-18_03-03-50__817bdba5-0e4c-4c99-a907-eb3f53acf58c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_03-03-50__817bdba5-0e4c-4c99-a907-eb3f53acf58c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.139.245
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22490', '22491', '22492', '22493', '22494']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22490:22490 -p 22491:22491 -p 22492:22492 -p 22493:22493 -p 22494:22494 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22492 --rest-port=22490 --tcp-port=22491 --discv5-udp-port=22493 --rest-address=0.0.0.0 --nat=extip:172.18.139.245 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd9a3b2dec3fa3fae7c90b44eecef6ebea3dc0c5d0e3c1f3ec2da2e040cd5f59 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22494 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 865eafc5e02a. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.139.245 waku 1f680d0598843d35027683aaf125d70fdb55c341c6c837c9c44486e11e9ab072
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1f680d059884. Setting up logs at ./log/docker/publishing_node1_2025-01-18_03-03-50__817bdba5-0e4c-4c99-a907-eb3f53acf58c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22490
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container db2f7864727d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22490/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22490/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.245/tcp/22491/p2p/16Uiu2HAm3wam2dcWNwCSc7u5bp1LmZNV5EfBxe99auJ6cGjB6Wqx","/ip4/172.18.139.245/tcp/22492/ws/p2p/16Uiu2HAm3wam2dcWNwCSc7u5bp1LmZNV5EfBxe99auJ6cGjB6Wqx"],"enrUri":"enr:-L24QAazDUAk2Gts_gN1jwabRSEPrbjcz8ij-2FBbiNFrtGfXwTfmkJuRxTyrO9WG5-LeTWHAuH1PEAf0rsChCffIksCgmlkgnY0gmlwhKwSi_WKbXVsdGlhZGRyc5YACASsEov1BlfbAAoErBKL9QZX3N0DgnJzhQADAQAAiXNlY3AyNTZrMaECfocEbycAe0w4yCs__ZOro559KbAxScDjzudcO9HAfhODdGNwglfbg3VkcIJX3YV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_03-03-50__817bdba5-0e4c-4c99-a907-eb3f53acf58c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.210.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40579', '40580', '40581', '40582', '40583']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40579:40579 -p 40580:40580 -p 40581:40581 -p 40582:40582 -p 40583:40583 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40581 --rest-port=40579 --tcp-port=40580 --discv5-udp-port=40582 --rest-address=0.0.0.0 --nat=extip:172.18.210.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8cddf7c16d4ebbeff9afd2b0fe60fe8ff3266b6cfb1f3fc5cdcfdddbbf09edb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QAazDUAk2Gts_gN1jwabRSEPrbjcz8ij-2FBbiNFrtGfXwTfmkJuRxTyrO9WG5-LeTWHAuH1PEAf0rsChCffIksCgmlkgnY0gmlwhKwSi_WKbXVsdGlhZGRyc5YACASsEov1BlfbAAoErBKL9QZX3N0DgnJzhQADAQAAiXNlY3AyNTZrMaECfocEbycAe0w4yCs__ZOro559KbAxScDjzudcO9HAfhODdGNwglfbg3VkcIJX3YV3YWt1MgM --storenode=/ip4/172.18.139.245/tcp/22491/p2p/16Uiu2HAm3wam2dcWNwCSc7u5bp1LmZNV5EfBxe99auJ6cGjB6Wqx --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.210.224 waku d619a33290d838bf9af3660589a81789696b637f6b9979bfd5f69d9aee55b291
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d619a33290d8. Setting up logs at ./log/docker/store_node1_2025-01-18_03-03-50__817bdba5-0e4c-4c99-a907-eb3f53acf58c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 40579
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40579/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QOlKygPqXwr-YL6b0HDBmF4MXKgqHy1wqAVZhaC0sZ4VajeCCvtkwj86QAaogcwb5c9SBHbiZrDYKzmyLf7ONNuGAZR3Xew1gmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDFyzUzOQEeFbEL1rdqxXV47IcuKccuCFD8iOaDunw5JGDdGNwgp6Eg3VkcIKehoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/40580/p2p/16Uiu2HAmEDTNoM3K4NEee3ojbMPeNnxaEg3i79WYaV82g7oqsKeQ","/ip4/127.0.0.1/tcp/40581/ws/p2p/16Uiu2HAmEDTNoM3K4NEee3ojbMPeNnxaEg3i79WYaV82g7oqsKeQ","/ip4/172.17.0.3/tcp/40580/p2p/16Uiu2HAmEDTNoM3K4NEee3ojbMPeNnxaEg3i79WYaV82g7oqsKeQ","/ip4/172.17.0.3/tcp/40581/ws/p2p/16Uiu2HAmEDTNoM3K4NEee3ojbMPeNnxaEg3i79WYaV82g7oqsKeQ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40579/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.139.245/tcp/22491/p2p/16Uiu2HAm3wam2dcWNwCSc7u5bp1LmZNV5EfBxe99auJ6cGjB6Wqx", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22490/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40579/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22490/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22490/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1f680d059884
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d619a33290d8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_03-03-50__817bdba5-0e4c-4c99-a907-eb3f53acf58c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_03-03-50__817bdba5-0e4c-4c99-a907-eb3f53acf58c__wakuorg_go-waku:latest.log