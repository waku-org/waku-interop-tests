[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_only_relay with id: 2025-01-18_03-10-22__06f8aeb4-8cae-4e28-857e-a78b8bfa4760
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_03-10-22__06f8aeb4-8cae-4e28-857e-a78b8bfa4760__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.54.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6683', '6684', '6685', '6686', '6687']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6683:6683 -p 6684:6684 -p 6685:6685 -p 6686:6686 -p 6687:6687 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6685 --rest-port=6683 --tcp-port=6684 --discv5-udp-port=6686 --rest-address=0.0.0.0 --nat=extip:172.18.54.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab83483baf6bed5e3fd5de0be6bde13cc715ae5eb6118ad6be05a8d85f3b979b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6687 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5f219d87e3dd. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.54.248 waku 4e397e6c44b4d7537f404bbb570dab3f5ff70f848a22014109fc58d04c331702
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4e397e6c44b4. Setting up logs at ./log/docker/publishing_node1_2025-01-18_03-10-22__06f8aeb4-8cae-4e28-857e-a78b8bfa4760__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6683
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0f0ece2a7678. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6683/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6683/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.248/tcp/6684/p2p/16Uiu2HAkvBomdnaEeWDKCDrjqL2Z1WQ8iLRS2h1vtd9bVx7wYmfa","/ip4/172.18.54.248/tcp/6685/ws/p2p/16Uiu2HAkvBomdnaEeWDKCDrjqL2Z1WQ8iLRS2h1vtd9bVx7wYmfa"],"enrUri":"enr:-L24QB6TRTDa-0td0h_3FxF18pFnSuFKxSWlyoEljuMLJTkXNOfTnGUR7zhf-e3Wk60WFVuwSqcLpbgPeYZuvtpgi2ECgmlkgnY0gmlwhKwSNviKbXVsdGlhZGRyc5YACASsEjb4BhocAAoErBI2-AYaHd0DgnJzhQADAQAAiXNlY3AyNTZrMaECC05dPDnvSh6FK3Q6P3MRcUYU3ZpB6uGM3OH7ivUwQKWDdGNwghocg3VkcIIaHoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_03-10-22__06f8aeb4-8cae-4e28-857e-a78b8bfa4760__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.247.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24215', '24216', '24217', '24218', '24219']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24215:24215 -p 24216:24216 -p 24217:24217 -p 24218:24218 -p 24219:24219 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24217 --rest-port=24215 --tcp-port=24216 --discv5-udp-port=24218 --rest-address=0.0.0.0 --nat=extip:172.18.247.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ec9c28ecd4a7edfe52fdaec01d7bb88b1fef5abafd30af49bbe39505f712c91f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QB6TRTDa-0td0h_3FxF18pFnSuFKxSWlyoEljuMLJTkXNOfTnGUR7zhf-e3Wk60WFVuwSqcLpbgPeYZuvtpgi2ECgmlkgnY0gmlwhKwSNviKbXVsdGlhZGRyc5YACASsEjb4BhocAAoErBI2-AYaHd0DgnJzhQADAQAAiXNlY3AyNTZrMaECC05dPDnvSh6FK3Q6P3MRcUYU3ZpB6uGM3OH7ivUwQKWDdGNwghocg3VkcIIaHoV3YWt1MgM --storenode=/ip4/172.18.54.248/tcp/6684/p2p/16Uiu2HAkvBomdnaEeWDKCDrjqL2Z1WQ8iLRS2h1vtd9bVx7wYmfa --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.247.141 waku 2aa29aaad6f09b8bb5b35f23f87c4be78e805145cccc6e1ca42f7d8a9c8dfda0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2aa29aaad6f0. Setting up logs at ./log/docker/store_node1_2025-01-18_03-10-22__06f8aeb4-8cae-4e28-857e-a78b8bfa4760__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 24215
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24215/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QOgUZJCRNZ_Nru9PozAmhUHNAxrhkkQkCpogmvqztjGnd3i1tmRYYxNvx-iEZZdBv0K7BdFvSoiMYtEEjk6j0UiGAZR3Y-kUgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEC9LjHuJpIA8KwvMI-8K8nbf4q6-WSj4AcNfux0ubECCODdGNwgl6Yg3VkcIJemoV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/24216/p2p/16Uiu2HAmBtxsvRNuUy6B6T4mkYdgZdbFdRuH8ieiJargexYSAxu8","/ip4/127.0.0.1/tcp/24217/ws/p2p/16Uiu2HAmBtxsvRNuUy6B6T4mkYdgZdbFdRuH8ieiJargexYSAxu8","/ip4/172.17.0.3/tcp/24216/p2p/16Uiu2HAmBtxsvRNuUy6B6T4mkYdgZdbFdRuH8ieiJargexYSAxu8","/ip4/172.17.0.3/tcp/24217/ws/p2p/16Uiu2HAmBtxsvRNuUy6B6T4mkYdgZdbFdRuH8ieiJargexYSAxu8"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24215/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.54.248/tcp/6684/p2p/16Uiu2HAkvBomdnaEeWDKCDrjqL2Z1WQ8iLRS2h1vtd9bVx7wYmfa", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6683/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24215/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6683/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6683/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4e397e6c44b4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2aa29aaad6f0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_03-10-22__06f8aeb4-8cae-4e28-857e-a78b8bfa4760__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_03-10-22__06f8aeb4-8cae-4e28-857e-a78b8bfa4760__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_only_relay with id: 2025-01-18_03-10-26__83da570b-78c6-479a-b051-978719ebb34d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_03-10-26__83da570b-78c6-479a-b051-978719ebb34d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.172.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22130', '22131', '22132', '22133', '22134']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22130:22130 -p 22131:22131 -p 22132:22132 -p 22133:22133 -p 22134:22134 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22132 --rest-port=22130 --tcp-port=22131 --discv5-udp-port=22133 --rest-address=0.0.0.0 --nat=extip:172.18.172.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e6ec8db87bcd66ec6e3d6a01fcadc9bcb50dbf162dd46226a17a7bfacdf4bd4f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22134 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4e397e6c44b4. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.172.77 waku f0aeb657bce66f23038794f93429fd225e58376c7d6ef5eccc8fa65a68fa7407
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f0aeb657bce6. Setting up logs at ./log/docker/publishing_node1_2025-01-18_03-10-26__83da570b-78c6-479a-b051-978719ebb34d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 22130
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2aa29aaad6f0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22130/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22130/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.77/tcp/22131/p2p/16Uiu2HAmDU93cHR8GM6LrpLPDr5v8BNEHtzkPVNHn1jTt7uu61VT","/ip4/172.18.172.77/tcp/22132/ws/p2p/16Uiu2HAmDU93cHR8GM6LrpLPDr5v8BNEHtzkPVNHn1jTt7uu61VT"],"enrUri":"enr:-L24QLZzrKHnVFDq2rbuKhgiku2nnpw7oItWN4hmSHrB_fYuT6zkYY85LUeIQju-loc9BvhdcwUtol1ili5tN4svsyMCgmlkgnY0gmlwhKwSrE2KbXVsdGlhZGRyc5YACASsEqxNBlZzAAoErBKsTQZWdN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDBQhMmJ5qQSuLddZp_PVxh8C4RONf26YLuR0BxvsV_qDdGNwglZzg3VkcIJWdYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_03-10-26__83da570b-78c6-479a-b051-978719ebb34d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.165.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47250', '47251', '47252', '47253', '47254']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47250:47250 -p 47251:47251 -p 47252:47252 -p 47253:47253 -p 47254:47254 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=47252 --rest-port=47250 --tcp-port=47251 --discv5-udp-port=47253 --rest-address=0.0.0.0 --nat=extip:172.18.165.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e08a1edfd7e393fd7e87ad8284a4377f1a6030e6f5ce48cf1eedfa6a3e3e09bb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QLZzrKHnVFDq2rbuKhgiku2nnpw7oItWN4hmSHrB_fYuT6zkYY85LUeIQju-loc9BvhdcwUtol1ili5tN4svsyMCgmlkgnY0gmlwhKwSrE2KbXVsdGlhZGRyc5YACASsEqxNBlZzAAoErBKsTQZWdN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDBQhMmJ5qQSuLddZp_PVxh8C4RONf26YLuR0BxvsV_qDdGNwglZzg3VkcIJWdYV3YWt1MgM --storenode=/ip4/172.18.172.77/tcp/22131/p2p/16Uiu2HAmDU93cHR8GM6LrpLPDr5v8BNEHtzkPVNHn1jTt7uu61VT --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.165.112 waku 0553a821349ba0e88fb95d319fafa39c85509a7497c8f68553d458a72f866a4c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0553a821349b. Setting up logs at ./log/docker/store_node1_2025-01-18_03-10-26__83da570b-78c6-479a-b051-978719ebb34d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 47250
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47250/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QAF8jR-8sVMU7Q6Ha2td9Dx6mZ14s4N8bBVNGJdJCaJjQ_nkLnSCnj2dMU2GCR9fSQd-li1uLF15H-XhT-wQJdeGAZR3Y_lGgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDVt1ZNDqtIPF0mWGzECfRP0ivp0SmjDXVR5TRGgYrRGGDdGNwgriTg3VkcIK4lYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/47251/p2p/16Uiu2HAmJW5B4hTebZpbmfqZJxnhdxM5GY29ncrebe9yW9Kf95o6","/ip4/127.0.0.1/tcp/47252/ws/p2p/16Uiu2HAmJW5B4hTebZpbmfqZJxnhdxM5GY29ncrebe9yW9Kf95o6","/ip4/172.17.0.3/tcp/47251/p2p/16Uiu2HAmJW5B4hTebZpbmfqZJxnhdxM5GY29ncrebe9yW9Kf95o6","/ip4/172.17.0.3/tcp/47252/ws/p2p/16Uiu2HAmJW5B4hTebZpbmfqZJxnhdxM5GY29ncrebe9yW9Kf95o6"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47250/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.172.77/tcp/22131/p2p/16Uiu2HAmDU93cHR8GM6LrpLPDr5v8BNEHtzkPVNHn1jTt7uu61VT", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22130/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47250/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22130/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22130/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f0aeb657bce6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0553a821349b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_03-10-26__83da570b-78c6-479a-b051-978719ebb34d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_03-10-26__83da570b-78c6-479a-b051-978719ebb34d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_only_relay with id: 2025-01-18_03-10-30__cce89c92-3e43-4107-beb2-6da7009e86c4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-18_03-10-30__cce89c92-3e43-4107-beb2-6da7009e86c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.239.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34707', '34708', '34709', '34710', '34711']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34707:34707 -p 34708:34708 -p 34709:34709 -p 34710:34710 -p 34711:34711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34709 --rest-port=34707 --tcp-port=34708 --discv5-udp-port=34710 --rest-address=0.0.0.0 --nat=extip:172.18.239.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=84d0ace9bec9f06c264f8bdb5eb7bb35bddf5a9398eebaa81a7d6727629cbf4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34711 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f0aeb657bce6. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.239.176 waku c31d827c36962e50c2c2c196ec4b4fc72545131951c99846d61e86a9f19e1550
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c31d827c3696. Setting up logs at ./log/docker/publishing_node1_2025-01-18_03-10-30__cce89c92-3e43-4107-beb2-6da7009e86c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34707
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0553a821349b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34707/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.176/tcp/34708/p2p/16Uiu2HAmFKoa74xr3qs2kPAQ7qXvf7FfDg3boK77RLfLYcYzaVRf","/ip4/172.18.239.176/tcp/34709/ws/p2p/16Uiu2HAmFKoa74xr3qs2kPAQ7qXvf7FfDg3boK77RLfLYcYzaVRf"],"enrUri":"enr:-L24QMmUbHDZgPA4hJWu19mmBkuhdq26X1ntf4UZGeybXMwKK_7BcSn3CglhXniJkwCQ9CXXU_txWB_Rcb5fX6LvU0ACgmlkgnY0gmlwhKwS77CKbXVsdGlhZGRyc5YACASsEu-wBoeUAAoErBLvsAaHld0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJ6jWZrrsgWZKD0xq-ThpHWr5W4jlrhSoRsdnqr3cNt6DdGNwgoeUg3VkcIKHloV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-18_03-10-30__cce89c92-3e43-4107-beb2-6da7009e86c4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.101.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43045', '43046', '43047', '43048', '43049']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43045:43045 -p 43046:43046 -p 43047:43047 -p 43048:43048 -p 43049:43049 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=43047 --rest-port=43045 --tcp-port=43046 --discv5-udp-port=43048 --rest-address=0.0.0.0 --nat=extip:172.18.101.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4dd0975f021096bcaad6bf1ec38fbcbee9a51cd18cde4cfcb1af0fe71a1dcac7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QMmUbHDZgPA4hJWu19mmBkuhdq26X1ntf4UZGeybXMwKK_7BcSn3CglhXniJkwCQ9CXXU_txWB_Rcb5fX6LvU0ACgmlkgnY0gmlwhKwS77CKbXVsdGlhZGRyc5YACASsEu-wBoeUAAoErBLvsAaHld0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJ6jWZrrsgWZKD0xq-ThpHWr5W4jlrhSoRsdnqr3cNt6DdGNwgoeUg3VkcIKHloV3YWt1MgM --storenode=/ip4/172.18.239.176/tcp/34708/p2p/16Uiu2HAmFKoa74xr3qs2kPAQ7qXvf7FfDg3boK77RLfLYcYzaVRf --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.101.34 waku bd5bf42ff7787f1984bebdb1df2b83c3a1e3b5ea51582fd24802a9139b8ff9eb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bd5bf42ff778. Setting up logs at ./log/docker/store_node1_2025-01-18_03-10-30__cce89c92-3e43-4107-beb2-6da7009e86c4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 43045
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43045/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLqVWnCFXvysI7dbb0R9iil7yBvOg-QuCrFVJhKYdIaiOxjx69GBvojATXnz-Bm3BE2ecKGJj3UzVRWv4TqzAjyGAZR3ZAmRgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEC5x5IYN5-RAuD98Yz0mB_oGOF02RAr7Q3AFmS4J4hXE-DdGNwgqgmg3VkcIKoKIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/43046/p2p/16Uiu2HAmAyrwVhXGvojSoneXNBLuiEmHZHXVETqm1vHtb1KzMA5t","/ip4/127.0.0.1/tcp/43047/ws/p2p/16Uiu2HAmAyrwVhXGvojSoneXNBLuiEmHZHXVETqm1vHtb1KzMA5t","/ip4/172.17.0.3/tcp/43046/p2p/16Uiu2HAmAyrwVhXGvojSoneXNBLuiEmHZHXVETqm1vHtb1KzMA5t","/ip4/172.17.0.3/tcp/43047/ws/p2p/16Uiu2HAmAyrwVhXGvojSoneXNBLuiEmHZHXVETqm1vHtb1KzMA5t"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43045/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.239.176/tcp/34708/p2p/16Uiu2HAmFKoa74xr3qs2kPAQ7qXvf7FfDg3boK77RLfLYcYzaVRf", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34707/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43045/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34707/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34707/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c31d827c3696
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bd5bf42ff778
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-18_03-10-30__cce89c92-3e43-4107-beb2-6da7009e86c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-18_03-10-30__cce89c92-3e43-4107-beb2-6da7009e86c4__wakuorg_go-waku:latest.log