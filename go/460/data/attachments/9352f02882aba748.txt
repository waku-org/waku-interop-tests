2025-02-10 03:08:50.033 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 03:08:50.033 DEBUG [tests.conftest] Running test: test_invalid_page_size with id: 2025-02-10_03-08-50__a40c4551-d919-438c-b49a-fc12374108dd
2025-02-10 03:08:50.034 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 03:08:50.034 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 03:08:50.034 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-10 03:08:50.040 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 03:08:50.040 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-10_03-08-50__a40c4551-d919-438c-b49a-fc12374108dd__wakuorg_nwaku:latest.log
2025-02-10 03:08:50.041 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:08:50.041 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:08:50.042 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:08:50.042 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.221.81
2025-02-10 03:08:50.042 DEBUG [src.node.docker_mananger] Generated ports ['57761', '57762', '57763', '57764', '57765']
2025-02-10 03:08:50.042 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:08:50.043 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:08:50.043 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:08:50.043 DEBUG [src.node.docker_mananger] docker run -i -t -p 57761:57761 -p 57762:57762 -p 57763:57763 -p 57764:57764 -p 57765:57765 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57763 --rest-port=57761 --tcp-port=57762 --discv5-udp-port=57764 --rest-address=0.0.0.0 --nat=extip:172.18.221.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd2e7740b81a953def21eb3db1ddcacea0699722844825e4765ddddffcbe6ffe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57765 --metrics-logging=true --store=true --relay=true
2025-02-10 03:08:50.272 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.221.81 waku 522d175eb72864ef4b750c5c44a860fcf34a6e7d95956f2207f937b220bbd69c
2025-02-10 03:08:50.317 DEBUG [src.node.docker_mananger] Container started with ID 522d175eb728. Setting up logs at ./log/docker/publishing_node1_2025-02-10_03-08-50__a40c4551-d919-438c-b49a-fc12374108dd__wakuorg_nwaku:latest.log
2025-02-10 03:08:50.318 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57761
2025-02-10 03:08:50.318 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:08:50.357 ERROR [src.node.docker_mananger] Max retries reached for container b01e8197d944. Exiting log stream.
2025-02-10 03:08:50.823 ERROR [src.node.docker_mananger] Max retries reached for container f7e8ecb03e43. Exiting log stream.
2025-02-10 03:08:51.319 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57761/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:51.322 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 03:08:51.322 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 03:08:51.323 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57761/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:51.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.81/tcp/57762/p2p/16Uiu2HAmJdZ9MGA3htpWjFoAUdp2rsU4ahp7JG4Xm5WJZgsgFWXF","/ip4/172.18.221.81/tcp/57763/ws/p2p/16Uiu2HAmJdZ9MGA3htpWjFoAUdp2rsU4ahp7JG4Xm5WJZgsgFWXF"],"enrUri":"enr:-L24QPj843Lfy5xojHM3wtzalrBXUnGLFugCCnfo0OGB9MeRERn60VqQTpADJwpgCCzN1lIR56I2Qorn1gO8a_Gh-K4CgmlkgnY0gmlwhKwS3VGKbXVsdGlhZGRyc5YACASsEt1RBuGiAAoErBLdUQbho90DgnJzhQADAQAAiXNlY3AyNTZrMaEDWMgKV1gVzbpl2QaUQ-kzyLqORvSjtrfe7V7CyONoH46DdGNwguGig3VkcILhpIV3YWt1MgM"}'
2025-02-10 03:08:51.325 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:08:51.332 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-10 03:08:51.332 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-10_03-08-50__a40c4551-d919-438c-b49a-fc12374108dd__wakuorg_go-waku:latest.log
2025-02-10 03:08:51.332 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:08:51.332 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:08:51.333 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:08:51.333 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.145.227
2025-02-10 03:08:51.334 DEBUG [src.node.docker_mananger] Generated ports ['44805', '44806', '44807', '44808', '44809']
2025-02-10 03:08:51.334 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:08:51.334 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:08:51.334 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:08:51.334 DEBUG [src.node.docker_mananger] docker run -i -t -p 44805:44805 -p 44806:44806 -p 44807:44807 -p 44808:44808 -p 44809:44809 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44807 --rest-port=44805 --tcp-port=44806 --discv5-udp-port=44808 --rest-address=0.0.0.0 --nat=extip:172.18.145.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c11c64443bdefaecc7642bbd5f3edddb5ffce1407d8e3f561ec9ee63a5eda86a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QPj843Lfy5xojHM3wtzalrBXUnGLFugCCnfo0OGB9MeRERn60VqQTpADJwpgCCzN1lIR56I2Qorn1gO8a_Gh-K4CgmlkgnY0gmlwhKwS3VGKbXVsdGlhZGRyc5YACASsEt1RBuGiAAoErBLdUQbho90DgnJzhQADAQAAiXNlY3AyNTZrMaEDWMgKV1gVzbpl2QaUQ-kzyLqORvSjtrfe7V7CyONoH46DdGNwguGig3VkcILhpIV3YWt1MgM --storenode=/ip4/172.18.221.81/tcp/57762/p2p/16Uiu2HAmJdZ9MGA3htpWjFoAUdp2rsU4ahp7JG4Xm5WJZgsgFWXF --store=true --relay=true
2025-02-10 03:08:51.566 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.145.227 waku 48fd1b38651fb8a3eab13f831635d213ba07a4c3ceed3d5f71de23eb827e09cb
2025-02-10 03:08:51.617 DEBUG [src.node.docker_mananger] Container started with ID 48fd1b38651f. Setting up logs at ./log/docker/store_node1_2025-02-10_03-08-50__a40c4551-d919-438c-b49a-fc12374108dd__wakuorg_go-waku:latest.log
2025-02-10 03:08:51.617 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 44805
2025-02-10 03:08:51.618 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:08:52.619 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44805/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:52.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QK4i2pKdNtsCsp9Pm1iqcohN8mhUcq9vKiFttlW1vlB_cNmsCFCzDdX8fH2PR1szJZ0xB9hOSnhUDNlj3JE2dwWGAZTt1MQlgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDpxjsVkUK2QdcP8QSv3baGqxaUXazIpFo05UMWYecBEWDdGNwgq8Gg3VkcIKvCIV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/44806/p2p/16Uiu2HAmPuGUhRfwgXU76KPKEKkbyjfnn4cdrNuUvoZeYyE1aH6U","/ip4/127.0.0.1/tcp/44807/ws/p2p/16Uiu2HAmPuGUhRfwgXU76KPKEKkbyjfnn4cdrNuUvoZeYyE1aH6U","/ip4/172.17.0.3/tcp/44806/p2p/16Uiu2HAmPuGUhRfwgXU76KPKEKkbyjfnn4cdrNuUvoZeYyE1aH6U","/ip4/172.17.0.3/tcp/44807/ws/p2p/16Uiu2HAmPuGUhRfwgXU76KPKEKkbyjfnn4cdrNuUvoZeYyE1aH6U"]}'
2025-02-10 03:08:52.622 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:08:52.623 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44805/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.81/tcp/57762/p2p/16Uiu2HAmJdZ9MGA3htpWjFoAUdp2rsU4ahp7JG4Xm5WJZgsgFWXF", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-10 03:08:52.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-10 03:08:52.640 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 03:08:52.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:52.664 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44805/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 03:08:52.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-10 03:08:52.669 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:52.670 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:52.683 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:52.684 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:52.884 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:52.884 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:52.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:52.890 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:53.091 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:53.091 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:53.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:53.097 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:53.297 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:53.298 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:53.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:53.304 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:53.504 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:53.505 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:53.510 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:53.511 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:53.711 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:53.711 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:53.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:53.719 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:53.920 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:53.920 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:53.925 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:53.926 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:54.126 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:54.127 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:54.132 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:54.132 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:54.333 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:54.333 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:54.339 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:54.339 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:54.540 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:54.540 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57761/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:54.545 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:54.546 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:54.746 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57761/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:54.749 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:57761/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-10 03:08:54.750 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-10 03:08:54.750 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44805/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:54.752 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44805/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=$2&ascending=true. Response content: b'{"status_code":400,"status_desc":"strconv.ParseUint: parsing \\"$2\\": invalid syntax"}'
2025-02-10 03:08:54.753 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-10 03:08:54.754 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 03:08:54.755 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 03:08:54.755 DEBUG [src.node.waku_node] Stopping container with id 522d175eb728
2025-02-10 03:08:55.842 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:55.843 DEBUG [src.node.waku_node] Stopping container with id 48fd1b38651f
2025-02-10 03:08:56.350 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:56.350 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 03:08:56.366 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:08:56.370 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
