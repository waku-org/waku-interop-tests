2025-02-10 03:10:01.306 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 03:10:01.307 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_pubsub_topic with id: 2025-02-10_03-10-01__bf446ad3-a938-4075-a822-64a331665bfd
2025-02-10 03:10:01.308 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 03:10:01.308 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 03:10:01.309 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-10 03:10:01.315 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 03:10:01.315 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_03-10-01__bf446ad3-a938-4075-a822-64a331665bfd__wakuorg_nwaku:latest.log
2025-02-10 03:10:01.315 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:10:01.315 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:10:01.317 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:10:01.317 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.180.116
2025-02-10 03:10:01.317 DEBUG [src.node.docker_mananger] Generated ports ['55652', '55653', '55654', '55655', '55656']
2025-02-10 03:10:01.317 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:10:01.317 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:10:01.317 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:10:01.318 DEBUG [src.node.docker_mananger] docker run -i -t -p 55652:55652 -p 55653:55653 -p 55654:55654 -p 55655:55655 -p 55656:55656 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55654 --rest-port=55652 --tcp-port=55653 --discv5-udp-port=55655 --rest-address=0.0.0.0 --nat=extip:172.18.180.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcc0eaefdca0edcd59b3eeb0de91cc8f636caae9b86fa15efabe6c8f59e11c3b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55656 --metrics-logging=true --relay=true --filter=true
2025-02-10 03:10:01.547 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.180.116 waku d21145aad04f86bf09578c4cc5a1761a133184562dcdfb94f69966d88a87a764
2025-02-10 03:10:01.598 DEBUG [src.node.docker_mananger] Container started with ID d21145aad04f. Setting up logs at ./log/docker/node1_2025-02-10_03-10-01__bf446ad3-a938-4075-a822-64a331665bfd__wakuorg_nwaku:latest.log
2025-02-10 03:10:01.600 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55652
2025-02-10 03:10:01.600 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:10:02.118 ERROR [src.node.docker_mananger] Max retries reached for container cbab4641f326. Exiting log stream.
2025-02-10 03:10:02.600 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55652/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:10:02.603 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 03:10:02.603 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 03:10:02.604 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55652/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:10:02.606 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.116/tcp/55653/p2p/16Uiu2HAmLMXfi4pwp8uxPLdhTzt4wP6v92D91FqHKVPiy1Lhkc3X","/ip4/172.18.180.116/tcp/55654/ws/p2p/16Uiu2HAmLMXfi4pwp8uxPLdhTzt4wP6v92D91FqHKVPiy1Lhkc3X"],"enrUri":"enr:-L24QHsc-6JF4IC3MZhjS4WHZz5s3jgSwEiKg5OBzLUaJ8xNNvcs5FaoTeQCeb0dK2UWEHifkv-nyb9LSf6pbczGYvECgmlkgnY0gmlwhKwStHSKbXVsdGlhZGRyc5YACASsErR0BtllAAoErBK0dAbZZt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcmRzpOkyPBBnvZR0vT8hz41M-ofGd8u9DDcZo8xep5aDdGNwgtllg3VkcILZZ4V3YWt1MgU"}'
2025-02-10 03:10:02.606 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:10:02.606 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-10 03:10:02.613 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-10 03:10:02.613 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_03-10-01__bf446ad3-a938-4075-a822-64a331665bfd__wakuorg_go-waku:latest.log
2025-02-10 03:10:02.613 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:10:02.613 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:10:02.614 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:10:02.614 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.79
2025-02-10 03:10:02.615 DEBUG [src.node.docker_mananger] Generated ports ['3218', '3219', '3220', '3221', '3222']
2025-02-10 03:10:02.615 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:10:02.615 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:10:02.615 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:10:02.615 DEBUG [src.node.docker_mananger] docker run -i -t -p 3218:3218 -p 3219:3219 -p 3220:3220 -p 3221:3221 -p 3222:3222 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3220 --rest-port=3218 --tcp-port=3219 --discv5-udp-port=3221 --rest-address=0.0.0.0 --nat=extip:172.18.255.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff0e07f03a7f50d131fdefc8c4bd17fc4a62dc09b2ea6cfb5a2cce6c8dcc679d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QHsc-6JF4IC3MZhjS4WHZz5s3jgSwEiKg5OBzLUaJ8xNNvcs5FaoTeQCeb0dK2UWEHifkv-nyb9LSf6pbczGYvECgmlkgnY0gmlwhKwStHSKbXVsdGlhZGRyc5YACASsErR0BtllAAoErBK0dAbZZt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcmRzpOkyPBBnvZR0vT8hz41M-ofGd8u9DDcZo8xep5aDdGNwgtllg3VkcILZZ4V3YWt1MgU --filternode=/ip4/172.18.180.116/tcp/55653/p2p/16Uiu2HAmLMXfi4pwp8uxPLdhTzt4wP6v92D91FqHKVPiy1Lhkc3X --pubsub-topic=/waku/2/rs/3/1
2025-02-10 03:10:02.841 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.79 waku 6b7929929e2b3c7b664a275736b9ded4546268d1a46b8e2c51e79a8b86ab6774
2025-02-10 03:10:02.890 DEBUG [src.node.docker_mananger] Container started with ID 6b7929929e2b. Setting up logs at ./log/docker/node2_2025-02-10_03-10-01__bf446ad3-a938-4075-a822-64a331665bfd__wakuorg_go-waku:latest.log
2025-02-10 03:10:02.891 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 3218
2025-02-10 03:10:02.891 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:10:03.893 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3218/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:10:03.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHtUPaKdf3l7crM69fmLhfD13uVZz7_HNe2zbp6U5YmOWmoM-skTfqVvoXJ0y4pLRK4mf9V17WgBYlAKL5W4HBmGAZTt1dqLgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQJ_dM6wr6YXGoDDhD4VflF4yNhN5cCjaAUHIJQKuMT8Q4N0Y3CCDJODdWRwggyVhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/3219/p2p/16Uiu2HAm41D4b3B5rZHPTgXVzxJzMAfJBJiqB6h5arfVU2ZHf9VU","/ip4/127.0.0.1/tcp/3220/ws/p2p/16Uiu2HAm41D4b3B5rZHPTgXVzxJzMAfJBJiqB6h5arfVU2ZHf9VU","/ip4/172.17.0.3/tcp/3219/p2p/16Uiu2HAm41D4b3B5rZHPTgXVzxJzMAfJBJiqB6h5arfVU2ZHf9VU","/ip4/172.17.0.3/tcp/3220/ws/p2p/16Uiu2HAm41D4b3B5rZHPTgXVzxJzMAfJBJiqB6h5arfVU2ZHf9VU"]}'
2025-02-10 03:10:03.896 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:10:03.896 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3218/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.180.116/tcp/55653/p2p/16Uiu2HAmLMXfi4pwp8uxPLdhTzt4wP6v92D91FqHKVPiy1Lhkc3X", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-10 03:10:03.898 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-10 03:10:03.898 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-10 03:10:03.899 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55652/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 03:10:03.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:10:03.902 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3218/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8ff83145-db21-4a60-863a-535b59535c75", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-10 03:10:03.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"8ff83145-db21-4a60-863a-535b59535c75","statusDesc":"OK"}'
2025-02-10 03:10:03.909 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:3218/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/9"}'
2025-02-10 03:10:03.910 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"can\'t unsubscribe from 16Uiu2HAmLMXfi4pwp8uxPLdhTzt4wP6v92D91FqHKVPiy1Lhkc3X"}'
2025-02-10 03:10:03.911 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55652/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:10:03.918 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:10:03.919 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-10 03:10:04.019 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-10 03:10:04.019 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3218/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:10:04.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739157003911520768,"ephemeral":false}]'
2025-02-10 03:10:04.024 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 03:10:04.025 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 03:10:04.026 DEBUG [src.node.waku_node] Stopping container with id d21145aad04f
2025-02-10 03:10:04.595 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:10:04.595 DEBUG [src.node.waku_node] Stopping container with id 6b7929929e2b
2025-02-10 03:10:05.398 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:10:05.399 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 03:10:05.403 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:10:05.406 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:10:05.409 ERROR [src.node.docker_mananger] Max retries reached for container d21145aad04f. Exiting log stream.
