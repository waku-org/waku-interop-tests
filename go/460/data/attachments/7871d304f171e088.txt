2025-02-10 03:06:23.482 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 03:06:23.482 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-10_03-06-23__aacd3101-8b11-43be-84d2-a3166115dd0d
2025-02-10 03:06:23.482 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 03:06:23.483 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 03:06:23.483 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 03:06:23.491 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-10 03:06:23.492 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_03-06-23__aacd3101-8b11-43be-84d2-a3166115dd0d__wakuorg_go-waku:latest.log
2025-02-10 03:06:23.497 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 03:06:23.497 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_03-06-23__aacd3101-8b11-43be-84d2-a3166115dd0d__wakuorg_nwaku:latest.log
2025-02-10 03:06:23.503 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-10 03:06:23.503 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-10_03-06-23__aacd3101-8b11-43be-84d2-a3166115dd0d__wakuorg_go-waku:latest.log
2025-02-10 03:06:23.503 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-10 03:06:23.503 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 03:06:23.504 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:06:23.504 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:06:23.573 DEBUG [src.node.docker_mananger] Network waku created
2025-02-10 03:06:23.573 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.131.136
2025-02-10 03:06:23.573 DEBUG [src.node.docker_mananger] Generated ports ['59584', '59585', '59586', '59587', '59588']
2025-02-10 03:06:23.574 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:06:23.574 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:06:23.574 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:06:23.574 DEBUG [src.node.docker_mananger] docker run -i -t -p 59584:59584 -p 59585:59585 -p 59586:59586 -p 59587:59587 -p 59588:59588 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=59586 --rest-port=59584 --tcp-port=59585 --discv5-udp-port=59587 --rest-address=0.0.0.0 --nat=extip:172.18.131.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3ed4fe3f6dcc7dad4a3bf643ed97adcfccf29ac3db13c38ff0b826d39abafd1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-10 03:06:26.364 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.131.136 waku 2b7f2497e464e86fc8ba20701c121d52c3c83cf78b42b6125f241e5942f1c2e5
2025-02-10 03:06:26.421 DEBUG [src.node.docker_mananger] Container started with ID 2b7f2497e464. Setting up logs at ./log/docker/node1_2025-02-10_03-06-23__aacd3101-8b11-43be-84d2-a3166115dd0d__wakuorg_go-waku:latest.log
2025-02-10 03:06:26.423 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 59584
2025-02-10 03:06:26.426 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:06:27.427 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59584/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:06:27.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QCZ9gIWRRdD7MsIG4I1nGQVELR5WMsi_lZKLIW7_v849T1ZBlLipqW1IpUVky7_vavUi1gEjQRO6f18Ry-4fMg2GAZTt0ozrgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDAAQskMTukneHkai3eW2E6eWJJVletewkCqwBIQ36Ub-DdGNwgujBg3VkcILow4V3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/59585/p2p/16Uiu2HAmCf43QFADx9B1AWAnwCXhmxpP6Mf46jgVxjuEaSk6Eeer","/ip4/127.0.0.1/tcp/59586/ws/p2p/16Uiu2HAmCf43QFADx9B1AWAnwCXhmxpP6Mf46jgVxjuEaSk6Eeer","/ip4/172.17.0.2/tcp/59585/p2p/16Uiu2HAmCf43QFADx9B1AWAnwCXhmxpP6Mf46jgVxjuEaSk6Eeer","/ip4/172.17.0.2/tcp/59586/ws/p2p/16Uiu2HAmCf43QFADx9B1AWAnwCXhmxpP6Mf46jgVxjuEaSk6Eeer"]}'
2025-02-10 03:06:27.430 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:06:27.430 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:06:27.430 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:06:27.432 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:06:27.432 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.236.7
2025-02-10 03:06:27.432 DEBUG [src.node.docker_mananger] Generated ports ['63951', '63952', '63953', '63954', '63955']
2025-02-10 03:06:27.432 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:06:27.432 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:06:27.432 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:06:27.432 DEBUG [src.node.docker_mananger] docker run -i -t -p 63951:63951 -p 63952:63952 -p 63953:63953 -p 63954:63954 -p 63955:63955 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63953 --rest-port=63951 --tcp-port=63952 --discv5-udp-port=63954 --rest-address=0.0.0.0 --nat=extip:172.18.236.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9203bbcb5ea9bfcad946861759d968f8fa6febcc6d4d0651b3d72836d0845c45 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63955 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QCZ9gIWRRdD7MsIG4I1nGQVELR5WMsi_lZKLIW7_v849T1ZBlLipqW1IpUVky7_vavUi1gEjQRO6f18Ry-4fMg2GAZTt0ozrgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDAAQskMTukneHkai3eW2E6eWJJVletewkCqwBIQ36Ub-DdGNwgujBg3VkcILow4V3YWt1Mgk --lightpushnode=/ip4/172.18.131.136/tcp/59585/p2p/16Uiu2HAmCf43QFADx9B1AWAnwCXhmxpP6Mf46jgVxjuEaSk6Eeer
2025-02-10 03:06:29.386 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.236.7 waku c971517c09dfa68a0d1a32274c600ed015182ea83a47d2100ec2180b4b6c46a6
2025-02-10 03:06:29.440 DEBUG [src.node.docker_mananger] Container started with ID c971517c09df. Setting up logs at ./log/docker/node2_2025-02-10_03-06-23__aacd3101-8b11-43be-84d2-a3166115dd0d__wakuorg_nwaku:latest.log
2025-02-10 03:06:29.440 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63951
2025-02-10 03:06:29.440 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:06:30.441 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63951/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:06:30.444 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 03:06:30.444 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 03:06:30.444 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63951/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:06:30.446 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.236.7/tcp/63952/p2p/16Uiu2HAmUmUyfkjfMGbwrzNZC1ipZ1sbzgHqJtnFfPED5xbUaW7q","/ip4/172.18.236.7/tcp/63953/ws/p2p/16Uiu2HAmUmUyfkjfMGbwrzNZC1ipZ1sbzgHqJtnFfPED5xbUaW7q"],"enrUri":"enr:-L24QLkLatpnqvJeNssZTTpVGZBgQaEPos2UADk7DbpR7O5OPvJdBYO-hJPkYdnfdtXKOZcbMIv7m-fbrEWXCT0e48ICgmlkgnY0gmlwhKwS7AeKbXVsdGlhZGRyc5YACASsEuwHBvnQAAoErBLsBwb50d0DgnJzhQADAQAAiXNlY3AyNTZrMaED72TYNqVowVp8bcT3nYbXC4S9YacM7Scmh_12AtFHBXiDdGNwgvnQg3VkcIL50oV3YWt1Mgs"}'
2025-02-10 03:06:30.446 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:06:30.447 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:06:30.447 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:06:30.448 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:06:30.448 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.228
2025-02-10 03:06:30.449 DEBUG [src.node.docker_mananger] Generated ports ['3295', '3296', '3297', '3298', '3299']
2025-02-10 03:06:30.449 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:06:30.449 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:06:30.449 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:06:30.449 DEBUG [src.node.docker_mananger] docker run -i -t -p 3295:3295 -p 3296:3296 -p 3297:3297 -p 3298:3298 -p 3299:3299 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3297 --rest-port=3295 --tcp-port=3296 --discv5-udp-port=3298 --rest-address=0.0.0.0 --nat=extip:172.18.64.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=584da1ac29ef228b9b9ebe44350cb57fe0afb8766408d3ecfdac4b1e9cad0eeb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.236.7/tcp/63952/p2p/16Uiu2HAmUmUyfkjfMGbwrzNZC1ipZ1sbzgHqJtnFfPED5xbUaW7q --discv5-bootstrap-node=enr:-L24QLkLatpnqvJeNssZTTpVGZBgQaEPos2UADk7DbpR7O5OPvJdBYO-hJPkYdnfdtXKOZcbMIv7m-fbrEWXCT0e48ICgmlkgnY0gmlwhKwS7AeKbXVsdGlhZGRyc5YACASsEuwHBvnQAAoErBLsBwb50d0DgnJzhQADAQAAiXNlY3AyNTZrMaED72TYNqVowVp8bcT3nYbXC4S9YacM7Scmh_12AtFHBXiDdGNwgvnQg3VkcIL50oV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-10 03:06:30.691 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.228 waku cd7b3093c55dcc9e5cfb041577f26c6abe1ccb51419931068e175e5d13db9961
2025-02-10 03:06:30.746 DEBUG [src.node.docker_mananger] Container started with ID cd7b3093c55d. Setting up logs at ./log/docker/node3_2025-02-10_03-06-23__aacd3101-8b11-43be-84d2-a3166115dd0d__wakuorg_go-waku:latest.log
2025-02-10 03:06:30.747 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 3295
2025-02-10 03:06:30.747 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:06:31.748 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3295/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:06:31.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QEveLBCeL9LmVluL7GwtQ1j8QZFKmvfdjv4wsTkZ0KhQcP6De8QxDLeFf5UWM68V8anoEk_mJYwHqcbjNO3eb4aGAZTt0p3RgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQPoy95dVxWqNaPOsB79uUGfnDAIKJ9BNzKC6jrMOi8d34N0Y3CCDOCDdWRwggzihXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/3296/p2p/16Uiu2HAmUKjEp4BdiC1uDyxdo1t5qtsGAUs8pyoUR8cTKNNi3uwL","/ip4/127.0.0.1/tcp/3297/ws/p2p/16Uiu2HAmUKjEp4BdiC1uDyxdo1t5qtsGAUs8pyoUR8cTKNNi3uwL","/ip4/172.17.0.4/tcp/3296/p2p/16Uiu2HAmUKjEp4BdiC1uDyxdo1t5qtsGAUs8pyoUR8cTKNNi3uwL","/ip4/172.17.0.4/tcp/3297/ws/p2p/16Uiu2HAmUKjEp4BdiC1uDyxdo1t5qtsGAUs8pyoUR8cTKNNi3uwL"]}'
2025-02-10 03:06:31.750 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:06:31.751 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59584/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 03:06:31.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-10 03:06:31.753 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63951/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 03:06:31.756 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:06:31.757 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59584/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:06:31.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmUmUyfkjfMGbwrzNZC1ipZ1sbzgHqJtnFfPED5xbUaW7q","multiaddrs":["/ip4/172.18.236.7/tcp/63952/p2p/16Uiu2HAmUmUyfkjfMGbwrzNZC1ipZ1sbzgHqJtnFfPED5xbUaW7q","/ip4/172.18.236.7/tcp/63953/ws/p2p/16Uiu2HAmUmUyfkjfMGbwrzNZC1ipZ1sbzgHqJtnFfPED5xbUaW7q"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-10 03:06:31.758 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63951/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:06:31.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/3296/p2p/16Uiu2HAmUKjEp4BdiC1uDyxdo1t5qtsGAUs8pyoUR8cTKNNi3uwL","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-10 03:06:31.761 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-10 03:07:01.762 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59584/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739156821762206464}}'
2025-02-10 03:07:01.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-10 03:07:01.773 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:07:02.774 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-10 03:07:02.774 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3295/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:02.779 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"21e3c05822dc5f92c5744181e8cc392c3b47f9dfac7ff8010245f8c50daa6d59","status_code":200,"status_desc":"OK","messages":[{"message_hash":"bVEh47FWPDpz1urxqM6k/cGYRoAzOLBb83xZHaJMItw="}]}'
2025-02-10 03:07:02.783 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 03:07:02.784 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 03:07:02.784 DEBUG [src.node.waku_node] Stopping container with id 2b7f2497e464
2025-02-10 03:07:03.288 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:07:03.288 DEBUG [src.node.waku_node] Stopping container with id c971517c09df
2025-02-10 03:07:04.102 ERROR [src.node.docker_mananger] Max retries reached for container 2b7f2497e464. Exiting log stream.
2025-02-10 03:07:04.104 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:07:04.106 DEBUG [src.node.waku_node] Stopping container with id cd7b3093c55d
2025-02-10 03:07:04.596 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:07:04.597 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 03:07:04.602 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:07:04.626 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:07:04.629 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
