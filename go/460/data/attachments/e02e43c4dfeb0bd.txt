2025-02-10 03:08:14.530 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 03:08:14.530 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-10_03-08-14__d5a0b51a-babc-454d-b551-11bbb5889be0
2025-02-10 03:08:14.531 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 03:08:14.531 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 03:08:14.531 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-10 03:08:14.538 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 03:08:14.538 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_03-08-14__d5a0b51a-babc-454d-b551-11bbb5889be0__wakuorg_nwaku:latest.log
2025-02-10 03:08:14.538 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:08:14.538 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:08:14.539 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:08:14.540 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.186
2025-02-10 03:08:14.540 DEBUG [src.node.docker_mananger] Generated ports ['42272', '42273', '42274', '42275', '42276']
2025-02-10 03:08:14.540 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:08:14.540 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:08:14.540 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:08:14.540 DEBUG [src.node.docker_mananger] docker run -i -t -p 42272:42272 -p 42273:42273 -p 42274:42274 -p 42275:42275 -p 42276:42276 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42274 --rest-port=42272 --tcp-port=42273 --discv5-udp-port=42275 --rest-address=0.0.0.0 --nat=extip:172.18.80.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1e9e8abffeeea877dacb9b29ffe270eaccbf8d004f9905fbe0725e558ba7e7e3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42276 --metrics-logging=true --relay=true --filter=true
2025-02-10 03:08:14.783 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.186 waku a13498dfd11d49a00ace88b5ef54fe10c7f33f635d10270dd6869b225f741496
2025-02-10 03:08:14.830 DEBUG [src.node.docker_mananger] Container started with ID a13498dfd11d. Setting up logs at ./log/docker/node1_2025-02-10_03-08-14__d5a0b51a-babc-454d-b551-11bbb5889be0__wakuorg_nwaku:latest.log
2025-02-10 03:08:14.831 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42272
2025-02-10 03:08:14.831 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:08:15.215 ERROR [src.node.docker_mananger] Max retries reached for container 45ac8bac5cc9. Exiting log stream.
2025-02-10 03:08:15.831 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42272/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:15.834 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 03:08:15.834 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 03:08:15.835 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42272/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:15.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.186/tcp/42273/p2p/16Uiu2HAmBbsCYjx4tGFCUYZ2Mqi2Rysr9K8x3dzkYcCrhFR8dDfD","/ip4/172.18.80.186/tcp/42274/ws/p2p/16Uiu2HAmBbsCYjx4tGFCUYZ2Mqi2Rysr9K8x3dzkYcCrhFR8dDfD"],"enrUri":"enr:-L24QJA1RjqC0RUMogOUh4cSJcHxVJqRwFfXqDZlO4QcYi8Ma576CQLHOBvelE4jqhx9h_yMX1u0Dc1zZaQ6fbXY74cCgmlkgnY0gmlwhKwSULqKbXVsdGlhZGRyc5YACASsElC6BqUhAAoErBJQugalIt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8Fd8PKiZ02AQM7xZdwAO324mfoZ81_DC38J3eGeU9OiDdGNwgqUhg3VkcIKlI4V3YWt1MgU"}'
2025-02-10 03:08:15.837 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:08:15.837 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-10 03:08:15.844 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-10 03:08:15.844 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_03-08-14__d5a0b51a-babc-454d-b551-11bbb5889be0__wakuorg_go-waku:latest.log
2025-02-10 03:08:15.844 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:08:15.844 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:08:15.846 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:08:15.846 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.192.222
2025-02-10 03:08:15.846 DEBUG [src.node.docker_mananger] Generated ports ['1691', '1692', '1693', '1694', '1695']
2025-02-10 03:08:15.846 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:08:15.846 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:08:15.846 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:08:15.846 DEBUG [src.node.docker_mananger] docker run -i -t -p 1691:1691 -p 1692:1692 -p 1693:1693 -p 1694:1694 -p 1695:1695 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=1693 --rest-port=1691 --tcp-port=1692 --discv5-udp-port=1694 --rest-address=0.0.0.0 --nat=extip:172.18.192.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4e9d1aaf3fffc9c19a8afbbabe1c9d22e20f8c3d872a2d9ad53acbb8e6b4cf3c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QJA1RjqC0RUMogOUh4cSJcHxVJqRwFfXqDZlO4QcYi8Ma576CQLHOBvelE4jqhx9h_yMX1u0Dc1zZaQ6fbXY74cCgmlkgnY0gmlwhKwSULqKbXVsdGlhZGRyc5YACASsElC6BqUhAAoErBJQugalIt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8Fd8PKiZ02AQM7xZdwAO324mfoZ81_DC38J3eGeU9OiDdGNwgqUhg3VkcIKlI4V3YWt1MgU --filternode=/ip4/172.18.80.186/tcp/42273/p2p/16Uiu2HAmBbsCYjx4tGFCUYZ2Mqi2Rysr9K8x3dzkYcCrhFR8dDfD --pubsub-topic=/waku/2/rs/3/1
2025-02-10 03:08:16.081 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.192.222 waku 709f82004706a1ae7ca7a2fb655cf61f1a50891136dd5e954bc6848a4f49c577
2025-02-10 03:08:16.138 DEBUG [src.node.docker_mananger] Container started with ID 709f82004706. Setting up logs at ./log/docker/node2_2025-02-10_03-08-14__d5a0b51a-babc-454d-b551-11bbb5889be0__wakuorg_go-waku:latest.log
2025-02-10 03:08:16.139 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 1691
2025-02-10 03:08:16.139 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:08:17.139 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1691/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:17.142 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHjN0ux7IPZx0JUTBo-RDF7A9f6va7gQIZs9KIUPyWpVG3ntKk59WoROdK5my-CzVvylbwkHcpLILl3rwX43TfOGAZTt1DmDgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQPlTMaDXMqLJUTqxJZu58RStcn6yJszaY-Rct4U1uicpoN0Y3CCBpyDdWRwggaehXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/1692/p2p/16Uiu2HAmU65cZmV1ajnN8UUPEZsrcmVk96tsCDWL5VCvmXMck18h","/ip4/127.0.0.1/tcp/1693/ws/p2p/16Uiu2HAmU65cZmV1ajnN8UUPEZsrcmVk96tsCDWL5VCvmXMck18h","/ip4/172.17.0.3/tcp/1692/p2p/16Uiu2HAmU65cZmV1ajnN8UUPEZsrcmVk96tsCDWL5VCvmXMck18h","/ip4/172.17.0.3/tcp/1693/ws/p2p/16Uiu2HAmU65cZmV1ajnN8UUPEZsrcmVk96tsCDWL5VCvmXMck18h"]}'
2025-02-10 03:08:17.142 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:08:17.143 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1691/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.80.186/tcp/42273/p2p/16Uiu2HAmBbsCYjx4tGFCUYZ2Mqi2Rysr9K8x3dzkYcCrhFR8dDfD", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-10 03:08:17.145 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-10 03:08:17.145 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-10 03:08:17.145 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42272/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 03:08:17.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:17.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1691/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3f87558c-df10-49d1-8567-6169215fc179", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-10 03:08:17.155 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3f87558c-df10-49d1-8567-6169215fc179","statusDesc":"OK"}'
2025-02-10 03:08:17.156 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1691/filter/v2/subscriptions/37db345d-7a46-4a39-bf17-bcafaf3a091a" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:17.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"37db345d-7a46-4a39-bf17-bcafaf3a091a","statusDesc":"OK"}'
2025-02-10 03:08:17.162 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 03:08:17.163 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 03:08:17.163 DEBUG [src.node.waku_node] Stopping container with id a13498dfd11d
2025-02-10 03:08:17.761 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:17.761 DEBUG [src.node.waku_node] Stopping container with id 709f82004706
2025-02-10 03:08:18.575 ERROR [src.node.docker_mananger] Max retries reached for container a13498dfd11d. Exiting log stream.
2025-02-10 03:08:18.641 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:18.642 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 03:08:18.646 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:08:18.650 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
