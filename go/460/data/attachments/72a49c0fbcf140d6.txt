2025-02-10 03:08:37.794 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 03:08:37.795 DEBUG [tests.conftest] Running test: test_light_push_with_payload_less_than_150_kb with id: 2025-02-10_03-08-37__01e27612-4772-4a93-a9de-bda329995cb8
2025-02-10 03:08:37.795 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 03:08:37.795 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 03:08:37.801 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 03:08:37.801 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-10_03-08-37__01e27612-4772-4a93-a9de-bda329995cb8__wakuorg_nwaku:latest.log
2025-02-10 03:08:37.801 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:08:37.802 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:08:37.803 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:08:37.803 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.62.206
2025-02-10 03:08:37.803 DEBUG [src.node.docker_mananger] Generated ports ['5094', '5095', '5096', '5097', '5098']
2025-02-10 03:08:37.803 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:08:37.804 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:08:37.804 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:08:37.804 DEBUG [src.node.docker_mananger] docker run -i -t -p 5094:5094 -p 5095:5095 -p 5096:5096 -p 5097:5097 -p 5098:5098 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5096 --rest-port=5094 --tcp-port=5095 --discv5-udp-port=5097 --rest-address=0.0.0.0 --nat=extip:172.18.62.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e97c17ccbcba0f886bd348eebfa5e4ea23aeaf0bdcf6d55a828ae5dfc8a3bb9e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5098 --metrics-logging=true --lightpush=true --relay=true
2025-02-10 03:08:38.023 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.62.206 waku e099422ad6f70ef70291cd5c3b44b4bbba4b7cc97582a91b196b661206e35153
2025-02-10 03:08:38.068 DEBUG [src.node.docker_mananger] Container started with ID e099422ad6f7. Setting up logs at ./log/docker/receiving_node1_2025-02-10_03-08-37__01e27612-4772-4a93-a9de-bda329995cb8__wakuorg_nwaku:latest.log
2025-02-10 03:08:38.069 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5094
2025-02-10 03:08:38.069 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:08:38.601 ERROR [src.node.docker_mananger] Max retries reached for container 805820e52f66. Exiting log stream.
2025-02-10 03:08:39.070 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5094/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:39.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 03:08:39.073 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 03:08:39.073 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5094/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:39.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.206/tcp/5095/p2p/16Uiu2HAm15GresN7PfeVj4owo2ynjhVQRAfqkuYLsxVtSg3aFy2C","/ip4/172.18.62.206/tcp/5096/ws/p2p/16Uiu2HAm15GresN7PfeVj4owo2ynjhVQRAfqkuYLsxVtSg3aFy2C"],"enrUri":"enr:-L24QNooezlBw4JhRsi9X0vWXUPGYJSinYvXaKWHUh8frAQFBkPjQvtza2H0q3xWnF7oAjTiWE_CTUXRhNhWi93PT3QCgmlkgnY0gmlwhKwSPs6KbXVsdGlhZGRyc5YACASsEj7OBhPnAAoErBI-zgYT6N0DgnJzhQADAQAAiXNlY3AyNTZrMaECU-xcKTr_Zp7NhBnT5i1dSXOebx-Z3qCEZTJJqZ48SeWDdGNwghPng3VkcIIT6YV3YWt1Mgk"}'
2025-02-10 03:08:39.075 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:08:39.082 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 03:08:39.082 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-10_03-08-37__01e27612-4772-4a93-a9de-bda329995cb8__wakuorg_nwaku:latest.log
2025-02-10 03:08:39.082 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:08:39.082 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:08:39.083 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:08:39.083 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.212
2025-02-10 03:08:39.084 DEBUG [src.node.docker_mananger] Generated ports ['2680', '2681', '2682', '2683', '2684']
2025-02-10 03:08:39.084 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:08:39.084 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:08:39.084 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:08:39.084 DEBUG [src.node.docker_mananger] docker run -i -t -p 2680:2680 -p 2681:2681 -p 2682:2682 -p 2683:2683 -p 2684:2684 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2682 --rest-port=2680 --tcp-port=2681 --discv5-udp-port=2683 --rest-address=0.0.0.0 --nat=extip:172.18.71.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ef9ea471a3fd1ff65c6c36a40492558a4f091e48a84389cf6c9dbcc9a4ff2d2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2684 --metrics-logging=true --lightpush=false --relay=true
2025-02-10 03:08:39.309 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.212 waku cf7dc00b553e34bb231cfe3ed4f0b27841daa4150dfb595f0a0a3699fcacb14d
2025-02-10 03:08:39.352 DEBUG [src.node.docker_mananger] Container started with ID cf7dc00b553e. Setting up logs at ./log/docker/receiving_node2_2025-02-10_03-08-37__01e27612-4772-4a93-a9de-bda329995cb8__wakuorg_nwaku:latest.log
2025-02-10 03:08:39.353 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2680
2025-02-10 03:08:39.353 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:08:40.354 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2680/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:40.356 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 03:08:40.357 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 03:08:40.357 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2680/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:40.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.212/tcp/2681/p2p/16Uiu2HAm1uLu5w2AtZqmux5QgNBCaPpQxoGTuJZEirTBE9zkHDXn","/ip4/172.18.71.212/tcp/2682/ws/p2p/16Uiu2HAm1uLu5w2AtZqmux5QgNBCaPpQxoGTuJZEirTBE9zkHDXn"],"enrUri":"enr:-L24QAA4XZUgFNBTrWbOYnSCZzgwVbss0UMiN_nwgjw52SSSaMIbeHNUnNIoiLQrtxve7KxVsSImImeHUkuYCHIFMmwCgmlkgnY0gmlwhKwSR9SKbXVsdGlhZGRyc5YACASsEkfUBgp5AAoErBJH1AYKet0DgnJzhQADAQAAiXNlY3AyNTZrMaECYDzPHxYGqGVNyORHL-8tPwFZCXZEvruTPbhkFG_orfmDdGNwggp5g3VkcIIKe4V3YWt1MgE"}'
2025-02-10 03:08:40.359 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:08:40.359 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2680/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.62.206/tcp/5095/p2p/16Uiu2HAm15GresN7PfeVj4owo2ynjhVQRAfqkuYLsxVtSg3aFy2C"]'
2025-02-10 03:08:40.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:40.412 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-10 03:08:40.412 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-10_03-08-37__01e27612-4772-4a93-a9de-bda329995cb8__wakuorg_go-waku:latest.log
2025-02-10 03:08:40.412 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:08:40.412 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:08:40.414 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:08:40.414 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.105.179
2025-02-10 03:08:40.414 DEBUG [src.node.docker_mananger] Generated ports ['64472', '64473', '64474', '64475', '64476']
2025-02-10 03:08:40.414 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:08:40.415 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:08:40.415 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:08:40.415 DEBUG [src.node.docker_mananger] docker run -i -t -p 64472:64472 -p 64473:64473 -p 64474:64474 -p 64475:64475 -p 64476:64476 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=64474 --rest-port=64472 --tcp-port=64473 --discv5-udp-port=64475 --rest-address=0.0.0.0 --nat=extip:172.18.105.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1b6db00aefd0e9a339e6aecde9cf2fe6bbc46b42ce3dc202b8fd9c1cbf9a22ca --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QNooezlBw4JhRsi9X0vWXUPGYJSinYvXaKWHUh8frAQFBkPjQvtza2H0q3xWnF7oAjTiWE_CTUXRhNhWi93PT3QCgmlkgnY0gmlwhKwSPs6KbXVsdGlhZGRyc5YACASsEj7OBhPnAAoErBI-zgYT6N0DgnJzhQADAQAAiXNlY3AyNTZrMaECU-xcKTr_Zp7NhBnT5i1dSXOebx-Z3qCEZTJJqZ48SeWDdGNwghPng3VkcIIT6YV3YWt1Mgk --lightpushnode=/ip4/172.18.62.206/tcp/5095/p2p/16Uiu2HAm15GresN7PfeVj4owo2ynjhVQRAfqkuYLsxVtSg3aFy2C --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-10 03:08:40.649 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.105.179 waku 983e3e2936a8f36a249b4f3bc2d31407d091247422fd384bee5f89a665d211fa
2025-02-10 03:08:40.702 DEBUG [src.node.docker_mananger] Container started with ID 983e3e2936a8. Setting up logs at ./log/docker/lightpush_node1_2025-02-10_03-08-37__01e27612-4772-4a93-a9de-bda329995cb8__wakuorg_go-waku:latest.log
2025-02-10 03:08:40.702 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 64472
2025-02-10 03:08:40.702 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:08:41.703 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64472/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:41.705 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QInbvMETSCaLX9_FTPgCTICQmYh4jRGiNbc9W7Tjn3PMGL8il_39_nm5k-ShOH8dGoRsS2JWOJ-Jsp4sqLv9mJCGAZTt1Jl3gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIKRucAYZx4ULPEayiIxg4CKWv5dGcZeASfi7sZYU5i0IN0Y3CC-9mDdWRwgvvbhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/64473/p2p/16Uiu2HAkv7nmEFWUZN59Vx6YrZ3gr3CxXMitQdSehiJLM2iP9YqM","/ip4/127.0.0.1/tcp/64474/ws/p2p/16Uiu2HAkv7nmEFWUZN59Vx6YrZ3gr3CxXMitQdSehiJLM2iP9YqM","/ip4/172.17.0.4/tcp/64473/p2p/16Uiu2HAkv7nmEFWUZN59Vx6YrZ3gr3CxXMitQdSehiJLM2iP9YqM","/ip4/172.17.0.4/tcp/64474/ws/p2p/16Uiu2HAkv7nmEFWUZN59Vx6YrZ3gr3CxXMitQdSehiJLM2iP9YqM"]}'
2025-02-10 03:08:41.705 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:08:41.706 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64472/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.62.206/tcp/5095/p2p/16Uiu2HAm15GresN7PfeVj4owo2ynjhVQRAfqkuYLsxVtSg3aFy2C", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-10 03:08:41.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-10 03:08:41.708 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64472/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.71.212/tcp/2681/p2p/16Uiu2HAm1uLu5w2AtZqmux5QgNBCaPpQxoGTuJZEirTBE9zkHDXn", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-10 03:08:41.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-10 03:08:41.724 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5094/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 03:08:41.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:41.729 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2680/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-10 03:08:41.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:08:41.735 DEBUG [tests.light_push.test_publish] Running test with payload length of 143360 bytes
2025-02-10 03:08:41.737 DEBUG [src.steps.light_push] Lightpushing message
2025-02-10 03:08:41.738 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-10 03:08:41.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-10 03:08:41.763 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-10 03:08:41.863 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-10 03:08:41.863 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5094/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:41.868 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-10 03:08:41.870 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-10 03:08:41.870 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2680/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:41.875 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-10 03:08:41.879 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 03:08:41.880 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 03:08:41.880 DEBUG [src.node.waku_node] Stopping container with id e099422ad6f7
2025-02-10 03:08:42.425 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:42.426 DEBUG [src.node.waku_node] Stopping container with id cf7dc00b553e
2025-02-10 03:08:43.237 ERROR [src.node.docker_mananger] Max retries reached for container e099422ad6f7. Exiting log stream.
2025-02-10 03:08:43.927 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:43.928 DEBUG [src.node.waku_node] Stopping container with id 983e3e2936a8
2025-02-10 03:08:44.420 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:44.422 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 03:08:44.429 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:08:44.434 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:08:44.437 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
