2025-02-10 03:07:12.817 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 03:07:12.817 DEBUG [tests.conftest] Running test: test_filter_update_subscription_add_a_new_pubsub_topic with id: 2025-02-10_03-07-12__7216db54-bc96-400f-accf-66b03cff9837
2025-02-10 03:07:12.817 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 03:07:12.818 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 03:07:12.818 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-10 03:07:12.824 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 03:07:12.824 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_03-07-12__7216db54-bc96-400f-accf-66b03cff9837__wakuorg_nwaku:latest.log
2025-02-10 03:07:12.824 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:07:12.824 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:07:12.826 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:07:12.826 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.22.124
2025-02-10 03:07:12.826 DEBUG [src.node.docker_mananger] Generated ports ['53517', '53518', '53519', '53520', '53521']
2025-02-10 03:07:12.826 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:07:12.826 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:07:12.827 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:07:12.827 DEBUG [src.node.docker_mananger] docker run -i -t -p 53517:53517 -p 53518:53518 -p 53519:53519 -p 53520:53520 -p 53521:53521 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53519 --rest-port=53517 --tcp-port=53518 --discv5-udp-port=53520 --rest-address=0.0.0.0 --nat=extip:172.18.22.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ffca8c3cf2aa857a9fe8bedeb2c1ee6377fdb9e533fb5c3e54901e9bde9612f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53521 --metrics-logging=true --relay=true --filter=true
2025-02-10 03:07:13.061 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.22.124 waku a28a866bb7994ee268196191c8a2421b816f7e90805156af5598a4372dfffa59
2025-02-10 03:07:13.094 ERROR [src.node.docker_mananger] Max retries reached for container e33ef9500014. Exiting log stream.
2025-02-10 03:07:13.117 DEBUG [src.node.docker_mananger] Container started with ID a28a866bb799. Setting up logs at ./log/docker/node1_2025-02-10_03-07-12__7216db54-bc96-400f-accf-66b03cff9837__wakuorg_nwaku:latest.log
2025-02-10 03:07:13.117 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53517
2025-02-10 03:07:13.118 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:07:13.614 ERROR [src.node.docker_mananger] Max retries reached for container 96468560a9da. Exiting log stream.
2025-02-10 03:07:14.119 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53517/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:14.122 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 03:07:14.122 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 03:07:14.122 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53517/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:14.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.124/tcp/53518/p2p/16Uiu2HAmTNbDwE732XNVKdkHzaQCsnZamREw7QRrpnZaBgMzGy2D","/ip4/172.18.22.124/tcp/53519/ws/p2p/16Uiu2HAmTNbDwE732XNVKdkHzaQCsnZamREw7QRrpnZaBgMzGy2D"],"enrUri":"enr:-L24QLCh7qYwejOhNKWTa4b7x3BOiDQzKGiL8C35I4M5NS11SchcxDxylMZpoxuhAPTPHophaSLwCIT5hNxHq_ROaXUCgmlkgnY0gmlwhKwSFnyKbXVsdGlhZGRyc5YACASsEhZ8BtEOAAoErBIWfAbRD90DgnJzhQADAQAAiXNlY3AyNTZrMaED2qvchKjjlJj84vT9siE88OYXShOjT5LBvZgQmux2u06DdGNwgtEOg3VkcILREIV3YWt1MgU"}'
2025-02-10 03:07:14.125 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:07:14.125 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-10 03:07:14.131 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-10 03:07:14.131 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_03-07-12__7216db54-bc96-400f-accf-66b03cff9837__wakuorg_go-waku:latest.log
2025-02-10 03:07:14.131 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:07:14.132 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:07:14.133 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:07:14.133 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.211.254
2025-02-10 03:07:14.133 DEBUG [src.node.docker_mananger] Generated ports ['7115', '7116', '7117', '7118', '7119']
2025-02-10 03:07:14.133 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:07:14.134 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:07:14.134 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:07:14.134 DEBUG [src.node.docker_mananger] docker run -i -t -p 7115:7115 -p 7116:7116 -p 7117:7117 -p 7118:7118 -p 7119:7119 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7117 --rest-port=7115 --tcp-port=7116 --discv5-udp-port=7118 --rest-address=0.0.0.0 --nat=extip:172.18.211.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eada0af71c48cff073fcdeca38a98feed9ee8b07200facf3ff05e2c19becc6f4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QLCh7qYwejOhNKWTa4b7x3BOiDQzKGiL8C35I4M5NS11SchcxDxylMZpoxuhAPTPHophaSLwCIT5hNxHq_ROaXUCgmlkgnY0gmlwhKwSFnyKbXVsdGlhZGRyc5YACASsEhZ8BtEOAAoErBIWfAbRD90DgnJzhQADAQAAiXNlY3AyNTZrMaED2qvchKjjlJj84vT9siE88OYXShOjT5LBvZgQmux2u06DdGNwgtEOg3VkcILREIV3YWt1MgU --filternode=/ip4/172.18.22.124/tcp/53518/p2p/16Uiu2HAmTNbDwE732XNVKdkHzaQCsnZamREw7QRrpnZaBgMzGy2D --pubsub-topic=/waku/2/rs/3/1
2025-02-10 03:07:14.353 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.211.254 waku b4b9e8fd1e184f5ec347e66d46b087e59bf35cccac81bb8f25fa6ff1a76b030b
2025-02-10 03:07:14.417 DEBUG [src.node.docker_mananger] Container started with ID b4b9e8fd1e18. Setting up logs at ./log/docker/node2_2025-02-10_03-07-12__7216db54-bc96-400f-accf-66b03cff9837__wakuorg_go-waku:latest.log
2025-02-10 03:07:14.417 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 7115
2025-02-10 03:07:14.417 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:07:15.419 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7115/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:15.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QPESwrLo6kvDHuRdgy6V4kR1T2qIAv9V0cjA6BmKqwNcERVH9E-3aYR3Ba2Fn-qZxDELWFZtM4-Gx7uWRsbMVv6GAZTt00hcgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQKuvrAe0JucQhB8mu-r4meqAFvgKzHHkMzSiolORITaIIN0Y3CCG8yDdWRwghvOhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/7116/p2p/16Uiu2HAm7BoZiJeczLvZmq1krfVGZaCg5zQfcWzmsHmhJZk37QeK","/ip4/127.0.0.1/tcp/7117/ws/p2p/16Uiu2HAm7BoZiJeczLvZmq1krfVGZaCg5zQfcWzmsHmhJZk37QeK","/ip4/172.17.0.3/tcp/7116/p2p/16Uiu2HAm7BoZiJeczLvZmq1krfVGZaCg5zQfcWzmsHmhJZk37QeK","/ip4/172.17.0.3/tcp/7117/ws/p2p/16Uiu2HAm7BoZiJeczLvZmq1krfVGZaCg5zQfcWzmsHmhJZk37QeK"]}'
2025-02-10 03:07:15.422 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:07:15.422 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7115/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.22.124/tcp/53518/p2p/16Uiu2HAmTNbDwE732XNVKdkHzaQCsnZamREw7QRrpnZaBgMzGy2D", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-10 03:07:15.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-10 03:07:15.425 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53517/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 03:07:15.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:07:15.429 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7115/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b29f53cf-7916-4b55-9e90-00f21683e9ac", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-10 03:07:15.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b29f53cf-7916-4b55-9e90-00f21683e9ac","statusDesc":"OK"}'
2025-02-10 03:07:15.437 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 03:07:15.438 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 03:07:15.438 DEBUG [src.node.waku_node] Stopping container with id a28a866bb799
2025-02-10 03:07:16.051 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:07:16.051 DEBUG [src.node.waku_node] Stopping container with id b4b9e8fd1e18
2025-02-10 03:07:16.863 ERROR [src.node.docker_mananger] Max retries reached for container a28a866bb799. Exiting log stream.
2025-02-10 03:07:16.928 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:07:16.929 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 03:07:16.934 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:07:16.937 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
