2025-02-10 03:07:20.854 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-10 03:07:20.854 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-10_03-07-20__32b3dc89-517c-4afb-bee1-719dfa325403
2025-02-10 03:07:20.854 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-10 03:07:20.855 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-10 03:07:20.855 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-10 03:07:20.864 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-10 03:07:20.864 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-10_03-07-20__32b3dc89-517c-4afb-bee1-719dfa325403__wakuorg_go-waku:latest.log
2025-02-10 03:07:20.870 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-10 03:07:20.870 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-10_03-07-20__32b3dc89-517c-4afb-bee1-719dfa325403__wakuorg_nwaku:latest.log
2025-02-10 03:07:20.876 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-10 03:07:20.876 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-10_03-07-20__32b3dc89-517c-4afb-bee1-719dfa325403__wakuorg_go-waku:latest.log
2025-02-10 03:07:20.876 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-10 03:07:20.877 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-10 03:07:20.878 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:07:20.878 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:07:20.946 DEBUG [src.node.docker_mananger] Network waku created
2025-02-10 03:07:20.946 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.195.216
2025-02-10 03:07:20.946 DEBUG [src.node.docker_mananger] Generated ports ['46326', '46327', '46328', '46329', '46330']
2025-02-10 03:07:20.946 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:07:20.946 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:07:20.947 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:07:20.947 DEBUG [src.node.docker_mananger] docker run -i -t -p 46326:46326 -p 46327:46327 -p 46328:46328 -p 46329:46329 -p 46330:46330 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=46328 --rest-port=46326 --tcp-port=46327 --discv5-udp-port=46329 --rest-address=0.0.0.0 --nat=extip:172.18.195.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bad1f7dd6d60a4b3e6a6cd3b2a9fa9c5f7a8c6effa6bb31a64019cd536cfdde3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-10 03:07:24.759 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.195.216 waku f38c9d4bf19a790fdc1c537de108f27d4a3edfbf769d175a867074ee0e2751ed
2025-02-10 03:07:24.815 DEBUG [src.node.docker_mananger] Container started with ID f38c9d4bf19a. Setting up logs at ./log/docker/node1_2025-02-10_03-07-20__32b3dc89-517c-4afb-bee1-719dfa325403__wakuorg_go-waku:latest.log
2025-02-10 03:07:24.817 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 46326
2025-02-10 03:07:24.817 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:07:25.818 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46326/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:25.820 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QAOajLmDIL7fvm_Hu23xi2NpoC3nfLdBUNgangU0euOUVfOZtqDtJQfF0SqLEw-sxCMmTdMAWOL3tbmy5bvntECGAZTt03EFgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDLzQ5jNuJPTKUzKiEZUyziRTsZVC8OuTCdhvNB2ee6VKDdGNwgrT3g3VkcIK0-YV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/46327/p2p/16Uiu2HAmFqFha5goxnMT3kLYPNaGeoR2njz3axHAtyKsZLHUxvDX","/ip4/127.0.0.1/tcp/46328/ws/p2p/16Uiu2HAmFqFha5goxnMT3kLYPNaGeoR2njz3axHAtyKsZLHUxvDX","/ip4/172.17.0.2/tcp/46327/p2p/16Uiu2HAmFqFha5goxnMT3kLYPNaGeoR2njz3axHAtyKsZLHUxvDX","/ip4/172.17.0.2/tcp/46328/ws/p2p/16Uiu2HAmFqFha5goxnMT3kLYPNaGeoR2njz3axHAtyKsZLHUxvDX"]}'
2025-02-10 03:07:25.821 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:07:25.821 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:07:25.821 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:07:25.823 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:07:25.823 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.22
2025-02-10 03:07:25.823 DEBUG [src.node.docker_mananger] Generated ports ['24354', '24355', '24356', '24357', '24358']
2025-02-10 03:07:25.823 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:07:25.823 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:07:25.824 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:07:25.824 DEBUG [src.node.docker_mananger] docker run -i -t -p 24354:24354 -p 24355:24355 -p 24356:24356 -p 24357:24357 -p 24358:24358 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24356 --rest-port=24354 --tcp-port=24355 --discv5-udp-port=24357 --rest-address=0.0.0.0 --nat=extip:172.18.95.22 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1334f6a7baee04b6af9febeb0e4eabb5eb51dbe0363b9c0db5f652a48edf8697 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24358 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QAOajLmDIL7fvm_Hu23xi2NpoC3nfLdBUNgangU0euOUVfOZtqDtJQfF0SqLEw-sxCMmTdMAWOL3tbmy5bvntECGAZTt03EFgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDLzQ5jNuJPTKUzKiEZUyziRTsZVC8OuTCdhvNB2ee6VKDdGNwgrT3g3VkcIK0-YV3YWt1MgE
2025-02-10 03:07:28.942 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.22 waku 3ca7204e6f1f74339eda2b6eca6139f82686deceebc26e3ee051079caee5dd04
2025-02-10 03:07:28.994 DEBUG [src.node.docker_mananger] Container started with ID 3ca7204e6f1f. Setting up logs at ./log/docker/node2_2025-02-10_03-07-20__32b3dc89-517c-4afb-bee1-719dfa325403__wakuorg_nwaku:latest.log
2025-02-10 03:07:28.995 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24354
2025-02-10 03:07:28.995 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:07:29.996 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24354/health" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:29.999 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-10 03:07:29.999 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-10 03:07:30.000 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24354/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:30.002 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.22/tcp/24355/p2p/16Uiu2HAmGh3c7TrpMjLAJxdGZLCEmPAKr3aBPWfEptmTow57vUBQ","/ip4/172.18.95.22/tcp/24356/ws/p2p/16Uiu2HAmGh3c7TrpMjLAJxdGZLCEmPAKr3aBPWfEptmTow57vUBQ"],"enrUri":"enr:-L24QAc5Z-2N8sahmbK17aCWYF6CUvpZtE-T-OzpJqlr1b7ZTNOSe03J0_K2iPktxpuwYYJrr318hmdNAaTafcK430sCgmlkgnY0gmlwhKwSXxaKbXVsdGlhZGRyc5YACASsEl8WBl8jAAoErBJfFgZfJN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDO_WXJB67bvm4hQ5dTYzm5guqI3AnAYh4nWGO-hY77s-DdGNwgl8jg3VkcIJfJYV3YWt1MgM"}'
2025-02-10 03:07:30.002 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:07:30.002 DEBUG [src.node.waku_node] Starting Node...
2025-02-10 03:07:30.003 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-10 03:07:30.005 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-10 03:07:30.005 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.32.16
2025-02-10 03:07:30.005 DEBUG [src.node.docker_mananger] Generated ports ['11152', '11153', '11154', '11155', '11156']
2025-02-10 03:07:30.006 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-10 03:07:30.007 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-10 03:07:30.008 DEBUG [src.node.waku_node] Using volumes []
2025-02-10 03:07:30.008 DEBUG [src.node.docker_mananger] docker run -i -t -p 11152:11152 -p 11153:11153 -p 11154:11154 -p 11155:11155 -p 11156:11156 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=11154 --rest-port=11152 --tcp-port=11153 --discv5-udp-port=11155 --rest-address=0.0.0.0 --nat=extip:172.18.32.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebc6251f7dadfd090fbba68f01ceab34308b6acad0fef70cae1fc448ed3a245b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.95.22/tcp/24355/p2p/16Uiu2HAmGh3c7TrpMjLAJxdGZLCEmPAKr3aBPWfEptmTow57vUBQ --discv5-bootstrap-node=enr:-L24QAc5Z-2N8sahmbK17aCWYF6CUvpZtE-T-OzpJqlr1b7ZTNOSe03J0_K2iPktxpuwYYJrr318hmdNAaTafcK430sCgmlkgnY0gmlwhKwSXxaKbXVsdGlhZGRyc5YACASsEl8WBl8jAAoErBJfFgZfJN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDO_WXJB67bvm4hQ5dTYzm5guqI3AnAYh4nWGO-hY77s-DdGNwgl8jg3VkcIJfJYV3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
2025-02-10 03:07:30.248 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.32.16 waku 5930b75ac9e3dfc8a91a5f146805039118eed4211af3a799875527507c467dfb
2025-02-10 03:07:30.306 DEBUG [src.node.docker_mananger] Container started with ID 5930b75ac9e3. Setting up logs at ./log/docker/node3_2025-02-10_03-07-20__32b3dc89-517c-4afb-bee1-719dfa325403__wakuorg_go-waku:latest.log
2025-02-10 03:07:30.306 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 11152
2025-02-10 03:07:30.307 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-10 03:07:31.308 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11152/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:31.310 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QKqPHS4yoAeD0EPq1cHyW3rnj1VJW2neLahEa-U0mG23MMDfgjfcJtNI62T3DTiZhx2VHYpovVT0-vUoqBhXTK2GAZTt04Z0gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQMSfLrPoH9w9baLYzuZnhccJpRrJELWeQTLMH-bIAYyx4N0Y3CCK5GDdWRwgiuThXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/11153/p2p/16Uiu2HAmDu9zzvYSii8gpaauVXY6PxL7RVTEjF1an1v9kTy6PjYS","/ip4/127.0.0.1/tcp/11154/ws/p2p/16Uiu2HAmDu9zzvYSii8gpaauVXY6PxL7RVTEjF1an1v9kTy6PjYS","/ip4/172.17.0.4/tcp/11153/p2p/16Uiu2HAmDu9zzvYSii8gpaauVXY6PxL7RVTEjF1an1v9kTy6PjYS","/ip4/172.17.0.4/tcp/11154/ws/p2p/16Uiu2HAmDu9zzvYSii8gpaauVXY6PxL7RVTEjF1an1v9kTy6PjYS"]}'
2025-02-10 03:07:31.310 INFO [src.node.waku_node] REST service is ready !!
2025-02-10 03:07:31.311 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46326/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 03:07:31.312 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-10 03:07:31.313 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24354/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-10 03:07:31.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-10 03:07:31.316 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46326/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:31.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmGh3c7TrpMjLAJxdGZLCEmPAKr3aBPWfEptmTow57vUBQ","multiaddrs":["/ip4/172.18.95.22/tcp/24355/p2p/16Uiu2HAmGh3c7TrpMjLAJxdGZLCEmPAKr3aBPWfEptmTow57vUBQ","/ip4/172.18.95.22/tcp/24356/ws/p2p/16Uiu2HAmGh3c7TrpMjLAJxdGZLCEmPAKr3aBPWfEptmTow57vUBQ"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-10 03:07:31.318 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24354/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:07:31.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/11153/p2p/16Uiu2HAmDu9zzvYSii8gpaauVXY6PxL7RVTEjF1an1v9kTy6PjYS","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-10 03:07:31.322 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-10 03:08:01.322 DEBUG [src.steps.store] Relaying message
2025-02-10 03:08:01.323 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46326/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-10 03:08:01.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-10 03:08:01.327 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-10 03:08:01.528 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-10 03:08:01.528 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11152/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-10 03:08:01.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"9261ef7e0c5ac4ea62830775406326522818d08dfdbc149cb1b63ee9862b1d54","status_code":200,"status_desc":"OK","messages":[{"message_hash":"8m+I4cAfHiSYIY2rrEfnkIe5SE1svIscC0upJY8Mp+g="}]}'
2025-02-10 03:08:01.539 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-10 03:08:01.540 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-10 03:08:01.540 DEBUG [src.node.waku_node] Stopping container with id f38c9d4bf19a
2025-02-10 03:08:02.057 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:02.057 DEBUG [src.node.waku_node] Stopping container with id 3ca7204e6f1f
2025-02-10 03:08:02.597 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:02.597 DEBUG [src.node.waku_node] Stopping container with id 5930b75ac9e3
2025-02-10 03:08:02.872 ERROR [src.node.docker_mananger] Max retries reached for container f38c9d4bf19a. Exiting log stream.
2025-02-10 03:08:03.091 DEBUG [src.node.waku_node] Container stopped.
2025-02-10 03:08:03.092 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-10 03:08:03.153 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:08:03.164 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-10 03:08:03.167 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
