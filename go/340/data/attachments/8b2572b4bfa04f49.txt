[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-11-06_20-27-00__373552f1-7b98-40ee-9742-2894bed5b6dc
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-06_20-27-00__373552f1-7b98-40ee-9742-2894bed5b6dc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-06_20-27-00__373552f1-7b98-40ee-9742-2894bed5b6dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-06_20-27-00__373552f1-7b98-40ee-9742-2894bed5b6dc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.223.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35414', '35415', '35416', '35417', '35418']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35414:35414 -p 35415:35415 -p 35416:35416 -p 35417:35417 -p 35418:35418 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35416 --rest-port=35414 --tcp-port=35415 --discv5-udp-port=35417 --rest-address=0.0.0.0 --nat=extip:172.18.223.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5a42bac08e14e4e7db23e9b3d4ecb3b963adb4be2b5fbe28add7fc5f7cb6def --max-connections=1000 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.223.84 waku 86a8cb45ae571ef9c865d916564ef79c818a09bb95de6e82c939c2a889cd2fb0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 86a8cb45ae57. Setting up logs at ./log/docker/node1_2024-11-06_20-27-00__373552f1-7b98-40ee-9742-2894bed5b6dc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/go-waku:latest. REST: 35414
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cff3d20b0e24. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35414/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJae01Qpk37LaYboEq7EbL5Tkf83iExnkwzQelFpw_lRdVTlpq-CrQiiJWR8njXSfc33W1hYC_PV-W0DIrS-l7uGAZMDKLesgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQJsi3nOmnptHuccVAimmK6nBrlE0SfTdfHQgDYHguMdGoN0Y3CCileDdWRwgopZhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/35415/p2p/16Uiu2HAm2jPN6LTnwiSaeoXdWFyHtYNohVELDyPp4cYRjhaLJ7pd","/ip4/127.0.0.1/tcp/35416/ws/p2p/16Uiu2HAm2jPN6LTnwiSaeoXdWFyHtYNohVELDyPp4cYRjhaLJ7pd","/ip4/172.17.0.2/tcp/35415/p2p/16Uiu2HAm2jPN6LTnwiSaeoXdWFyHtYNohVELDyPp4cYRjhaLJ7pd","/ip4/172.17.0.2/tcp/35416/ws/p2p/16Uiu2HAm2jPN6LTnwiSaeoXdWFyHtYNohVELDyPp4cYRjhaLJ7pd"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.59.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44838', '44839', '44840', '44841', '44842']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44838:44838 -p 44839:44839 -p 44840:44840 -p 44841:44841 -p 44842:44842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44840 --rest-port=44838 --tcp-port=44839 --discv5-udp-port=44841 --rest-address=0.0.0.0 --nat=extip:172.18.59.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee57528e10daad2b9eee41ec3ade5b6bb7fe403dc4c091ce64ac47414fcef8ab --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44842 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QJae01Qpk37LaYboEq7EbL5Tkf83iExnkwzQelFpw_lRdVTlpq-CrQiiJWR8njXSfc33W1hYC_PV-W0DIrS-l7uGAZMDKLesgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQJsi3nOmnptHuccVAimmK6nBrlE0SfTdfHQgDYHguMdGoN0Y3CCileDdWRwgopZhXdha3UyCQ --lightpushnode=/ip4/172.18.223.84/tcp/35415/p2p/16Uiu2HAm2jPN6LTnwiSaeoXdWFyHtYNohVELDyPp4cYRjhaLJ7pd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.59.100 waku e57ca6954e1112c4dc1e4dedcdfc31f8fcdd6b083123b07ec24e73af22688cf2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e57ca6954e11. Setting up logs at ./log/docker/node2_2024-11-06_20-27-00__373552f1-7b98-40ee-9742-2894bed5b6dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 44838
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44838/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.100/tcp/44839/p2p/16Uiu2HAmCGDXC1Chmj7k2fX55VwmemtBLGw2zfoQhGDZ8bEFjxNC","/ip4/172.18.59.100/tcp/44840/ws/p2p/16Uiu2HAmCGDXC1Chmj7k2fX55VwmemtBLGw2zfoQhGDZ8bEFjxNC"],"enrUri":"enr:-L24QN8O8pWe0i-koHOgzxjeY94B1r_MFQnxgJ2SpQ8q5HxnGs-K33Q83jgOx80AQUY2W78srbu0nthSGGcDvqRgNa4CgmlkgnY0gmlwhKwSO2SKbXVsdGlhZGRyc5YACASsEjtkBq8nAAoErBI7ZAavKN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-iqIlsEFCJMnbNjEis-Xnl8CZeM6rVP3Xppov3cRtBmDdGNwgq8ng3VkcIKvKYV3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.124.244
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29990', '29991', '29992', '29993', '29994']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29990:29990 -p 29991:29991 -p 29992:29992 -p 29993:29993 -p 29994:29994 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29992 --rest-port=29990 --tcp-port=29991 --discv5-udp-port=29993 --rest-address=0.0.0.0 --nat=extip:172.18.124.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d84a0432a687ef988fe1e5b7afd73e5dd9b23be429438cc64647a16c2bff57eb --max-connections=1000 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.59.100/tcp/44839/p2p/16Uiu2HAmCGDXC1Chmj7k2fX55VwmemtBLGw2zfoQhGDZ8bEFjxNC --discv5-bootstrap-node=enr:-L24QN8O8pWe0i-koHOgzxjeY94B1r_MFQnxgJ2SpQ8q5HxnGs-K33Q83jgOx80AQUY2W78srbu0nthSGGcDvqRgNa4CgmlkgnY0gmlwhKwSO2SKbXVsdGlhZGRyc5YACASsEjtkBq8nAAoErBI7ZAavKN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-iqIlsEFCJMnbNjEis-Xnl8CZeM6rVP3Xppov3cRtBmDdGNwgq8ng3VkcIKvKYV3YWt1Mgs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.124.244 waku a0dc2a4eea53b827aa44bf2825f16f26e12defea744c2fdf8e6c14abdaae065f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a0dc2a4eea53. Setting up logs at ./log/docker/node3_2024-11-06_20-27-00__373552f1-7b98-40ee-9742-2894bed5b6dc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/go-waku:latest. REST: 29990
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29990/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QI8tE7WjD2-Edtj53fPqPLRKmS1cwsLLWIZhiVlgHzBhRu5kvGs7RWjGkysKV9t7P9ETuxiZxhMdQlxNdRwNcCmGAZMDKMJsgmlkgnY0gmlwhKwRAAuJc2VjcDI1NmsxoQLfrg04xcNkATwjdVOQacinLeKjxPqZ5SV-0wAS7LESBIN0Y3CCdSeDdWRwgnUphXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/29991/p2p/16Uiu2HAmAUpq2CwSuwm5AD3fs1PpwrzngF8tiP5pvLMtggYgMoBR","/ip4/127.0.0.1/tcp/29992/ws/p2p/16Uiu2HAmAUpq2CwSuwm5AD3fs1PpwrzngF8tiP5pvLMtggYgMoBR","/ip4/172.17.0.11/tcp/29991/p2p/16Uiu2HAmAUpq2CwSuwm5AD3fs1PpwrzngF8tiP5pvLMtggYgMoBR","/ip4/172.17.0.11/tcp/29992/ws/p2p/16Uiu2HAmAUpq2CwSuwm5AD3fs1PpwrzngF8tiP5pvLMtggYgMoBR"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35414/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44838/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35414/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35414/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35414/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35414/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmCGDXC1Chmj7k2fX55VwmemtBLGw2zfoQhGDZ8bEFjxNC","multiaddrs":["/ip4/172.18.59.100/tcp/44839/p2p/16Uiu2HAmCGDXC1Chmj7k2fX55VwmemtBLGw2zfoQhGDZ8bEFjxNC","/ip4/172.18.59.100/tcp/44840/ws/p2p/16Uiu2HAmCGDXC1Chmj7k2fX55VwmemtBLGw2zfoQhGDZ8bEFjxNC"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store-query/3.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/lightpush/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44838/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/35415/p2p/16Uiu2HAm2jPN6LTnwiSaeoXdWFyHtYNohVELDyPp4cYRjhaLJ7pd","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.11/tcp/29991/p2p/16Uiu2HAmAUpq2CwSuwm5AD3fs1PpwrzngF8tiP5pvLMtggYgMoBR","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35414/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1730924857216766976}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29990/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"3f6bba193a7e1df3b3a71ebb3a28d9d10ad44579de948ac160553266d59c396b","status_code":200,"status_desc":"OK","messages":[{"message_hash":"hDD+lRUK1pbzdv5P5gLiByImTTA86ioX/L1T3eDG1KU="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 86a8cb45ae57
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id e57ca6954e11
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 86a8cb45ae57. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id a0dc2a4eea53
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e57ca6954e11. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.