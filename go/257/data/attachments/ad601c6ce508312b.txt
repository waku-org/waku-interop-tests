[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-08-27_03-11-29__2bc76481-a997-4cc8-9c01-9702b9bce44c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-27_03-11-29__2bc76481-a997-4cc8-9c01-9702b9bce44c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-27_03-11-29__2bc76481-a997-4cc8-9c01-9702b9bce44c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node3_2024-08-27_03-11-29__2bc76481-a997-4cc8-9c01-9702b9bce44c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.32.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19615', '19616', '19617', '19618', '19619']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19615:19615 -p 19616:19616 -p 19617:19617 -p 19618:19618 -p 19619:19619 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=19617 --rest-port=19615 --tcp-port=19616 --discv5-udp-port=19618 --rest-address=0.0.0.0 --nat=extip:172.18.32.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6cee49adad49fda9a56a0abddc186e8765d4a1a3003d2a5c6ac1216487b51a4a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.32.19 waku c1b77e5e33588bf26b49b427b6d96350cf3c20145df8aa775071f9a7ad40f4b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c1b77e5e3358. Setting up logs at ./log/docker/node1_2024-08-27_03-11-29__2bc76481-a997-4cc8-9c01-9702b9bce44c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 19615
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19615/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QO1k6Q_lHdYXYxuEaxmNXH0zklfnsnmyJ_Isq3Um4TlIZBtZN_BgALcSdjWr9FW8lmS0dHtukxWAL1m0QctO1L2GAZGR0Sp2gmlkgnY0gmlwhKwRAAOJc2VjcDI1NmsxoQJJFVDx0W_mK2RRdOwsmRzonoTVeUvl2wfbIUmPKbKkuYN0Y3CCTKCDdWRwgkyihXdha3UyBQ","listenAddresses":["/ip4/127.0.0.1/tcp/19616/p2p/16Uiu2HAkzLxbQkbVTnX9mYDfn3ycfNbTyNkUjAxsX6EKMcKGA5X6","/ip4/127.0.0.1/tcp/19617/ws/p2p/16Uiu2HAkzLxbQkbVTnX9mYDfn3ycfNbTyNkUjAxsX6EKMcKGA5X6","/ip4/172.17.0.3/tcp/19616/p2p/16Uiu2HAkzLxbQkbVTnX9mYDfn3ycfNbTyNkUjAxsX6EKMcKGA5X6","/ip4/172.17.0.3/tcp/19617/ws/p2p/16Uiu2HAkzLxbQkbVTnX9mYDfn3ycfNbTyNkUjAxsX6EKMcKGA5X6"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.34.202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['31984', '31985', '31986', '31987', '31988']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 31984:31984 -p 31985:31985 -p 31986:31986 -p 31987:31987 -p 31988:31988 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31986 --rest-port=31984 --tcp-port=31985 --discv5-udp-port=31987 --rest-address=0.0.0.0 --nat=extip:172.18.34.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=953ffffcfafabeaca4eaca8f71d1b2ad5ce3ef3ee7383aeedd997fb99dd92348 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31988 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-Ji4QO1k6Q_lHdYXYxuEaxmNXH0zklfnsnmyJ_Isq3Um4TlIZBtZN_BgALcSdjWr9FW8lmS0dHtukxWAL1m0QctO1L2GAZGR0Sp2gmlkgnY0gmlwhKwRAAOJc2VjcDI1NmsxoQJJFVDx0W_mK2RRdOwsmRzonoTVeUvl2wfbIUmPKbKkuYN0Y3CCTKCDdWRwgkyihXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.34.202 waku 8ae28fbad4b38d913045e6d081f5c81927b451d7448ec879f8ca6eadf8b379af
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8ae28fbad4b3. Setting up logs at ./log/docker/node2_2024-08-27_03-11-29__2bc76481-a997-4cc8-9c01-9702b9bce44c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 31984
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31984/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31984/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.202/tcp/31985/p2p/16Uiu2HAm7YrDsmraYwPePUwGYjhJ88fU1AbEHUsWXAoYKDKxFBfn","/ip4/172.18.34.202/tcp/31986/ws/p2p/16Uiu2HAm7YrDsmraYwPePUwGYjhJ88fU1AbEHUsWXAoYKDKxFBfn"],"enrUri":"enr:-LO4QFSFPYQfDZsIr9uKak3YYoT4uNEs6DEEcELi_47Sn5oDJAPfTlqkQR9MI5lI92OrJkobni3Q-4zTwAYhDfKzb5cBgmlkgnY0gmlwhKwSIsqKbXVsdGlhZGRyc4wACgSsEiLKBnzy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK0IuPuZ8D1Xy-MXi5xgFl1Fg9B3yYIyRG9mOmwWrGlEYN0Y3CCfPGDdWRwgnzzhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.175.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['14855', '14856', '14857', '14858', '14859']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 14855:14855 -p 14856:14856 -p 14857:14857 -p 14858:14858 -p 14859:14859 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=14857 --rest-port=14855 --tcp-port=14856 --discv5-udp-port=14858 --rest-address=0.0.0.0 --nat=extip:172.18.175.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdaccfc9cbbcd16d1bded6ac65dbddcccdc5a4ef43e9febecf8f1d1b0a88ab39 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.34.202/tcp/31985/p2p/16Uiu2HAm7YrDsmraYwPePUwGYjhJ88fU1AbEHUsWXAoYKDKxFBfn --discv5-bootstrap-node=enr:-LO4QFSFPYQfDZsIr9uKak3YYoT4uNEs6DEEcELi_47Sn5oDJAPfTlqkQR9MI5lI92OrJkobni3Q-4zTwAYhDfKzb5cBgmlkgnY0gmlwhKwSIsqKbXVsdGlhZGRyc4wACgSsEiLKBnzy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK0IuPuZ8D1Xy-MXi5xgFl1Fg9B3yYIyRG9mOmwWrGlEYN0Y3CCfPGDdWRwgnzzhXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.175.116 waku 641fd97d1ae983397598d82146cd78cafd16fe8f6bd6c9b5f59e25d089367bc7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 641fd97d1ae9. Setting up logs at ./log/docker/node3_2024-08-27_03-11-29__2bc76481-a997-4cc8-9c01-9702b9bce44c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 14855
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14855/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QPrkUfPKwcYAGDKa36B7cBBS0YA-jQtAEcVKaHOQUM63FgKk-aURydThff3Jtf8TWcThXXRLoMLXS5XFMuubLcKGAZGR0Ta2gmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQJGtw5KiyPRxljNCiA7hUbGKXol6gm7IjfBThj1TNOvM4N0Y3CCOgiDdWRwgjoKhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/14856/p2p/16Uiu2HAkzBiQz79VrTwyHGb4cGzgTBuwZzUnVMgeGqZTg8GCjZNJ","/ip4/127.0.0.1/tcp/14857/ws/p2p/16Uiu2HAkzBiQz79VrTwyHGb4cGzgTBuwZzUnVMgeGqZTg8GCjZNJ","/ip4/172.17.0.7/tcp/14856/p2p/16Uiu2HAkzBiQz79VrTwyHGb4cGzgTBuwZzUnVMgeGqZTg8GCjZNJ","/ip4/172.17.0.7/tcp/14857/ws/p2p/16Uiu2HAkzBiQz79VrTwyHGb4cGzgTBuwZzUnVMgeGqZTg8GCjZNJ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19615/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31984/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14855/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19615/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAkzBiQz79VrTwyHGb4cGzgTBuwZzUnVMgeGqZTg8GCjZNJ","multiaddrs":["/ip4/172.17.0.7/tcp/14856/p2p/16Uiu2HAkzBiQz79VrTwyHGb4cGzgTBuwZzUnVMgeGqZTg8GCjZNJ","/ip4/172.17.0.7/tcp/14857/ws/p2p/16Uiu2HAkzBiQz79VrTwyHGb4cGzgTBuwZzUnVMgeGqZTg8GCjZNJ"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":[]},{"id":"16Uiu2HAm7YrDsmraYwPePUwGYjhJ88fU1AbEHUsWXAoYKDKxFBfn","multiaddrs":["/ip4/172.18.34.202/tcp/31985/p2p/16Uiu2HAm7YrDsmraYwPePUwGYjhJ88fU1AbEHUsWXAoYKDKxFBfn","/ip4/172.18.34.202/tcp/31986/ws/p2p/16Uiu2HAm7YrDsmraYwPePUwGYjhJ88fU1AbEHUsWXAoYKDKxFBfn"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31984/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.7/tcp/14856/p2p/16Uiu2HAkzBiQz79VrTwyHGb4cGzgTBuwZzUnVMgeGqZTg8GCjZNJ","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14855/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm7YrDsmraYwPePUwGYjhJ88fU1AbEHUsWXAoYKDKxFBfn","multiaddrs":["/ip4/172.18.34.202/tcp/31985/p2p/16Uiu2HAm7YrDsmraYwPePUwGYjhJ88fU1AbEHUsWXAoYKDKxFBfn","/ip4/172.18.34.202/tcp/31986/ws/p2p/16Uiu2HAm7YrDsmraYwPePUwGYjhJ88fU1AbEHUsWXAoYKDKxFBfn"],"protocols":["/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1","/waku/2/rs/3/0"]},{"id":"16Uiu2HAkzLxbQkbVTnX9mYDfn3ycfNbTyNkUjAxsX6EKMcKGA5X6","multiaddrs":["/ip4/172.17.0.3/tcp/19616/p2p/16Uiu2HAkzLxbQkbVTnX9mYDfn3ycfNbTyNkUjAxsX6EKMcKGA5X6","/ip4/172.17.0.3/tcp/19617/ws/p2p/16Uiu2HAkzLxbQkbVTnX9mYDfn3ycfNbTyNkUjAxsX6EKMcKGA5X6"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/default-waku/proto"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19615/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14855/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724728329326070528,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id c1b77e5e3358
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8ae28fbad4b3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 641fd97d1ae9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.