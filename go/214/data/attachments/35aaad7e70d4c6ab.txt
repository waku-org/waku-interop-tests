[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_peers_after_node1_was_restarted with id: 2024-07-22_03-18-10__6df3924b-6f90-486a-b36b-5c0ac98a2e8c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:29 Running fixture setup: relay_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/node1_2024-07-22_03-18-10__6df3924b-6f90-486a-b36b-5c0ac98a2e8c__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.17.108
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['28997', '28998', '28999', '29000', '29001']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 28997:28997 -p 28998:28998 -p 28999:28999 -p 29000:29000 -p 29001:29001 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28999 --rest-port=28997 --tcp-port=28998 --discv5-udp-port=29000 --rest-address=0.0.0.0 --nat=extip:172.18.17.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29001 --metrics-logging=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --relay-peer-exchange=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.17.108 waku d24e72158d06c827b0cd1e4c69c16035e76f79826d4448700962f1777eb19a07
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d24e72158d06. Setting up logs at ./log/docker/node1_2024-07-22_03-18-10__6df3924b-6f90-486a-b36b-5c0ac98a2e8c__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 28997
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28997/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28997/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.108/tcp/28998/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.17.108/tcp/28999/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QO01KEHAQSJHuQQimJqm1fR0WyhKVe1sMrgZCjtz8cKuHaKcdnHxB0Q5S922RDOowjYoaKpem1CIEn5cZTAg14gBgmlkgnY0gmlwhKwSEWyKbXVsdGlhZGRyc4wACgSsEhFsBnFH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCcUaDdWRwgnFIhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/node2_2024-07-22_03-18-10__6df3924b-6f90-486a-b36b-5c0ac98a2e8c__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.24.180
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['63440', '63441', '63442', '63443', '63444']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 63440:63440 -p 63441:63441 -p 63442:63442 -p 63443:63443 -p 63444:63444 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=63442 --rest-port=63440 --tcp-port=63441 --discv5-udp-port=63443 --rest-address=0.0.0.0 --nat=extip:172.18.24.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QO01KEHAQSJHuQQimJqm1fR0WyhKVe1sMrgZCjtz8cKuHaKcdnHxB0Q5S922RDOowjYoaKpem1CIEn5cZTAg14gBgmlkgnY0gmlwhKwSEWyKbXVsdGlhZGRyc4wACgSsEhFsBnFH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCcUaDdWRwgnFIhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.24.180 waku 233e9926eabe8cb627a6bc77797a69cfa558a7bc059cf011a547847378a105b5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 233e9926eabe. Setting up logs at ./log/docker/node2_2024-07-22_03-18-10__6df3924b-6f90-486a-b36b-5c0ac98a2e8c__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 63440
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63440/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHGt8BggvMW2BCGohe0n0-BPMgdKscypbI19poWEQ_XiAmEZtoC2msa9T4rr25w7Dkg8TcBjjkA_RkvD7-juYhWGAZDYcl3-gmlkgnY0gmlwhKwRABKJc2VjcDI1NmsxoQLzIPTSNHrynu5wvyiCpjIr9jL3puHB7gfm9gJ6hB-svoN0Y3CC99GDdWRwgvfThXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/63441/p2p/16Uiu2HAmBnkCPzAVhiRWPU7eEm9FSxVwgEAxZYr3ggyLUtuer2NZ","/ip4/127.0.0.1/tcp/63442/ws/p2p/16Uiu2HAmBnkCPzAVhiRWPU7eEm9FSxVwgEAxZYr3ggyLUtuer2NZ","/ip4/172.17.0.18/tcp/63441/p2p/16Uiu2HAmBnkCPzAVhiRWPU7eEm9FSxVwgEAxZYr3ggyLUtuer2NZ","/ip4/172.17.0.18/tcp/63442/ws/p2p/16Uiu2HAmBnkCPzAVhiRWPU7eEm9FSxVwgEAxZYr3ggyLUtuer2NZ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63440/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.17.108/tcp/28998/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28997/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63440/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28997/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.18/tcp/63441/p2p/16Uiu2HAmBnkCPzAVhiRWPU7eEm9FSxVwgEAxZYr3ggyLUtuer2NZ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:241 Restarting container with id d24e72158d06
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/node3_2024-07-22_03-18-10__6df3924b-6f90-486a-b36b-5c0ac98a2e8c__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.189.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['54109', '54110', '54111', '54112', '54113']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 54109:54109 -p 54110:54110 -p 54111:54111 -p 54112:54112 -p 54113:54113 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=54111 --rest-port=54109 --tcp-port=54110 --discv5-udp-port=54112 --rest-address=0.0.0.0 --nat=extip:172.18.189.97 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.18/tcp/63441/p2p/16Uiu2HAmBnkCPzAVhiRWPU7eEm9FSxVwgEAxZYr3ggyLUtuer2NZ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.189.97 waku a56fc3d4a9581ba3bb1b937d6343adc72ebab028d0fdbd72b961d1621b7db2e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a56fc3d4a958. Setting up logs at ./log/docker/node3_2024-07-22_03-18-10__6df3924b-6f90-486a-b36b-5c0ac98a2e8c__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 54109
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54109/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-JG4QJb0rA0T-HIfOiJ8d9V0segw0mQhtRlAhEu8C7yJIy32CRfApYaqASFZnXXI4H_ifFrbypdZz1fbEw7JXXh7YZGGAZDYcnUNgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQLrymKhXEdTlinkVSnaGoavYH_ZZdsxVNUF3UcMNtg2VYN0Y3CC016Fd2FrdTKA","listenAddresses":["/ip4/127.0.0.1/tcp/54110/p2p/16Uiu2HAmBJ6nAcs87T1Z3tGYpiiTXcPKnh9BiRauU6puMSPbxeQt","/ip4/127.0.0.1/tcp/54111/ws/p2p/16Uiu2HAmBJ6nAcs87T1Z3tGYpiiTXcPKnh9BiRauU6puMSPbxeQt","/ip4/172.17.0.5/tcp/54110/p2p/16Uiu2HAmBJ6nAcs87T1Z3tGYpiiTXcPKnh9BiRauU6puMSPbxeQt","/ip4/172.17.0.5/tcp/54111/ws/p2p/16Uiu2HAmBJ6nAcs87T1Z3tGYpiiTXcPKnh9BiRauU6puMSPbxeQt"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54109/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.17.108/tcp/28998/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54109/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmBnkCPzAVhiRWPU7eEm9FSxVwgEAxZYr3ggyLUtuer2NZ","multiaddrs":["/ip4/172.17.0.18/tcp/63441/p2p/16Uiu2HAmBnkCPzAVhiRWPU7eEm9FSxVwgEAxZYr3ggyLUtuer2NZ","/ip4/172.17.0.18/tcp/63442/ws/p2p/16Uiu2HAmBnkCPzAVhiRWPU7eEm9FSxVwgEAxZYr3ggyLUtuer2NZ"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/default-waku/proto"]},{"id":"16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","multiaddrs":["/ip4/172.18.17.108/tcp/28998/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.17.108/tcp/28999/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"protocols":["/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/4","/waku/2/rs/3/6","/waku/2/rs/3/2","/waku/2/rs/3/3","/waku/2/rs/3/5","/waku/2/rs/3/7","/waku/2/rs/3/8","/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id d24e72158d06
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 233e9926eabe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id a56fc3d4a958
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.