[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-11-02_03-07-03__5ff7a238-d3d4-4c23-81ec-eaac852c4efb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-02_03-07-03__5ff7a238-d3d4-4c23-81ec-eaac852c4efb__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-02_03-07-03__5ff7a238-d3d4-4c23-81ec-eaac852c4efb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-02_03-07-03__5ff7a238-d3d4-4c23-81ec-eaac852c4efb__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.139.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6688', '6689', '6690', '6691', '6692']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6688:6688 -p 6689:6689 -p 6690:6690 -p 6691:6691 -p 6692:6692 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=6690 --rest-port=6688 --tcp-port=6689 --discv5-udp-port=6691 --rest-address=0.0.0.0 --nat=extip:172.18.139.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=523b5b8b7ea0d093adebeaefd0e7985aeca6dae9ca3dd20a3c71e94dff73cee6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.139.24 waku f85ba8075971acb2e57519c88dac65ccbf5a83f65e418a77b7c2f87ba63ccd1d
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3e38a93ce975. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f85ba8075971. Setting up logs at ./log/docker/node1_2024-11-02_03-07-03__5ff7a238-d3d4-4c23-81ec-eaac852c4efb__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 6688
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6688/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QI57QcaxvBCOFy7ej9abrwtj5HRJoUs9ufqM7bK39T2We6gLQsZ6w3tguWlCOUwMAkcbHcF0rc8Edj1fps1pPr6GAZLq1zI1gmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQK052_YnIYh_qT8znaN9Qf9Fri1e3xbIIwmKHtM7auYkoN0Y3CCGiGDdWRwghojhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/6689/p2p/16Uiu2HAm7br3pzMzUMEbzwYokuv4HFiHEN2M81oWru11r7tgcGHF","/ip4/127.0.0.1/tcp/6690/ws/p2p/16Uiu2HAm7br3pzMzUMEbzwYokuv4HFiHEN2M81oWru11r7tgcGHF","/ip4/172.17.0.2/tcp/6689/p2p/16Uiu2HAm7br3pzMzUMEbzwYokuv4HFiHEN2M81oWru11r7tgcGHF","/ip4/172.17.0.2/tcp/6690/ws/p2p/16Uiu2HAm7br3pzMzUMEbzwYokuv4HFiHEN2M81oWru11r7tgcGHF"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.195.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14501', '14502', '14503', '14504', '14505']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14501:14501 -p 14502:14502 -p 14503:14503 -p 14504:14504 -p 14505:14505 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14503 --rest-port=14501 --tcp-port=14502 --discv5-udp-port=14504 --rest-address=0.0.0.0 --nat=extip:172.18.195.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0fefba3c109a189d4716cf27aad350af0f9d1decebb94d5cc5dbe41594fbbab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14505 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QI57QcaxvBCOFy7ej9abrwtj5HRJoUs9ufqM7bK39T2We6gLQsZ6w3tguWlCOUwMAkcbHcF0rc8Edj1fps1pPr6GAZLq1zI1gmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQK052_YnIYh_qT8znaN9Qf9Fri1e3xbIIwmKHtM7auYkoN0Y3CCGiGDdWRwghojhXdha3UyCQ --lightpushnode=/ip4/172.18.139.24/tcp/6689/p2p/16Uiu2HAm7br3pzMzUMEbzwYokuv4HFiHEN2M81oWru11r7tgcGHF
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.195.229 waku 20e08c175afc00836681f694e4bad75bbd3d01fcd9d499d80c172512aa5e66b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 20e08c175afc. Setting up logs at ./log/docker/node2_2024-11-02_03-07-03__5ff7a238-d3d4-4c23-81ec-eaac852c4efb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14501
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14501/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14501/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.229/tcp/14502/p2p/16Uiu2HAmSQKDj7PDQ5bJ7BLhsy8fVBvmBBxNEF8cXrH6F6WTYt6Z","/ip4/172.18.195.229/tcp/14503/ws/p2p/16Uiu2HAmSQKDj7PDQ5bJ7BLhsy8fVBvmBBxNEF8cXrH6F6WTYt6Z"],"enrUri":"enr:-L24QMwcZa8KpoaGRP8MLknvxglw2ZLTlFD4TWRNlH76IZWAYD2xDz7A4BUKjqqM-sVP5KoQF1xwoMtqGSLxw2G_QdkCgmlkgnY0gmlwhKwSw-WKbXVsdGlhZGRyc5YACASsEsPlBjimAAoErBLD5QY4p90DgnJzhQADAQAAiXNlY3AyNTZrMaEDzEE9ooLbm0ll0-V3uA2iKw8-epA35stwFL7o3R8lDEaDdGNwgjimg3VkcII4qIV3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24651', '24652', '24653', '24654', '24655']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24651:24651 -p 24652:24652 -p 24653:24653 -p 24654:24654 -p 24655:24655 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24653 --rest-port=24651 --tcp-port=24652 --discv5-udp-port=24654 --rest-address=0.0.0.0 --nat=extip:172.18.41.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d7ba42ed6526fcf07fcedabd7deb0cfd43a5439fffa7ccebf49e60efffb9b9d4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.195.229/tcp/14502/p2p/16Uiu2HAmSQKDj7PDQ5bJ7BLhsy8fVBvmBBxNEF8cXrH6F6WTYt6Z --discv5-bootstrap-node=enr:-L24QMwcZa8KpoaGRP8MLknvxglw2ZLTlFD4TWRNlH76IZWAYD2xDz7A4BUKjqqM-sVP5KoQF1xwoMtqGSLxw2G_QdkCgmlkgnY0gmlwhKwSw-WKbXVsdGlhZGRyc5YACASsEsPlBjimAAoErBLD5QY4p90DgnJzhQADAQAAiXNlY3AyNTZrMaEDzEE9ooLbm0ll0-V3uA2iKw8-epA35stwFL7o3R8lDEaDdGNwgjimg3VkcII4qIV3YWt1Mgs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.205 waku 99089b48aa997b6942aa184f18491cb52485543917c31705fc27d6cfc7414283
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 99089b48aa99. Setting up logs at ./log/docker/node3_2024-11-02_03-07-03__5ff7a238-d3d4-4c23-81ec-eaac852c4efb__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 24651
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24651/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QKB2YZYzXGSzsEi-7XwnzNJU9coMewH0zoECp3ixi2uIVp3A14Bmj7Z34kuLxgf7Jhe3aChrVOfHyW99QO-ZkE6GAZLq1z8fgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQO71ist_y3DCkkwwmHU0HmierBcAvTBZtevD5s2xOf1QoN0Y3CCYEyDdWRwgmBOhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/24652/p2p/16Uiu2HAmRJE14sX2nTS8JfaDGPyBpEkX9QXVqZybfpkSmn2Luu8m","/ip4/127.0.0.1/tcp/24653/ws/p2p/16Uiu2HAmRJE14sX2nTS8JfaDGPyBpEkX9QXVqZybfpkSmn2Luu8m","/ip4/172.17.0.7/tcp/24652/p2p/16Uiu2HAmRJE14sX2nTS8JfaDGPyBpEkX9QXVqZybfpkSmn2Luu8m","/ip4/172.17.0.7/tcp/24653/ws/p2p/16Uiu2HAmRJE14sX2nTS8JfaDGPyBpEkX9QXVqZybfpkSmn2Luu8m"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6688/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14501/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6688/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6688/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6688/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmSQKDj7PDQ5bJ7BLhsy8fVBvmBBxNEF8cXrH6F6WTYt6Z","multiaddrs":["/ip4/172.18.195.229/tcp/14502/p2p/16Uiu2HAmSQKDj7PDQ5bJ7BLhsy8fVBvmBBxNEF8cXrH6F6WTYt6Z","/ip4/172.18.195.229/tcp/14503/ws/p2p/16Uiu2HAmSQKDj7PDQ5bJ7BLhsy8fVBvmBBxNEF8cXrH6F6WTYt6Z"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/store-query/3.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1","/waku/2/rs/3/0"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14501/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/6689/p2p/16Uiu2HAm7br3pzMzUMEbzwYokuv4HFiHEN2M81oWru11r7tgcGHF","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.7/tcp/24652/p2p/16Uiu2HAmRJE14sX2nTS8JfaDGPyBpEkX9QXVqZybfpkSmn2Luu8m","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6688/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1730516861015131392}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24651/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"962cd186f5db68e1c0ca9bbdaeee2494b98f273580f1eabed3547ca0c0f6187b","status_code":200,"status_desc":"OK","messages":[{"message_hash":"r7i9gJVO58+hvFAq+XXyXS2eDWaH58vyqvdBMHvDE94="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f85ba8075971
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 20e08c175afc
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f85ba8075971. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 99089b48aa99
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 20e08c175afc. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.