[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-10-22_03-14-59__3b76a832-3678-4514-a8b7-e7525ca08f48
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-22_03-14-59__3b76a832-3678-4514-a8b7-e7525ca08f48__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.136.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31257', '31258', '31259', '31260', '31261']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31257:31257 -p 31258:31258 -p 31259:31259 -p 31260:31260 -p 31261:31261 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31259 --rest-port=31257 --tcp-port=31258 --discv5-udp-port=31260 --rest-address=0.0.0.0 --nat=extip:172.18.136.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8d37de0efd6d3331469bccc33fee3d3ca6b06d9ccc491ffccd9f881d96feff82 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31261 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.136.226 waku 943f3d3dfd1d79aa3f6ccc3d54c2a5e47596f021b5668da3f990863f20b98086
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 943f3d3dfd1d. Setting up logs at ./log/docker/receiving_node1_2024-10-22_03-14-59__3b76a832-3678-4514-a8b7-e7525ca08f48__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31257
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31257/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31257/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.226/tcp/31258/p2p/16Uiu2HAmGXEEEcSfLwaEKrcbLSJvc5JeUghRoCwTCDhiERoZbYv8","/ip4/172.18.136.226/tcp/31259/ws/p2p/16Uiu2HAmGXEEEcSfLwaEKrcbLSJvc5JeUghRoCwTCDhiERoZbYv8"],"enrUri":"enr:-LO4QH2maF_6lp7lanGJo8xdN_XjDrrAesuT7Z13oyHYcxvGSekeoDlH5mL_MvqYoz6K2gP253F4Alq9uzds8Awu1lYBgmlkgnY0gmlwhKwSiOKKbXVsdGlhZGRyc4wACgSsEojiBnob3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM5ccsmq2XVvEHNsz-rYzoGnzlsjQBfpff-_Nt0cLTA9YN0Y3CCehqDdWRwgnochXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-22_03-14-59__3b76a832-3678-4514-a8b7-e7525ca08f48__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.84.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32368', '32369', '32370', '32371', '32372']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32368:32368 -p 32369:32369 -p 32370:32370 -p 32371:32371 -p 32372:32372 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32370 --rest-port=32368 --tcp-port=32369 --discv5-udp-port=32371 --rest-address=0.0.0.0 --nat=extip:172.18.84.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3eaa1a5b782d7bab74dbcfb2dccf3acd76dbe316bbeb0a4fdadcd1c1c2d2cc85 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32372 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.84.151 waku b58162a8dedad9237f192dde17c21b05c9371599af3df32038b43675f769f4e3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b58162a8deda. Setting up logs at ./log/docker/receiving_node2_2024-10-22_03-14-59__3b76a832-3678-4514-a8b7-e7525ca08f48__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32368
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32368/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32368/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.151/tcp/32369/p2p/16Uiu2HAmSw5BSjYtrnE4tKyB9SMyWfBEbLefmhDiEcYpfCA287C3","/ip4/172.18.84.151/tcp/32370/ws/p2p/16Uiu2HAmSw5BSjYtrnE4tKyB9SMyWfBEbLefmhDiEcYpfCA287C3"],"enrUri":"enr:-LO4QJpPMV3vdBTa7GeUR072hFB2E89z-ugHY8Nag1765WZsKsikV3qKyM4lWiLR29nfg7wc1MYuvBhbxitzjRSxVZ0BgmlkgnY0gmlwhKwSVJeKbXVsdGlhZGRyc4wACgSsElSXBn5y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPUIl8ad--PMsvaoEL5OxJoqWlIwcrqLCUbaAOIq_OE4IN0Y3CCfnGDdWRwgn5zhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32368/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.226/tcp/31258/p2p/16Uiu2HAmGXEEEcSfLwaEKrcbLSJvc5JeUghRoCwTCDhiERoZbYv8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-22_03-14-59__3b76a832-3678-4514-a8b7-e7525ca08f48__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.211.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32920', '32921', '32922', '32923', '32924']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32920:32920 -p 32921:32921 -p 32922:32922 -p 32923:32923 -p 32924:32924 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32922 --rest-port=32920 --tcp-port=32921 --discv5-udp-port=32923 --rest-address=0.0.0.0 --nat=extip:172.18.211.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed958102ced61ca727cdecee1d70311b404f45cbbcdddffcbd3109f4fe9a8eb4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QH2maF_6lp7lanGJo8xdN_XjDrrAesuT7Z13oyHYcxvGSekeoDlH5mL_MvqYoz6K2gP253F4Alq9uzds8Awu1lYBgmlkgnY0gmlwhKwSiOKKbXVsdGlhZGRyc4wACgSsEojiBnob3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM5ccsmq2XVvEHNsz-rYzoGnzlsjQBfpff-_Nt0cLTA9YN0Y3CCehqDdWRwgnochXdha3UyCQ --lightpushnode=/ip4/172.18.136.226/tcp/31258/p2p/16Uiu2HAmGXEEEcSfLwaEKrcbLSJvc5JeUghRoCwTCDhiERoZbYv8 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.211.246 waku 58095ba11c5ce0218f157492decb8ab82bcfa9e707fd1be63b98db4f62ef967e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 58095ba11c5c. Setting up logs at ./log/docker/lightpush_node1_2024-10-22_03-14-59__3b76a832-3678-4514-a8b7-e7525ca08f48__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 32920
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32920/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QAY5vFXPLPY2oDA1beU23GhPheK1ROeGFyDRPLzPRstoLv0juWW4Lr38juGaBGy2f4jTaazb26rE-BiT0d5z1kCGAZKyOIx3gmlkgnY0gmlwhKwRAAyJc2VjcDI1NmsxoQOqI0ZO7ivroAcW15ZSuHVqo44UqK_EUOjrjq2YOeo4N4N0Y3CCgJmDdWRwgoCbhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/32921/p2p/16Uiu2HAmQ78rcuszJKeoNpVYzbLNFZH773466uUZ6GE2JtMCifv6","/ip4/127.0.0.1/tcp/32922/ws/p2p/16Uiu2HAmQ78rcuszJKeoNpVYzbLNFZH773466uUZ6GE2JtMCifv6","/ip4/172.17.0.12/tcp/32921/p2p/16Uiu2HAmQ78rcuszJKeoNpVYzbLNFZH773466uUZ6GE2JtMCifv6","/ip4/172.17.0.12/tcp/32922/ws/p2p/16Uiu2HAmQ78rcuszJKeoNpVYzbLNFZH773466uUZ6GE2JtMCifv6"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32920/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.136.226/tcp/31258/p2p/16Uiu2HAmGXEEEcSfLwaEKrcbLSJvc5JeUghRoCwTCDhiERoZbYv8", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32920/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.84.151/tcp/32369/p2p/16Uiu2HAmSw5BSjYtrnE4tKyB9SMyWfBEbLefmhDiEcYpfCA287C3", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31257/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32368/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32920/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729566904637102848, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31257/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1729566904637102848,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32368/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1729566904637102848,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 943f3d3dfd1d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b58162a8deda
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 58095ba11c5c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.