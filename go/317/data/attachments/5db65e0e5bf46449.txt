[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-10-22_03-07-40__c26580be-70f8-440a-bdff-d19f41887078
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-22_03-07-40__c26580be-70f8-440a-bdff-d19f41887078__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-22_03-07-40__c26580be-70f8-440a-bdff-d19f41887078__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-22_03-07-40__c26580be-70f8-440a-bdff-d19f41887078__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.81.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8412', '8413', '8414', '8415', '8416']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8412:8412 -p 8413:8413 -p 8414:8414 -p 8415:8415 -p 8416:8416 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=8414 --rest-port=8412 --tcp-port=8413 --discv5-udp-port=8415 --rest-address=0.0.0.0 --nat=extip:172.18.81.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8b1dee4e48ebbafacde91ca6ea9f8eabcbdeade2f7998cc4cbfb9fbb373decc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.81.213 waku 653900f26ff1f4de01b51d22acf0d4ec0bdd5ba3ac5e63ced1ae20fc3ae0dab1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 653900f26ff1. Setting up logs at ./log/docker/node1_2024-10-22_03-07-40__c26580be-70f8-440a-bdff-d19f41887078__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 8412
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8412/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QLqZ6GbIT82bac3JQ_YjMrGGh1ovLKeN2kyvmOQ9Mq9KXEYoB_ZVjnTMM9wnyIrBPlURv4E5w6Im-gRr2vuIO_-GAZKyMeEIgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQOU67ueftjUhkC9SgnapKH2g3rRP5HVBTJ156kCm_3JXYN0Y3CCIN2DdWRwgiDfhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/8413/p2p/16Uiu2HAmNgKB16DBy8grGd7ixRdMdZDqbTt2aTMD1KsFDUGFnFwa","/ip4/127.0.0.1/tcp/8414/ws/p2p/16Uiu2HAmNgKB16DBy8grGd7ixRdMdZDqbTt2aTMD1KsFDUGFnFwa","/ip4/172.17.0.5/tcp/8413/p2p/16Uiu2HAmNgKB16DBy8grGd7ixRdMdZDqbTt2aTMD1KsFDUGFnFwa","/ip4/172.17.0.5/tcp/8414/ws/p2p/16Uiu2HAmNgKB16DBy8grGd7ixRdMdZDqbTt2aTMD1KsFDUGFnFwa"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.161.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12397', '12398', '12399', '12400', '12401']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12397:12397 -p 12398:12398 -p 12399:12399 -p 12400:12400 -p 12401:12401 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12399 --rest-port=12397 --tcp-port=12398 --discv5-udp-port=12400 --rest-address=0.0.0.0 --nat=extip:172.18.161.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2b9fedd95ad1ae1a3fd63ebc6d9abacc5dd33a4ebe1a3c6aebbc65e0d8a79d13 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12401 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QLqZ6GbIT82bac3JQ_YjMrGGh1ovLKeN2kyvmOQ9Mq9KXEYoB_ZVjnTMM9wnyIrBPlURv4E5w6Im-gRr2vuIO_-GAZKyMeEIgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQOU67ueftjUhkC9SgnapKH2g3rRP5HVBTJ156kCm_3JXYN0Y3CCIN2DdWRwgiDfhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.161.189 waku 000f99b02f1e8f441a3d2247dfdc8cc86e58c295ed77dbb5b517f9f9fac7dc58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 000f99b02f1e. Setting up logs at ./log/docker/node2_2024-10-22_03-07-40__c26580be-70f8-440a-bdff-d19f41887078__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12397
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12397/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12397/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.189/tcp/12398/p2p/16Uiu2HAkzF7FmWDJ7e8MoXURmjP6x2fnqnfDxJas93hdCEnkhxag","/ip4/172.18.161.189/tcp/12399/ws/p2p/16Uiu2HAkzF7FmWDJ7e8MoXURmjP6x2fnqnfDxJas93hdCEnkhxag"],"enrUri":"enr:-LO4QBZSso3mQNTQ_rdrWMB4lMEZA9nQ-b-y06PP0S0A8cKvURE0RYwxZlClYLckniue9yDhccJG7yaekhJg62OxHEcBgmlkgnY0gmlwhKwSob2KbXVsdGlhZGRyc4wACgSsEqG9BjBv3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJHlZ_vTRCduCiQMnRKZLl4tF9Qh2hrYpaZDbS8Ps9wLYN0Y3CCMG6DdWRwgjBwhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.202.90
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21018', '21019', '21020', '21021', '21022']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21018:21018 -p 21019:21019 -p 21020:21020 -p 21021:21021 -p 21022:21022 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=21020 --rest-port=21018 --tcp-port=21019 --discv5-udp-port=21021 --rest-address=0.0.0.0 --nat=extip:172.18.202.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fca3f3bbcfe8df5fdfd6c7c771ae22815aefe0cc7a2cc2345b5eb69639e5bfa7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.161.189/tcp/12398/p2p/16Uiu2HAkzF7FmWDJ7e8MoXURmjP6x2fnqnfDxJas93hdCEnkhxag --discv5-bootstrap-node=enr:-LO4QBZSso3mQNTQ_rdrWMB4lMEZA9nQ-b-y06PP0S0A8cKvURE0RYwxZlClYLckniue9yDhccJG7yaekhJg62OxHEcBgmlkgnY0gmlwhKwSob2KbXVsdGlhZGRyc4wACgSsEqG9BjBv3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJHlZ_vTRCduCiQMnRKZLl4tF9Qh2hrYpaZDbS8Ps9wLYN0Y3CCMG6DdWRwgjBwhXdha3UyAw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.202.90 waku 3c8bdb625b66a8c7d3065b0849e3fb2bf791f8ec38c28a3f27bb126a7850be32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3c8bdb625b66. Setting up logs at ./log/docker/node3_2024-10-22_03-07-40__c26580be-70f8-440a-bdff-d19f41887078__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 21018
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21018/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHeZ4ejGMurMyEt6eSz1rdb73qB-oZ4EXpE8nVezjYwUDXKrcQFuYgpVmyRTrDWx1x2PUGAaM6zhGTLg4G7_9_2GAZKyMe3LgmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQLMKa_d61v24ZCWARFUEKZWhwqQ6paadbjf2mJVMYhHIoN0Y3CCUhuDdWRwglIdhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/21019/p2p/16Uiu2HAm9Ae22ZJXYpJjFaA7SCn1KztUEkwaHEHG6cSVXpmuD6A5","/ip4/127.0.0.1/tcp/21020/ws/p2p/16Uiu2HAm9Ae22ZJXYpJjFaA7SCn1KztUEkwaHEHG6cSVXpmuD6A5","/ip4/172.17.0.10/tcp/21019/p2p/16Uiu2HAm9Ae22ZJXYpJjFaA7SCn1KztUEkwaHEHG6cSVXpmuD6A5","/ip4/172.17.0.10/tcp/21020/ws/p2p/16Uiu2HAm9Ae22ZJXYpJjFaA7SCn1KztUEkwaHEHG6cSVXpmuD6A5"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8412/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12397/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8412/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8412/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8412/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAkzF7FmWDJ7e8MoXURmjP6x2fnqnfDxJas93hdCEnkhxag","multiaddrs":["/ip4/172.18.161.189/tcp/12398/p2p/16Uiu2HAkzF7FmWDJ7e8MoXURmjP6x2fnqnfDxJas93hdCEnkhxag","/ip4/172.18.161.189/tcp/12399/ws/p2p/16Uiu2HAkzF7FmWDJ7e8MoXURmjP6x2fnqnfDxJas93hdCEnkhxag"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12397/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.5/tcp/8413/p2p/16Uiu2HAmNgKB16DBy8grGd7ixRdMdZDqbTt2aTMD1KsFDUGFnFwa","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.10/tcp/21019/p2p/16Uiu2HAm9Ae22ZJXYpJjFaA7SCn1KztUEkwaHEHG6cSVXpmuD6A5","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8412/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21018/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"144a24c31e0a6c8ae84a7c913418c00669601d2782375f5ada18722607fdd497","status_code":200,"status_desc":"OK","messages":[{"message_hash":"2t1BsFz92lqfF1125Eg4iFPQ+VbUecWR7eDB6XDz/Ug="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 653900f26ff1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 000f99b02f1e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3c8bdb625b66
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.