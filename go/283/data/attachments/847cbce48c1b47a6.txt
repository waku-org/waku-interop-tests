[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-09-18_03-20-08__831cedf2-8856-4e94-8001-bc370f3e93c4
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-18_03-20-08__831cedf2-8856-4e94-8001-bc370f3e93c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.170.67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30417', '30418', '30419', '30420', '30421']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30417:30417 -p 30418:30418 -p 30419:30419 -p 30420:30420 -p 30421:30421 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30419 --rest-port=30417 --tcp-port=30418 --discv5-udp-port=30420 --rest-address=0.0.0.0 --nat=extip:172.18.170.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3b1f674b4857cfb2fcfe99c49afbda8fa89c9577b6ed8defedccd1f57d7ae5d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30421 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.170.67 waku 77821059464cddff437516b835b9f7e583b55f724ab7f3d9d87665789909e1d5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 77821059464c. Setting up logs at ./log/docker/receiving_node1_2024-09-18_03-20-08__831cedf2-8856-4e94-8001-bc370f3e93c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30417
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30417/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30417/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.67/tcp/30418/p2p/16Uiu2HAmN83tspJu4LvYhdKj3ygBpm8N4Dvn5T6Z14H7YzgV74c2","/ip4/172.18.170.67/tcp/30419/ws/p2p/16Uiu2HAmN83tspJu4LvYhdKj3ygBpm8N4Dvn5T6Z14H7YzgV74c2"],"enrUri":"enr:-LO4QLKkkLFnZ6MfzWaZVovdZ7IooiKIRZGcDqFkhFIyFnbGGa6cLYyocZwBhb4ZqEuiszjlL8mSQgd0x-OZap6B5SEBgmlkgnY0gmlwhKwSqkOKbXVsdGlhZGRyc4wACgSsEqpDBnbT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOMp99AmkRcSr0SFSfHo91KmbfjXMhShW2j89LI-BFBK4N0Y3CCdtKDdWRwgnbUhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-18_03-20-08__831cedf2-8856-4e94-8001-bc370f3e93c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.77.124
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['58748', '58749', '58750', '58751', '58752']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 58748:58748 -p 58749:58749 -p 58750:58750 -p 58751:58751 -p 58752:58752 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58750 --rest-port=58748 --tcp-port=58749 --discv5-udp-port=58751 --rest-address=0.0.0.0 --nat=extip:172.18.77.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c76641ea0b8a59508d2be40dca4bbff77dba73d3ca8d0cacd8edfaafdbe042ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58752 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.77.124 waku f6c03f36e1f312c5683177a22064d8cef51ab937cbe3515bf02872a4880e5941
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f6c03f36e1f3. Setting up logs at ./log/docker/receiving_node2_2024-09-18_03-20-08__831cedf2-8856-4e94-8001-bc370f3e93c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 58748
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58748/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58748/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.77.124/tcp/58749/p2p/16Uiu2HAm1LL6oV2mJgq9bySN8fXJN2TTN6PXUb3bhTW48FcaGTk1","/ip4/172.18.77.124/tcp/58750/ws/p2p/16Uiu2HAm1LL6oV2mJgq9bySN8fXJN2TTN6PXUb3bhTW48FcaGTk1"],"enrUri":"enr:-LO4QGLd6QsxV34peG7OqWxmxn_arr7XkSLTKCuxAZA3H-LGH-bTTVWryLx2IFo2zM5VFYHJdQ-kRCE3afdx-ppe8iQBgmlkgnY0gmlwhKwSTXyKbXVsdGlhZGRyc4wACgSsEk18BuV-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJXx711kOmqmPm3pEVm3dG75AhkaarIKnTWq_Bs0otproN0Y3CC5X2DdWRwguV_hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58748/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.67/tcp/30418/p2p/16Uiu2HAmN83tspJu4LvYhdKj3ygBpm8N4Dvn5T6Z14H7YzgV74c2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-18_03-20-08__831cedf2-8856-4e94-8001-bc370f3e93c4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.231.113
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['23398', '23399', '23400', '23401', '23402']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 23398:23398 -p 23399:23399 -p 23400:23400 -p 23401:23401 -p 23402:23402 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23400 --rest-port=23398 --tcp-port=23399 --discv5-udp-port=23401 --rest-address=0.0.0.0 --nat=extip:172.18.231.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4f81ebadfbc26ec8086eb031dd6fa0bd3f6bcf704e7dabbeeea7d7da2ceaeba8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QLKkkLFnZ6MfzWaZVovdZ7IooiKIRZGcDqFkhFIyFnbGGa6cLYyocZwBhb4ZqEuiszjlL8mSQgd0x-OZap6B5SEBgmlkgnY0gmlwhKwSqkOKbXVsdGlhZGRyc4wACgSsEqpDBnbT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOMp99AmkRcSr0SFSfHo91KmbfjXMhShW2j89LI-BFBK4N0Y3CCdtKDdWRwgnbUhXdha3UyCQ --lightpushnode=/ip4/172.18.170.67/tcp/30418/p2p/16Uiu2HAmN83tspJu4LvYhdKj3ygBpm8N4Dvn5T6Z14H7YzgV74c2 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.231.113 waku f2c02999ec0ac350ed31bf82ff0cb24c50555069dee4cba721f0f74773f841b5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f2c02999ec0a. Setting up logs at ./log/docker/lightpush_node1_2024-09-18_03-20-08__831cedf2-8856-4e94-8001-bc370f3e93c4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 23398
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23398/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QMKx8mYdzQ-4Z5RadVsrBPMqMScQiTP76gRCkpSV-V7xCIMFwEJMGnqll21zlnkk1XTIu2_-GK5d_brnEzzj44iGAZIDJQ_3gmlkgnY0gmlwhKwRAAyJc2VjcDI1NmsxoQM0IPEMVd3_tnKDc6Fsitp4ZfCp3qchmXlF-QGRQ3mnKIN0Y3CCW2eDdWRwgltphXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/23399/p2p/16Uiu2HAmGAUgfLAg1Y3dfJVookqofRADuRF16WY1LyrdueXGXbts","/ip4/127.0.0.1/tcp/23400/ws/p2p/16Uiu2HAmGAUgfLAg1Y3dfJVookqofRADuRF16WY1LyrdueXGXbts","/ip4/172.17.0.12/tcp/23399/p2p/16Uiu2HAmGAUgfLAg1Y3dfJVookqofRADuRF16WY1LyrdueXGXbts","/ip4/172.17.0.12/tcp/23400/ws/p2p/16Uiu2HAmGAUgfLAg1Y3dfJVookqofRADuRF16WY1LyrdueXGXbts"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23398/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.170.67/tcp/30418/p2p/16Uiu2HAmN83tspJu4LvYhdKj3ygBpm8N4Dvn5T6Z14H7YzgV74c2", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23398/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.77.124/tcp/58749/p2p/16Uiu2HAm1LL6oV2mJgq9bySN8fXJN2TTN6PXUb3bhTW48FcaGTk1", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30417/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23398/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726629614771821056, "extraField": "extraValue"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30417/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726629614771821056,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726629614771821056,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 77821059464c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f6c03f36e1f3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f2c02999ec0a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.