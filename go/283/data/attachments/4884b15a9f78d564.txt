[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter with id: 2024-09-18_03-12-41__fb534cbf-c733-449a-b158-994c6bedb52e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-18_03-12-41__fb534cbf-c733-449a-b158-994c6bedb52e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:32 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.213.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28982', '28983', '28984', '28985', '28986']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28982:28982 -p 28983:28983 -p 28984:28984 -p 28985:28985 -p 28986:28986 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28984 --rest-port=28982 --tcp-port=28983 --discv5-udp-port=28985 --rest-address=0.0.0.0 --nat=extip:172.18.213.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca4397ce85297e17bb3845037bda5abb6efecbeefdedfe74f7b63eccd21cf2e5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28986 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.213.151 waku 728f90b07a16fe59e6a32319d23fe78e41890d4701f3c84eab7b9c1e5d576d6e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 728f90b07a16. Setting up logs at ./log/docker/node1_2024-09-18_03-12-41__fb534cbf-c733-449a-b158-994c6bedb52e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28982
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28982/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28982/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.151/tcp/28983/p2p/16Uiu2HAmQJCdKWLGdCKkUuX685ca9QejJasSi2UR3hFfeAzsr6cy","/ip4/172.18.213.151/tcp/28984/ws/p2p/16Uiu2HAmQJCdKWLGdCKkUuX685ca9QejJasSi2UR3hFfeAzsr6cy"],"enrUri":"enr:-LO4QFqHIPoJVMKmj6Ce6LLr-jWaaap40C_pk-MvUEiss9wqKMnBp47WGJqj6kanCMKQAHRWacUgIetF63xHDAFdJp4BgmlkgnY0gmlwhKwS1ZeKbXVsdGlhZGRyc4wACgSsEtWXBnE43QOCcnOFAAMBAACJc2VjcDI1NmsxoQOs-O1UmJMM9dIxPlwbmmlH12JSukG-aUJz84lMxDSIAoN0Y3CCcTeDdWRwgnE5hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-18_03-12-41__fb534cbf-c733-449a-b158-994c6bedb52e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.3.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59560', '59561', '59562', '59563', '59564']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59560:59560 -p 59561:59561 -p 59562:59562 -p 59563:59563 -p 59564:59564 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=59562 --rest-port=59560 --tcp-port=59561 --discv5-udp-port=59563 --rest-address=0.0.0.0 --nat=extip:172.18.3.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c5c820ee4871fd60bc6ee8d3e6adeb961d1e51dcfcbdc0f4bae95a76df4c658b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QFqHIPoJVMKmj6Ce6LLr-jWaaap40C_pk-MvUEiss9wqKMnBp47WGJqj6kanCMKQAHRWacUgIetF63xHDAFdJp4BgmlkgnY0gmlwhKwS1ZeKbXVsdGlhZGRyc4wACgSsEtWXBnE43QOCcnOFAAMBAACJc2VjcDI1NmsxoQOs-O1UmJMM9dIxPlwbmmlH12JSukG-aUJz84lMxDSIAoN0Y3CCcTeDdWRwgnE5hXdha3UyBQ --filternode=/ip4/172.18.213.151/tcp/28983/p2p/16Uiu2HAmQJCdKWLGdCKkUuX685ca9QejJasSi2UR3hFfeAzsr6cy
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.3.250 waku b7ee4c24add6c58348103226450074b08011ec59ddb2b406746a76c12c466752
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b7ee4c24add6. Setting up logs at ./log/docker/node1_2024-09-18_03-12-41__fb534cbf-c733-449a-b158-994c6bedb52e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 59560
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59560/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QDl-SJJZZdHUMbNrFlXkklSrOwOIjWiiC-JDH99oa-nTZlC-BjMF0j11xrqavPvG344AtL11RoDgvlRReR9HViWGAZIDHkTAgmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQLsj0A6xva7MFLTIHJc0-Ze0byWHehba1CKXzNTr5Asm4N0Y3CC6KmDdWRwguirhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/59561/p2p/16Uiu2HAmBM6tV99cPUUygnfMzQTiga734yqjxaMcVLDx2DRrGYQa","/ip4/127.0.0.1/tcp/59562/ws/p2p/16Uiu2HAmBM6tV99cPUUygnfMzQTiga734yqjxaMcVLDx2DRrGYQa","/ip4/172.17.0.8/tcp/59561/p2p/16Uiu2HAmBM6tV99cPUUygnfMzQTiga734yqjxaMcVLDx2DRrGYQa","/ip4/172.17.0.8/tcp/59562/ws/p2p/16Uiu2HAmBM6tV99cPUUygnfMzQTiga734yqjxaMcVLDx2DRrGYQa"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28982/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59560/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "acda735b-8888-4059-9e4e-8ba83f55c2f7", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"acda735b-8888-4059-9e4e-8ba83f55c2f7","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28982/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59560/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1726629175552152320,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 728f90b07a16
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b7ee4c24add6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.