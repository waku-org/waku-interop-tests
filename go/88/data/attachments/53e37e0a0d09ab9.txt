[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-04-18_03-21-28__d1673e5e-f924-49ed-93aa-a5632e3fdb63
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-18_03-21-28__d1673e5e-f924-49ed-93aa-a5632e3fdb63__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.130.211
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['15870', '15871', '15872', '15873', '15874']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 15870:15870 -p 15871:15871 -p 15872:15872 -p 15873:15873 -p 15874:15874 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15872 --rest-port=15870 --tcp-port=15871 --discv5-udp-port=15873 --rest-address=0.0.0.0 --nat=extip:172.18.130.211 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15874 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.130.211 waku 3f8548e6c3e08aeee67ad74f009968c53f4f6e57550b7a17720380882d4711bd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 3f8548e6c3e0. Setting up logs at ./log/docker/publishing_node1_2024-04-18_03-21-28__d1673e5e-f924-49ed-93aa-a5632e3fdb63__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 15870
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15870/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.211/tcp/15871/p2p/16Uiu2HAkvpMP7NWtDF1TbNLmi5qD8bCPYR8R78Ug3zkCMeTi7RqP","/ip4/172.18.130.211/tcp/15872/ws/p2p/16Uiu2HAkvpMP7NWtDF1TbNLmi5qD8bCPYR8R78Ug3zkCMeTi7RqP"],"enrUri":"enr:-LO4QK-yG8SibrEy_2amv3jjidTo0waAFblsea0n-GNOmWD5b6y9sQp3Tem-R0YiEOWQ8h9QPgBZhHW58mylPy_2mhgBgmlkgnY0gmlwhKwSgtOKbXVsdGlhZGRyc4wACgSsEoLTBj4A3QOCcnOFAAABAACJc2VjcDI1NmsxoQIUqwRIh819xrYnwhMlGIyHKb56HCJkmLO94hXNjYZzVoN0Y3CCPf-DdWRwgj4BhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-18_03-21-28__d1673e5e-f924-49ed-93aa-a5632e3fdb63__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.173.249
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['54706', '54707', '54708', '54709', '54710']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 54706:54706 -p 54707:54707 -p 54708:54708 -p 54709:54709 -p 54710:54710 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=54708 --rest-port=54706 --tcp-port=54707 --discv5-udp-port=54709 --rest-address=0.0.0.0 --nat=extip:172.18.173.249 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QK-yG8SibrEy_2amv3jjidTo0waAFblsea0n-GNOmWD5b6y9sQp3Tem-R0YiEOWQ8h9QPgBZhHW58mylPy_2mhgBgmlkgnY0gmlwhKwSgtOKbXVsdGlhZGRyc4wACgSsEoLTBj4A3QOCcnOFAAABAACJc2VjcDI1NmsxoQIUqwRIh819xrYnwhMlGIyHKb56HCJkmLO94hXNjYZzVoN0Y3CCPf-DdWRwgj4BhXdha3UyAw --storenode=/ip4/172.18.130.211/tcp/15871/p2p/16Uiu2HAkvpMP7NWtDF1TbNLmi5qD8bCPYR8R78Ug3zkCMeTi7RqP --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.173.249 waku b7b11dbef050a04e7ff675a2597fb3fe9e673697662c23088ceadfd0bc35320f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b7b11dbef050. Setting up logs at ./log/docker/store_node1_2024-04-18_03-21-28__d1673e5e-f924-49ed-93aa-a5632e3fdb63__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 54706
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54706/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QGeLY7IykoTVE1ckgFiajNOCqddPUncura7TLJg0BNq6bkvwaW8SduJ0LejUfn76hdREULBtvlO8M9I2CTNCw2aGAY7vOUAXgmlkgnY0gmlwhKwRAAuKbXVsdGlhZGRyc5gACgR_AAABBtW03QMACgSsEQALBtW03QOJc2VjcDI1NmsxoQMGN71-RKMzQmzTZcfsKZJIvhMrMOMclL9Lm-hDXsHC-IN0Y3CC1bODdWRwgtW1hXdha3UyAg","listenAddresses":["/ip4/127.0.0.1/tcp/54707/p2p/16Uiu2HAmD5G6PatYdQz3iE9DfQFyAmTbLBivcy6rbzvEHt9EF8dM","/ip4/127.0.0.1/tcp/54708/ws/p2p/16Uiu2HAmD5G6PatYdQz3iE9DfQFyAmTbLBivcy6rbzvEHt9EF8dM","/ip4/172.17.0.11/tcp/54707/p2p/16Uiu2HAmD5G6PatYdQz3iE9DfQFyAmTbLBivcy6rbzvEHt9EF8dM","/ip4/172.17.0.11/tcp/54708/ws/p2p/16Uiu2HAmD5G6PatYdQz3iE9DfQFyAmTbLBivcy6rbzvEHt9EF8dM"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15870/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:159 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15870/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1713410491466855424,"ephemeral":false}]}'
[35mDEBUG   [0m src.steps.store:store.py:159 Checking that peer harbor.status.im/wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54706/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":null}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 3f8548e6c3e0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id b7b11dbef050
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-18_03-21-28__d1673e5e-f924-49ed-93aa-a5632e3fdb63__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-18_03-21-28__d1673e5e-f924-49ed-93aa-a5632e3fdb63__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-04-18_03-21-36__80dd25f2-e1e9-43dc-b0c2-46efbe06e530
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-18_03-21-36__80dd25f2-e1e9-43dc-b0c2-46efbe06e530__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.230.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['55109', '55110', '55111', '55112', '55113']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 55109:55109 -p 55110:55110 -p 55111:55111 -p 55112:55112 -p 55113:55113 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55111 --rest-port=55109 --tcp-port=55110 --discv5-udp-port=55112 --rest-address=0.0.0.0 --nat=extip:172.18.230.41 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55113 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.230.41 waku 1f77c098bc3ec0eb9f71c153fe479d831c28886955c46185a3b8a337b4a69c4b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1f77c098bc3e. Setting up logs at ./log/docker/publishing_node1_2024-04-18_03-21-36__80dd25f2-e1e9-43dc-b0c2-46efbe06e530__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 55109
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55109/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.41/tcp/55110/p2p/16Uiu2HAm6689diKPEVVFdh66CHERmDRfnfow1fPAZr6naFJtHJxH","/ip4/172.18.230.41/tcp/55111/ws/p2p/16Uiu2HAm6689diKPEVVFdh66CHERmDRfnfow1fPAZr6naFJtHJxH"],"enrUri":"enr:-LO4QMAINgLo_p1bZpB6PPqToVrc5w5xVVlCYVoeKG2LpKSFEq41hpCV2W1MNhPSk1ZmgOUauf52RIC1xz8TabYmYMMBgmlkgnY0gmlwhKwS5imKbXVsdGlhZGRyc4wACgSsEuYpBtdH3QOCcnOFAAABAACJc2VjcDI1NmsxoQKeboe3EJ7LV-pLyO3DyXoX4cU009TkqFe-6SzUQ4CNOoN0Y3CC10aDdWRwgtdIhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-18_03-21-36__80dd25f2-e1e9-43dc-b0c2-46efbe06e530__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.140.35
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['15003', '15004', '15005', '15006', '15007']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 15003:15003 -p 15004:15004 -p 15005:15005 -p 15006:15006 -p 15007:15007 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=15005 --rest-port=15003 --tcp-port=15004 --discv5-udp-port=15006 --rest-address=0.0.0.0 --nat=extip:172.18.140.35 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QMAINgLo_p1bZpB6PPqToVrc5w5xVVlCYVoeKG2LpKSFEq41hpCV2W1MNhPSk1ZmgOUauf52RIC1xz8TabYmYMMBgmlkgnY0gmlwhKwS5imKbXVsdGlhZGRyc4wACgSsEuYpBtdH3QOCcnOFAAABAACJc2VjcDI1NmsxoQKeboe3EJ7LV-pLyO3DyXoX4cU009TkqFe-6SzUQ4CNOoN0Y3CC10aDdWRwgtdIhXdha3UyAw --storenode=/ip4/172.18.230.41/tcp/55110/p2p/16Uiu2HAm6689diKPEVVFdh66CHERmDRfnfow1fPAZr6naFJtHJxH --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.140.35 waku 5dcf5d27114092a71cced86d3b8076c6c609b47326b9731a410594525d13f9d6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5dcf5d271140. Setting up logs at ./log/docker/store_node1_2024-04-18_03-21-36__80dd25f2-e1e9-43dc-b0c2-46efbe06e530__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 15003
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15003/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QDS5Iy9BjDIN5xkqNhkiJd8m6sKRUmLFvK6z8yi09uSrKj5Jo42xhG8Sg9b6RbKsrAC2-cdmTtXXl-ziyr4R6F6GAY7vOV7WgmlkgnY0gmlwhKwRAASKbXVsdGlhZGRyc5gACgSsEQAEBjqd3QMACgR_AAABBjqd3QOJc2VjcDI1NmsxoQMqC54o1jHMCgBmpIzU48s800M6HLibroc-H8sbAEpZvYN0Y3CCOpyDdWRwgjqehXdha3UyAg","listenAddresses":["/ip4/127.0.0.1/tcp/15004/p2p/16Uiu2HAmFV7kPAXLLsvC6eb5YWBBcAxsZH7nnPLxDZXiXyVzaCTN","/ip4/127.0.0.1/tcp/15005/ws/p2p/16Uiu2HAmFV7kPAXLLsvC6eb5YWBBcAxsZH7nnPLxDZXiXyVzaCTN","/ip4/172.17.0.4/tcp/15004/p2p/16Uiu2HAmFV7kPAXLLsvC6eb5YWBBcAxsZH7nnPLxDZXiXyVzaCTN","/ip4/172.17.0.4/tcp/15005/ws/p2p/16Uiu2HAmFV7kPAXLLsvC6eb5YWBBcAxsZH7nnPLxDZXiXyVzaCTN"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55109/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55109/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:159 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55109/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1713410499296733696,"ephemeral":false}]}'
[35mDEBUG   [0m src.steps.store:store.py:159 Checking that peer harbor.status.im/wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15003/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":null}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 1f77c098bc3e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 5dcf5d271140
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-18_03-21-36__80dd25f2-e1e9-43dc-b0c2-46efbe06e530__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-18_03-21-36__80dd25f2-e1e9-43dc-b0c2-46efbe06e530__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-04-18_03-21-43__83e445c5-c4db-4583-87ab-a14cce0087b4
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-18_03-21-43__83e445c5-c4db-4583-87ab-a14cce0087b4__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.68.129
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18596', '18597', '18598', '18599', '18600']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18596:18596 -p 18597:18597 -p 18598:18598 -p 18599:18599 -p 18600:18600 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18598 --rest-port=18596 --tcp-port=18597 --discv5-udp-port=18599 --rest-address=0.0.0.0 --nat=extip:172.18.68.129 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18600 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.68.129 waku 82533047e75e5715c4c9a08ba315b3ec57625301dda835223180438acdd06699
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 82533047e75e. Setting up logs at ./log/docker/publishing_node1_2024-04-18_03-21-43__83e445c5-c4db-4583-87ab-a14cce0087b4__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 18596
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18596/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.129/tcp/18597/p2p/16Uiu2HAm3Wf7FAU6rrhyDLp36Zs7Y7PLyoSi22RpXR98XDp5C77B","/ip4/172.18.68.129/tcp/18598/ws/p2p/16Uiu2HAm3Wf7FAU6rrhyDLp36Zs7Y7PLyoSi22RpXR98XDp5C77B"],"enrUri":"enr:-LO4QDeFG4vfA8l5nCNTkFdP8NG2Lo6ZeSyCXiYkr2_yMexIOW3mfCmrVUW59HGQwtTtE1PRSo8aozNT3tcq6vAQH8YBgmlkgnY0gmlwhKwSRIGKbXVsdGlhZGRyc4wACgSsEkSBBkim3QOCcnOFAAABAACJc2VjcDI1NmsxoQJ4JGn9H97nYCPg07aQzzrcQwcuaZ4ysyYQVgBeIztZloN0Y3CCSKWDdWRwgkinhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-18_03-21-43__83e445c5-c4db-4583-87ab-a14cce0087b4__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.81.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['14150', '14151', '14152', '14153', '14154']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 14150:14150 -p 14151:14151 -p 14152:14152 -p 14153:14153 -p 14154:14154 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=14152 --rest-port=14150 --tcp-port=14151 --discv5-udp-port=14153 --rest-address=0.0.0.0 --nat=extip:172.18.81.81 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QDeFG4vfA8l5nCNTkFdP8NG2Lo6ZeSyCXiYkr2_yMexIOW3mfCmrVUW59HGQwtTtE1PRSo8aozNT3tcq6vAQH8YBgmlkgnY0gmlwhKwSRIGKbXVsdGlhZGRyc4wACgSsEkSBBkim3QOCcnOFAAABAACJc2VjcDI1NmsxoQJ4JGn9H97nYCPg07aQzzrcQwcuaZ4ysyYQVgBeIztZloN0Y3CCSKWDdWRwgkinhXdha3UyAw --storenode=/ip4/172.18.68.129/tcp/18597/p2p/16Uiu2HAm3Wf7FAU6rrhyDLp36Zs7Y7PLyoSi22RpXR98XDp5C77B --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.81.81 waku bf37a3018e65ab63bfe91ae73182b571f0cd7766c78ef587c61ac955a63d9d6d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID bf37a3018e65. Setting up logs at ./log/docker/store_node1_2024-04-18_03-21-43__83e445c5-c4db-4583-87ab-a14cce0087b4__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 14150
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14150/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QKk3i7dsM_NhdGOczqbcNUUXXAcCbgKeev1TS57vzyevSRVjbiAN8RchAFjlUFzVuRY3KFuv170DDNwpwfmRofOGAY7vOXoRgmlkgnY0gmlwhKwRAAiKbXVsdGlhZGRyc5gACgSsEQAIBjdI3QMACgR_AAABBjdI3QOJc2VjcDI1NmsxoQMk88dvA0KPJcEbVFRMjlidNUO1vH1l1b3CUhsnC1mPOYN0Y3CCN0eDdWRwgjdJhXdha3UyAg","listenAddresses":["/ip4/127.0.0.1/tcp/14151/p2p/16Uiu2HAmF9EdL2uzyNSvA4hE84hENGfKgfbcroUc7yhBuY7pizwa","/ip4/127.0.0.1/tcp/14152/ws/p2p/16Uiu2HAmF9EdL2uzyNSvA4hE84hENGfKgfbcroUc7yhBuY7pizwa","/ip4/172.17.0.8/tcp/14151/p2p/16Uiu2HAmF9EdL2uzyNSvA4hE84hENGfKgfbcroUc7yhBuY7pizwa","/ip4/172.17.0.8/tcp/14152/ws/p2p/16Uiu2HAmF9EdL2uzyNSvA4hE84hENGfKgfbcroUc7yhBuY7pizwa"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18596/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18596/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:159 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18596/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1713410506483297792,"ephemeral":false}]}'
[35mDEBUG   [0m src.steps.store:store.py:159 Checking that peer harbor.status.im/wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14150/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":null}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 82533047e75e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id bf37a3018e65
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-18_03-21-43__83e445c5-c4db-4583-87ab-a14cce0087b4__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-18_03-21-43__83e445c5-c4db-4583-87ab-a14cce0087b4__harbor.status.im_wakuorg_go-waku:latest.log