[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_lightpushed_message with id: 2024-05-12_03-20-27__44e434fa-372e-453d-96f9-4a9b45841230
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_03-20-27__44e434fa-372e-453d-96f9-4a9b45841230__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.150.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60208', '60209', '60210', '60211', '60212']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60208:60208 -p 60209:60209 -p 60210:60210 -p 60211:60211 -p 60212:60212 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60210 --rest-port=60208 --tcp-port=60209 --discv5-udp-port=60211 --rest-address=0.0.0.0 --nat=extip:172.18.150.6 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60212 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.150.6 waku 3364d82e41237a10ca29a0fce6c99c32b8b430c350937890cb871c4f919ccd54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 3364d82e4123. Setting up logs at ./log/docker/publishing_node1_2024-05-12_03-20-27__44e434fa-372e-453d-96f9-4a9b45841230__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 60208
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60208/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60208/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.6/tcp/60209/p2p/16Uiu2HAmQyAJi6W284TPXP5kdPdoYoiHjZkNgnEGMUvRL2cyzVqe","/ip4/172.18.150.6/tcp/60210/ws/p2p/16Uiu2HAmQyAJi6W284TPXP5kdPdoYoiHjZkNgnEGMUvRL2cyzVqe"],"enrUri":"enr:-LO4QGMtk3Ze7B2KVovwwzytDXbKfB3EdWA4rC21fFoh40VGK46UvYvJ_Emne6r5BGkshKuUJ0D0w9SxjXjWoYrxKb8BgmlkgnY0gmlwhKwSlgaKbXVsdGlhZGRyc4wACgSsEpYGBusy3QOCcnOFAAABAACJc2VjcDI1NmsxoQO28_RUHdh53rIENLszkTZCv4ENpKEt_Pz-Crao4S7B_YN0Y3CC6zGDdWRwguszhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_03-20-27__44e434fa-372e-453d-96f9-4a9b45841230__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.169.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['21358', '21359', '21360', '21361', '21362']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 21358:21358 -p 21359:21359 -p 21360:21360 -p 21361:21361 -p 21362:21362 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=21360 --rest-port=21358 --tcp-port=21359 --discv5-udp-port=21361 --rest-address=0.0.0.0 --nat=extip:172.18.169.86 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QGMtk3Ze7B2KVovwwzytDXbKfB3EdWA4rC21fFoh40VGK46UvYvJ_Emne6r5BGkshKuUJ0D0w9SxjXjWoYrxKb8BgmlkgnY0gmlwhKwSlgaKbXVsdGlhZGRyc4wACgSsEpYGBusy3QOCcnOFAAABAACJc2VjcDI1NmsxoQO28_RUHdh53rIENLszkTZCv4ENpKEt_Pz-Crao4S7B_YN0Y3CC6zGDdWRwguszhXdha3UyCw --storenode=/ip4/172.18.150.6/tcp/60209/p2p/16Uiu2HAmQyAJi6W284TPXP5kdPdoYoiHjZkNgnEGMUvRL2cyzVqe --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.150.6/tcp/60209/p2p/16Uiu2HAmQyAJi6W284TPXP5kdPdoYoiHjZkNgnEGMUvRL2cyzVqe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.169.86 waku e6ef6f0f73996b09ac1e7522ac2af021272260b4fba1d47dc61866f9dab82673
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e6ef6f0f7399. Setting up logs at ./log/docker/store_node1_2024-05-12_03-20-27__44e434fa-372e-453d-96f9-4a9b45841230__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 21358
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21358/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QMNOhQMne9YGMN4ae1kkHHw9sjCaHBd2EnlrZzvRVWA3aWsgHrXlDldd2RwvweJLkiqka02dECNm4ucdbMYG-pOGAY9q0PWrgmlkgnY0gmlwhKwRAAWKbXVsdGlhZGRyc5gACgSsEQAFBlNw3QMACgR_AAABBlNw3QOJc2VjcDI1NmsxoQL4se0waLz5jL1_5yd5js5yhdD1nrO8VWtFH2teOQmOc4N0Y3CCU2-DdWRwglNxhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/21359/p2p/16Uiu2HAmCAUSwsUFkmLNJccbosxtUn87on1GQoi17xRxushjgFZ4","/ip4/127.0.0.1/tcp/21360/ws/p2p/16Uiu2HAmCAUSwsUFkmLNJccbosxtUn87on1GQoi17xRxushjgFZ4","/ip4/172.17.0.5/tcp/21359/p2p/16Uiu2HAmCAUSwsUFkmLNJccbosxtUn87on1GQoi17xRxushjgFZ4","/ip4/172.17.0.5/tcp/21360/ws/p2p/16Uiu2HAmCAUSwsUFkmLNJccbosxtUn87on1GQoi17xRxushjgFZ4"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21358/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.150.6/tcp/60209/p2p/16Uiu2HAmQyAJi6W284TPXP5kdPdoYoiHjZkNgnEGMUvRL2cyzVqe", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60208/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21358/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1715484031663244032}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60208/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715484031663244032,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 3364d82e4123
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id e6ef6f0f7399
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_03-20-27__44e434fa-372e-453d-96f9-4a9b45841230__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_03-20-27__44e434fa-372e-453d-96f9-4a9b45841230__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_lightpushed_message with id: 2024-05-12_03-20-35__da50ee9c-5931-4cdc-87cf-ec54392e06b8
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_03-20-35__da50ee9c-5931-4cdc-87cf-ec54392e06b8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.142.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['8507', '8508', '8509', '8510', '8511']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 8507:8507 -p 8508:8508 -p 8509:8509 -p 8510:8510 -p 8511:8511 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8509 --rest-port=8507 --tcp-port=8508 --discv5-udp-port=8510 --rest-address=0.0.0.0 --nat=extip:172.18.142.247 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8511 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.142.247 waku 4dbffddcc1f0ad73cf30c58d4f4b1fc26fd990aa64eb53a8b3d9670ffb9f810d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4dbffddcc1f0. Setting up logs at ./log/docker/publishing_node1_2024-05-12_03-20-35__da50ee9c-5931-4cdc-87cf-ec54392e06b8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 8507
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8507/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8507/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.247/tcp/8508/p2p/16Uiu2HAmC6NphZBSYHy146ZQWCQ4rAgaHyjNF1BJUzhx1BkMCcVT","/ip4/172.18.142.247/tcp/8509/ws/p2p/16Uiu2HAmC6NphZBSYHy146ZQWCQ4rAgaHyjNF1BJUzhx1BkMCcVT"],"enrUri":"enr:-LO4QPukzLjRkL62aLSXT6UW0aUfy_ZRkjHa6e_glRdyjiR0CZE1wub9ab49vghFVULgnzvL8P2wRvOTXSH7SIhs8bQBgmlkgnY0gmlwhKwSjveKbXVsdGlhZGRyc4wACgSsEo73BiE93QOCcnOFAAABAACJc2VjcDI1NmsxoQL3pT4-SSSdpIyupo6xhiINIx-9adSbCHDGEnLIvTxKtoN0Y3CCITyDdWRwgiE-hXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_03-20-35__da50ee9c-5931-4cdc-87cf-ec54392e06b8__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.177.71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['63099', '63100', '63101', '63102', '63103']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 63099:63099 -p 63100:63100 -p 63101:63101 -p 63102:63102 -p 63103:63103 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=63101 --rest-port=63099 --tcp-port=63100 --discv5-udp-port=63102 --rest-address=0.0.0.0 --nat=extip:172.18.177.71 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QPukzLjRkL62aLSXT6UW0aUfy_ZRkjHa6e_glRdyjiR0CZE1wub9ab49vghFVULgnzvL8P2wRvOTXSH7SIhs8bQBgmlkgnY0gmlwhKwSjveKbXVsdGlhZGRyc4wACgSsEo73BiE93QOCcnOFAAABAACJc2VjcDI1NmsxoQL3pT4-SSSdpIyupo6xhiINIx-9adSbCHDGEnLIvTxKtoN0Y3CCITyDdWRwgiE-hXdha3UyCw --storenode=/ip4/172.18.142.247/tcp/8508/p2p/16Uiu2HAmC6NphZBSYHy146ZQWCQ4rAgaHyjNF1BJUzhx1BkMCcVT --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.142.247/tcp/8508/p2p/16Uiu2HAmC6NphZBSYHy146ZQWCQ4rAgaHyjNF1BJUzhx1BkMCcVT
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.177.71 waku f3389ef6a3cec7380c3a9414d0fc533bf4c6d5c83965e4ead3c7a82c235bd83b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f3389ef6a3ce. Setting up logs at ./log/docker/store_node1_2024-05-12_03-20-35__da50ee9c-5931-4cdc-87cf-ec54392e06b8__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 63099
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63099/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QKDcFL9jQ7muZJcFiF1WpkK--1XiCZq10SLy66R7fGQOAn_vNKkGCZEaJ49C2ZMomM0FWcQwEYKZ2Lw5_TpdUGKGAY9q0RQ4gmlkgnY0gmlwhKwRAAaKbXVsdGlhZGRyc5gACgR_AAABBvZ93QMACgSsEQAGBvZ93QOJc2VjcDI1NmsxoQIY7fF-6dbmK21BTl19awBPI1tsgdC4g_GFN0FebvRzgIN0Y3CC9nyDdWRwgvZ-hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/63100/p2p/16Uiu2HAkw6zCjJNi7LLyo2sTVGVsZ2PDcCiQvVfN4M13SwLinzgo","/ip4/127.0.0.1/tcp/63101/ws/p2p/16Uiu2HAkw6zCjJNi7LLyo2sTVGVsZ2PDcCiQvVfN4M13SwLinzgo","/ip4/172.17.0.6/tcp/63100/p2p/16Uiu2HAkw6zCjJNi7LLyo2sTVGVsZ2PDcCiQvVfN4M13SwLinzgo","/ip4/172.17.0.6/tcp/63101/ws/p2p/16Uiu2HAkw6zCjJNi7LLyo2sTVGVsZ2PDcCiQvVfN4M13SwLinzgo"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63099/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.142.247/tcp/8508/p2p/16Uiu2HAmC6NphZBSYHy146ZQWCQ4rAgaHyjNF1BJUzhx1BkMCcVT", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8507/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63099/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1715484039267599872}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8507/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715484039267599872,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 4dbffddcc1f0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id f3389ef6a3ce
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_03-20-35__da50ee9c-5931-4cdc-87cf-ec54392e06b8__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_03-20-35__da50ee9c-5931-4cdc-87cf-ec54392e06b8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_store_lightpushed_message with id: 2024-05-12_03-20-41__1090bc8b-6931-4c62-b810-8148106bb5a4
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_03-20-41__1090bc8b-6931-4c62-b810-8148106bb5a4__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.24.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['7321', '7322', '7323', '7324', '7325']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 7321:7321 -p 7322:7322 -p 7323:7323 -p 7324:7324 -p 7325:7325 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7323 --rest-port=7321 --tcp-port=7322 --discv5-udp-port=7324 --rest-address=0.0.0.0 --nat=extip:172.18.24.79 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7325 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.24.79 waku f1fc741d619213e881e802f65e06fda57b576a93668fd80a4f7be06021e806fc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f1fc741d6192. Setting up logs at ./log/docker/publishing_node1_2024-05-12_03-20-41__1090bc8b-6931-4c62-b810-8148106bb5a4__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 7321
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7321/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7321/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.79/tcp/7322/p2p/16Uiu2HAmB7Dprg3TdiWehzyaDdLJ7eVXUpEheCimEumzDVnJheGg","/ip4/172.18.24.79/tcp/7323/ws/p2p/16Uiu2HAmB7Dprg3TdiWehzyaDdLJ7eVXUpEheCimEumzDVnJheGg"],"enrUri":"enr:-LO4QFYNYUiBfLCeE60d0DCKzIT-M8-LfHzl34M21SQqxah4PZZZ_plxzxOJ9rvKUNOPMpMYxVX2fET5i-e43pO1UdgBgmlkgnY0gmlwhKwSGE-KbXVsdGlhZGRyc4wACgSsEhhPBhyb3QOCcnOFAAABAACJc2VjcDI1NmsxoQLpAPa4hKAgNfepeSNvXIoBWSYA_3_qf04lVCXLzR7hMYN0Y3CCHJqDdWRwghychXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_03-20-41__1090bc8b-6931-4c62-b810-8148106bb5a4__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.173.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['46955', '46956', '46957', '46958', '46959']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 46955:46955 -p 46956:46956 -p 46957:46957 -p 46958:46958 -p 46959:46959 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=46957 --rest-port=46955 --tcp-port=46956 --discv5-udp-port=46958 --rest-address=0.0.0.0 --nat=extip:172.18.173.155 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QFYNYUiBfLCeE60d0DCKzIT-M8-LfHzl34M21SQqxah4PZZZ_plxzxOJ9rvKUNOPMpMYxVX2fET5i-e43pO1UdgBgmlkgnY0gmlwhKwSGE-KbXVsdGlhZGRyc4wACgSsEhhPBhyb3QOCcnOFAAABAACJc2VjcDI1NmsxoQLpAPa4hKAgNfepeSNvXIoBWSYA_3_qf04lVCXLzR7hMYN0Y3CCHJqDdWRwghychXdha3UyCw --storenode=/ip4/172.18.24.79/tcp/7322/p2p/16Uiu2HAmB7Dprg3TdiWehzyaDdLJ7eVXUpEheCimEumzDVnJheGg --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.24.79/tcp/7322/p2p/16Uiu2HAmB7Dprg3TdiWehzyaDdLJ7eVXUpEheCimEumzDVnJheGg
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.173.155 waku 76723d10c77b7ba4b77e02344f3761668d82cfa8fc2d05cfdb2b3ec8bf04d533
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 76723d10c77b. Setting up logs at ./log/docker/store_node1_2024-05-12_03-20-41__1090bc8b-6931-4c62-b810-8148106bb5a4__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 46955
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46955/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QPatXGk6fHOisSPlxk_S3y6bj9YCjL6NlhBXyn9BGnLTIsUZMI9jF1jXT6Xn3vCmLxyeNFoDutwMAqWkmPWVAEGGAY9q0SsdgmlkgnY0gmlwhKwRAAKKbXVsdGlhZGRyc5gACgR_AAABBrdt3QMACgSsEQACBrdt3QOJc2VjcDI1NmsxoQN33LSiSYzodqvlgRe0M2tR8DcN-jqqfgxlXuEOyKfR1oN0Y3CCt2yDdWRwgrduhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/46956/p2p/16Uiu2HAmLit4RU96GUxetsuFUzkyXUnKLDaJ5RXXbUv4v1GcbNiy","/ip4/127.0.0.1/tcp/46957/ws/p2p/16Uiu2HAmLit4RU96GUxetsuFUzkyXUnKLDaJ5RXXbUv4v1GcbNiy","/ip4/172.17.0.2/tcp/46956/p2p/16Uiu2HAmLit4RU96GUxetsuFUzkyXUnKLDaJ5RXXbUv4v1GcbNiy","/ip4/172.17.0.2/tcp/46957/ws/p2p/16Uiu2HAmLit4RU96GUxetsuFUzkyXUnKLDaJ5RXXbUv4v1GcbNiy"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46955/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.24.79/tcp/7322/p2p/16Uiu2HAmB7Dprg3TdiWehzyaDdLJ7eVXUpEheCimEumzDVnJheGg", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7321/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46955/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/0/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1715484045105516800}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7321/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715484045105516800,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id f1fc741d6192
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 76723d10c77b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_03-20-41__1090bc8b-6931-4c62-b810-8148106bb5a4__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_03-20-41__1090bc8b-6931-4c62-b810-8148106bb5a4__harbor.status.im_wakuorg_nwaku:latest.log