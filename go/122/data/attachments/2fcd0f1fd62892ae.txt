[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_get_message_with_extra_field with id: 2024-05-12_03-10-38__9fea055b-1d27-43b9-880d-b43bc4c58f12
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node1_2024-05-12_03-10-38__9fea055b-1d27-43b9-880d-b43bc4c58f12__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.109.203
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13405', '13406', '13407', '13408', '13409']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13405:13405 -p 13406:13406 -p 13407:13407 -p 13408:13408 -p 13409:13409 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13407 --rest-port=13405 --tcp-port=13406 --discv5-udp-port=13408 --rest-address=0.0.0.0 --nat=extip:172.18.109.203 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13409 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.109.203 waku b277cbd6d5f48529540d1e9cb7b46910c498b318958d1fe302d8a5bd4bf18b52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b277cbd6d5f4. Setting up logs at ./log/docker/node1_2024-05-12_03-10-38__9fea055b-1d27-43b9-880d-b43bc4c58f12__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 13405
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13405/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13405/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.203/tcp/13406/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.109.203/tcp/13407/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QBJaytezLKKPWv_ygc-RnvDGp1Q5NjELwvlklVJwWfWVLSd07Y4O0zo9QvsjPDUujqvbE7eGS1EALzdL3mURLNsBgmlkgnY0gmlwhKwSbcuKbXVsdGlhZGRyc4wACgSsEm3LBjRf3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCNF6DdWRwgjRghXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node2_2024-05-12_03-10-38__9fea055b-1d27-43b9-880d-b43bc4c58f12__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.197.94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['27887', '27888', '27889', '27890', '27891']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 27887:27887 -p 27888:27888 -p 27889:27889 -p 27890:27890 -p 27891:27891 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=27889 --rest-port=27887 --tcp-port=27888 --discv5-udp-port=27890 --rest-address=0.0.0.0 --nat=extip:172.18.197.94 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --relay=false --discv5-bootstrap-node=enr:-LO4QBJaytezLKKPWv_ygc-RnvDGp1Q5NjELwvlklVJwWfWVLSd07Y4O0zo9QvsjPDUujqvbE7eGS1EALzdL3mURLNsBgmlkgnY0gmlwhKwSbcuKbXVsdGlhZGRyc4wACgSsEm3LBjRf3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCNF6DdWRwgjRghXdha3UyBQ --filternode=/ip4/172.18.109.203/tcp/13406/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.197.94 waku 8d76334f06044c627ed74b99e895789ff704f794433413e3a5da3b4074846c11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8d76334f0604. Setting up logs at ./log/docker/node2_2024-05-12_03-10-38__9fea055b-1d27-43b9-880d-b43bc4c58f12__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 27887
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27887/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QEbN6dOyd7jxRv64P4CHZaK9P7wY68ACgmdK_8jn1R9dCTafGCYHHPpNB9yCHy1dIUIvTntwAW-FNzfJUdGonLaGAY9qx_VcgmlkgnY0gmlwhKwRAAmKbXVsdGlhZGRyc5gACgSsEQAJBmzx3QMACgR_AAABBmzx3QOJc2VjcDI1NmsxoQMQ1K6h2JgytHodvv5dfcD92nZI8aPoYo_BIQv8G3taboN0Y3CCbPCDdWRwgmzyhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/27888/p2p/16Uiu2HAmDngyGbaVLdr4dKnHrHBQJuHz7gQRYY1m5NRGHMa4kc5K","/ip4/127.0.0.1/tcp/27889/ws/p2p/16Uiu2HAmDngyGbaVLdr4dKnHrHBQJuHz7gQRYY1m5NRGHMa4kc5K","/ip4/172.17.0.9/tcp/27888/p2p/16Uiu2HAmDngyGbaVLdr4dKnHrHBQJuHz7gQRYY1m5NRGHMa4kc5K","/ip4/172.17.0.9/tcp/27889/ws/p2p/16Uiu2HAmDngyGbaVLdr4dKnHrHBQJuHz7gQRYY1m5NRGHMa4kc5K"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27887/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.109.203/tcp/13406/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13405/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27887/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "16a4f722-ac80-497f-8f01-728a052f8d07", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"16a4f722-ac80-497f-8f01-728a052f8d07","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13405/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13405/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id b277cbd6d5f4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 8d76334f0604
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.