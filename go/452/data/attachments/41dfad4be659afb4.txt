[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_restarts with id: 2025-02-03_03-11-46__87ccf488-49e3-431a-b8af-c1a8435f1c91
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-03_03-11-46__87ccf488-49e3-431a-b8af-c1a8435f1c91__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.231.106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12590', '12591', '12592', '12593', '12594']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12590:12590 -p 12591:12591 -p 12592:12592 -p 12593:12593 -p 12594:12594 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12592 --rest-port=12590 --tcp-port=12591 --discv5-udp-port=12593 --rest-address=0.0.0.0 --nat=extip:172.18.231.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6eaf881e38ce947efdcbebd5adfe0abb3dd1bc00c62d793d4c525aecdad8c7da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12594 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 98a505f2a58f. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.231.106 waku 489ca14dfac2c03363857c4cbd704ef74c6f9a03e7a849c9444ba341c1dbc2d9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 489ca14dfac2. Setting up logs at ./log/docker/publishing_node1_2025-02-03_03-11-46__87ccf488-49e3-431a-b8af-c1a8435f1c91__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 12590
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a303cb902592. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12590/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12590/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.106/tcp/12591/p2p/16Uiu2HAmDgNU6DqEUWV6jybXDd7RjGtdT4WcX5xto7bCqXByuJ65","/ip4/172.18.231.106/tcp/12592/ws/p2p/16Uiu2HAmDgNU6DqEUWV6jybXDd7RjGtdT4WcX5xto7bCqXByuJ65"],"enrUri":"enr:-L24QG-B3ulgT_Qdne_ld0h08omiw9PrI6B6lUqCjS8PLIosGCkXv7YwH4gGrh8rTEFgI4A04d1qtBVLo2US82_LeekCgmlkgnY0gmlwhKwS52qKbXVsdGlhZGRyc5YACASsEudqBjEvAAoErBLnagYxMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDzZGmr7ZcFPjtQ2caOHbgO6t5F4yPyo62ZMd8nhwzuqDdGNwgjEvg3VkcIIxMYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-03_03-11-46__87ccf488-49e3-431a-b8af-c1a8435f1c91__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.25.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13980', '13981', '13982', '13983', '13984']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13980:13980 -p 13981:13981 -p 13982:13982 -p 13983:13983 -p 13984:13984 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13982 --rest-port=13980 --tcp-port=13981 --discv5-udp-port=13983 --rest-address=0.0.0.0 --nat=extip:172.18.25.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab5ebee5984d8eed8feacae0fa09620bb9eb1c6bbfe1491bfa8fcebeca5c5c5c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QG-B3ulgT_Qdne_ld0h08omiw9PrI6B6lUqCjS8PLIosGCkXv7YwH4gGrh8rTEFgI4A04d1qtBVLo2US82_LeekCgmlkgnY0gmlwhKwS52qKbXVsdGlhZGRyc5YACASsEudqBjEvAAoErBLnagYxMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDzZGmr7ZcFPjtQ2caOHbgO6t5F4yPyo62ZMd8nhwzuqDdGNwgjEvg3VkcIIxMYV3YWt1MgM --storenode=/ip4/172.18.231.106/tcp/12591/p2p/16Uiu2HAmDgNU6DqEUWV6jybXDd7RjGtdT4WcX5xto7bCqXByuJ65 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.25.105 waku f46f34f3680f49b2575595494918237653496ff79c0793fa6431d04442474d2c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f46f34f3680f. Setting up logs at ./log/docker/store_node1_2025-02-03_03-11-46__87ccf488-49e3-431a-b8af-c1a8435f1c91__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 13980
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13980/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QGiTYCZsvtZpZeOEPUcI-MNo3KDc22vRXLkQAm5NERWoYf2hU1KyXWDj2rS35MIAxCR9K2g-KvUQ9rzZJHEZArmGAZTJyvLQgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDvexRrsPhSf_ZWvfoMdvzjVHIz3xsDB3gBURXY4THvP-DdGNwgjadg3VkcII2n4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/13981/p2p/16Uiu2HAmRSNQaP2V4C1vdEeXddEw8epSV5kYaNjJM75Wcu4kjvT8","/ip4/127.0.0.1/tcp/13982/ws/p2p/16Uiu2HAmRSNQaP2V4C1vdEeXddEw8epSV5kYaNjJM75Wcu4kjvT8","/ip4/172.17.0.3/tcp/13981/p2p/16Uiu2HAmRSNQaP2V4C1vdEeXddEw8epSV5kYaNjJM75Wcu4kjvT8","/ip4/172.17.0.3/tcp/13982/ws/p2p/16Uiu2HAmRSNQaP2V4C1vdEeXddEw8epSV5kYaNjJM75Wcu4kjvT8"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13980/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.231.106/tcp/12591/p2p/16Uiu2HAmDgNU6DqEUWV6jybXDd7RjGtdT4WcX5xto7bCqXByuJ65", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12590/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13980/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12590/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12590/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4350fe03327beb216f69a80868d0ae1f074219fd9cdae75d45e507b4a79f358e"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13980/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"d303a8aea48c213d7edc760f5a83df48601491ef7f07d5559d045b5f80df9e1f","status_code":200,"status_desc":"OK","messages":[{"message_hash":"Q1D+AzJ76yFvaagIaNCuHwdCGf2c2uddReUHtKefNY4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 489ca14dfac2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f46f34f3680f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-03_03-11-46__87ccf488-49e3-431a-b8af-c1a8435f1c91__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-03_03-11-46__87ccf488-49e3-431a-b8af-c1a8435f1c91__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_restarts with id: 2025-02-03_03-11-50__82862649-ec10-4686-bebf-9cac1c1ab857
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-03_03-11-50__82862649-ec10-4686-bebf-9cac1c1ab857__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.200.46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4990', '4991', '4992', '4993', '4994']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4990:4990 -p 4991:4991 -p 4992:4992 -p 4993:4993 -p 4994:4994 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4992 --rest-port=4990 --tcp-port=4991 --discv5-udp-port=4993 --rest-address=0.0.0.0 --nat=extip:172.18.200.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f37a56cbddeaa0bfb7df415499addcde60887beac3cc8d49ca233fb221dae469 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4994 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 489ca14dfac2. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.200.46 waku 36e3bb59e08b9641ef66efa93f50997b9b44d72581092466a2932b9c191caeaa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 36e3bb59e08b. Setting up logs at ./log/docker/publishing_node1_2025-02-03_03-11-50__82862649-ec10-4686-bebf-9cac1c1ab857__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 4990
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f46f34f3680f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4990/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4990/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.46/tcp/4991/p2p/16Uiu2HAm8wPsdef7gJT3u7L3p4PwcdmBttFkVt1iKZCVjAegfQRF","/ip4/172.18.200.46/tcp/4992/ws/p2p/16Uiu2HAm8wPsdef7gJT3u7L3p4PwcdmBttFkVt1iKZCVjAegfQRF"],"enrUri":"enr:-L24QCsqIIGc1zlvCvT7TxpHvfyifGDdqZNpWf50yq0FZN4uF7UQxH2snw_pwFhpBUWIevR_0iEZhIrnFiKEk0cbXkkCgmlkgnY0gmlwhKwSyC6KbXVsdGlhZGRyc5YACASsEsguBhN_AAoErBLILgYTgN0DgnJzhQADAQAAiXNlY3AyNTZrMaECyMUkmIyGG11ijbt21-Fn8NCVZyzwNbvZ2glVzIKgPnqDdGNwghN_g3VkcIITgYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-03_03-11-50__82862649-ec10-4686-bebf-9cac1c1ab857__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.18.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59056', '59057', '59058', '59059', '59060']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59056:59056 -p 59057:59057 -p 59058:59058 -p 59059:59059 -p 59060:59060 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=59058 --rest-port=59056 --tcp-port=59057 --discv5-udp-port=59059 --rest-address=0.0.0.0 --nat=extip:172.18.18.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddc9beae0b1a6b0eecbd77c6128855e2d33fdaf0f8dafddba81f353f87e8e3e9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QCsqIIGc1zlvCvT7TxpHvfyifGDdqZNpWf50yq0FZN4uF7UQxH2snw_pwFhpBUWIevR_0iEZhIrnFiKEk0cbXkkCgmlkgnY0gmlwhKwSyC6KbXVsdGlhZGRyc5YACASsEsguBhN_AAoErBLILgYTgN0DgnJzhQADAQAAiXNlY3AyNTZrMaECyMUkmIyGG11ijbt21-Fn8NCVZyzwNbvZ2glVzIKgPnqDdGNwghN_g3VkcIITgYV3YWt1MgM --storenode=/ip4/172.18.200.46/tcp/4991/p2p/16Uiu2HAm8wPsdef7gJT3u7L3p4PwcdmBttFkVt1iKZCVjAegfQRF --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.18.178 waku e6b27acba84dc92a29766dda0a2630c4b54aaed5487c9f111a13a0fea1e1199c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e6b27acba84d. Setting up logs at ./log/docker/store_node1_2025-02-03_03-11-50__82862649-ec10-4686-bebf-9cac1c1ab857__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 59056
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59056/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPavqPUY8ftXo8r7z_4ONUnwCUiFO6JTSofs-oUnQEe-JuiV45lHDp8KWkVqM7krCpdMTvWnoBduO8MezQGQUOqGAZTJywL9gmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDlvALVPv1ZNBg6zgsNL664R54TOfzygeRFlN1AxQauD-DdGNwguaxg3VkcILms4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/59057/p2p/16Uiu2HAmNpBoT2fGj6jQ9Jq1vBA1VJnaqVAL4Ja8AW4dxvjjHVmx","/ip4/127.0.0.1/tcp/59058/ws/p2p/16Uiu2HAmNpBoT2fGj6jQ9Jq1vBA1VJnaqVAL4Ja8AW4dxvjjHVmx","/ip4/172.17.0.3/tcp/59057/p2p/16Uiu2HAmNpBoT2fGj6jQ9Jq1vBA1VJnaqVAL4Ja8AW4dxvjjHVmx","/ip4/172.17.0.3/tcp/59058/ws/p2p/16Uiu2HAmNpBoT2fGj6jQ9Jq1vBA1VJnaqVAL4Ja8AW4dxvjjHVmx"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59056/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.200.46/tcp/4991/p2p/16Uiu2HAm8wPsdef7gJT3u7L3p4PwcdmBttFkVt1iKZCVjAegfQRF", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4990/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59056/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4990/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4990/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xf3cffec10b2e6a7020629a9f5992c72869ecbc00e36c8a3358abf5d85cc56a8f"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59056/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"95324aea285b8dc92804f4565b66533e9ed546ab99375a0a283681f17fb7cb64","status_code":200,"status_desc":"OK","messages":[{"message_hash":"88/+wQsuanAgYpqfWZLHKGnsvADjbIozWKv12FzFao8="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 36e3bb59e08b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e6b27acba84d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-03_03-11-50__82862649-ec10-4686-bebf-9cac1c1ab857__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-03_03-11-50__82862649-ec10-4686-bebf-9cac1c1ab857__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_restarts with id: 2025-02-03_03-11-55__10aca3a4-5a9d-4424-89ad-eb654f4cea30
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-03_03-11-55__10aca3a4-5a9d-4424-89ad-eb654f4cea30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.43.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11428', '11429', '11430', '11431', '11432']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11428:11428 -p 11429:11429 -p 11430:11430 -p 11431:11431 -p 11432:11432 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11430 --rest-port=11428 --tcp-port=11429 --discv5-udp-port=11431 --rest-address=0.0.0.0 --nat=extip:172.18.43.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb2fadc5b79c8fc6704ddd4efeb5b4bd84fe84d7ad8ec16dd3fe8fdc224818c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11432 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 36e3bb59e08b. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.43.189 waku cb1043ec7d88ba9ee1aa19ad1e6e9b7a46e563955a6ff0e59e20bbe446ab0f3a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cb1043ec7d88. Setting up logs at ./log/docker/publishing_node1_2025-02-03_03-11-55__10aca3a4-5a9d-4424-89ad-eb654f4cea30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11428
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e6b27acba84d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11428/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11428/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.189/tcp/11429/p2p/16Uiu2HAmCwEruksm3ynjsbcWNrN6e5euGXqoqgLJRipA38Gys4UR","/ip4/172.18.43.189/tcp/11430/ws/p2p/16Uiu2HAmCwEruksm3ynjsbcWNrN6e5euGXqoqgLJRipA38Gys4UR"],"enrUri":"enr:-L24QA1enDPczeqUtLbUc5BFlv1UKVEZMVundt0IIt_EvXhFLSwo92kiVyaJU0xgVijrbtXzi-iYtisTZ3KcnqMBRMwCgmlkgnY0gmlwhKwSK72KbXVsdGlhZGRyc5YACASsEiu9BiylAAoErBIrvQYspt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBCmzQzz78lg0kT0NuyA7uxo7R34Lm9vEpf2vBAgrLRKDdGNwgiylg3VkcIIsp4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-03_03-11-55__10aca3a4-5a9d-4424-89ad-eb654f4cea30__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.131.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34149', '34150', '34151', '34152', '34153']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34149:34149 -p 34150:34150 -p 34151:34151 -p 34152:34152 -p 34153:34153 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=34151 --rest-port=34149 --tcp-port=34150 --discv5-udp-port=34152 --rest-address=0.0.0.0 --nat=extip:172.18.131.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=58b99a8ae7dfa1ffdb66bd02744215dab3adb47f6e6e5e9275f7828aa6d9e6fb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QA1enDPczeqUtLbUc5BFlv1UKVEZMVundt0IIt_EvXhFLSwo92kiVyaJU0xgVijrbtXzi-iYtisTZ3KcnqMBRMwCgmlkgnY0gmlwhKwSK72KbXVsdGlhZGRyc5YACASsEiu9BiylAAoErBIrvQYspt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBCmzQzz78lg0kT0NuyA7uxo7R34Lm9vEpf2vBAgrLRKDdGNwgiylg3VkcIIsp4V3YWt1MgM --storenode=/ip4/172.18.43.189/tcp/11429/p2p/16Uiu2HAmCwEruksm3ynjsbcWNrN6e5euGXqoqgLJRipA38Gys4UR --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.131.138 waku ba6087c9033f6bcff145f5e6a84431d81699aee28b52d92e4514b6e012996184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ba6087c9033f. Setting up logs at ./log/docker/store_node1_2025-02-03_03-11-55__10aca3a4-5a9d-4424-89ad-eb654f4cea30__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 34149
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34149/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QJLFCyAJaf3ARLcRa3WdNzphJFqg5qLL0yC_Xr6cW9QVU_IrhqfmXLQjTJBURGiQEDzbw_kK3UvA8m8u3ClGBeaGAZTJyxNOgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECcUGLsuZZDjNH27e70KKXBxJLo0sRve6FT2wU55s30ouDdGNwgoVmg3VkcIKFaIV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/34150/p2p/16Uiu2HAm33n23V2t8YA7SfAHQsT8jPPMS71DKtmHEwxuPjkrkzZY","/ip4/127.0.0.1/tcp/34151/ws/p2p/16Uiu2HAm33n23V2t8YA7SfAHQsT8jPPMS71DKtmHEwxuPjkrkzZY","/ip4/172.17.0.3/tcp/34150/p2p/16Uiu2HAm33n23V2t8YA7SfAHQsT8jPPMS71DKtmHEwxuPjkrkzZY","/ip4/172.17.0.3/tcp/34151/ws/p2p/16Uiu2HAm33n23V2t8YA7SfAHQsT8jPPMS71DKtmHEwxuPjkrkzZY"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34149/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.43.189/tcp/11429/p2p/16Uiu2HAmCwEruksm3ynjsbcWNrN6e5euGXqoqgLJRipA38Gys4UR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11428/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34149/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11428/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11428/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x5384907697a87a5fb7df99956d40fb03aac768e2d3bca218df8b75965955ffcf"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34149/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"cde900e38c90ac04423185b46bfa7c8a2acabe5560e47798bce050d25125b303","status_code":200,"status_desc":"OK","messages":[{"message_hash":"U4SQdpeoel+335mVbUD7A6rHaOLTvKIY34t1lllV/88="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cb1043ec7d88
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ba6087c9033f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-03_03-11-55__10aca3a4-5a9d-4424-89ad-eb654f4cea30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-03_03-11-55__10aca3a4-5a9d-4424-89ad-eb654f4cea30__wakuorg_go-waku:latest.log