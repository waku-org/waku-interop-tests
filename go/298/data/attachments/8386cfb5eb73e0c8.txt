[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_peerAddr with id: 2024-10-03_03-27-25__155b77ae-a312-4018-8dbd-0493448b526a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-03_03-27-25__155b77ae-a312-4018-8dbd-0493448b526a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.63.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55858', '55859', '55860', '55861', '55862']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55858:55858 -p 55859:55859 -p 55860:55860 -p 55861:55861 -p 55862:55862 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55860 --rest-port=55858 --tcp-port=55859 --discv5-udp-port=55861 --rest-address=0.0.0.0 --nat=extip:172.18.63.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cfe1c6afea78a1e9e11783a97be8adfef4e4de4cda2bbbc56b17b963a14bea5c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55862 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.219.173
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['43329', '43330', '43331', '43332', '43333']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 43329:43329 -p 43330:43330 -p 43331:43331 -p 43332:43332 -p 43333:43333 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43331 --rest-port=43329 --tcp-port=43330 --discv5-udp-port=43332 --rest-address=0.0.0.0 --nat=extip:172.18.219.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df948ba77cba61cd4d15270a1a73adb0c48ddb7738780d3db3881aeee708ec71 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43333 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.219.173 waku b0273c7e1600218d91478074cbed9a552a274416f96ec91af2d04903a959bc86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b0273c7e1600. Setting up logs at ./log/docker/publishing_node1_2024-10-03_03-27-25__155b77ae-a312-4018-8dbd-0493448b526a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 43329
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43329/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43329/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.173/tcp/43330/p2p/16Uiu2HAkyM7Wch7DQZEFVjBx5KUMm2hbsuejwPsx4f6s1LsLf5KD","/ip4/172.18.219.173/tcp/43331/ws/p2p/16Uiu2HAkyM7Wch7DQZEFVjBx5KUMm2hbsuejwPsx4f6s1LsLf5KD"],"enrUri":"enr:-LO4QO8mKM6lnZbLuj5loPxukG4F7rOaYdjyojifO8ZKIOu_Pg3pcpU_FOfwhcB_oF-GuBZiONx9MQuqyqkP00qm7hcBgmlkgnY0gmlwhKwS262KbXVsdGlhZGRyc4wACgSsEtutBqlD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI6Q7ZOddDC5mvb3rTw32Kb5unc2SkMovQtoANiBfdW0IN0Y3CCqUKDdWRwgqlEhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-03_03-27-25__155b77ae-a312-4018-8dbd-0493448b526a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.15.35
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61326', '61327', '61328', '61329', '61330']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61326:61326 -p 61327:61327 -p 61328:61328 -p 61329:61329 -p 61330:61330 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=61328 --rest-port=61326 --tcp-port=61327 --discv5-udp-port=61329 --rest-address=0.0.0.0 --nat=extip:172.18.15.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdeba5e995e9e6fdeccd425acefa91bddc9568f9a77efc4b9731cbfce0feaac7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QO8mKM6lnZbLuj5loPxukG4F7rOaYdjyojifO8ZKIOu_Pg3pcpU_FOfwhcB_oF-GuBZiONx9MQuqyqkP00qm7hcBgmlkgnY0gmlwhKwS262KbXVsdGlhZGRyc4wACgSsEtutBqlD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI6Q7ZOddDC5mvb3rTw32Kb5unc2SkMovQtoANiBfdW0IN0Y3CCqUKDdWRwgqlEhXdha3UyAw --storenode=/ip4/172.18.219.173/tcp/43330/p2p/16Uiu2HAkyM7Wch7DQZEFVjBx5KUMm2hbsuejwPsx4f6s1LsLf5KD --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.15.35 waku 7e68ee4c0dcd86307b3352cc15667d6defa76dbf43c6476177f9817debab9509
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7e68ee4c0dcd. Setting up logs at ./log/docker/store_node1_2024-10-03_03-27-25__155b77ae-a312-4018-8dbd-0493448b526a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 61326
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61326/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJfz_pdZgmyxktucV4AKvGEwD47rVY1t6idw8U_SP8ubAeWVUSvBLClLX5MVGDPsmNICDRuexUIR3kwn-OStMqCGAZJQaxRbgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQIR5FjLByd3RI2uFKFSdVsJHacusCZc8IjDsfuEpQRBaYN0Y3CC74-DdWRwgu-RhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/61327/p2p/16Uiu2HAkvdWrwvwNN4vRNYfcqZ1qwR9LmaMgDrU78RYdbm4aaAA4","/ip4/127.0.0.1/tcp/61328/ws/p2p/16Uiu2HAkvdWrwvwNN4vRNYfcqZ1qwR9LmaMgDrU78RYdbm4aaAA4","/ip4/172.17.0.7/tcp/61327/p2p/16Uiu2HAkvdWrwvwNN4vRNYfcqZ1qwR9LmaMgDrU78RYdbm4aaAA4","/ip4/172.17.0.7/tcp/61328/ws/p2p/16Uiu2HAkvdWrwvwNN4vRNYfcqZ1qwR9LmaMgDrU78RYdbm4aaAA4"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61326/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.219.173/tcp/43330/p2p/16Uiu2HAkyM7Wch7DQZEFVjBx5KUMm2hbsuejwPsx4f6s1LsLf5KD", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43329/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61326/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43329/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61326/store/v3/messages?peerAddr=%2Fip4%2F172.18.219.173%2Ftcp%2F43330%2Fp2p%2F16Uiu2HAkyM7Wch7DQZEFVjBx5KUMm2hbsuejwPsx4f6s1LsLf5KD&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"d8338479fb17e745ffa1b8cf3f6bfcde004c548732e6181663b21cca94735fe2","status_code":200,"status_desc":"OK","messages":[{"message_hash":"wcD+KtghyDtZK6vdGJy2cUcJ8vS0Rr6lT4lbXMTDcRc="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b0273c7e1600
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7e68ee4c0dcd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.