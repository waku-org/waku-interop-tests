2025-02-12 03:06:04.839 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:06:04.840 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-12_03-06-04__1369a257-239e-4bbb-976b-2e475e5fd086
2025-02-12 03:06:04.840 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:06:04.840 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-12 03:06:04.841 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 03:06:04.841 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 03:06:04.841 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 03:06:04.847 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:06:04.848 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_03-06-04__1369a257-239e-4bbb-976b-2e475e5fd086__wakuorg_nwaku:latest.log
2025-02-12 03:06:04.848 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:04.848 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:04.849 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:04.849 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.243
2025-02-12 03:06:04.850 DEBUG [src.node.docker_mananger] Generated ports ['61464', '61465', '61466', '61467', '61468']
2025-02-12 03:06:04.850 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:04.850 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:04.850 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:04.850 DEBUG [src.node.docker_mananger] docker run -i -t -p 61464:61464 -p 61465:61465 -p 61466:61466 -p 61467:61467 -p 61468:61468 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61466 --rest-port=61464 --tcp-port=61465 --discv5-udp-port=61467 --rest-address=0.0.0.0 --nat=extip:172.18.15.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=270261ba5cdaa1c92e601c5baaccaaab2bb351b191dfe365b8d299ab20bf82ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61468 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 03:06:05.069 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.243 waku cc9f49b45d6f15a0b3cf1c0a680ba22a02958bdee1f098e136c73919b2aad008
2025-02-12 03:06:05.117 DEBUG [src.node.docker_mananger] Container started with ID cc9f49b45d6f. Setting up logs at ./log/docker/node1_2025-02-12_03-06-04__1369a257-239e-4bbb-976b-2e475e5fd086__wakuorg_nwaku:latest.log
2025-02-12 03:06:05.118 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61464
2025-02-12 03:06:05.118 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:05.147 ERROR [src.node.docker_mananger] Max retries reached for container 78a8afbe69c8. Exiting log stream.
2025-02-12 03:06:05.637 ERROR [src.node.docker_mananger] Max retries reached for container 5963c14f0bde. Exiting log stream.
2025-02-12 03:06:06.119 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61464/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:06.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:06:06.122 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:06:06.122 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61464/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:06.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.243/tcp/61465/p2p/16Uiu2HAmC9jx33xe6m7zMGMZKFJBN3VyMM8HscqKg3TTRStTP417","/ip4/172.18.15.243/tcp/61466/ws/p2p/16Uiu2HAmC9jx33xe6m7zMGMZKFJBN3VyMM8HscqKg3TTRStTP417"],"enrUri":"enr:-L24QHPc-WFEzqk1nbcJGgoPzGA5ZIt0lsgAxzhljb9pQRUaXNYsPFhMmz0TsYkZNh9Uy40b21ANdjdG1LTUmHSma0oCgmlkgnY0gmlwhKwSD_OKbXVsdGlhZGRyc5YACASsEg_zBvAZAAoErBIP8wbwGt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-IHflGVm_RFPaVOfO-Pa_9K1m6xzD1LfTQrws8lWn6KDdGNwgvAZg3VkcILwG4V3YWt1Mgk"}'
2025-02-12 03:06:06.124 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:06.130 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:06:06.130 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_03-06-04__1369a257-239e-4bbb-976b-2e475e5fd086__wakuorg_nwaku:latest.log
2025-02-12 03:06:06.130 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:06.130 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:06.131 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:06.131 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.177.248
2025-02-12 03:06:06.131 DEBUG [src.node.docker_mananger] Generated ports ['10813', '10814', '10815', '10816', '10817']
2025-02-12 03:06:06.132 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:06.132 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:06.132 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:06.132 DEBUG [src.node.docker_mananger] docker run -i -t -p 10813:10813 -p 10814:10814 -p 10815:10815 -p 10816:10816 -p 10817:10817 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10815 --rest-port=10813 --tcp-port=10814 --discv5-udp-port=10816 --rest-address=0.0.0.0 --nat=extip:172.18.177.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0cb6ca0bdbdeeaca12f1fcc3fcac9c1376443073f0cf52a21ab0ee90ccc5bee0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10817 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QHPc-WFEzqk1nbcJGgoPzGA5ZIt0lsgAxzhljb9pQRUaXNYsPFhMmz0TsYkZNh9Uy40b21ANdjdG1LTUmHSma0oCgmlkgnY0gmlwhKwSD_OKbXVsdGlhZGRyc5YACASsEg_zBvAZAAoErBIP8wbwGt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-IHflGVm_RFPaVOfO-Pa_9K1m6xzD1LfTQrws8lWn6KDdGNwgvAZg3VkcILwG4V3YWt1Mgk
2025-02-12 03:06:06.363 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.177.248 waku 18e5ab4d09aff27bc36e9d33aa6af8c4c319926f529fe289d11df008c45f1175
2025-02-12 03:06:06.412 DEBUG [src.node.docker_mananger] Container started with ID 18e5ab4d09af. Setting up logs at ./log/docker/node1_2025-02-12_03-06-04__1369a257-239e-4bbb-976b-2e475e5fd086__wakuorg_nwaku:latest.log
2025-02-12 03:06:06.412 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10813
2025-02-12 03:06:06.413 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:07.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10813/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:07.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:06:07.423 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:06:07.423 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10813/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:07.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.248/tcp/10814/p2p/16Uiu2HAm9JTKicM58ZnuKsa74ooWGMYws2W85qkvNeG5vYu6Cqkb","/ip4/172.18.177.248/tcp/10815/ws/p2p/16Uiu2HAm9JTKicM58ZnuKsa74ooWGMYws2W85qkvNeG5vYu6Cqkb"],"enrUri":"enr:-L24QHYR_KV1Mrx17MUTfGd-9b6kwzwj6sU9ueHyNWtsXttqRZbjTens4GCI1Pdz5qzO1p_Q2-dClQadUn4DNMHefEMCgmlkgnY0gmlwhKwSsfiKbXVsdGlhZGRyc5YACASsErH4Bio-AAoErBKx-AYqP90DgnJzhQADAQAAiXNlY3AyNTZrMaECzio9lzQnn0PF_5Q6JCSXRiQKFWH4Rv0SRrTb5VvlSmiDdGNwgio-g3VkcIIqQIV3YWt1MgE"}'
2025-02-12 03:06:07.426 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:07.432 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:06:07.433 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_03-06-04__1369a257-239e-4bbb-976b-2e475e5fd086__wakuorg_go-waku:latest.log
2025-02-12 03:06:07.433 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:07.433 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:07.434 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:07.434 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.201.194
2025-02-12 03:06:07.434 DEBUG [src.node.docker_mananger] Generated ports ['42806', '42807', '42808', '42809', '42810']
2025-02-12 03:06:07.434 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:07.435 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:07.435 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:07.435 DEBUG [src.node.docker_mananger] docker run -i -t -p 42806:42806 -p 42807:42807 -p 42808:42808 -p 42809:42809 -p 42810:42810 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=42808 --rest-port=42806 --tcp-port=42807 --discv5-udp-port=42809 --rest-address=0.0.0.0 --nat=extip:172.18.201.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ace8cdbe3c8bc8ec3bdf8e9a7dade8b13bcf7ce4cea7cf8ef4a291172e9373f9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QHPc-WFEzqk1nbcJGgoPzGA5ZIt0lsgAxzhljb9pQRUaXNYsPFhMmz0TsYkZNh9Uy40b21ANdjdG1LTUmHSma0oCgmlkgnY0gmlwhKwSD_OKbXVsdGlhZGRyc5YACASsEg_zBvAZAAoErBIP8wbwGt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-IHflGVm_RFPaVOfO-Pa_9K1m6xzD1LfTQrws8lWn6KDdGNwgvAZg3VkcILwG4V3YWt1Mgk --lightpushnode=/ip4/172.18.15.243/tcp/61465/p2p/16Uiu2HAmC9jx33xe6m7zMGMZKFJBN3VyMM8HscqKg3TTRStTP417 --pubsub-topic=/waku/2/rs/3/1
2025-02-12 03:06:07.660 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.201.194 waku 54127b6727479b07eb3f9dd2fcf68fd7ff238f667a819d2403f0776edd1abc35
2025-02-12 03:06:07.722 DEBUG [src.node.docker_mananger] Container started with ID 54127b672747. Setting up logs at ./log/docker/node1_2025-02-12_03-06-04__1369a257-239e-4bbb-976b-2e475e5fd086__wakuorg_go-waku:latest.log
2025-02-12 03:06:07.722 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 42806
2025-02-12 03:06:07.722 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:08.724 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42806/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:08.726 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QOp_l-xfTZqkhlcJpP44o5DxvBCaVUCFr_EYbB4Fl-_Pb2GyhE46EFioFL1nl8HfmmdNSTit0BKAKB2s7NvFsjCGAZT4HvvZgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOBCcG2TqmHQDrJYWp49RBmGxjaEpv9CHYM7mo6uvSXqIN0Y3CCpzeDdWRwgqc5hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/42807/p2p/16Uiu2HAmMLhaA9yvK9FzHFw1rk9EPnLs9QTFLbNwW1GmReaSRzij","/ip4/127.0.0.1/tcp/42808/ws/p2p/16Uiu2HAmMLhaA9yvK9FzHFw1rk9EPnLs9QTFLbNwW1GmReaSRzij","/ip4/172.17.0.4/tcp/42807/p2p/16Uiu2HAmMLhaA9yvK9FzHFw1rk9EPnLs9QTFLbNwW1GmReaSRzij","/ip4/172.17.0.4/tcp/42808/ws/p2p/16Uiu2HAmMLhaA9yvK9FzHFw1rk9EPnLs9QTFLbNwW1GmReaSRzij"]}'
2025-02-12 03:06:08.726 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:08.727 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61464/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 03:06:08.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:06:08.731 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10813/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 03:06:08.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:06:08.738 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 03:06:08.739 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42806/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739329568738535936}}'
2025-02-12 03:06:11.973 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:06:11.976 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 03:06:12.076 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 03:06:12.076 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61464/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:12.079 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739329568738535936,"ephemeral":false}]'
2025-02-12 03:06:12.080 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-12 03:06:12.081 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10813/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:12.083 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739329568738535936,"ephemeral":false}]'
2025-02-12 03:06:12.086 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:06:12.087 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:06:12.087 DEBUG [src.node.waku_node] Stopping container with id cc9f49b45d6f
2025-02-12 03:06:12.894 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:12.894 DEBUG [src.node.waku_node] Stopping container with id 18e5ab4d09af
2025-02-12 03:06:13.731 ERROR [src.node.docker_mananger] Max retries reached for container cc9f49b45d6f. Exiting log stream.
2025-02-12 03:06:14.351 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:14.351 DEBUG [src.node.waku_node] Stopping container with id 54127b672747
2025-02-12 03:06:14.823 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:14.825 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:06:14.840 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:06:14.855 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:06:14.857 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
