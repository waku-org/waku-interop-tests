2025-02-12 03:05:41.454 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:05:41.455 DEBUG [tests.conftest] Running test: test_relay with id: 2025-02-12_03-05-41__7e2f2f0e-cfe3-4e4e-8869-8e66e74881a9
2025-02-12 03:05:41.455 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:05:41.455 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-12 03:05:41.456 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 03:05:41.456 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 03:05:41.456 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 03:05:41.466 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:05:41.466 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_03-05-41__7e2f2f0e-cfe3-4e4e-8869-8e66e74881a9__wakuorg_nwaku:latest.log
2025-02-12 03:05:41.467 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:05:41.467 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:05:41.528 DEBUG [src.node.docker_mananger] Network waku created
2025-02-12 03:05:41.528 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.179
2025-02-12 03:05:41.528 DEBUG [src.node.docker_mananger] Generated ports ['47327', '47328', '47329', '47330', '47331']
2025-02-12 03:05:41.528 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:05:41.529 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:05:41.529 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:05:41.529 DEBUG [src.node.docker_mananger] docker run -i -t -p 47327:47327 -p 47328:47328 -p 47329:47329 -p 47330:47330 -p 47331:47331 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47329 --rest-port=47327 --tcp-port=47328 --discv5-udp-port=47330 --rest-address=0.0.0.0 --nat=extip:172.18.109.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=345999a4df4fd014c2e6bcf4ddcecda668d5ae0f9fece08d31e0fdcffbe9acf2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47331 --metrics-logging=true --relay=true
2025-02-12 03:05:43.769 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.179 waku a50ff925d7154d17807995ab25b8d8580737aa1a0676d25a3e529427696103f0
2025-02-12 03:05:43.817 DEBUG [src.node.docker_mananger] Container started with ID a50ff925d715. Setting up logs at ./log/docker/node1_2025-02-12_03-05-41__7e2f2f0e-cfe3-4e4e-8869-8e66e74881a9__wakuorg_nwaku:latest.log
2025-02-12 03:05:43.817 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47327
2025-02-12 03:05:43.818 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:05:44.818 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47327/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:44.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:05:44.821 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:05:44.821 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47327/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:44.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.179/tcp/47328/p2p/16Uiu2HAm4K9Ccsgovr51c3Neee6EHHftNdjNcpRZMTMeFGpRo5uY","/ip4/172.18.109.179/tcp/47329/ws/p2p/16Uiu2HAm4K9Ccsgovr51c3Neee6EHHftNdjNcpRZMTMeFGpRo5uY"],"enrUri":"enr:-L24QOCotzwI5XcNSrI9Snqyfvoo48ig21uZ-TKoZzogKqZzI0ck9AbQXQVQ7Ds8Nd2HIF0P3kKRHYeh3C96gSL6EbgCgmlkgnY0gmlwhKwSbbOKbXVsdGlhZGRyc5YACASsEm2zBrjgAAoErBJtswa44d0DgnJzhQADAQAAiXNlY3AyNTZrMaEChAzlTSxh1iDMZHa1Us0vKmebkEYZLbTVktsMV6yBq0eDdGNwgrjgg3VkcIK44oV3YWt1MgE"}'
2025-02-12 03:05:44.823 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:05:44.829 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:05:44.829 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_03-05-41__7e2f2f0e-cfe3-4e4e-8869-8e66e74881a9__wakuorg_go-waku:latest.log
2025-02-12 03:05:44.830 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:05:44.830 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:05:44.831 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:05:44.831 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.27.189
2025-02-12 03:05:44.831 DEBUG [src.node.docker_mananger] Generated ports ['27027', '27028', '27029', '27030', '27031']
2025-02-12 03:05:44.832 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:05:44.832 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:05:44.832 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:05:44.832 DEBUG [src.node.docker_mananger] docker run -i -t -p 27027:27027 -p 27028:27028 -p 27029:27029 -p 27030:27030 -p 27031:27031 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=27029 --rest-port=27027 --tcp-port=27028 --discv5-udp-port=27030 --rest-address=0.0.0.0 --nat=extip:172.18.27.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=78dbfd3a4109c2eb5c889e776df2eff4fe28bb75d93be2ddf49a7bbccdf83801 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QOCotzwI5XcNSrI9Snqyfvoo48ig21uZ-TKoZzogKqZzI0ck9AbQXQVQ7Ds8Nd2HIF0P3kKRHYeh3C96gSL6EbgCgmlkgnY0gmlwhKwSbbOKbXVsdGlhZGRyc5YACASsEm2zBrjgAAoErBJtswa44d0DgnJzhQADAQAAiXNlY3AyNTZrMaEChAzlTSxh1iDMZHa1Us0vKmebkEYZLbTVktsMV6yBq0eDdGNwgrjgg3VkcIK44oV3YWt1MgE
2025-02-12 03:05:47.640 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.27.189 waku 669dcce4b206be6c6dcfc7ab448583d4b53d896cffbfd6ee3a0e7968ed928c4e
2025-02-12 03:05:47.694 DEBUG [src.node.docker_mananger] Container started with ID 669dcce4b206. Setting up logs at ./log/docker/node1_2025-02-12_03-05-41__7e2f2f0e-cfe3-4e4e-8869-8e66e74881a9__wakuorg_go-waku:latest.log
2025-02-12 03:05:47.694 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 27027
2025-02-12 03:05:47.694 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:05:48.695 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27027/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:48.698 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPGT7K39V66cLxde_4dkSE1L-mPJeGyw7tQBE-dbdmH4HDZN5xcejFifjcj5jdhDYMLTdXJfQ8-jjqoJJvFhnFSGAZT4Hq2ngmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECNUUSeHUF_KubkrwTfWUrmNk8hlxdnXVbErvC8hIY6tSDdGNwgmmUg3VkcIJploV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/27028/p2p/16Uiu2HAky1cg9T9VLLhibv6k6FpHDon5kVaPTnRkvDe4mmFzPtbu","/ip4/127.0.0.1/tcp/27029/ws/p2p/16Uiu2HAky1cg9T9VLLhibv6k6FpHDon5kVaPTnRkvDe4mmFzPtbu","/ip4/172.17.0.3/tcp/27028/p2p/16Uiu2HAky1cg9T9VLLhibv6k6FpHDon5kVaPTnRkvDe4mmFzPtbu","/ip4/172.17.0.3/tcp/27029/ws/p2p/16Uiu2HAky1cg9T9VLLhibv6k6FpHDon5kVaPTnRkvDe4mmFzPtbu"]}'
2025-02-12 03:05:48.698 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:05:48.699 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47327/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 03:05:48.718 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:05:48.718 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27027/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 03:05:48.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:05:48.722 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47327/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:05:48.726 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:05:48.726 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 03:05:48.826 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 03:05:48.826 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47327/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:48.829 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739329548722328576,"ephemeral":false}]'
2025-02-12 03:05:48.831 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-12 03:05:48.831 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:48.833 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:05:49.834 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47327/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:05:49.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:05:49.838 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-12 03:05:49.939 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-12 03:05:49.939 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47327/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:49.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739329549834014976,"ephemeral":false}]'
2025-02-12 03:05:49.943 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-12 03:05:49.943 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27027/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:49.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739329549834014976,"ephemeral":false}]'
2025-02-12 03:05:49.948 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:05:49.949 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:05:49.949 DEBUG [src.node.waku_node] Stopping container with id a50ff925d715
2025-02-12 03:05:50.524 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:05:50.525 DEBUG [src.node.waku_node] Stopping container with id 669dcce4b206
2025-02-12 03:05:50.999 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:05:51.000 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:05:51.005 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:05:51.009 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
