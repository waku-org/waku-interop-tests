2025-02-12 03:07:10.367 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:07:10.368 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-12_03-07-10__c9434540-857a-40c5-9277-fd3511332e83
2025-02-12 03:07:10.368 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:07:10.368 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 03:07:10.374 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:07:10.374 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_03-07-10__c9434540-857a-40c5-9277-fd3511332e83__wakuorg_nwaku:latest.log
2025-02-12 03:07:10.375 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:07:10.375 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:07:10.376 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:07:10.376 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.234
2025-02-12 03:07:10.376 DEBUG [src.node.docker_mananger] Generated ports ['62973', '62974', '62975', '62976', '62977']
2025-02-12 03:07:10.376 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:07:10.376 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:07:10.376 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:07:10.377 DEBUG [src.node.docker_mananger] docker run -i -t -p 62973:62973 -p 62974:62974 -p 62975:62975 -p 62976:62976 -p 62977:62977 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62975 --rest-port=62973 --tcp-port=62974 --discv5-udp-port=62976 --rest-address=0.0.0.0 --nat=extip:172.18.107.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eace3bca5f54f67efceecdb75a53e4deea07c1faf8aaaf500fada84f4dc88afe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62977 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 03:07:10.597 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.234 waku 9d529d544d46c3f7194123a7c8c27165bc2d228d989f40b5bcbff7e8ea059f78
2025-02-12 03:07:10.649 DEBUG [src.node.docker_mananger] Container started with ID 9d529d544d46. Setting up logs at ./log/docker/receiving_node1_2025-02-12_03-07-10__c9434540-857a-40c5-9277-fd3511332e83__wakuorg_nwaku:latest.log
2025-02-12 03:07:10.650 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62973
2025-02-12 03:07:10.651 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:07:10.672 ERROR [src.node.docker_mananger] Max retries reached for container 9fc7e6295f7e. Exiting log stream.
2025-02-12 03:07:11.170 ERROR [src.node.docker_mananger] Max retries reached for container 7c38d3c6afc2. Exiting log stream.
2025-02-12 03:07:11.652 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62973/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:07:11.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:07:11.655 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:07:11.656 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62973/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:07:11.658 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.234/tcp/62974/p2p/16Uiu2HAkyr53vDmsueP9ei5rRZXV4APXMALFVefh1pKjHm2rZLZj","/ip4/172.18.107.234/tcp/62975/ws/p2p/16Uiu2HAkyr53vDmsueP9ei5rRZXV4APXMALFVefh1pKjHm2rZLZj"],"enrUri":"enr:-L24QDuQe2Jaejx60XrT4n2vVRlFWDp4cb6lc1or-bHzINpVGEkVWD9dgK4ytE4ex8MPmV1rgi-KApAInaotlvYXickCgmlkgnY0gmlwhKwSa-qKbXVsdGlhZGRyc5YACASsEmvqBvX-AAoErBJr6gb1_90DgnJzhQADAQAAiXNlY3AyNTZrMaECQa7GEooWKbOHPF0GmzBODqkwsBMfvnvpjIbh6VeVcMaDdGNwgvX-g3VkcIL2AIV3YWt1Mgk"}'
2025-02-12 03:07:11.658 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:07:11.664 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:07:11.664 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-12_03-07-10__c9434540-857a-40c5-9277-fd3511332e83__wakuorg_nwaku:latest.log
2025-02-12 03:07:11.665 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:07:11.665 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:07:11.666 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:07:11.666 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.70.71
2025-02-12 03:07:11.666 DEBUG [src.node.docker_mananger] Generated ports ['34827', '34828', '34829', '34830', '34831']
2025-02-12 03:07:11.666 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:07:11.666 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:07:11.667 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:07:11.667 DEBUG [src.node.docker_mananger] docker run -i -t -p 34827:34827 -p 34828:34828 -p 34829:34829 -p 34830:34830 -p 34831:34831 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34829 --rest-port=34827 --tcp-port=34828 --discv5-udp-port=34830 --rest-address=0.0.0.0 --nat=extip:172.18.70.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffeba549eac8f5cab68f3bf10ed9191e9aa1bae73cd5afa117baec4ce1d72c31 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34831 --metrics-logging=true --lightpush=false --relay=true
2025-02-12 03:07:11.900 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.70.71 waku a50ea5b0efde4565634b63738c7b2964add3a78c11253d01ed3ff45b322b24dd
2025-02-12 03:07:11.950 DEBUG [src.node.docker_mananger] Container started with ID a50ea5b0efde. Setting up logs at ./log/docker/receiving_node2_2025-02-12_03-07-10__c9434540-857a-40c5-9277-fd3511332e83__wakuorg_nwaku:latest.log
2025-02-12 03:07:11.950 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34827
2025-02-12 03:07:11.951 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:07:12.951 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34827/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:07:12.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:07:12.954 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:07:12.954 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34827/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:07:12.956 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.71/tcp/34828/p2p/16Uiu2HAmH91SfH7ph3jABCVuNzFhP1Jv9HuwF7YxAWSZRfeKryQp","/ip4/172.18.70.71/tcp/34829/ws/p2p/16Uiu2HAmH91SfH7ph3jABCVuNzFhP1Jv9HuwF7YxAWSZRfeKryQp"],"enrUri":"enr:-L24QNdPMU0zJ18Ql7XV3qVsMCRU8ukhzJXVzsrvW_aVg84TLFf5MQSDDhS1SJNBOOiZBLMRWuWEqJi8qrdXgF5dINUCgmlkgnY0gmlwhKwSRkeKbXVsdGlhZGRyc5YACASsEkZHBogMAAoErBJGRwaIDd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQpw-6qvK76mM1j9n8jIe5jFJj1htOWidjZPIhEbQsa2DdGNwgogMg3VkcIKIDoV3YWt1MgE"}'
2025-02-12 03:07:12.956 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:07:12.956 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34827/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.234/tcp/62974/p2p/16Uiu2HAkyr53vDmsueP9ei5rRZXV4APXMALFVefh1pKjHm2rZLZj"]'
2025-02-12 03:07:12.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:07:13.004 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:07:13.004 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_03-07-10__c9434540-857a-40c5-9277-fd3511332e83__wakuorg_go-waku:latest.log
2025-02-12 03:07:13.004 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:07:13.004 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:07:13.005 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:07:13.005 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.12.246
2025-02-12 03:07:13.006 DEBUG [src.node.docker_mananger] Generated ports ['56089', '56090', '56091', '56092', '56093']
2025-02-12 03:07:13.006 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:07:13.006 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:07:13.006 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:07:13.006 DEBUG [src.node.docker_mananger] docker run -i -t -p 56089:56089 -p 56090:56090 -p 56091:56091 -p 56092:56092 -p 56093:56093 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=56091 --rest-port=56089 --tcp-port=56090 --discv5-udp-port=56092 --rest-address=0.0.0.0 --nat=extip:172.18.12.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b56dd4b9fbbfeac4ecae6de9afcfc5cbafa2b7aac7ff58d0eeeba7f834bf6d01 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QDuQe2Jaejx60XrT4n2vVRlFWDp4cb6lc1or-bHzINpVGEkVWD9dgK4ytE4ex8MPmV1rgi-KApAInaotlvYXickCgmlkgnY0gmlwhKwSa-qKbXVsdGlhZGRyc5YACASsEmvqBvX-AAoErBJr6gb1_90DgnJzhQADAQAAiXNlY3AyNTZrMaECQa7GEooWKbOHPF0GmzBODqkwsBMfvnvpjIbh6VeVcMaDdGNwgvX-g3VkcIL2AIV3YWt1Mgk --lightpushnode=/ip4/172.18.107.234/tcp/62974/p2p/16Uiu2HAkyr53vDmsueP9ei5rRZXV4APXMALFVefh1pKjHm2rZLZj --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-12 03:07:13.238 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.12.246 waku 8fcbf61c036f172740c59367c23265cd3e11de0a786f15198ab4e053b1af7110
2025-02-12 03:07:13.289 DEBUG [src.node.docker_mananger] Container started with ID 8fcbf61c036f. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_03-07-10__c9434540-857a-40c5-9277-fd3511332e83__wakuorg_go-waku:latest.log
2025-02-12 03:07:13.289 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 56089
2025-02-12 03:07:13.290 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:07:14.291 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56089/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:07:14.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMVJdgZzg6yMnVCYfLa1Z_-40_lcgKiZ-AeuyN-pA9-pB1Ox5SWhJVwItcYoq9cPDUMqTRLgxQJk2XpefEy897OGAZT4H_wEgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNs7VxXvSbpWABRPzBVbZywTAi3kecUp3tW_KGHWsepj4N0Y3CC2xqDdWRwgtschXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/56090/p2p/16Uiu2HAmKzCJeHkorSixDypgtgfwDW75ZZ3TPmabBK7m2chLkPQS","/ip4/127.0.0.1/tcp/56091/ws/p2p/16Uiu2HAmKzCJeHkorSixDypgtgfwDW75ZZ3TPmabBK7m2chLkPQS","/ip4/172.17.0.4/tcp/56090/p2p/16Uiu2HAmKzCJeHkorSixDypgtgfwDW75ZZ3TPmabBK7m2chLkPQS","/ip4/172.17.0.4/tcp/56091/ws/p2p/16Uiu2HAmKzCJeHkorSixDypgtgfwDW75ZZ3TPmabBK7m2chLkPQS"]}'
2025-02-12 03:07:14.294 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:07:14.294 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56089/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.107.234/tcp/62974/p2p/16Uiu2HAkyr53vDmsueP9ei5rRZXV4APXMALFVefh1pKjHm2rZLZj", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:07:14.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:07:14.296 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56089/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.70.71/tcp/34828/p2p/16Uiu2HAmH91SfH7ph3jABCVuNzFhP1Jv9HuwF7YxAWSZRfeKryQp", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:07:14.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:07:14.315 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62973/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:07:14.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:07:14.320 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34827/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:07:14.324 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:07:14.325 DEBUG [src.steps.light_push] Lightpushing message
2025-02-12 03:07:14.326 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56089/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739329634325728512}}'
2025-02-12 03:07:14.330 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56089/lightpush/v1/message. Response content: b'lightpush errornot_published_to_any_peer'
2025-02-12 03:07:14.333 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:07:14.334 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:07:14.334 DEBUG [src.node.waku_node] Stopping container with id 9d529d544d46
2025-02-12 03:07:14.913 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:07:14.915 DEBUG [src.node.waku_node] Stopping container with id a50ea5b0efde
2025-02-12 03:07:15.724 ERROR [src.node.docker_mananger] Max retries reached for container 9d529d544d46. Exiting log stream.
2025-02-12 03:07:16.404 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:07:16.405 DEBUG [src.node.waku_node] Stopping container with id 8fcbf61c036f
2025-02-12 03:07:16.882 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:07:16.883 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:07:16.890 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:07:16.898 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:07:16.901 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
