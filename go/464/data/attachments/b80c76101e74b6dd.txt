2025-02-12 03:06:25.240 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:06:25.240 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-12_03-06-25__6cb5a686-f02f-4a0c-9ea4-dfabbea495cf
2025-02-12 03:06:25.241 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:06:25.241 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-12 03:06:25.241 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 03:06:25.250 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:06:25.250 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_03-06-25__6cb5a686-f02f-4a0c-9ea4-dfabbea495cf__wakuorg_go-waku:latest.log
2025-02-12 03:06:25.255 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:06:25.256 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_03-06-25__6cb5a686-f02f-4a0c-9ea4-dfabbea495cf__wakuorg_nwaku:latest.log
2025-02-12 03:06:25.261 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:06:25.261 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-12_03-06-25__6cb5a686-f02f-4a0c-9ea4-dfabbea495cf__wakuorg_go-waku:latest.log
2025-02-12 03:06:25.261 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 03:06:25.262 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 03:06:25.263 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:25.263 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:25.331 DEBUG [src.node.docker_mananger] Network waku created
2025-02-12 03:06:25.331 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.115.143
2025-02-12 03:06:25.331 DEBUG [src.node.docker_mananger] Generated ports ['44437', '44438', '44439', '44440', '44441']
2025-02-12 03:06:25.331 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:25.332 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:25.332 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:25.332 DEBUG [src.node.docker_mananger] docker run -i -t -p 44437:44437 -p 44438:44438 -p 44439:44439 -p 44440:44440 -p 44441:44441 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44439 --rest-port=44437 --tcp-port=44438 --discv5-udp-port=44440 --rest-address=0.0.0.0 --nat=extip:172.18.115.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1d9a0cba719d2b431cb398fcedf5c3b68a7c1b8bbcb0c9968ab4ff5434eabed2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-12 03:06:28.364 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.115.143 waku 48bcb6de2461ac8a94c81e2751668a876f28caa04a97c4f70028c8f2103df4bc
2025-02-12 03:06:28.430 DEBUG [src.node.docker_mananger] Container started with ID 48bcb6de2461. Setting up logs at ./log/docker/node1_2025-02-12_03-06-25__6cb5a686-f02f-4a0c-9ea4-dfabbea495cf__wakuorg_go-waku:latest.log
2025-02-12 03:06:28.432 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 44437
2025-02-12 03:06:28.432 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:29.433 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44437/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:29.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPQP8lGSUaXh3lsWCfcIVstxQEDtZSqmQ-CFPPCOY0tqZe_7Q7J4EbFl1yCWYz5ERYt4A837ND3qvuAB9PVUy8iGAZT4H0y6gmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECnp5j65IDFzsOiSvM9cviytVX2G68ib9PV8WucKX870ODdGNwgq2Wg3VkcIKtmIV3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/44438/p2p/16Uiu2HAm66rUeNbtib1msjxcUDBMp4newkbmHiArqTA4HjTkc1LE","/ip4/127.0.0.1/tcp/44439/ws/p2p/16Uiu2HAm66rUeNbtib1msjxcUDBMp4newkbmHiArqTA4HjTkc1LE","/ip4/172.17.0.2/tcp/44438/p2p/16Uiu2HAm66rUeNbtib1msjxcUDBMp4newkbmHiArqTA4HjTkc1LE","/ip4/172.17.0.2/tcp/44439/ws/p2p/16Uiu2HAm66rUeNbtib1msjxcUDBMp4newkbmHiArqTA4HjTkc1LE"]}'
2025-02-12 03:06:29.436 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:29.437 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:29.437 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:29.438 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:29.439 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.237
2025-02-12 03:06:29.439 DEBUG [src.node.docker_mananger] Generated ports ['58506', '58507', '58508', '58509', '58510']
2025-02-12 03:06:29.439 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:29.439 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:29.439 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:29.439 DEBUG [src.node.docker_mananger] docker run -i -t -p 58506:58506 -p 58507:58507 -p 58508:58508 -p 58509:58509 -p 58510:58510 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58508 --rest-port=58506 --tcp-port=58507 --discv5-udp-port=58509 --rest-address=0.0.0.0 --nat=extip:172.18.104.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4efb4aa8de3ccf982bc9b588fc6ddf5bfa50ffdf94e5f8cf7ac5ee61d6fce521 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58510 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QPQP8lGSUaXh3lsWCfcIVstxQEDtZSqmQ-CFPPCOY0tqZe_7Q7J4EbFl1yCWYz5ERYt4A837ND3qvuAB9PVUy8iGAZT4H0y6gmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECnp5j65IDFzsOiSvM9cviytVX2G68ib9PV8WucKX870ODdGNwgq2Wg3VkcIKtmIV3YWt1Mgk --lightpushnode=/ip4/172.18.115.143/tcp/44438/p2p/16Uiu2HAm66rUeNbtib1msjxcUDBMp4newkbmHiArqTA4HjTkc1LE
2025-02-12 03:06:31.569 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.237 waku 28ff994fbfe784470d676a780a61fdcf1bbf91157da345c5f33dadbc578c97a0
2025-02-12 03:06:31.622 DEBUG [src.node.docker_mananger] Container started with ID 28ff994fbfe7. Setting up logs at ./log/docker/node2_2025-02-12_03-06-25__6cb5a686-f02f-4a0c-9ea4-dfabbea495cf__wakuorg_nwaku:latest.log
2025-02-12 03:06:31.623 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58506
2025-02-12 03:06:31.623 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:32.623 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58506/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:32.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:06:32.627 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:06:32.627 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58506/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:32.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.237/tcp/58507/p2p/16Uiu2HAmRnqVZw4RLi6FzdANWnBehJBhXAtjVenQykEvW5GoB9Gi","/ip4/172.18.104.237/tcp/58508/ws/p2p/16Uiu2HAmRnqVZw4RLi6FzdANWnBehJBhXAtjVenQykEvW5GoB9Gi"],"enrUri":"enr:-L24QLBYAJLIbssABJ4yo9BPIVzSV7b0JPmuSRB9sYvq7cyhHOrFFzQhMDd5MuNrKS79TNeNZEzY9aRHkC8KEjZpZZYCgmlkgnY0gmlwhKwSaO2KbXVsdGlhZGRyc5YACASsEmjtBuSLAAoErBJo7QbkjN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwyqPw22vvDgMWTOUrgLN7gSfacujjYVWEKC9nkEY-_-DdGNwguSLg3VkcILkjYV3YWt1Mgs"}'
2025-02-12 03:06:32.629 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:32.629 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:32.630 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:32.631 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:32.631 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.175
2025-02-12 03:06:32.631 DEBUG [src.node.docker_mananger] Generated ports ['29238', '29239', '29240', '29241', '29242']
2025-02-12 03:06:32.631 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:32.632 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:32.632 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:32.632 DEBUG [src.node.docker_mananger] docker run -i -t -p 29238:29238 -p 29239:29239 -p 29240:29240 -p 29241:29241 -p 29242:29242 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29240 --rest-port=29238 --tcp-port=29239 --discv5-udp-port=29241 --rest-address=0.0.0.0 --nat=extip:172.18.104.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f55bfab62b2ade0ce01dfeacef6f17dcf92b441e5caae1fcfc856c5cee1e22dc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.104.237/tcp/58507/p2p/16Uiu2HAmRnqVZw4RLi6FzdANWnBehJBhXAtjVenQykEvW5GoB9Gi --discv5-bootstrap-node=enr:-L24QLBYAJLIbssABJ4yo9BPIVzSV7b0JPmuSRB9sYvq7cyhHOrFFzQhMDd5MuNrKS79TNeNZEzY9aRHkC8KEjZpZZYCgmlkgnY0gmlwhKwSaO2KbXVsdGlhZGRyc5YACASsEmjtBuSLAAoErBJo7QbkjN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwyqPw22vvDgMWTOUrgLN7gSfacujjYVWEKC9nkEY-_-DdGNwguSLg3VkcILkjYV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-12 03:06:32.865 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.175 waku ad8cff4ad8aba63bad6f18e02d3db5e55d93e60031de20eda6eaddb82602590c
2025-02-12 03:06:32.922 DEBUG [src.node.docker_mananger] Container started with ID ad8cff4ad8ab. Setting up logs at ./log/docker/node3_2025-02-12_03-06-25__6cb5a686-f02f-4a0c-9ea4-dfabbea495cf__wakuorg_go-waku:latest.log
2025-02-12 03:06:32.923 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 29238
2025-02-12 03:06:32.923 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:33.924 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29238/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:33.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QOtg0peT05X9dNahUo1ls321iSf5LFJWXCSc4_fsjtqyeJ5S4NeQRw8fSNuL0WzrTOq9JQNDkTmVnilPyjJyx12GAZT4H15RgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQKQF8T9tf6tZoNoUPI9ME8P6EsrqzV9EvzhmF78Vc6ELYN0Y3CCcjeDdWRwgnI5hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/29239/p2p/16Uiu2HAm589i9qsba2efgHeVYShwzbxAJFp46hTGnqoRM7REJoWk","/ip4/127.0.0.1/tcp/29240/ws/p2p/16Uiu2HAm589i9qsba2efgHeVYShwzbxAJFp46hTGnqoRM7REJoWk","/ip4/172.17.0.4/tcp/29239/p2p/16Uiu2HAm589i9qsba2efgHeVYShwzbxAJFp46hTGnqoRM7REJoWk","/ip4/172.17.0.4/tcp/29240/ws/p2p/16Uiu2HAm589i9qsba2efgHeVYShwzbxAJFp46hTGnqoRM7REJoWk"]}'
2025-02-12 03:06:33.926 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:33.927 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44437/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 03:06:33.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:06:33.929 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58506/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 03:06:33.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:06:33.933 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44437/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:33.934 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmRnqVZw4RLi6FzdANWnBehJBhXAtjVenQykEvW5GoB9Gi","multiaddrs":["/ip4/172.18.104.237/tcp/58507/p2p/16Uiu2HAmRnqVZw4RLi6FzdANWnBehJBhXAtjVenQykEvW5GoB9Gi","/ip4/172.18.104.237/tcp/58508/ws/p2p/16Uiu2HAmRnqVZw4RLi6FzdANWnBehJBhXAtjVenQykEvW5GoB9Gi"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-12 03:06:33.935 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58506/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:33.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/29239/p2p/16Uiu2HAm589i9qsba2efgHeVYShwzbxAJFp46hTGnqoRM7REJoWk","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-12 03:06:33.937 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-12 03:07:03.938 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44437/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739329623938232320}}'
2025-02-12 03:07:03.946 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:07:03.946 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:07:04.947 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-12 03:07:04.947 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29238/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:07:04.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"829f9ba8f8b951b6f3c33b97c2dc69032e76a4d85b3398799f3bc2bc39ed67b1","status_code":200,"status_desc":"OK","messages":[{"message_hash":"sM8MPPWTd5sJ3XV0Snu7D4QXvznY11ACNk2tmCgri1k="}]}'
2025-02-12 03:07:04.956 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:07:04.957 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:07:04.958 DEBUG [src.node.waku_node] Stopping container with id 48bcb6de2461
2025-02-12 03:07:05.464 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:07:05.464 DEBUG [src.node.waku_node] Stopping container with id 28ff994fbfe7
2025-02-12 03:07:06.278 ERROR [src.node.docker_mananger] Max retries reached for container 48bcb6de2461. Exiting log stream.
2025-02-12 03:07:06.297 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:07:06.297 DEBUG [src.node.waku_node] Stopping container with id ad8cff4ad8ab
2025-02-12 03:07:06.791 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:07:06.792 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:07:06.797 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:07:06.812 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:07:06.816 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
