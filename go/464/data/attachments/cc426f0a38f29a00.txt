2025-02-12 03:06:54.501 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:06:54.501 DEBUG [tests.conftest] Running test: test_publishing_node_paused_and_unpaused with id: 2025-02-12_03-06-54__c87390d6-751e-4637-b694-4653f11b1292
2025-02-12 03:06:54.501 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:06:54.502 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 03:06:54.502 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 03:06:54.508 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:06:54.508 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_03-06-54__c87390d6-751e-4637-b694-4653f11b1292__wakuorg_nwaku:latest.log
2025-02-12 03:06:54.508 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:54.508 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:54.509 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:54.510 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.6.97
2025-02-12 03:06:54.510 DEBUG [src.node.docker_mananger] Generated ports ['30844', '30845', '30846', '30847', '30848']
2025-02-12 03:06:54.510 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:54.510 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:54.510 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:54.510 DEBUG [src.node.docker_mananger] docker run -i -t -p 30844:30844 -p 30845:30845 -p 30846:30846 -p 30847:30847 -p 30848:30848 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30846 --rest-port=30844 --tcp-port=30845 --discv5-udp-port=30847 --rest-address=0.0.0.0 --nat=extip:172.18.6.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5cd18b45ebbbc4a01e4bbadbeeb01b5dcdf9ded6b1ebfcd13ee11f9239addbbd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30848 --metrics-logging=true --store=true --relay=true
2025-02-12 03:06:54.745 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.6.97 waku 125f3e162cf4065943839d09ab47efc1c89c6b1092f999fb4fe8878170f0037c
2025-02-12 03:06:54.794 ERROR [src.node.docker_mananger] Max retries reached for container 43c1340db147. Exiting log stream.
2025-02-12 03:06:54.795 DEBUG [src.node.docker_mananger] Container started with ID 125f3e162cf4. Setting up logs at ./log/docker/publishing_node1_2025-02-12_03-06-54__c87390d6-751e-4637-b694-4653f11b1292__wakuorg_nwaku:latest.log
2025-02-12 03:06:54.796 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30844
2025-02-12 03:06:54.797 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:55.314 ERROR [src.node.docker_mananger] Max retries reached for container a3a67e992105. Exiting log stream.
2025-02-12 03:06:55.798 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30844/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:55.801 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:06:55.801 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:06:55.801 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30844/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:55.804 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.97/tcp/30845/p2p/16Uiu2HAmDdJHHXozf1nNrWsVSnQ3mUfcDXKc55NyGh4G1KzLPmFW","/ip4/172.18.6.97/tcp/30846/ws/p2p/16Uiu2HAmDdJHHXozf1nNrWsVSnQ3mUfcDXKc55NyGh4G1KzLPmFW"],"enrUri":"enr:-L24QMf5UHVv_Xg4C9m9o-ao-4kPMnrXQ2j1X-rNJPJWhbOaYEORTZNp1mnhPMEzN7AZTlO5tZoFTFYknmlNEKk3x1cCgmlkgnY0gmlwhKwSBmGKbXVsdGlhZGRyc5YACASsEgZhBnh9AAoErBIGYQZ4ft0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDmzMxzdFspfLdhWWGfFmtqHeHInivguZab3dfYEzszmDdGNwgnh9g3VkcIJ4f4V3YWt1MgM"}'
2025-02-12 03:06:55.804 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:55.810 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:06:55.810 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_03-06-54__c87390d6-751e-4637-b694-4653f11b1292__wakuorg_go-waku:latest.log
2025-02-12 03:06:55.810 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:55.810 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:55.812 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:55.812 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.170
2025-02-12 03:06:55.812 DEBUG [src.node.docker_mananger] Generated ports ['47394', '47395', '47396', '47397', '47398']
2025-02-12 03:06:55.812 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:55.812 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:55.812 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:55.812 DEBUG [src.node.docker_mananger] docker run -i -t -p 47394:47394 -p 47395:47395 -p 47396:47396 -p 47397:47397 -p 47398:47398 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=47396 --rest-port=47394 --tcp-port=47395 --discv5-udp-port=47397 --rest-address=0.0.0.0 --nat=extip:172.18.210.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddcedf5aeff32e5f6422b59e79ed0c9f08e46ec06edb3d3fab44d0dda38263b3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QMf5UHVv_Xg4C9m9o-ao-4kPMnrXQ2j1X-rNJPJWhbOaYEORTZNp1mnhPMEzN7AZTlO5tZoFTFYknmlNEKk3x1cCgmlkgnY0gmlwhKwSBmGKbXVsdGlhZGRyc5YACASsEgZhBnh9AAoErBIGYQZ4ft0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDmzMxzdFspfLdhWWGfFmtqHeHInivguZab3dfYEzszmDdGNwgnh9g3VkcIJ4f4V3YWt1MgM --storenode=/ip4/172.18.6.97/tcp/30845/p2p/16Uiu2HAmDdJHHXozf1nNrWsVSnQ3mUfcDXKc55NyGh4G1KzLPmFW --store=true --relay=true
2025-02-12 03:06:56.049 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.170 waku 4cb90e14c5273c9e68c2cae356c6e7089e03d701eab3e0df64199dc96a451fb7
2025-02-12 03:06:56.107 DEBUG [src.node.docker_mananger] Container started with ID 4cb90e14c527. Setting up logs at ./log/docker/store_node1_2025-02-12_03-06-54__c87390d6-751e-4637-b694-4653f11b1292__wakuorg_go-waku:latest.log
2025-02-12 03:06:56.109 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 47394
2025-02-12 03:06:56.109 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:57.109 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47394/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:57.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QJCPlrHzvdbmcc_xojoX2WWsPXat-6FWHvWil1XuJF-kZNrrsrcGmcbYXt3DtA5ezLSSHJCpVnqWb6LyXFTn9CGGAZT4H7jmgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECagNpQPUqWPnrBv-EQnGCwBygycGUuepWK8vIZEpMCNODdGNwgrkjg3VkcIK5JYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/47395/p2p/16Uiu2HAm2ZWDJ7UjKw2i18qvK552xFox4UxxDEymUtnMxN4xamia","/ip4/127.0.0.1/tcp/47396/ws/p2p/16Uiu2HAm2ZWDJ7UjKw2i18qvK552xFox4UxxDEymUtnMxN4xamia","/ip4/172.17.0.3/tcp/47395/p2p/16Uiu2HAm2ZWDJ7UjKw2i18qvK552xFox4UxxDEymUtnMxN4xamia","/ip4/172.17.0.3/tcp/47396/ws/p2p/16Uiu2HAm2ZWDJ7UjKw2i18qvK552xFox4UxxDEymUtnMxN4xamia"]}'
2025-02-12 03:06:57.112 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:57.113 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47394/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.6.97/tcp/30845/p2p/16Uiu2HAmDdJHHXozf1nNrWsVSnQ3mUfcDXKc55NyGh4G1KzLPmFW", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:06:57.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:06:57.130 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30844/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:06:57.151 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:06:57.151 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47394/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:06:57.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:06:57.156 DEBUG [src.steps.store] Relaying message
2025-02-12 03:06:57.156 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:06:57.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:06:57.169 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:06:57.369 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-12 03:06:57.370 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30844/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:57.372 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xd4da4111d65d7e32c3381b043b3bff05900b8a623a7a9463a996664969bb8504"}]}'
2025-02-12 03:06:57.373 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-12 03:06:57.373 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47394/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:57.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"fc4a74366a129864309f5dcce10d4c75510f5ce18cc0ddeb17d87981fa42171b","status_code":200,"status_desc":"OK","messages":[{"message_hash":"1NpBEdZdfjLDOBsEOzv/BZALimI6epRjqZZmSWm7hQQ="}]}'
2025-02-12 03:06:57.379 DEBUG [src.node.waku_node] Pausing container with id 125f3e162cf4
2025-02-12 03:06:57.388 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:58.388 DEBUG [src.node.waku_node] Unpause container with id 125f3e162cf4
2025-02-12 03:06:58.398 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30844/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:58.400 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:06:58.400 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:06:58.400 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30844/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:58.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.97/tcp/30845/p2p/16Uiu2HAmDdJHHXozf1nNrWsVSnQ3mUfcDXKc55NyGh4G1KzLPmFW","/ip4/172.18.6.97/tcp/30846/ws/p2p/16Uiu2HAmDdJHHXozf1nNrWsVSnQ3mUfcDXKc55NyGh4G1KzLPmFW"],"enrUri":"enr:-L24QMf5UHVv_Xg4C9m9o-ao-4kPMnrXQ2j1X-rNJPJWhbOaYEORTZNp1mnhPMEzN7AZTlO5tZoFTFYknmlNEKk3x1cCgmlkgnY0gmlwhKwSBmGKbXVsdGlhZGRyc5YACASsEgZhBnh9AAoErBIGYQZ4ft0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDmzMxzdFspfLdhWWGfFmtqHeHInivguZab3dfYEzszmDdGNwgnh9g3VkcIJ4f4V3YWt1MgM"}'
2025-02-12 03:06:58.403 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:58.403 DEBUG [src.steps.store] Relaying message
2025-02-12 03:06:58.403 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:06:58.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:06:58.408 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:06:58.609 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-12 03:06:58.609 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30844/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:58.612 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xd4da4111d65d7e32c3381b043b3bff05900b8a623a7a9463a996664969bb8504"},{"messageHash":"0x21fccaf245bc59a4dc47c654bcdf18f0f4bb8a821f897291209ac9d8b0ba1c50"}]}'
2025-02-12 03:06:58.613 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-12 03:06:58.613 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47394/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:58.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"c594935824c846f7feb784cf3490467dcac12cd3e2dec558cdef1104dc1b59d9","status_code":200,"status_desc":"OK","messages":[{"message_hash":"1NpBEdZdfjLDOBsEOzv/BZALimI6epRjqZZmSWm7hQQ="},{"message_hash":"IfzK8kW8WaTcR8ZUvN8Y8PS7ioIfiXKRIJrJ2LC6HFA="}]}'
2025-02-12 03:06:58.618 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30844/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:58.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xd4da4111d65d7e32c3381b043b3bff05900b8a623a7a9463a996664969bb8504"},{"messageHash":"0x21fccaf245bc59a4dc47c654bcdf18f0f4bb8a821f897291209ac9d8b0ba1c50"}]}'
2025-02-12 03:06:58.621 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47394/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:58.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"582c60569a760529a72570bedfb8d104b4c67bae738123adb046f3bf8d135d62","status_code":200,"status_desc":"OK","messages":[{"message_hash":"1NpBEdZdfjLDOBsEOzv/BZALimI6epRjqZZmSWm7hQQ="},{"message_hash":"IfzK8kW8WaTcR8ZUvN8Y8PS7ioIfiXKRIJrJ2LC6HFA="}]}'
2025-02-12 03:06:58.745 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:06:58.746 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:06:58.746 DEBUG [src.node.waku_node] Stopping container with id 125f3e162cf4
2025-02-12 03:06:59.293 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:59.293 DEBUG [src.node.waku_node] Stopping container with id 4cb90e14c527
2025-02-12 03:06:59.798 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:59.799 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:06:59.807 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:06:59.811 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
