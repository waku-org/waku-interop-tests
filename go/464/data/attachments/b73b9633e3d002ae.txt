2025-02-12 03:05:53.297 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:05:53.297 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-12_03-05-53__14f80e9f-ee0c-4143-80dd-5276196acde4
2025-02-12 03:05:53.298 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:05:53.298 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-12 03:05:53.298 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 03:05:53.315 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:05:53.315 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_03-05-53__14f80e9f-ee0c-4143-80dd-5276196acde4__wakuorg_go-waku:latest.log
2025-02-12 03:05:53.321 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:05:53.321 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_03-05-53__14f80e9f-ee0c-4143-80dd-5276196acde4__wakuorg_nwaku:latest.log
2025-02-12 03:05:53.327 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:05:53.327 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-12_03-05-53__14f80e9f-ee0c-4143-80dd-5276196acde4__wakuorg_go-waku:latest.log
2025-02-12 03:05:53.328 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-12 03:05:53.328 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 03:05:53.329 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:05:53.329 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:05:53.406 DEBUG [src.node.docker_mananger] Network waku created
2025-02-12 03:05:53.407 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.96.66
2025-02-12 03:05:53.407 DEBUG [src.node.docker_mananger] Generated ports ['22562', '22563', '22564', '22565', '22566']
2025-02-12 03:05:53.407 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:05:53.407 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:05:53.407 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:05:53.408 DEBUG [src.node.docker_mananger] docker run -i -t -p 22562:22562 -p 22563:22563 -p 22564:22564 -p 22565:22565 -p 22566:22566 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=22564 --rest-port=22562 --tcp-port=22563 --discv5-udp-port=22565 --rest-address=0.0.0.0 --nat=extip:172.18.96.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aedf4b685cfff05a5b707fa4c60b6f61d8e83acb3fd6473fe6ddcefb347b9fa6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-12 03:05:57.057 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.96.66 waku 9adfbdd4db5e6fcd61a98f190034fe76d74688563500eec83c2edf2920aa317e
2025-02-12 03:05:57.112 DEBUG [src.node.docker_mananger] Container started with ID 9adfbdd4db5e. Setting up logs at ./log/docker/node1_2025-02-12_03-05-53__14f80e9f-ee0c-4143-80dd-5276196acde4__wakuorg_go-waku:latest.log
2025-02-12 03:05:57.113 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 22562
2025-02-12 03:05:57.115 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:05:58.116 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22562/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:58.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QJQIXqWEaGbw1DUFA903QfjkD2O_P6B_lwNWEgqrS7I0d26v9gETju1eN5gIoYzJZBhV-OAkoUVzI3EP1vgDjfCGAZT4HtJxgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDg_j4A30SN995PfRUCuiuNbdx8Fk0aP5fqR3qbzLcL56DdGNwglgjg3VkcIJYJYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/22563/p2p/16Uiu2HAmMY9wxMdSRnT12HtdmHLdLytLNkp4qCyLt2uycaRbko7s","/ip4/127.0.0.1/tcp/22564/ws/p2p/16Uiu2HAmMY9wxMdSRnT12HtdmHLdLytLNkp4qCyLt2uycaRbko7s","/ip4/172.17.0.2/tcp/22563/p2p/16Uiu2HAmMY9wxMdSRnT12HtdmHLdLytLNkp4qCyLt2uycaRbko7s","/ip4/172.17.0.2/tcp/22564/ws/p2p/16Uiu2HAmMY9wxMdSRnT12HtdmHLdLytLNkp4qCyLt2uycaRbko7s"]}'
2025-02-12 03:05:58.119 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:05:58.119 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:05:58.119 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:05:58.121 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:05:58.121 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.168.21
2025-02-12 03:05:58.121 DEBUG [src.node.docker_mananger] Generated ports ['41738', '41739', '41740', '41741', '41742']
2025-02-12 03:05:58.121 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:05:58.122 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:05:58.122 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:05:58.122 DEBUG [src.node.docker_mananger] docker run -i -t -p 41738:41738 -p 41739:41739 -p 41740:41740 -p 41741:41741 -p 41742:41742 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41740 --rest-port=41738 --tcp-port=41739 --discv5-udp-port=41741 --rest-address=0.0.0.0 --nat=extip:172.18.168.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abea493c13131ef9dcbfaa9cd1dff242f678eb42f31a1a44250ea701aaedae02 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41742 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QJQIXqWEaGbw1DUFA903QfjkD2O_P6B_lwNWEgqrS7I0d26v9gETju1eN5gIoYzJZBhV-OAkoUVzI3EP1vgDjfCGAZT4HtJxgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDg_j4A30SN995PfRUCuiuNbdx8Fk0aP5fqR3qbzLcL56DdGNwglgjg3VkcIJYJYV3YWt1MgE
2025-02-12 03:06:00.194 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.168.21 waku 6ac4282a1e9f94ea56b074a4214e66ab65dec38dfb7d8e641f5c7eede4b637a3
2025-02-12 03:06:00.243 DEBUG [src.node.docker_mananger] Container started with ID 6ac4282a1e9f. Setting up logs at ./log/docker/node2_2025-02-12_03-05-53__14f80e9f-ee0c-4143-80dd-5276196acde4__wakuorg_nwaku:latest.log
2025-02-12 03:06:00.243 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41738
2025-02-12 03:06:00.243 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:01.245 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41738/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:01.250 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:06:01.250 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:06:01.250 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41738/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:01.254 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.21/tcp/41739/p2p/16Uiu2HAm9tz9HBGLjgoYqFto29nfF3ULH6S6mHFN7NMCtbKzCjG6","/ip4/172.18.168.21/tcp/41740/ws/p2p/16Uiu2HAm9tz9HBGLjgoYqFto29nfF3ULH6S6mHFN7NMCtbKzCjG6"],"enrUri":"enr:-L24QHoP4teuQyUlQ-OoiLiPUtPbArNeW6zhQdBIXPR3llSwIsFealiYVjXTz5B1VprM4VwKvTJR_LCLAb62gkWy5gMCgmlkgnY0gmlwhKwSqBWKbXVsdGlhZGRyc5YACASsEqgVBqMLAAoErBKoFQajDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC1wLWHxCprrVuxUFXy-nyU8bpm0HWIHck_lI_H-OoK9uDdGNwgqMLg3VkcIKjDYV3YWt1MgM"}'
2025-02-12 03:06:01.255 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:01.255 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:01.255 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:01.257 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:01.258 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.202.166
2025-02-12 03:06:01.259 DEBUG [src.node.docker_mananger] Generated ports ['20853', '20854', '20855', '20856', '20857']
2025-02-12 03:06:01.259 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:01.260 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:01.261 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:01.262 DEBUG [src.node.docker_mananger] docker run -i -t -p 20853:20853 -p 20854:20854 -p 20855:20855 -p 20856:20856 -p 20857:20857 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=20855 --rest-port=20853 --tcp-port=20854 --discv5-udp-port=20856 --rest-address=0.0.0.0 --nat=extip:172.18.202.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1230f01d0853cf861bcf47e2dd2515a08bc4cc0ea1e38ffeaaa7ceabebfaee67 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.168.21/tcp/41739/p2p/16Uiu2HAm9tz9HBGLjgoYqFto29nfF3ULH6S6mHFN7NMCtbKzCjG6 --discv5-bootstrap-node=enr:-L24QHoP4teuQyUlQ-OoiLiPUtPbArNeW6zhQdBIXPR3llSwIsFealiYVjXTz5B1VprM4VwKvTJR_LCLAb62gkWy5gMCgmlkgnY0gmlwhKwSqBWKbXVsdGlhZGRyc5YACASsEqgVBqMLAAoErBKoFQajDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC1wLWHxCprrVuxUFXy-nyU8bpm0HWIHck_lI_H-OoK9uDdGNwgqMLg3VkcIKjDYV3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
2025-02-12 03:06:01.495 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.202.166 waku e443c4727341bf50bd7b695f04b65c946159c7ffd6924fe6b071bd28517d6489
2025-02-12 03:06:01.549 DEBUG [src.node.docker_mananger] Container started with ID e443c4727341. Setting up logs at ./log/docker/node3_2025-02-12_03-05-53__14f80e9f-ee0c-4143-80dd-5276196acde4__wakuorg_go-waku:latest.log
2025-02-12 03:06:01.551 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 20853
2025-02-12 03:06:01.551 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:02.552 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20853/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:02.555 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHDuUZqW340QeBWIg74EA4eXpTPzIR8LIqRmoqGjB5Qfe7m165-VrMevVIV42bAqOoxGLi25x7By6nXs_pFz2RqGAZT4HuPGgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQM8KxdOsaWSefmZd652JQFaZEr5jvzVYUXq2QsD8HLjhYN0Y3CCUXaDdWRwglF4hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/20854/p2p/16Uiu2HAmGhrvTKCWyXwWAxZhfrFumnqPa8M9oSU8cANcHv1rKbjS","/ip4/127.0.0.1/tcp/20855/ws/p2p/16Uiu2HAmGhrvTKCWyXwWAxZhfrFumnqPa8M9oSU8cANcHv1rKbjS","/ip4/172.17.0.4/tcp/20854/p2p/16Uiu2HAmGhrvTKCWyXwWAxZhfrFumnqPa8M9oSU8cANcHv1rKbjS","/ip4/172.17.0.4/tcp/20855/ws/p2p/16Uiu2HAmGhrvTKCWyXwWAxZhfrFumnqPa8M9oSU8cANcHv1rKbjS"]}'
2025-02-12 03:06:02.556 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:02.557 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22562/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 03:06:02.560 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:06:02.562 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41738/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 03:06:02.566 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:06:02.567 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22562/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:02.571 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAm9tz9HBGLjgoYqFto29nfF3ULH6S6mHFN7NMCtbKzCjG6","multiaddrs":["/ip4/172.18.168.21/tcp/41739/p2p/16Uiu2HAm9tz9HBGLjgoYqFto29nfF3ULH6S6mHFN7NMCtbKzCjG6","/ip4/172.18.168.21/tcp/41740/ws/p2p/16Uiu2HAm9tz9HBGLjgoYqFto29nfF3ULH6S6mHFN7NMCtbKzCjG6"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-12 03:06:02.571 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41738/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:02.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/20854/p2p/16Uiu2HAmGhrvTKCWyXwWAxZhfrFumnqPa8M9oSU8cANcHv1rKbjS","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-12 03:06:02.576 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-12 03:06:32.577 DEBUG [src.steps.store] Relaying message
2025-02-12 03:06:32.577 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22562/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:06:32.579 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:06:32.580 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:06:32.781 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-12 03:06:32.781 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20853/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:32.787 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"49a638e6c6cee2dbfd668fbd81b163246b3906bb5fbd0c7c67f1b412180f04f9","status_code":200,"status_desc":"OK","messages":[{"message_hash":"kfo8/k+oQQRb8/TTvqGaPEygCgbe8XClyAjFRY2k0j0="}]}'
2025-02-12 03:06:32.790 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:06:32.791 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:06:32.791 DEBUG [src.node.waku_node] Stopping container with id 9adfbdd4db5e
2025-02-12 03:06:33.330 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:33.331 DEBUG [src.node.waku_node] Stopping container with id 6ac4282a1e9f
2025-02-12 03:06:33.961 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:33.961 DEBUG [src.node.waku_node] Stopping container with id e443c4727341
2025-02-12 03:06:34.146 ERROR [src.node.docker_mananger] Max retries reached for container 9adfbdd4db5e. Exiting log stream.
2025-02-12 03:06:34.477 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:34.479 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:06:34.643 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:06:34.659 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:06:34.669 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
