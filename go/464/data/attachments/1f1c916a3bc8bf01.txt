2025-02-12 03:05:31.480 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:05:31.480 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-12_03-05-31__c8caabd4-184a-4ee2-bc13-d03e726ac2a7
2025-02-12 03:05:31.480 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:05:31.481 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-12 03:05:31.489 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:05:31.489 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-12_03-05-31__c8caabd4-184a-4ee2-bc13-d03e726ac2a7__wakuorg_nwaku:latest.log
2025-02-12 03:05:31.489 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:05:31.489 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:05:31.491 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:05:31.491 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.163.107
2025-02-12 03:05:31.491 DEBUG [src.node.docker_mananger] Generated ports ['37539', '37540', '37541', '37542', '37543']
2025-02-12 03:05:31.491 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:05:31.492 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:05:31.492 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:05:31.492 DEBUG [src.node.docker_mananger] docker run -i -t -p 37539:37539 -p 37540:37540 -p 37541:37541 -p 37542:37542 -p 37543:37543 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37541 --rest-port=37539 --tcp-port=37540 --discv5-udp-port=37542 --rest-address=0.0.0.0 --nat=extip:172.18.163.107 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=39beab61fadf6aeacf49a4d824da9c0ed5cecac011aea130e05cfab1dd6facfa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37543 --metrics-logging=true --lightpush=true --relay=true
2025-02-12 03:05:31.740 ERROR [src.node.docker_mananger] Max retries reached for container f169fa0a47d8. Exiting log stream.
2025-02-12 03:05:31.743 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.163.107 waku 185e73dc7c3b0c60737ec6d3f84f7f4f39947d816c7a337b119f61a3b52ab043
2025-02-12 03:05:31.806 DEBUG [src.node.docker_mananger] Container started with ID 185e73dc7c3b. Setting up logs at ./log/docker/receiving_node1_2025-02-12_03-05-31__c8caabd4-184a-4ee2-bc13-d03e726ac2a7__wakuorg_nwaku:latest.log
2025-02-12 03:05:31.806 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37539
2025-02-12 03:05:31.806 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:05:32.263 ERROR [src.node.docker_mananger] Max retries reached for container 61d79a542abf. Exiting log stream.
2025-02-12 03:05:32.807 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37539/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:32.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:05:32.810 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:05:32.810 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37539/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:32.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.107/tcp/37540/p2p/16Uiu2HAmUD6hE3m9rsTZFvLCCikuRDBqxQrQKnmaUunAaqKviF5b","/ip4/172.18.163.107/tcp/37541/ws/p2p/16Uiu2HAmUD6hE3m9rsTZFvLCCikuRDBqxQrQKnmaUunAaqKviF5b"],"enrUri":"enr:-L24QPweER91vZu3bZ2NH1b6nSaRZKws2vNKjZzJ6NMwMxI9QYeke72oM6g8wzu78uqCo-4WmnysJ8va-JzJtoiDGtcCgmlkgnY0gmlwhKwSo2uKbXVsdGlhZGRyc5YACASsEqNrBpKkAAoErBKjawaSpd0DgnJzhQADAQAAiXNlY3AyNTZrMaED5xkQCjBcd3bLolqXUVVak1PlPv9W8X8_9Qkja7KU_HqDdGNwgpKkg3VkcIKSpoV3YWt1Mgk"}'
2025-02-12 03:05:32.813 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:05:32.820 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:05:32.820 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-12_03-05-31__c8caabd4-184a-4ee2-bc13-d03e726ac2a7__wakuorg_nwaku:latest.log
2025-02-12 03:05:32.820 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:05:32.820 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:05:32.822 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:05:32.822 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.112.188
2025-02-12 03:05:32.822 DEBUG [src.node.docker_mananger] Generated ports ['60040', '60041', '60042', '60043', '60044']
2025-02-12 03:05:32.822 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:05:32.822 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:05:32.822 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:05:32.823 DEBUG [src.node.docker_mananger] docker run -i -t -p 60040:60040 -p 60041:60041 -p 60042:60042 -p 60043:60043 -p 60044:60044 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60042 --rest-port=60040 --tcp-port=60041 --discv5-udp-port=60043 --rest-address=0.0.0.0 --nat=extip:172.18.112.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd919dace18687d0eea0f5742b6ee36e8bb8ad3d1af2e69d802daf27fd4f03da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60044 --metrics-logging=true --lightpush=false --relay=true
2025-02-12 03:05:33.062 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.112.188 waku cfa582edd9a567c90fd84f4bf326dda3ccfc6d5f5bde32966a66d0091948c067
2025-02-12 03:05:33.120 DEBUG [src.node.docker_mananger] Container started with ID cfa582edd9a5. Setting up logs at ./log/docker/receiving_node2_2025-02-12_03-05-31__c8caabd4-184a-4ee2-bc13-d03e726ac2a7__wakuorg_nwaku:latest.log
2025-02-12 03:05:33.121 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60040
2025-02-12 03:05:33.121 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:05:34.122 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60040/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:34.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:05:34.125 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:05:34.125 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60040/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:34.127 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.188/tcp/60041/p2p/16Uiu2HAkudmrT4uZNS8eKUqJMYti48wQbKajNGB8e88Ng6kbLcgH","/ip4/172.18.112.188/tcp/60042/ws/p2p/16Uiu2HAkudmrT4uZNS8eKUqJMYti48wQbKajNGB8e88Ng6kbLcgH"],"enrUri":"enr:-L24QIPsvu8f8cwldeQhvN3i8R2jDl1VwrwU92O9h6lYMiLWDVaLl9WvWDyeR7AlSOQ7_dy1ut7PTBctMUrDjPkraVcCgmlkgnY0gmlwhKwScLyKbXVsdGlhZGRyc5YACASsEnC8BuqJAAoErBJwvAbqit0DgnJzhQADAQAAiXNlY3AyNTZrMaECAxmcW7ZI61ZQWTWwWY7gYo-fmwDEl70HBLm6WsR824qDdGNwguqJg3VkcILqi4V3YWt1MgE"}'
2025-02-12 03:05:34.127 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:05:34.128 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60040/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.163.107/tcp/37540/p2p/16Uiu2HAmUD6hE3m9rsTZFvLCCikuRDBqxQrQKnmaUunAaqKviF5b"]'
2025-02-12 03:05:34.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:05:34.178 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:05:34.179 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-12_03-05-31__c8caabd4-184a-4ee2-bc13-d03e726ac2a7__wakuorg_go-waku:latest.log
2025-02-12 03:05:34.179 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:05:34.179 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:05:34.180 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:05:34.181 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.11.158
2025-02-12 03:05:34.181 DEBUG [src.node.docker_mananger] Generated ports ['33784', '33785', '33786', '33787', '33788']
2025-02-12 03:05:34.181 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:05:34.181 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:05:34.181 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:05:34.181 DEBUG [src.node.docker_mananger] docker run -i -t -p 33784:33784 -p 33785:33785 -p 33786:33786 -p 33787:33787 -p 33788:33788 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33786 --rest-port=33784 --tcp-port=33785 --discv5-udp-port=33787 --rest-address=0.0.0.0 --nat=extip:172.18.11.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=879b60b2eba31ecefae6a9a2dc2b3f9a7acffae446bcb854cfc9bf7cf0e4e09a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QPweER91vZu3bZ2NH1b6nSaRZKws2vNKjZzJ6NMwMxI9QYeke72oM6g8wzu78uqCo-4WmnysJ8va-JzJtoiDGtcCgmlkgnY0gmlwhKwSo2uKbXVsdGlhZGRyc5YACASsEqNrBpKkAAoErBKjawaSpd0DgnJzhQADAQAAiXNlY3AyNTZrMaED5xkQCjBcd3bLolqXUVVak1PlPv9W8X8_9Qkja7KU_HqDdGNwgpKkg3VkcIKSpoV3YWt1Mgk --lightpushnode=/ip4/172.18.163.107/tcp/37540/p2p/16Uiu2HAmUD6hE3m9rsTZFvLCCikuRDBqxQrQKnmaUunAaqKviF5b --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-12 03:05:34.421 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.11.158 waku 052f1b97c46f66b698b4978f6a28e815445a1bc5dc0f2672274abef770e10730
2025-02-12 03:05:34.472 DEBUG [src.node.docker_mananger] Container started with ID 052f1b97c46f. Setting up logs at ./log/docker/lightpush_node1_2025-02-12_03-05-31__c8caabd4-184a-4ee2-bc13-d03e726ac2a7__wakuorg_go-waku:latest.log
2025-02-12 03:05:34.473 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 33784
2025-02-12 03:05:34.473 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:05:35.473 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33784/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:05:35.476 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFjNRzbIEkgsykvEISCnXhKgLdnLHBCX8DO4iivIBIEeOZnVK5E5MlGX_PafWTSEPXiUzz4BWAPBdAc4G_7Pv96GAZT4HnoIgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQLd8ZoJSCxAmMqUJsbYg-GknSYkDYD0FfmHGZOuURyth4N0Y3CCg_mDdWRwgoP7hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/33785/p2p/16Uiu2HAmAN3kjzz7RHFRn3hxeFxU4CgzyNB7coCq4sMYkKo4SHeE","/ip4/127.0.0.1/tcp/33786/ws/p2p/16Uiu2HAmAN3kjzz7RHFRn3hxeFxU4CgzyNB7coCq4sMYkKo4SHeE","/ip4/172.17.0.4/tcp/33785/p2p/16Uiu2HAmAN3kjzz7RHFRn3hxeFxU4CgzyNB7coCq4sMYkKo4SHeE","/ip4/172.17.0.4/tcp/33786/ws/p2p/16Uiu2HAmAN3kjzz7RHFRn3hxeFxU4CgzyNB7coCq4sMYkKo4SHeE"]}'
2025-02-12 03:05:35.476 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:05:35.476 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33784/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.163.107/tcp/37540/p2p/16Uiu2HAmUD6hE3m9rsTZFvLCCikuRDBqxQrQKnmaUunAaqKviF5b", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:05:35.478 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:05:35.478 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33784/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.112.188/tcp/60041/p2p/16Uiu2HAkudmrT4uZNS8eKUqJMYti48wQbKajNGB8e88Ng6kbLcgH", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:05:35.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:05:35.495 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37539/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:05:35.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:05:35.503 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60040/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:05:35.505 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:05:35.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33784/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1739329535506786304}}'
2025-02-12 03:05:35.508 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:33784/lightpush/v1/message. Response content: b'missing Payload field'
2025-02-12 03:05:35.510 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:05:35.511 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:05:35.511 DEBUG [src.node.waku_node] Stopping container with id 185e73dc7c3b
2025-02-12 03:05:36.117 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:05:36.119 DEBUG [src.node.waku_node] Stopping container with id cfa582edd9a5
2025-02-12 03:05:36.950 ERROR [src.node.docker_mananger] Max retries reached for container 185e73dc7c3b. Exiting log stream.
2025-02-12 03:05:37.650 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:05:37.650 DEBUG [src.node.waku_node] Stopping container with id 052f1b97c46f
2025-02-12 03:05:38.155 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:05:38.156 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:05:38.169 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:05:38.177 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:05:38.180 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
