2025-02-12 03:06:50.075 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:06:50.075 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_no_request_id with id: 2025-02-12_03-06-50__b15c2967-90e8-48b3-96ff-d30bb4c1770e
2025-02-12 03:06:50.075 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:06:50.076 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-12 03:06:50.076 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-12 03:06:50.083 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:06:50.083 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-12_03-06-50__b15c2967-90e8-48b3-96ff-d30bb4c1770e__wakuorg_nwaku:latest.log
2025-02-12 03:06:50.083 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:50.083 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:50.085 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:50.085 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.60.144
2025-02-12 03:06:50.085 DEBUG [src.node.docker_mananger] Generated ports ['52024', '52025', '52026', '52027', '52028']
2025-02-12 03:06:50.085 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:50.086 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:50.086 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:50.086 DEBUG [src.node.docker_mananger] docker run -i -t -p 52024:52024 -p 52025:52025 -p 52026:52026 -p 52027:52027 -p 52028:52028 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52026 --rest-port=52024 --tcp-port=52025 --discv5-udp-port=52027 --rest-address=0.0.0.0 --nat=extip:172.18.60.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f5ed0f493854d2faad8cdac8d8c874c4d5dbc1e0dd8b10fb2dc5ff7efd84a1d0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52028 --metrics-logging=true --relay=true --filter=true
2025-02-12 03:06:50.322 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.60.144 waku c297daaa9706c196994cb4b96770fd12764dddf39f8497e00d9a5c7b6513ea04
2025-02-12 03:06:50.332 ERROR [src.node.docker_mananger] Max retries reached for container 6a3de66a0f31. Exiting log stream.
2025-02-12 03:06:50.372 DEBUG [src.node.docker_mananger] Container started with ID c297daaa9706. Setting up logs at ./log/docker/node1_2025-02-12_03-06-50__b15c2967-90e8-48b3-96ff-d30bb4c1770e__wakuorg_nwaku:latest.log
2025-02-12 03:06:50.374 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52024
2025-02-12 03:06:50.374 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:50.873 ERROR [src.node.docker_mananger] Max retries reached for container 07ab3f97038d. Exiting log stream.
2025-02-12 03:06:51.374 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52024/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:51.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:06:51.378 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:06:51.378 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52024/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:51.380 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.144/tcp/52025/p2p/16Uiu2HAmAVYaQp5PbrK9PbmerxnMrwg6C36EqF9uA2Wi5czsqgfU","/ip4/172.18.60.144/tcp/52026/ws/p2p/16Uiu2HAmAVYaQp5PbrK9PbmerxnMrwg6C36EqF9uA2Wi5czsqgfU"],"enrUri":"enr:-L24QJk0lLCPPziDbu0366_xKue_xYqiFK5DF1efq9ihil7MDjQjNroRtAAQt7D_W2idu-Qa9U1Y0597WcLNbxUXEekCgmlkgnY0gmlwhKwSPJCKbXVsdGlhZGRyc5YACASsEjyQBss5AAoErBI8kAbLOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC391Bobb1QKn7_KQCF66EiIuUoX1L5LCG6r2HJmHj-jODdGNwgss5g3VkcILLO4V3YWt1MgU"}'
2025-02-12 03:06:51.380 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:51.381 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-12 03:06:51.387 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:06:51.387 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-12_03-06-50__b15c2967-90e8-48b3-96ff-d30bb4c1770e__wakuorg_go-waku:latest.log
2025-02-12 03:06:51.387 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:06:51.388 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:06:51.389 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:06:51.389 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.241.128
2025-02-12 03:06:51.389 DEBUG [src.node.docker_mananger] Generated ports ['11437', '11438', '11439', '11440', '11441']
2025-02-12 03:06:51.389 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:06:51.390 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:06:51.390 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:06:51.390 DEBUG [src.node.docker_mananger] docker run -i -t -p 11437:11437 -p 11438:11438 -p 11439:11439 -p 11440:11440 -p 11441:11441 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=11439 --rest-port=11437 --tcp-port=11438 --discv5-udp-port=11440 --rest-address=0.0.0.0 --nat=extip:172.18.241.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7aa48de7f4da4d7db3b6780f199e8ab83da1cab3ef55b72aefafd87e4cb0c115 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QJk0lLCPPziDbu0366_xKue_xYqiFK5DF1efq9ihil7MDjQjNroRtAAQt7D_W2idu-Qa9U1Y0597WcLNbxUXEekCgmlkgnY0gmlwhKwSPJCKbXVsdGlhZGRyc5YACASsEjyQBss5AAoErBI8kAbLOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC391Bobb1QKn7_KQCF66EiIuUoX1L5LCG6r2HJmHj-jODdGNwgss5g3VkcILLO4V3YWt1MgU --filternode=/ip4/172.18.60.144/tcp/52025/p2p/16Uiu2HAmAVYaQp5PbrK9PbmerxnMrwg6C36EqF9uA2Wi5czsqgfU --pubsub-topic=/waku/2/rs/3/1
2025-02-12 03:06:51.622 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.241.128 waku 658ca6f7bdc3b75484b0f5dc494b4b8b991fe77a6a482a2e2deff083c21b7186
2025-02-12 03:06:51.668 DEBUG [src.node.docker_mananger] Container started with ID 658ca6f7bdc3. Setting up logs at ./log/docker/node2_2025-02-12_03-06-50__b15c2967-90e8-48b3-96ff-d30bb4c1770e__wakuorg_go-waku:latest.log
2025-02-12 03:06:51.669 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 11437
2025-02-12 03:06:51.669 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:06:52.669 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11437/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:06:52.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QGNaUO0WcIp0t8dL05lbTRGPzYlay0NhaeAhqjFoGAo4aPK9xAohE1IJHYyrfdhp5J6sti6Peg0bcd7DlKzsqeKGAZT4H6eZgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQPY1WaYdBrquD9AF-40F7-wfRw_XTVjU7AlL2PZgpBMMIN0Y3CCLK6DdWRwgiywhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/11438/p2p/16Uiu2HAmTFR9Rc4MDvTo3ykyucGnBuz4bK1gShfN5RtS4WoQUGko","/ip4/127.0.0.1/tcp/11439/ws/p2p/16Uiu2HAmTFR9Rc4MDvTo3ykyucGnBuz4bK1gShfN5RtS4WoQUGko","/ip4/172.17.0.3/tcp/11438/p2p/16Uiu2HAmTFR9Rc4MDvTo3ykyucGnBuz4bK1gShfN5RtS4WoQUGko","/ip4/172.17.0.3/tcp/11439/ws/p2p/16Uiu2HAmTFR9Rc4MDvTo3ykyucGnBuz4bK1gShfN5RtS4WoQUGko"]}'
2025-02-12 03:06:52.672 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:06:52.673 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11437/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.60.144/tcp/52025/p2p/16Uiu2HAmAVYaQp5PbrK9PbmerxnMrwg6C36EqF9uA2Wi5czsqgfU", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:06:52.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:06:52.675 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-12 03:06:52.675 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52024/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-12 03:06:52.678 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:06:52.679 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11437/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "08554380-9f3f-4751-953b-da0222212677", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-12 03:06:52.683 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"08554380-9f3f-4751-953b-da0222212677","statusDesc":"OK"}'
2025-02-12 03:06:52.686 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11437/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-12 03:06:52.690 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11437/filter/v2/subscriptions. Response content: b'{"requestId":"","statusDesc":"subscription failed"}'
2025-02-12 03:06:52.692 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:06:52.693 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:06:52.693 DEBUG [src.node.waku_node] Stopping container with id c297daaa9706
2025-02-12 03:06:53.312 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:53.314 DEBUG [src.node.waku_node] Stopping container with id 658ca6f7bdc3
2025-02-12 03:06:54.125 ERROR [src.node.docker_mananger] Max retries reached for container c297daaa9706. Exiting log stream.
2025-02-12 03:06:54.163 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:06:54.164 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:06:54.168 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:06:54.172 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
