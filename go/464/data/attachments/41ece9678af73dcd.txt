2025-02-12 03:08:40.145 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:08:40.146 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_content_topic with id: 2025-02-12_03-08-40__ac67c064-8cab-4795-b0af-b4c13b229fea
2025-02-12 03:08:40.147 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:08:40.148 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 03:08:40.149 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-12 03:08:40.158 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:08:40.158 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_03-08-40__ac67c064-8cab-4795-b0af-b4c13b229fea__wakuorg_nwaku:latest.log
2025-02-12 03:08:40.158 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:08:40.158 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:08:40.160 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:08:40.160 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.140
2025-02-12 03:08:40.160 DEBUG [src.node.docker_mananger] Generated ports ['52456', '52457', '52458', '52459', '52460']
2025-02-12 03:08:40.160 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:08:40.160 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:08:40.160 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:08:40.161 DEBUG [src.node.docker_mananger] docker run -i -t -p 52456:52456 -p 52457:52457 -p 52458:52458 -p 52459:52459 -p 52460:52460 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52458 --rest-port=52456 --tcp-port=52457 --discv5-udp-port=52459 --rest-address=0.0.0.0 --nat=extip:172.18.64.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=52bce3044abc05baba9869c9c654d561cdbbedf473ced74619e091fded506fd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52460 --metrics-logging=true --store=true --relay=true
2025-02-12 03:08:40.400 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.140 waku 0f306240e048a1ac379869059260afe43a933049fe04bb1373ac07650cca5031
2025-02-12 03:08:40.437 ERROR [src.node.docker_mananger] Max retries reached for container bd560bc1bde6. Exiting log stream.
2025-02-12 03:08:40.455 DEBUG [src.node.docker_mananger] Container started with ID 0f306240e048. Setting up logs at ./log/docker/publishing_node1_2025-02-12_03-08-40__ac67c064-8cab-4795-b0af-b4c13b229fea__wakuorg_nwaku:latest.log
2025-02-12 03:08:40.457 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52456
2025-02-12 03:08:40.457 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:08:40.965 ERROR [src.node.docker_mananger] Max retries reached for container 329c22005f7e. Exiting log stream.
2025-02-12 03:08:41.458 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52456/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:08:41.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:08:41.461 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:08:41.461 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52456/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:08:41.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.140/tcp/52457/p2p/16Uiu2HAm4FNVhjUSaRjWo4PsK1dwKnY6ojTJuLiewvgCiNdc9Yfb","/ip4/172.18.64.140/tcp/52458/ws/p2p/16Uiu2HAm4FNVhjUSaRjWo4PsK1dwKnY6ojTJuLiewvgCiNdc9Yfb"],"enrUri":"enr:-L24QKYNTb5c_TmttktDy7To-DXCYRqXQohkMiDSjBzfkuGYZRIXXZElk4VHs-HfiMLJT3ICk8dsMPErV6A-Yx5hpPMCgmlkgnY0gmlwhKwSQIyKbXVsdGlhZGRyc5YACASsEkCMBszpAAoErBJAjAbM6t0DgnJzhQADAQAAiXNlY3AyNTZrMaECgxWay1vNu5K7DDbgcaLW_SdTU7lynSBut7Vrmhzhq8qDdGNwgszpg3VkcILM64V3YWt1MgM"}'
2025-02-12 03:08:41.464 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:08:41.471 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:08:41.471 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_03-08-40__ac67c064-8cab-4795-b0af-b4c13b229fea__wakuorg_go-waku:latest.log
2025-02-12 03:08:41.471 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:08:41.471 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:08:41.473 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:08:41.473 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.203.134
2025-02-12 03:08:41.473 DEBUG [src.node.docker_mananger] Generated ports ['63380', '63381', '63382', '63383', '63384']
2025-02-12 03:08:41.473 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:08:41.473 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:08:41.473 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:08:41.473 DEBUG [src.node.docker_mananger] docker run -i -t -p 63380:63380 -p 63381:63381 -p 63382:63382 -p 63383:63383 -p 63384:63384 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=63382 --rest-port=63380 --tcp-port=63381 --discv5-udp-port=63383 --rest-address=0.0.0.0 --nat=extip:172.18.203.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ae38a1c8a8e9b9eadd30b31e1a98bdbb91b01e44c28b8efd2fa1ef6166f7a1f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QKYNTb5c_TmttktDy7To-DXCYRqXQohkMiDSjBzfkuGYZRIXXZElk4VHs-HfiMLJT3ICk8dsMPErV6A-Yx5hpPMCgmlkgnY0gmlwhKwSQIyKbXVsdGlhZGRyc5YACASsEkCMBszpAAoErBJAjAbM6t0DgnJzhQADAQAAiXNlY3AyNTZrMaECgxWay1vNu5K7DDbgcaLW_SdTU7lynSBut7Vrmhzhq8qDdGNwgszpg3VkcILM64V3YWt1MgM --storenode=/ip4/172.18.64.140/tcp/52457/p2p/16Uiu2HAm4FNVhjUSaRjWo4PsK1dwKnY6ojTJuLiewvgCiNdc9Yfb --store=true --relay=true
2025-02-12 03:08:41.713 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.203.134 waku 1bf04b22bb868401179e0a1c158070f4eca497729357d6a39f15a11a17383ebc
2025-02-12 03:08:41.773 DEBUG [src.node.docker_mananger] Container started with ID 1bf04b22bb86. Setting up logs at ./log/docker/store_node1_2025-02-12_03-08-40__ac67c064-8cab-4795-b0af-b4c13b229fea__wakuorg_go-waku:latest.log
2025-02-12 03:08:41.774 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 63380
2025-02-12 03:08:41.774 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:08:42.776 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63380/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:08:42.778 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QAezRmQ30kerHdhSlPh3r51bSl4SP9vhiOkW8WKtk27OFUs3PQYIifhZTmWHLpY9G43tFlEiaBTlTBKhR1zyiRmGAZT4IVWrgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECXG2GmabXhSKmg_jhCpG6dQbRhzueDH3K0Sty0GTEgciDdGNwgveVg3VkcIL3l4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/63381/p2p/16Uiu2HAm1eUMSvtMLRXSpprNb3SCoHEiUn6d8ZpTtM7jPQTVAEX1","/ip4/127.0.0.1/tcp/63382/ws/p2p/16Uiu2HAm1eUMSvtMLRXSpprNb3SCoHEiUn6d8ZpTtM7jPQTVAEX1","/ip4/172.17.0.3/tcp/63381/p2p/16Uiu2HAm1eUMSvtMLRXSpprNb3SCoHEiUn6d8ZpTtM7jPQTVAEX1","/ip4/172.17.0.3/tcp/63382/ws/p2p/16Uiu2HAm1eUMSvtMLRXSpprNb3SCoHEiUn6d8ZpTtM7jPQTVAEX1"]}'
2025-02-12 03:08:42.779 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:08:42.780 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63380/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.64.140/tcp/52457/p2p/16Uiu2HAm4FNVhjUSaRjWo4PsK1dwKnY6ojTJuLiewvgCiNdc9Yfb", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:08:42.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:08:42.799 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52456/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:08:42.823 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:08:42.824 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63380/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:08:42.826 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:08:42.828 DEBUG [src.steps.store] Relaying message
2025-02-12 03:08:42.830 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:08:42.843 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:08:42.844 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:08:43.046 DEBUG [src.steps.store] Relaying message
2025-02-12 03:08:43.046 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:08:43.054 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:08:43.055 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:08:43.256 DEBUG [src.steps.store] Relaying message
2025-02-12 03:08:43.256 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:08:43.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:08:43.263 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:08:43.463 DEBUG [src.steps.store] Relaying message
2025-02-12 03:08:43.464 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:08:43.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:08:43.470 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:08:43.671 DEBUG [src.steps.store] Relaying message
2025-02-12 03:08:43.671 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:08:43.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:08:43.677 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:08:43.878 DEBUG [src.steps.store] Relaying message
2025-02-12 03:08:43.878 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:08:43.884 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:08:43.884 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:08:44.085 DEBUG [src.steps.store] Relaying message
2025-02-12 03:08:44.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:08:44.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:08:44.091 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:08:44.292 DEBUG [src.steps.store] Relaying message
2025-02-12 03:08:44.292 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:08:44.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:08:44.298 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:08:44.500 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =myapp/1/latest/proto
2025-02-12 03:08:44.500 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52456/store/v3/messages?includeData=true&contentTopics=myapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:08:44.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-12 03:08:44.503 DEBUG [tests.store.test_topics]  response for wrong url content topic is {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-12 03:08:44.506 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:08:44.508 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:08:44.508 DEBUG [src.node.waku_node] Stopping container with id 0f306240e048
2025-02-12 03:08:45.981 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:08:45.982 DEBUG [src.node.waku_node] Stopping container with id 1bf04b22bb86
2025-02-12 03:08:46.477 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:08:46.478 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:08:46.487 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:08:46.491 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
