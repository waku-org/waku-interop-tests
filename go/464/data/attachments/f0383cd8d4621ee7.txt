2025-02-12 03:09:36.229 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-12 03:09:36.230 DEBUG [tests.conftest] Running test: test_on_postgress_db_with_one_message with id: 2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18
2025-02-12 03:09:36.230 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-12 03:09:36.231 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-12 03:09:36.523 ERROR [src.node.docker_mananger] Max retries reached for container 480cb5852d7f. Exiting log stream.
2025-02-12 03:09:37.046 ERROR [src.node.docker_mananger] Max retries reached for container 51bdaf84774a. Exiting log stream.
2025-02-12 03:09:39.716 DEBUG [src.postgres_setup] Postgres container started
2025-02-12 03:09:39.723 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:09:39.723 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_nwaku:latest.log
2025-02-12 03:09:39.724 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:09:39.724 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:09:39.725 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:09:39.726 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.4.225
2025-02-12 03:09:39.726 DEBUG [src.node.docker_mananger] Generated ports ['42904', '42905', '42906', '42907', '42908']
2025-02-12 03:09:39.726 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:09:39.726 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:09:39.726 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:09:39.726 DEBUG [src.node.docker_mananger] docker run -i -t -p 42904:42904 -p 42905:42905 -p 42906:42906 -p 42907:42907 -p 42908:42908 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42906 --rest-port=42904 --tcp-port=42905 --discv5-udp-port=42907 --rest-address=0.0.0.0 --nat=extip:172.18.4.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbd865ddf93b9c74c7f541ea8b8a3042e9de12c790beb57d4a082b33b8bd4afc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42908 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-12 03:09:40.027 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.4.225 waku 2802932f5eea4d507134a0cb01f2b6f97c3c2eb842456067d4dbc68e0bee7d2a
2025-02-12 03:09:40.092 DEBUG [src.node.docker_mananger] Container started with ID 2802932f5eea. Setting up logs at ./log/docker/publishing_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_nwaku:latest.log
2025-02-12 03:09:40.093 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42904
2025-02-12 03:09:40.093 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:09:41.093 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42904/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:01.115 ERROR [src.node.waku_node] REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=42904): Read timed out. (read timeout=20)
2025-02-12 03:10:01.215 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:10:01.216 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:10:01.217 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:10:01.217 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.250.93
2025-02-12 03:10:01.218 DEBUG [src.node.docker_mananger] Generated ports ['20218', '20219', '20220', '20221', '20222']
2025-02-12 03:10:01.218 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:10:01.218 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:10:01.218 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:10:01.218 DEBUG [src.node.docker_mananger] docker run -i -t -p 20218:20218 -p 20219:20219 -p 20220:20220 -p 20221:20221 -p 20222:20222 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20220 --rest-port=20218 --tcp-port=20219 --discv5-udp-port=20221 --rest-address=0.0.0.0 --nat=extip:172.18.250.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=97a991b819415de7df1b2abfbeae8f064435b62bfa8ff90a11a858bec6d830c5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20222 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-12 03:10:01.455 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.250.93 waku ecfe9c36b771cfeba80cc91927ae3277bcba566356e5724912fa6a80ae22c8bb
2025-02-12 03:10:01.506 DEBUG [src.node.docker_mananger] Container started with ID ecfe9c36b771. Setting up logs at ./log/docker/publishing_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_nwaku:latest.log
2025-02-12 03:10:01.506 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20218
2025-02-12 03:10:01.506 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:10:02.507 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20218/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:22.529 ERROR [src.node.waku_node] REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=20218): Read timed out. (read timeout=20)
2025-02-12 03:10:22.630 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:10:22.630 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:10:22.631 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:10:22.632 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.140.167
2025-02-12 03:10:22.632 DEBUG [src.node.docker_mananger] Generated ports ['34988', '34989', '34990', '34991', '34992']
2025-02-12 03:10:22.632 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:10:22.632 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:10:22.632 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:10:22.632 DEBUG [src.node.docker_mananger] docker run -i -t -p 34988:34988 -p 34989:34989 -p 34990:34990 -p 34991:34991 -p 34992:34992 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34990 --rest-port=34988 --tcp-port=34989 --discv5-udp-port=34991 --rest-address=0.0.0.0 --nat=extip:172.18.140.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3fc2a589af5984320fd7fd8e0bbc3ebf647dfdfcd458f3fc76628d432974fdc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34992 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-12 03:10:22.881 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.140.167 waku 0ca1b1f1a10f0b5c704417f2067a53e187bd6b4a660d97602938df59fb9c4b02
2025-02-12 03:10:22.926 DEBUG [src.node.docker_mananger] Container started with ID 0ca1b1f1a10f. Setting up logs at ./log/docker/publishing_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_nwaku:latest.log
2025-02-12 03:10:22.928 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34988
2025-02-12 03:10:22.928 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:10:23.928 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34988/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:23.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:10:23.932 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:10:23.932 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34988/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:23.934 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.167/tcp/34989/p2p/16Uiu2HAm4VYyRAZYpNTRdVzJNcmMtY4qsxrFz7bpkdRPNRcYLcwc","/ip4/172.18.140.167/tcp/34990/ws/p2p/16Uiu2HAm4VYyRAZYpNTRdVzJNcmMtY4qsxrFz7bpkdRPNRcYLcwc"],"enrUri":"enr:-L24QD_awOsDuye1rmZPekyd9jCQkLXW--72GCAAXrBC3DR8RxcYL4k3xqzrBm-H9cJWTpILUr9f8IJGbW0cT3TgiTICgmlkgnY0gmlwhKwSjKeKbXVsdGlhZGRyc5YACASsEoynBoitAAoErBKMpwaIrt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChreVVEFmfhzqOquuhl_imUys0ZoQ_0o4Hc31QHrAg5ODdGNwgoitg3VkcIKIr4V3YWt1MgM"}'
2025-02-12 03:10:23.934 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:10:23.941 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:10:23.941 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_go-waku:latest.log
2025-02-12 03:10:23.941 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:10:23.941 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:10:23.943 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:10:23.943 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.232.227
2025-02-12 03:10:23.943 DEBUG [src.node.docker_mananger] Generated ports ['28811', '28812', '28813', '28814', '28815']
2025-02-12 03:10:23.943 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:10:23.943 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:10:23.943 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:10:23.943 DEBUG [src.node.docker_mananger] docker run -i -t -p 28811:28811 -p 28812:28812 -p 28813:28813 -p 28814:28814 -p 28815:28815 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=28813 --rest-port=28811 --tcp-port=28812 --discv5-udp-port=28814 --rest-address=0.0.0.0 --nat=extip:172.18.232.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4baa9ff3ce69ddadbbbdd5df1e1e2bff20a30abac28fadf7d3c3be4faf6e0d28 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QD_awOsDuye1rmZPekyd9jCQkLXW--72GCAAXrBC3DR8RxcYL4k3xqzrBm-H9cJWTpILUr9f8IJGbW0cT3TgiTICgmlkgnY0gmlwhKwSjKeKbXVsdGlhZGRyc5YACASsEoynBoitAAoErBKMpwaIrt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChreVVEFmfhzqOquuhl_imUys0ZoQ_0o4Hc31QHrAg5ODdGNwgoitg3VkcIKIr4V3YWt1MgM --storenode=/ip4/172.18.140.167/tcp/34989/p2p/16Uiu2HAm4VYyRAZYpNTRdVzJNcmMtY4qsxrFz7bpkdRPNRcYLcwc --store=false --relay=true
2025-02-12 03:10:24.181 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.232.227 waku c2645066f1c61ddc6416ac98daea50e94bded2409d37b49887424b9998ac6db6
2025-02-12 03:10:24.247 DEBUG [src.node.docker_mananger] Container started with ID c2645066f1c6. Setting up logs at ./log/docker/store_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_go-waku:latest.log
2025-02-12 03:10:24.247 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 28811
2025-02-12 03:10:24.249 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:10:25.249 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28811/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:25.252 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QIHRc55AyovhyEsShHLk49gVQW9PSG0fP7Is4668fT40c5sf-xUmfE1MvJuVNPZ1uZ-Hetv3qk05CYv2oJKV6ReGAZT4IuXigmlkgnY0gmlwhKwRAAWCcnODAAMAiXNlY3AyNTZrMaEC1gqwe0Avjxk1ldWvm-OuF-5xoRfLoYCeZKMXS8ftvyODdGNwgnCMg3VkcIJwjoV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/28812/p2p/16Uiu2HAm9qCgTMWz6mUu2PFAEPxyKos7WT1jYb15HPCSgKVkRJHp","/ip4/127.0.0.1/tcp/28813/ws/p2p/16Uiu2HAm9qCgTMWz6mUu2PFAEPxyKos7WT1jYb15HPCSgKVkRJHp","/ip4/172.17.0.5/tcp/28812/p2p/16Uiu2HAm9qCgTMWz6mUu2PFAEPxyKos7WT1jYb15HPCSgKVkRJHp","/ip4/172.17.0.5/tcp/28813/ws/p2p/16Uiu2HAm9qCgTMWz6mUu2PFAEPxyKos7WT1jYb15HPCSgKVkRJHp"]}'
2025-02-12 03:10:25.252 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:10:25.253 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28811/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.140.167/tcp/34989/p2p/16Uiu2HAm4VYyRAZYpNTRdVzJNcmMtY4qsxrFz7bpkdRPNRcYLcwc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:10:25.269 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:10:25.271 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34988/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:10:25.277 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:10:25.278 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28811/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:10:25.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:10:25.282 DEBUG [src.steps.store] Relaying message
2025-02-12 03:10:25.283 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34988/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:10:25.310 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:10:25.310 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:10:25.511 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-12 03:10:25.511 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34988/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:25.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x445afba77e3705da55fdbb808fa7b0bacf074838e1479f4b34a42139a373875f"}]}'
2025-02-12 03:10:25.517 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-12 03:10:25.517 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28811/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:25.522 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"92df377abc9d8de3c89a399ec0f63d318893fd9ffcf5e375118e64687bd8b46b","status_code":200,"status_desc":"OK","messages":[{"message_hash":"RFr7p343BdpV/buAj6ewus8HSDjhR59LNKQhOaNzh18="}]}'
2025-02-12 03:10:25.530 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-12 03:10:25.530 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_nwaku:latest.log
2025-02-12 03:10:25.530 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:10:25.531 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:10:25.532 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:10:25.532 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.40.228
2025-02-12 03:10:25.532 DEBUG [src.node.docker_mananger] Generated ports ['51132', '51133', '51134', '51135', '51136']
2025-02-12 03:10:25.532 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:10:25.533 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:10:25.533 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:10:25.533 DEBUG [src.node.docker_mananger] docker run -i -t -p 51132:51132 -p 51133:51133 -p 51134:51134 -p 51135:51135 -p 51136:51136 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51134 --rest-port=51132 --tcp-port=51133 --discv5-udp-port=51135 --rest-address=0.0.0.0 --nat=extip:172.18.40.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=67beaf8a3108c380b7f6dcdb558afaaafb7b4bbc9f97477ab2ae8bf0bf836659 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51136 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-12 03:10:25.766 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.40.228 waku 0fa1756210a776fff2e705e18c3539c9afe8520812fe41e03a1fa973d48e1b1e
2025-02-12 03:10:25.815 DEBUG [src.node.docker_mananger] Container started with ID 0fa1756210a7. Setting up logs at ./log/docker/publishing_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_nwaku:latest.log
2025-02-12 03:10:25.815 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51132
2025-02-12 03:10:25.815 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:10:26.816 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51132/health" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:26.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-12 03:10:26.819 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-12 03:10:26.819 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51132/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:26.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.228/tcp/51133/p2p/16Uiu2HAmAH4rF5MwNzCktWFNegoN1wuAYsR6mEWcUxJwSkj43cjf","/ip4/172.18.40.228/tcp/51134/ws/p2p/16Uiu2HAmAH4rF5MwNzCktWFNegoN1wuAYsR6mEWcUxJwSkj43cjf"],"enrUri":"enr:-L24QAaFSpV4ol0E0qIl5e2LOWfNFpUzHWVIVKnN1Z3KFIdgNIrA_9luEXEAdbBap5OAfDsyBka5n2ZxYKo11WwYavYCgmlkgnY0gmlwhKwSKOSKbXVsdGlhZGRyc5YACASsEijkBse9AAoErBIo5AbHvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3KrvhBycZw2kuItTLO2heSZs0mKpLm64uQxWYjMTxJaDdGNwgse9g3VkcILHv4V3YWt1MgM"}'
2025-02-12 03:10:26.822 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:10:26.822 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51132/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.167/tcp/34989/p2p/16Uiu2HAm4VYyRAZYpNTRdVzJNcmMtY4qsxrFz7bpkdRPNRcYLcwc"]'
2025-02-12 03:10:26.846 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:10:26.858 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-12 03:10:26.858 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_go-waku:latest.log
2025-02-12 03:10:26.858 DEBUG [src.node.waku_node] Starting Node...
2025-02-12 03:10:26.859 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-12 03:10:26.860 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-12 03:10:26.860 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.74.214
2025-02-12 03:10:26.860 DEBUG [src.node.docker_mananger] Generated ports ['29473', '29474', '29475', '29476', '29477']
2025-02-12 03:10:26.860 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-12 03:10:26.861 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-12 03:10:26.861 DEBUG [src.node.waku_node] Using volumes []
2025-02-12 03:10:26.861 DEBUG [src.node.docker_mananger] docker run -i -t -p 29473:29473 -p 29474:29474 -p 29475:29475 -p 29476:29476 -p 29477:29477 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29475 --rest-port=29473 --tcp-port=29474 --discv5-udp-port=29476 --rest-address=0.0.0.0 --nat=extip:172.18.74.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5dd0f631b95a8aa761dd5eb804b33cfabb1b6a543cbcd2edb22597cac27bd9d5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QAaFSpV4ol0E0qIl5e2LOWfNFpUzHWVIVKnN1Z3KFIdgNIrA_9luEXEAdbBap5OAfDsyBka5n2ZxYKo11WwYavYCgmlkgnY0gmlwhKwSKOSKbXVsdGlhZGRyc5YACASsEijkBse9AAoErBIo5AbHvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3KrvhBycZw2kuItTLO2heSZs0mKpLm64uQxWYjMTxJaDdGNwgse9g3VkcILHv4V3YWt1MgM --storenode=/ip4/172.18.140.167/tcp/34989/p2p/16Uiu2HAm4VYyRAZYpNTRdVzJNcmMtY4qsxrFz7bpkdRPNRcYLcwc --store=false --relay=true
2025-02-12 03:10:27.110 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.74.214 waku d3f1345e7b8abd87c9981a098b0d5c4c681b21291325ca6a2a39f7e7dbe847cd
2025-02-12 03:10:27.161 DEBUG [src.node.docker_mananger] Container started with ID d3f1345e7b8a. Setting up logs at ./log/docker/store_node1_2025-02-12_03-09-36__35824ac0-6cc5-45fa-b4ca-40e23f8dbe18__wakuorg_go-waku:latest.log
2025-02-12 03:10:27.162 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 29473
2025-02-12 03:10:27.163 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-12 03:10:28.163 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29473/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:28.166 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QG8BdVSyRXcrXVwS00Yx3FWkVMjacKSQ7OKyCyF7vD_6eQ_WTnelEjw1lr7rqGRgePdd0P8Fvi3JRpeNZRx3R9aGAZT4IvFTgmlkgnY0gmlwhKwRAAeCcnODAAMAiXNlY3AyNTZrMaEC2qGbG4oAnrKPxWNrhw_dw_qV9dfP3F7Z32ue4kvhSt2DdGNwgnMig3VkcIJzJIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/29474/p2p/16Uiu2HAmA97nNsanh7UwpWLGsuJs9mGczNYd69ovj7StEmekikEg","/ip4/127.0.0.1/tcp/29475/ws/p2p/16Uiu2HAmA97nNsanh7UwpWLGsuJs9mGczNYd69ovj7StEmekikEg","/ip4/172.17.0.7/tcp/29474/p2p/16Uiu2HAmA97nNsanh7UwpWLGsuJs9mGczNYd69ovj7StEmekikEg","/ip4/172.17.0.7/tcp/29475/ws/p2p/16Uiu2HAmA97nNsanh7UwpWLGsuJs9mGczNYd69ovj7StEmekikEg"]}'
2025-02-12 03:10:28.166 INFO [src.node.waku_node] REST service is ready !!
2025-02-12 03:10:28.167 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29473/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.140.167/tcp/34989/p2p/16Uiu2HAm4VYyRAZYpNTRdVzJNcmMtY4qsxrFz7bpkdRPNRcYLcwc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:10:28.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:10:28.187 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29473/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.40.228/tcp/51133/p2p/16Uiu2HAmAH4rF5MwNzCktWFNegoN1wuAYsR6mEWcUxJwSkj43cjf", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-12 03:10:28.207 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-12 03:10:28.208 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34988/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:10:28.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:10:28.214 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28811/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:10:28.216 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:10:28.217 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51132/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:10:28.220 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:10:28.220 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29473/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-12 03:10:28.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-12 03:10:28.224 DEBUG [src.steps.store] Relaying message
2025-02-12 03:10:28.224 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51132/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-12 03:10:28.251 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-12 03:10:28.252 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-12 03:10:28.454 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-12 03:10:28.454 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34988/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:28.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x445afba77e3705da55fdbb808fa7b0bacf074838e1479f4b34a42139a373875f"},{"messageHash":"0x67ec52ca4189ee4947c374943edc99960dd9140b3a7b24860225f2d26d2f0462"}]}'
2025-02-12 03:10:28.460 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-12 03:10:28.460 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28811/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:28.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"5b1ca279811e2b955fcee5b3e7cf99edc3045097643bc781da3447eb63fc0059","status_code":200,"status_desc":"OK","messages":[{"message_hash":"RFr7p343BdpV/buAj6ewus8HSDjhR59LNKQhOaNzh18="},{"message_hash":"Z+xSykGJ7klHw3SUPtyZlg3ZFAs6eySGAiXy0m0vBGI="}]}'
2025-02-12 03:10:28.466 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-12 03:10:28.466 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51132/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:28.472 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x445afba77e3705da55fdbb808fa7b0bacf074838e1479f4b34a42139a373875f"},{"messageHash":"0x67ec52ca4189ee4947c374943edc99960dd9140b3a7b24860225f2d26d2f0462"}]}'
2025-02-12 03:10:28.472 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-12 03:10:28.473 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29473/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-12 03:10:28.478 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"6f1ca1f74a66412fe7752782f845171def835331cd77e53f24933e72055819d5","status_code":200,"status_desc":"OK","messages":[{"message_hash":"RFr7p343BdpV/buAj6ewus8HSDjhR59LNKQhOaNzh18="},{"message_hash":"Z+xSykGJ7klHw3SUPtyZlg3ZFAs6eySGAiXy0m0vBGI="}]}'
2025-02-12 03:10:28.622 DEBUG [src.postgres_setup] Postgres container stopped and removed.
2025-02-12 03:10:28.624 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-12 03:10:28.625 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-12 03:10:28.625 DEBUG [src.node.waku_node] Stopping container with id 0ca1b1f1a10f
2025-02-12 03:10:29.895 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:10:29.895 DEBUG [src.node.waku_node] Stopping container with id c2645066f1c6
2025-02-12 03:10:30.430 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:10:30.431 DEBUG [src.node.waku_node] Stopping container with id 0fa1756210a7
2025-02-12 03:10:30.707 ERROR [src.node.docker_mananger] Max retries reached for container 0ca1b1f1a10f. Exiting log stream.
2025-02-12 03:10:31.252 ERROR [src.node.docker_mananger] Max retries reached for container c2645066f1c6. Exiting log stream.
2025-02-12 03:10:31.755 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:10:31.756 DEBUG [src.node.waku_node] Stopping container with id d3f1345e7b8a
2025-02-12 03:10:32.302 DEBUG [src.node.waku_node] Container stopped.
2025-02-12 03:10:32.303 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-12 03:10:32.326 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:10:32.347 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:10:32.367 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:10:32.373 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:10:32.393 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-12 03:10:32.399 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
