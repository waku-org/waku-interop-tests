[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-12-04_03-17-50__893d5a83-e291-4c3f-9de3-cbeeed158222
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-04_03-17-50__893d5a83-e291-4c3f-9de3-cbeeed158222__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-04_03-17-50__893d5a83-e291-4c3f-9de3-cbeeed158222__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-04_03-17-50__893d5a83-e291-4c3f-9de3-cbeeed158222__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.169.242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45171', '45172', '45173', '45174', '45175']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45171:45171 -p 45172:45172 -p 45173:45173 -p 45174:45174 -p 45175:45175 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=45173 --rest-port=45171 --tcp-port=45172 --discv5-udp-port=45174 --rest-address=0.0.0.0 --nat=extip:172.18.169.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab65b65f61119fdca2eadc3f1bf40bd6cf0f5f0a24ce59e35d4be1bbaf28ff9a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.169.242 waku 149149573dfec95a86337b15851a99eb55be28eb5215b148e17c24a1b8427463
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0f4ab46cc895. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 149149573dfe. Setting up logs at ./log/docker/node1_2024-12-04_03-17-50__893d5a83-e291-4c3f-9de3-cbeeed158222__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 45171
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45171/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QF_ZdmtF5A5RmKSB3ByuDrATvbFhbRO600zfOGNkIGw7aevU7yvTd61J4I7jZhEp-ZSSfMQYkLf5o3Wl-PzXN36GAZOPrI75gmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECTlY8bb2foeo7WWVzWa334cA-nikMJS948cWIHsSk6QSDdGNwgrB0g3VkcIKwdoV3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/45172/p2p/16Uiu2HAkzhU3jp5xuD31nCBHTkccWYiGeb45uoXZ2hKfUyw61nzw","/ip4/127.0.0.1/tcp/45173/ws/p2p/16Uiu2HAkzhU3jp5xuD31nCBHTkccWYiGeb45uoXZ2hKfUyw61nzw","/ip4/172.17.0.2/tcp/45172/p2p/16Uiu2HAkzhU3jp5xuD31nCBHTkccWYiGeb45uoXZ2hKfUyw61nzw","/ip4/172.17.0.2/tcp/45173/ws/p2p/16Uiu2HAkzhU3jp5xuD31nCBHTkccWYiGeb45uoXZ2hKfUyw61nzw"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.94.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45116', '45117', '45118', '45119', '45120']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45116:45116 -p 45117:45117 -p 45118:45118 -p 45119:45119 -p 45120:45120 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45118 --rest-port=45116 --tcp-port=45117 --discv5-udp-port=45119 --rest-address=0.0.0.0 --nat=extip:172.18.94.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdfd2804bec8a93f9293c74a4230adae5a383902aac0a81caf5c3df89bcf6cca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45120 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QF_ZdmtF5A5RmKSB3ByuDrATvbFhbRO600zfOGNkIGw7aevU7yvTd61J4I7jZhEp-ZSSfMQYkLf5o3Wl-PzXN36GAZOPrI75gmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECTlY8bb2foeo7WWVzWa334cA-nikMJS948cWIHsSk6QSDdGNwgrB0g3VkcIKwdoV3YWt1Mgk --lightpushnode=/ip4/172.18.169.242/tcp/45172/p2p/16Uiu2HAkzhU3jp5xuD31nCBHTkccWYiGeb45uoXZ2hKfUyw61nzw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.94.214 waku c02921ebb0e198bc3b5e28c6ccff20938cb446f3acf46870e5b814b128c1d7f3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c02921ebb0e1. Setting up logs at ./log/docker/node2_2024-12-04_03-17-50__893d5a83-e291-4c3f-9de3-cbeeed158222__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45116
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45116/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45116/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.214/tcp/45117/p2p/16Uiu2HAm4MbG4xsoM7ky5xMVnYPNvwpLSpv4xzHZzbwgNEJQHJ3x","/ip4/172.18.94.214/tcp/45118/ws/p2p/16Uiu2HAm4MbG4xsoM7ky5xMVnYPNvwpLSpv4xzHZzbwgNEJQHJ3x"],"enrUri":"enr:-L24QM-x1HRl8hnlmzf-Vmk-jojIUd0inoHyC0sLfEdRM0N1QiLUDoHnMmyvUyrEdyS72nzMuWBOL5RyhYvWML4ZfRgCgmlkgnY0gmlwhKwSXtaKbXVsdGlhZGRyc5YACASsEl7WBrA9AAoErBJe1gawPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChK2F2xrhqpXS_OsqCEw59gKaJPkUHNxrz9F8EnTDP1-DdGNwgrA9g3VkcIKwP4V3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.246.54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2604', '2605', '2606', '2607', '2608']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2604:2604 -p 2605:2605 -p 2606:2606 -p 2607:2607 -p 2608:2608 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=2606 --rest-port=2604 --tcp-port=2605 --discv5-udp-port=2607 --rest-address=0.0.0.0 --nat=extip:172.18.246.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaee16ebbc7e2bc01cf2c18f2cd4c6d5e1eae11ec863ca253914680f90502b56 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.94.214/tcp/45117/p2p/16Uiu2HAm4MbG4xsoM7ky5xMVnYPNvwpLSpv4xzHZzbwgNEJQHJ3x --discv5-bootstrap-node=enr:-L24QM-x1HRl8hnlmzf-Vmk-jojIUd0inoHyC0sLfEdRM0N1QiLUDoHnMmyvUyrEdyS72nzMuWBOL5RyhYvWML4ZfRgCgmlkgnY0gmlwhKwSXtaKbXVsdGlhZGRyc5YACASsEl7WBrA9AAoErBJe1gawPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChK2F2xrhqpXS_OsqCEw59gKaJPkUHNxrz9F8EnTDP1-DdGNwgrA9g3VkcIKwP4V3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.246.54 waku 3c7ab6f6814f4af544a7269bc89284fcee0e2bff9200c85ce181cf40d22254a7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3c7ab6f6814f. Setting up logs at ./log/docker/node3_2024-12-04_03-17-50__893d5a83-e291-4c3f-9de3-cbeeed158222__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 2604
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2604/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QNlj9ipnL0Sj_aAMpsHPzEWQVBFB8SijCDp2ZHe9doVgTNuFs3hwwBMuGCd5hOKDVs9aPZH-u6aHftl4Ie1H9iKGAZOPrJtwgmlkgnY0gmlwhKwRAAuCcnOFAAMBAAGJc2VjcDI1NmsxoQMPN9e3lPxI0yEQecaktJjdlOWdCRaYO9iVC_nCLImrjoN0Y3CCCi2DdWRwggovhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/2605/p2p/16Uiu2HAmDgPrTokjoJdEzEPZsf8LosXRvuwtVhRqfLdKfdkcCfZo","/ip4/127.0.0.1/tcp/2606/ws/p2p/16Uiu2HAmDgPrTokjoJdEzEPZsf8LosXRvuwtVhRqfLdKfdkcCfZo","/ip4/172.17.0.11/tcp/2605/p2p/16Uiu2HAmDgPrTokjoJdEzEPZsf8LosXRvuwtVhRqfLdKfdkcCfZo","/ip4/172.17.0.11/tcp/2606/ws/p2p/16Uiu2HAmDgPrTokjoJdEzEPZsf8LosXRvuwtVhRqfLdKfdkcCfZo"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45171/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45116/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45171/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45171/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45171/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm4MbG4xsoM7ky5xMVnYPNvwpLSpv4xzHZzbwgNEJQHJ3x","multiaddrs":["/ip4/172.18.94.214/tcp/45117/p2p/16Uiu2HAm4MbG4xsoM7ky5xMVnYPNvwpLSpv4xzHZzbwgNEJQHJ3x","/ip4/172.18.94.214/tcp/45118/ws/p2p/16Uiu2HAm4MbG4xsoM7ky5xMVnYPNvwpLSpv4xzHZzbwgNEJQHJ3x"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0","/vac/waku/filter-push/2.0.0-beta1","/vac/waku/lightpush/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45116/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/45172/p2p/16Uiu2HAkzhU3jp5xuD31nCBHTkccWYiGeb45uoXZ2hKfUyw61nzw","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.11/tcp/2605/p2p/16Uiu2HAmDgPrTokjoJdEzEPZsf8LosXRvuwtVhRqfLdKfdkcCfZo","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45171/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1733282307225675008}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2604/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"e294102fa931e1015d38ca73edcdcbed9f2adab18dc3507084132cc1669cc31a","status_code":200,"status_desc":"OK","messages":[{"message_hash":"224x5oPSSTVGgMXMfVVcVflOQjElEYOrRYu2/T6LeK8="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 149149573dfe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c02921ebb0e1
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 149149573dfe. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3c7ab6f6814f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c02921ebb0e1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.