[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-10-18_03-10-36__7a963861-1152-4077-84ec-a32fad555db4
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-18_03-10-36__7a963861-1152-4077-84ec-a32fad555db4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.217.181
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48545', '48546', '48547', '48548', '48549']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48545:48545 -p 48546:48546 -p 48547:48547 -p 48548:48548 -p 48549:48549 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48547 --rest-port=48545 --tcp-port=48546 --discv5-udp-port=48548 --rest-address=0.0.0.0 --nat=extip:172.18.217.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4aa2f9bffe20ab87a827eb9af1d80d92a8faedbe1c521ddb457c4dded5cbeebe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48549 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.217.181 waku f9d0b6eb143b0b96793774c58cb5ccfe39f97e40b58c103b06725012c6d6e369
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f9d0b6eb143b. Setting up logs at ./log/docker/node1_2024-10-18_03-10-36__7a963861-1152-4077-84ec-a32fad555db4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48545
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48545/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48545/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.181/tcp/48546/p2p/16Uiu2HAmQkRL2FD5dqKx8dNiMyDcg14ZWvQwYytKNH3TAYgaSqwe","/ip4/172.18.217.181/tcp/48547/ws/p2p/16Uiu2HAmQkRL2FD5dqKx8dNiMyDcg14ZWvQwYytKNH3TAYgaSqwe"],"enrUri":"enr:-LO4QBu2D--ONbhrseLU6Fq-NXacZuQox9AC4XABbIcZ1e95L1FJNwqIZWigbo6mVRnLlEUqSlofSeSIHLdg9TJ14p0BgmlkgnY0gmlwhKwS2bWKbXVsdGlhZGRyc4wACgSsEtm1Br2j3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOzsGPZqxVSlTxpkCEaaS9-HRH9T59mjrCDroHtx9RhuYN0Y3CCvaKDdWRwgr2khXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-18_03-10-36__7a963861-1152-4077-84ec-a32fad555db4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.254.70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47810', '47811', '47812', '47813', '47814']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47810:47810 -p 47811:47811 -p 47812:47812 -p 47813:47813 -p 47814:47814 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=47812 --rest-port=47810 --tcp-port=47811 --discv5-udp-port=47813 --rest-address=0.0.0.0 --nat=extip:172.18.254.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edf65a3f38e6eaa16fc4e04da6c0c39bddedfabe4987bcc6a0215d09ce0bedff --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QBu2D--ONbhrseLU6Fq-NXacZuQox9AC4XABbIcZ1e95L1FJNwqIZWigbo6mVRnLlEUqSlofSeSIHLdg9TJ14p0BgmlkgnY0gmlwhKwS2bWKbXVsdGlhZGRyc4wACgSsEtm1Br2j3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOzsGPZqxVSlTxpkCEaaS9-HRH9T59mjrCDroHtx9RhuYN0Y3CCvaKDdWRwgr2khXdha3UyBQ --filternode=/ip4/172.18.217.181/tcp/48546/p2p/16Uiu2HAmQkRL2FD5dqKx8dNiMyDcg14ZWvQwYytKNH3TAYgaSqwe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.36.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33288', '33289', '33290', '33291', '33292']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33288:33288 -p 33289:33289 -p 33290:33290 -p 33291:33291 -p 33292:33292 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33290 --rest-port=33288 --tcp-port=33289 --discv5-udp-port=33291 --rest-address=0.0.0.0 --nat=extip:172.18.36.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=15dc58a141ade0dc47addbf5f8ace7a9c7858ffdebfccad60b8a41e02c6bc285 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QBu2D--ONbhrseLU6Fq-NXacZuQox9AC4XABbIcZ1e95L1FJNwqIZWigbo6mVRnLlEUqSlofSeSIHLdg9TJ14p0BgmlkgnY0gmlwhKwS2bWKbXVsdGlhZGRyc4wACgSsEtm1Br2j3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOzsGPZqxVSlTxpkCEaaS9-HRH9T59mjrCDroHtx9RhuYN0Y3CCvaKDdWRwgr2khXdha3UyBQ --filternode=/ip4/172.18.217.181/tcp/48546/p2p/16Uiu2HAmQkRL2FD5dqKx8dNiMyDcg14ZWvQwYytKNH3TAYgaSqwe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.184.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35156', '35157', '35158', '35159', '35160']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35156:35156 -p 35157:35157 -p 35158:35158 -p 35159:35159 -p 35160:35160 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35158 --rest-port=35156 --tcp-port=35157 --discv5-udp-port=35159 --rest-address=0.0.0.0 --nat=extip:172.18.184.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eeefc6e39ccacbfeccfec03d7f9db4ca5ba589fa5c5c0bcce8a7adc9dd5edcf5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QBu2D--ONbhrseLU6Fq-NXacZuQox9AC4XABbIcZ1e95L1FJNwqIZWigbo6mVRnLlEUqSlofSeSIHLdg9TJ14p0BgmlkgnY0gmlwhKwS2bWKbXVsdGlhZGRyc4wACgSsEtm1Br2j3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOzsGPZqxVSlTxpkCEaaS9-HRH9T59mjrCDroHtx9RhuYN0Y3CCvaKDdWRwgr2khXdha3UyBQ --filternode=/ip4/172.18.217.181/tcp/48546/p2p/16Uiu2HAmQkRL2FD5dqKx8dNiMyDcg14ZWvQwYytKNH3TAYgaSqwe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.184.50 waku 5a36b7e749d5a05a056c2483e29f957a227c621e102925f5076b3001367ba108
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5a36b7e749d5. Setting up logs at ./log/docker/node2_2024-10-18_03-10-36__7a963861-1152-4077-84ec-a32fad555db4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 35156
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35156/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QEPXDrgAbpz7sqYB6HXlgxfR8wCHCMZNsPn6tO2fErtpSjSlZ_oEiASYOdydCJAvkD_F8144X2jRiy-kAJw-Bw6GAZKdmxgAgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQLAsDM49vQPfE19DvnE9fSaVCgK_DI5yGq3uKkqofFP-oN0Y3CCiVWDdWRwgolXhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/35157/p2p/16Uiu2HAm8Pr6Bm7vnMS6Cwehz2eku7MCfQ7jng66pYsU8y1M43a1","/ip4/127.0.0.1/tcp/35158/ws/p2p/16Uiu2HAm8Pr6Bm7vnMS6Cwehz2eku7MCfQ7jng66pYsU8y1M43a1","/ip4/172.17.0.7/tcp/35157/p2p/16Uiu2HAm8Pr6Bm7vnMS6Cwehz2eku7MCfQ7jng66pYsU8y1M43a1","/ip4/172.17.0.7/tcp/35158/ws/p2p/16Uiu2HAm8Pr6Bm7vnMS6Cwehz2eku7MCfQ7jng66pYsU8y1M43a1"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35156/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.217.181/tcp/48546/p2p/16Uiu2HAmQkRL2FD5dqKx8dNiMyDcg14ZWvQwYytKNH3TAYgaSqwe", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48545/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35156/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b19bf7dd-6fe6-45b2-8f13-b24cd3d6e52b", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"b19bf7dd-6fe6-45b2-8f13-b24cd3d6e52b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48545/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35156/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1729221041144867584,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48545/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35156/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "867c01a0-30ce-483d-9ad1-df96cc6f4a9e", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35156/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "867c01a0-30ce-483d-9ad1-df96cc6f4a9e", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35156/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "867c01a0-30ce-483d-9ad1-df96cc6f4a9e", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[31m[1mERROR   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:47 PubsubTopic /waku/2/rs/2/2 failed: HTTPConnectionPool(host='127.0.0.1', port=35156): Read timed out. (read timeout=20)
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48545/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35156/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "601aaac5-9623-49f3-9d4a-f0fefc819583", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"601aaac5-9623-49f3-9d4a-f0fefc819583","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48545/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35156/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1729221104696527360,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f9d0b6eb143b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5a36b7e749d5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.