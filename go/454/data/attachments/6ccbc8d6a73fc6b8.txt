2025-02-04 17:28:53.127 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:28:53.128 DEBUG [tests.conftest] Running test: test_light_push_with_valid_timestamps with id: 2025-02-04_17-28-53__f10a10c0-728f-45b7-ba50-30269ca498ed
2025-02-04 17:28:53.128 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:28:53.129 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:28:53.136 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:28:53.136 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-28-53__f10a10c0-728f-45b7-ba50-30269ca498ed__wakuorg_nwaku:latest.log
2025-02-04 17:28:53.136 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:28:53.137 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:28:53.138 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:28:53.138 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.6
2025-02-04 17:28:53.138 DEBUG [src.node.docker_mananger] Generated ports ['60141', '60142', '60143', '60144', '60145']
2025-02-04 17:28:53.138 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:28:53.139 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:28:53.139 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:28:53.139 DEBUG [src.node.docker_mananger] docker run -i -t -p 60141:60141 -p 60142:60142 -p 60143:60143 -p 60144:60144 -p 60145:60145 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60143 --rest-port=60141 --tcp-port=60142 --discv5-udp-port=60144 --rest-address=0.0.0.0 --nat=extip:172.18.1.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd9d1cb37b6b0142fdaeb0f54e0a4961bd03d7afd5f2fedc4e3f5aca5086cde5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60145 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:28:53.383 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.6 waku 0c7995a200a314c8e3bb9cb53fe6a7fd8b8b679398c530ce8060097519fff4fb
2025-02-04 17:28:53.406 ERROR [src.node.docker_mananger] Max retries reached for container 2e4c55c8fccf. Exiting log stream.
2025-02-04 17:28:53.440 DEBUG [src.node.docker_mananger] Container started with ID 0c7995a200a3. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-28-53__f10a10c0-728f-45b7-ba50-30269ca498ed__wakuorg_nwaku:latest.log
2025-02-04 17:28:53.440 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60141
2025-02-04 17:28:53.441 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:28:53.940 ERROR [src.node.docker_mananger] Max retries reached for container bef20463452c. Exiting log stream.
2025-02-04 17:28:54.441 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:54.444 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:28:54.444 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:28:54.444 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:54.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.6/tcp/60142/p2p/16Uiu2HAm6LXuJdp1VpnXskzQBGroi3fTd1qkutx1ZAipCnCP4rfJ","/ip4/172.18.1.6/tcp/60143/ws/p2p/16Uiu2HAm6LXuJdp1VpnXskzQBGroi3fTd1qkutx1ZAipCnCP4rfJ"],"enrUri":"enr:-L24QA5EhdUeV9X-sj_VtJwhe6AtUemXXZWZoSacUiYTWNTiWOX6UC-zYtmPDJMdvq6uVe0S5guK8dMkSUhl2evsp9gCgmlkgnY0gmlwhKwSAQaKbXVsdGlhZGRyc5YACASsEgEGBuruAAoErBIBBgbq790DgnJzhQADAQAAiXNlY3AyNTZrMaECoh-E3dQZff1Ew2i-D9BkbLXY3FhcVVIi-QGKBImLsgmDdGNwgurug3VkcILq8IV3YWt1Mgk"}'
2025-02-04 17:28:54.447 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:28:54.453 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:28:54.454 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-28-53__f10a10c0-728f-45b7-ba50-30269ca498ed__wakuorg_nwaku:latest.log
2025-02-04 17:28:54.454 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:28:54.454 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:28:54.455 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:28:54.455 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.92.73
2025-02-04 17:28:54.456 DEBUG [src.node.docker_mananger] Generated ports ['63011', '63012', '63013', '63014', '63015']
2025-02-04 17:28:54.456 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:28:54.456 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:28:54.456 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:28:54.456 DEBUG [src.node.docker_mananger] docker run -i -t -p 63011:63011 -p 63012:63012 -p 63013:63013 -p 63014:63014 -p 63015:63015 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63013 --rest-port=63011 --tcp-port=63012 --discv5-udp-port=63014 --rest-address=0.0.0.0 --nat=extip:172.18.92.73 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=078245b6a1685accf331f9caacffa1b63a5b80bf0e5ed7afedbfbf54b177bec8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63015 --metrics-logging=true --lightpush=false --relay=true
2025-02-04 17:28:54.687 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.92.73 waku 6819190f5beec82c7827a483d5877e34343aa821ea83882576f17901bf9a4916
2025-02-04 17:28:54.732 DEBUG [src.node.docker_mananger] Container started with ID 6819190f5bee. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-28-53__f10a10c0-728f-45b7-ba50-30269ca498ed__wakuorg_nwaku:latest.log
2025-02-04 17:28:54.732 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63011
2025-02-04 17:28:54.732 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:28:55.733 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:55.736 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:28:55.736 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:28:55.736 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:55.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.73/tcp/63012/p2p/16Uiu2HAmQiiZ4p3NWcgJd9tW1Vh5ud9y4fUvRMjkjoVB7dMgCBtt","/ip4/172.18.92.73/tcp/63013/ws/p2p/16Uiu2HAmQiiZ4p3NWcgJd9tW1Vh5ud9y4fUvRMjkjoVB7dMgCBtt"],"enrUri":"enr:-L24QO193tRCsuCwKM8GfgDyRePoXwgOZ_LM39ZWtr8JLnG_baI0zngE2RF9W7cuCNFzuG5hliuzHfNIvRvMCy3jrBICgmlkgnY0gmlwhKwSXEmKbXVsdGlhZGRyc5YACASsElxJBvYkAAoErBJcSQb2Jd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDs0C0Zdz7HOgpOgqZ7O7Frl61edXHUcWmmmjY4xTE1tGDdGNwgvYkg3VkcIL2JoV3YWt1MgE"}'
2025-02-04 17:28:55.738 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:28:55.739 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63011/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.1.6/tcp/60142/p2p/16Uiu2HAm6LXuJdp1VpnXskzQBGroi3fTd1qkutx1ZAipCnCP4rfJ"]'
2025-02-04 17:28:55.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:28:55.783 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:28:55.783 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-28-53__f10a10c0-728f-45b7-ba50-30269ca498ed__wakuorg_go-waku:latest.log
2025-02-04 17:28:55.784 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:28:55.784 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:28:55.785 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:28:55.785 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.142.66
2025-02-04 17:28:55.785 DEBUG [src.node.docker_mananger] Generated ports ['62543', '62544', '62545', '62546', '62547']
2025-02-04 17:28:55.786 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:28:55.786 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:28:55.786 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:28:55.786 DEBUG [src.node.docker_mananger] docker run -i -t -p 62543:62543 -p 62544:62544 -p 62545:62545 -p 62546:62546 -p 62547:62547 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=62545 --rest-port=62543 --tcp-port=62544 --discv5-udp-port=62546 --rest-address=0.0.0.0 --nat=extip:172.18.142.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=07ca62ca2a5d82642681d5be8c6e9fc99b547b4dd3dd1616fa7daea012ea709a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QA5EhdUeV9X-sj_VtJwhe6AtUemXXZWZoSacUiYTWNTiWOX6UC-zYtmPDJMdvq6uVe0S5guK8dMkSUhl2evsp9gCgmlkgnY0gmlwhKwSAQaKbXVsdGlhZGRyc5YACASsEgEGBuruAAoErBIBBgbq790DgnJzhQADAQAAiXNlY3AyNTZrMaECoh-E3dQZff1Ew2i-D9BkbLXY3FhcVVIi-QGKBImLsgmDdGNwgurug3VkcILq8IV3YWt1Mgk --lightpushnode=/ip4/172.18.1.6/tcp/60142/p2p/16Uiu2HAm6LXuJdp1VpnXskzQBGroi3fTd1qkutx1ZAipCnCP4rfJ --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-04 17:28:56.028 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.142.66 waku f1fc29850f489a7a3d7f19311e3744c56b5470819e612787d802d55559db0f13
2025-02-04 17:28:56.080 DEBUG [src.node.docker_mananger] Container started with ID f1fc29850f48. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-28-53__f10a10c0-728f-45b7-ba50-30269ca498ed__wakuorg_go-waku:latest.log
2025-02-04 17:28:56.082 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 62543
2025-02-04 17:28:56.082 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:28:57.083 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62543/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.085 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QCcuGF05yIQkjJOKqnnh-8yJKFsOz_y95PcBq2S_asbDLEOG16DQW9yaqoHfG5dIp8cgCSZZR845pWEDqQvPS52GAZTSAggLgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNsGRpsBIcv6_tiWytjcjHdMtA12UoAQ9L2Pgk89HNc4IN0Y3CC9FCDdWRwgvRShXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/62544/p2p/16Uiu2HAmKvxanneZiQym2GkksihzoUuPH7jLCU3eEqKPoWu6z94T","/ip4/127.0.0.1/tcp/62545/ws/p2p/16Uiu2HAmKvxanneZiQym2GkksihzoUuPH7jLCU3eEqKPoWu6z94T","/ip4/172.17.0.4/tcp/62544/p2p/16Uiu2HAmKvxanneZiQym2GkksihzoUuPH7jLCU3eEqKPoWu6z94T","/ip4/172.17.0.4/tcp/62545/ws/p2p/16Uiu2HAmKvxanneZiQym2GkksihzoUuPH7jLCU3eEqKPoWu6z94T"]}'
2025-02-04 17:28:57.085 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:28:57.086 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.1.6/tcp/60142/p2p/16Uiu2HAm6LXuJdp1VpnXskzQBGroi3fTd1qkutx1ZAipCnCP4rfJ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-04 17:28:57.087 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:28:57.088 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.92.73/tcp/63012/p2p/16Uiu2HAmQiiZ4p3NWcgJd9tW1Vh5ud9y4fUvRMjkjoVB7dMgCBtt", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-04 17:28:57.106 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:28:57.107 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60141/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:28:57.113 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:28:57.113 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63011/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:28:57.115 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:28:57.116 DEBUG [tests.light_push.test_publish] Running test with timestamp Now
2025-02-04 17:28:57.117 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:28:57.117 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738689849171409408}}'
2025-02-04 17:28:57.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:28:57.125 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:28:57.225 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.226 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.228 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738689849171409408,"ephemeral":false}]'
2025-02-04 17:28:57.230 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.230 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.233 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738689849171409408,"ephemeral":false}]'
2025-02-04 17:28:57.234 DEBUG [tests.light_push.test_publish] Running test with timestamp Far future
2025-02-04 17:28:57.234 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:28:57.234 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 2054049849171394048}}'
2025-02-04 17:28:57.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:28:57.242 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:28:57.343 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.343 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.346 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054049849171394048,"ephemeral":false}]'
2025-02-04 17:28:57.347 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.347 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054049849171394048,"ephemeral":false}]'
2025-02-04 17:28:57.351 DEBUG [tests.light_push.test_publish] Running test with timestamp Recent past
2025-02-04 17:28:57.351 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:28:57.352 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738686249171394048}}'
2025-02-04 17:28:57.358 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:28:57.359 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:28:57.459 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.459 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738686249171394048,"ephemeral":false}]'
2025-02-04 17:28:57.464 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.464 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738686249171394048,"ephemeral":false}]'
2025-02-04 17:28:57.467 DEBUG [tests.light_push.test_publish] Running test with timestamp Near future
2025-02-04 17:28:57.468 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:28:57.468 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738693449171394048}}'
2025-02-04 17:28:57.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:28:57.476 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:28:57.576 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.577 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.579 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738693449171394048,"ephemeral":false}]'
2025-02-04 17:28:57.581 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.581 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.583 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738693449171394048,"ephemeral":false}]'
2025-02-04 17:28:57.585 DEBUG [tests.light_push.test_publish] Running test with timestamp Positive number
2025-02-04 17:28:57.585 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:28:57.585 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1}}'
2025-02-04 17:28:57.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:28:57.593 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:28:57.693 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.693 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-04 17:28:57.698 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.698 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-04 17:28:57.701 DEBUG [tests.light_push.test_publish] Running test with timestamp Negative number
2025-02-04 17:28:57.702 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:28:57.702 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": -1}}'
2025-02-04 17:28:57.708 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:28:57.710 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:28:57.810 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.811 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-04 17:28:57.814 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.815 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-04 17:28:57.818 DEBUG [tests.light_push.test_publish] Running test with timestamp DST change
2025-02-04 17:28:57.818 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:28:57.819 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1583632800000000000}}'
2025-02-04 17:28:57.825 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:28:57.826 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:28:57.926 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-04 17:28:57.930 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:57.930 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:57.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-04 17:28:57.933 DEBUG [tests.light_push.test_publish] Running test with timestamp Missing
2025-02-04 17:28:57.934 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:28:57.934 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62543/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": null}}'
2025-02-04 17:28:57.940 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:28:57.941 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:28:58.041 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:58.041 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60141/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:58.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
2025-02-04 17:28:58.045 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:28:58.046 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:58.048 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
2025-02-04 17:28:58.050 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:28:58.051 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:28:58.052 DEBUG [src.node.waku_node] Stopping container with id 0c7995a200a3
2025-02-04 17:28:58.636 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:28:58.636 DEBUG [src.node.waku_node] Stopping container with id 6819190f5bee
2025-02-04 17:28:59.449 ERROR [src.node.docker_mananger] Max retries reached for container 0c7995a200a3. Exiting log stream.
2025-02-04 17:28:59.728 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:28:59.728 DEBUG [src.node.waku_node] Stopping container with id f1fc29850f48
2025-02-04 17:29:00.236 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:29:00.238 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:29:00.247 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:29:00.254 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:29:00.256 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
