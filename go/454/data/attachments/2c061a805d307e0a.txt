2025-02-04 17:24:30.258 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:24:30.258 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-04_17-24-30__9706ff30-71eb-4fe0-b391-aad100f67715
2025-02-04 17:24:30.259 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:24:30.259 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-04 17:24:30.259 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:24:30.259 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-04 17:24:30.260 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:24:30.267 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:24:30.267 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-24-30__9706ff30-71eb-4fe0-b391-aad100f67715__wakuorg_nwaku:latest.log
2025-02-04 17:24:30.267 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:24:30.267 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:24:30.269 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:24:30.269 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.62.28
2025-02-04 17:24:30.269 DEBUG [src.node.docker_mananger] Generated ports ['25655', '25656', '25657', '25658', '25659']
2025-02-04 17:24:30.269 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:24:30.269 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:24:30.270 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:24:30.270 DEBUG [src.node.docker_mananger] docker run -i -t -p 25655:25655 -p 25656:25656 -p 25657:25657 -p 25658:25658 -p 25659:25659 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25657 --rest-port=25655 --tcp-port=25656 --discv5-udp-port=25658 --rest-address=0.0.0.0 --nat=extip:172.18.62.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb132abbf0cfdfccffec4bfb0eb25c3d8deb10ad9ee40abd33d13be4d3de1a3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25659 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:24:30.524 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.62.28 waku efeb0fd74c5b8760ce012398b9ecd37aa55cb7ad47973a0befa295ce1e847df8
2025-02-04 17:24:30.583 DEBUG [src.node.docker_mananger] Container started with ID efeb0fd74c5b. Setting up logs at ./log/docker/node1_2025-02-04_17-24-30__9706ff30-71eb-4fe0-b391-aad100f67715__wakuorg_nwaku:latest.log
2025-02-04 17:24:30.584 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25655
2025-02-04 17:24:30.584 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:30.608 ERROR [src.node.docker_mananger] Max retries reached for container a4f77f619065. Exiting log stream.
2025-02-04 17:24:31.068 ERROR [src.node.docker_mananger] Max retries reached for container c8d622be2744. Exiting log stream.
2025-02-04 17:24:31.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25655/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:31.588 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:24:31.588 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:24:31.588 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25655/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:31.590 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.28/tcp/25656/p2p/16Uiu2HAkwbGZiBVzNpRWkwJT3uRuhgC6EoPA8ZRksktoRYnMzcXy","/ip4/172.18.62.28/tcp/25657/ws/p2p/16Uiu2HAkwbGZiBVzNpRWkwJT3uRuhgC6EoPA8ZRksktoRYnMzcXy"],"enrUri":"enr:-L24QALXnceRh1QBYpQTJ_bMx0syPwFqqVYoOCQx2cflpqSSBbv34XgFxYeV1k2vjhbbo8iAcVFWc7cMvGJkL5eu_ZoCgmlkgnY0gmlwhKwSPhyKbXVsdGlhZGRyc5YACASsEj4cBmQ4AAoErBI-HAZkOd0DgnJzhQADAQAAiXNlY3AyNTZrMaECICy0zjIlIOybhbdY7hWVflFMpN6hkGuSgsuWbNqQ3fiDdGNwgmQ4g3VkcIJkOoV3YWt1Mgk"}'
2025-02-04 17:24:31.591 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:24:31.597 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:24:31.597 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-24-30__9706ff30-71eb-4fe0-b391-aad100f67715__wakuorg_nwaku:latest.log
2025-02-04 17:24:31.597 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:24:31.597 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:24:31.599 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:24:31.599 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.66.61
2025-02-04 17:24:31.599 DEBUG [src.node.docker_mananger] Generated ports ['38213', '38214', '38215', '38216', '38217']
2025-02-04 17:24:31.599 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:24:31.599 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:24:31.599 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:24:31.600 DEBUG [src.node.docker_mananger] docker run -i -t -p 38213:38213 -p 38214:38214 -p 38215:38215 -p 38216:38216 -p 38217:38217 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38215 --rest-port=38213 --tcp-port=38214 --discv5-udp-port=38216 --rest-address=0.0.0.0 --nat=extip:172.18.66.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c6a86b49dd78ba2fdc6e4bebe16cc619abad4abab6ac8c9c2a60f28ac606daa1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38217 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QALXnceRh1QBYpQTJ_bMx0syPwFqqVYoOCQx2cflpqSSBbv34XgFxYeV1k2vjhbbo8iAcVFWc7cMvGJkL5eu_ZoCgmlkgnY0gmlwhKwSPhyKbXVsdGlhZGRyc5YACASsEj4cBmQ4AAoErBI-HAZkOd0DgnJzhQADAQAAiXNlY3AyNTZrMaECICy0zjIlIOybhbdY7hWVflFMpN6hkGuSgsuWbNqQ3fiDdGNwgmQ4g3VkcIJkOoV3YWt1Mgk
2025-02-04 17:24:31.834 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.66.61 waku 60bce74b1e12ab128c89a2f23b7340e3ce6a81d8175af77f835787488b82b44b
2025-02-04 17:24:31.884 DEBUG [src.node.docker_mananger] Container started with ID 60bce74b1e12. Setting up logs at ./log/docker/node1_2025-02-04_17-24-30__9706ff30-71eb-4fe0-b391-aad100f67715__wakuorg_nwaku:latest.log
2025-02-04 17:24:31.885 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38213
2025-02-04 17:24:31.885 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:32.885 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38213/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:32.897 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:24:32.901 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:24:32.902 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38213/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:32.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.61/tcp/38214/p2p/16Uiu2HAm2GQpny4szkys1xpwjAtEX5BkmLkfdbYzsLxRCymEfkUJ","/ip4/172.18.66.61/tcp/38215/ws/p2p/16Uiu2HAm2GQpny4szkys1xpwjAtEX5BkmLkfdbYzsLxRCymEfkUJ"],"enrUri":"enr:-L24QJelZNPtHY10JqNRXpSbualgR0acrwHYbnnUO9OD0GSpdM6fnWASPnMo7TyqMMnOX5nJs8TyrKn7H3bV_uWqfZMCgmlkgnY0gmlwhKwSQj2KbXVsdGlhZGRyc5YACASsEkI9BpVGAAoErBJCPQaVR90DgnJzhQADAQAAiXNlY3AyNTZrMaECZaJx-A-nbMWLU1C6ij72WilSfIu_Ocna-g7dWfbYyfuDdGNwgpVGg3VkcIKVSIV3YWt1MgE"}'
2025-02-04 17:24:32.906 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:24:32.912 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:24:32.912 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-24-30__9706ff30-71eb-4fe0-b391-aad100f67715__wakuorg_go-waku:latest.log
2025-02-04 17:24:32.913 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:24:32.913 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:24:32.914 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:24:32.914 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.243.134
2025-02-04 17:24:32.914 DEBUG [src.node.docker_mananger] Generated ports ['8261', '8262', '8263', '8264', '8265']
2025-02-04 17:24:32.915 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:24:32.915 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:24:32.915 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:24:32.915 DEBUG [src.node.docker_mananger] docker run -i -t -p 8261:8261 -p 8262:8262 -p 8263:8263 -p 8264:8264 -p 8265:8265 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=8263 --rest-port=8261 --tcp-port=8262 --discv5-udp-port=8264 --rest-address=0.0.0.0 --nat=extip:172.18.243.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed8ed0544fdcf03d89dcfa8c01c7f51e95b29aee395feca28bdb80a40de33f23 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QALXnceRh1QBYpQTJ_bMx0syPwFqqVYoOCQx2cflpqSSBbv34XgFxYeV1k2vjhbbo8iAcVFWc7cMvGJkL5eu_ZoCgmlkgnY0gmlwhKwSPhyKbXVsdGlhZGRyc5YACASsEj4cBmQ4AAoErBI-HAZkOd0DgnJzhQADAQAAiXNlY3AyNTZrMaECICy0zjIlIOybhbdY7hWVflFMpN6hkGuSgsuWbNqQ3fiDdGNwgmQ4g3VkcIJkOoV3YWt1Mgk --lightpushnode=/ip4/172.18.62.28/tcp/25656/p2p/16Uiu2HAkwbGZiBVzNpRWkwJT3uRuhgC6EoPA8ZRksktoRYnMzcXy --pubsub-topic=/waku/2/rs/3/1
2025-02-04 17:24:33.160 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.243.134 waku b2f22c170112af15ffb89c5b6851ee5e9846ac19cffc1d9e28dc72258e7f290b
2025-02-04 17:24:33.207 DEBUG [src.node.docker_mananger] Container started with ID b2f22c170112. Setting up logs at ./log/docker/node1_2025-02-04_17-24-30__9706ff30-71eb-4fe0-b391-aad100f67715__wakuorg_go-waku:latest.log
2025-02-04 17:24:33.208 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 8261
2025-02-04 17:24:33.208 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:34.209 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8261/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:34.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QDeIZeZg_MhAPlJyNsdaEJWKxX4NxT-sxAPYfl463VTpNlw8elLdA5sMJwab0S4M_skZSUhYAW-YmFz-s0mFlJCGAZTR_gVEgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQO-35KcT4Bwwr5oey3F1GPUx7U2LKgEd7kgSi8SW3YjhYN0Y3CCIEaDdWRwgiBIhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/8262/p2p/16Uiu2HAmRW5YPeBTnkG5QjedGa8V7hq9ByNypvpGERs7z7kRZEnY","/ip4/127.0.0.1/tcp/8263/ws/p2p/16Uiu2HAmRW5YPeBTnkG5QjedGa8V7hq9ByNypvpGERs7z7kRZEnY","/ip4/172.17.0.4/tcp/8262/p2p/16Uiu2HAmRW5YPeBTnkG5QjedGa8V7hq9ByNypvpGERs7z7kRZEnY","/ip4/172.17.0.4/tcp/8263/ws/p2p/16Uiu2HAmRW5YPeBTnkG5QjedGa8V7hq9ByNypvpGERs7z7kRZEnY"]}'
2025-02-04 17:24:34.212 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:24:34.212 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25655/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:24:34.216 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:24:34.217 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38213/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:24:34.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:24:34.224 DEBUG [src.steps.light_push] Lightpushing message
2025-02-04 17:24:34.225 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8261/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1738689874224734208}}'
2025-02-04 17:24:34.938 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:24:34.939 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:24:35.039 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:24:35.039 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25655/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:35.042 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689874224734208,"ephemeral":false}]'
2025-02-04 17:24:35.044 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-04 17:24:35.044 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38213/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:35.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689874224734208,"ephemeral":false}]'
2025-02-04 17:24:35.049 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:24:35.050 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:24:35.050 DEBUG [src.node.waku_node] Stopping container with id efeb0fd74c5b
2025-02-04 17:24:35.796 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:24:35.796 DEBUG [src.node.waku_node] Stopping container with id 60bce74b1e12
2025-02-04 17:24:36.611 ERROR [src.node.docker_mananger] Max retries reached for container efeb0fd74c5b. Exiting log stream.
2025-02-04 17:24:36.892 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:24:36.892 DEBUG [src.node.waku_node] Stopping container with id b2f22c170112
2025-02-04 17:24:37.417 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:24:37.418 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:24:37.425 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:24:37.433 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:24:37.435 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
