2025-02-04 17:25:28.738 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:25:28.738 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_invalid_content_topic_format with id: 2025-02-04_17-25-28__4feea0e9-d478-422a-9caa-6fe16d75d598
2025-02-04 17:25:28.738 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:25:28.739 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-04 17:25:28.739 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-04 17:25:28.744 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:25:28.745 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-25-28__4feea0e9-d478-422a-9caa-6fe16d75d598__wakuorg_nwaku:latest.log
2025-02-04 17:25:28.745 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:25:28.745 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:25:28.747 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:25:28.747 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.7.200
2025-02-04 17:25:28.747 DEBUG [src.node.docker_mananger] Generated ports ['17890', '17891', '17892', '17893', '17894']
2025-02-04 17:25:28.747 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:25:28.747 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:25:28.747 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:25:28.747 DEBUG [src.node.docker_mananger] docker run -i -t -p 17890:17890 -p 17891:17891 -p 17892:17892 -p 17893:17893 -p 17894:17894 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17892 --rest-port=17890 --tcp-port=17891 --discv5-udp-port=17893 --rest-address=0.0.0.0 --nat=extip:172.18.7.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eeb0b2c1c6dbeb1e7edb8dfe103ab10e45e4f90caefdafe14b854b5cdd17adbd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17894 --metrics-logging=true --relay=true --filter=true
2025-02-04 17:25:28.972 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.7.200 waku d98f44fc941640e32652cc863a9944849e3943e60361540e6a214b34de61ca1e
2025-02-04 17:25:29.023 DEBUG [src.node.docker_mananger] Container started with ID d98f44fc9416. Setting up logs at ./log/docker/node1_2025-02-04_17-25-28__4feea0e9-d478-422a-9caa-6fe16d75d598__wakuorg_nwaku:latest.log
2025-02-04 17:25:29.023 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17890
2025-02-04 17:25:29.023 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:25:29.539 ERROR [src.node.docker_mananger] Max retries reached for container 625452b4276d. Exiting log stream.
2025-02-04 17:25:30.024 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17890/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:25:30.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:25:30.027 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:25:30.027 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17890/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:25:30.029 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.200/tcp/17891/p2p/16Uiu2HAmLFNR7PiEFTRPuERC74hgzMpHT8AUeQ4nwFz5aUAnJAe1","/ip4/172.18.7.200/tcp/17892/ws/p2p/16Uiu2HAmLFNR7PiEFTRPuERC74hgzMpHT8AUeQ4nwFz5aUAnJAe1"],"enrUri":"enr:-L24QBt1tkYd_2hRppwjNsuDvQ8HbXnl4lqVcS23ObcxB5feVr2ggcr3tFVNSrE2Z21c_WKaJHN-o-Z7jHCdcKqoaisCgmlkgnY0gmlwhKwSB8iKbXVsdGlhZGRyc5YACASsEgfIBkXjAAoErBIHyAZF5N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcNCBhuxxyDaWp5IA5rL1RCtoB7-VMUtyVdxliykdcv6DdGNwgkXjg3VkcIJF5YV3YWt1MgU"}'
2025-02-04 17:25:30.029 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:25:30.030 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-04 17:25:30.036 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:25:30.036 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_17-25-28__4feea0e9-d478-422a-9caa-6fe16d75d598__wakuorg_go-waku:latest.log
2025-02-04 17:25:30.036 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:25:30.036 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:25:30.038 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:25:30.038 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.244.98
2025-02-04 17:25:30.038 DEBUG [src.node.docker_mananger] Generated ports ['40305', '40306', '40307', '40308', '40309']
2025-02-04 17:25:30.038 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:25:30.038 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:25:30.038 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:25:30.039 DEBUG [src.node.docker_mananger] docker run -i -t -p 40305:40305 -p 40306:40306 -p 40307:40307 -p 40308:40308 -p 40309:40309 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40307 --rest-port=40305 --tcp-port=40306 --discv5-udp-port=40308 --rest-address=0.0.0.0 --nat=extip:172.18.244.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4c145de4858abdd0d79c9ba8bcbbe6afe6aac9d4a21d9bd9b35cbe9a23b36bea --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QBt1tkYd_2hRppwjNsuDvQ8HbXnl4lqVcS23ObcxB5feVr2ggcr3tFVNSrE2Z21c_WKaJHN-o-Z7jHCdcKqoaisCgmlkgnY0gmlwhKwSB8iKbXVsdGlhZGRyc5YACASsEgfIBkXjAAoErBIHyAZF5N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcNCBhuxxyDaWp5IA5rL1RCtoB7-VMUtyVdxliykdcv6DdGNwgkXjg3VkcIJF5YV3YWt1MgU --filternode=/ip4/172.18.7.200/tcp/17891/p2p/16Uiu2HAmLFNR7PiEFTRPuERC74hgzMpHT8AUeQ4nwFz5aUAnJAe1 --pubsub-topic=/waku/2/rs/3/1
2025-02-04 17:25:30.263 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.244.98 waku bc2b07dc648fc2101096aab3f22637605b75669d0ffc38c362ddc007b34f9355
2025-02-04 17:25:30.314 DEBUG [src.node.docker_mananger] Container started with ID bc2b07dc648f. Setting up logs at ./log/docker/node2_2025-02-04_17-25-28__4feea0e9-d478-422a-9caa-6fe16d75d598__wakuorg_go-waku:latest.log
2025-02-04 17:25:30.315 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 40305
2025-02-04 17:25:30.316 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:25:31.316 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40305/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:25:31.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QC-PExW6HtMg7-DDGnNQRAv0bW0Z7oF-QPeXFqo7sP6qTuyb79UHDkiqt61IenLYJvOVH26hgkZRGh6VXbkh2kCGAZTR_uRIgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQPCBR1I64VlwfPK-rcoy6HMQ9vPlELIbWiNj7tdkFu7nYN0Y3CCnXKDdWRwgp10hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/40306/p2p/16Uiu2HAmRiMy3sxoWY6VgrR3X5573eUaFoRuCHj3RMMuydpicYbe","/ip4/127.0.0.1/tcp/40307/ws/p2p/16Uiu2HAmRiMy3sxoWY6VgrR3X5573eUaFoRuCHj3RMMuydpicYbe","/ip4/172.17.0.3/tcp/40306/p2p/16Uiu2HAmRiMy3sxoWY6VgrR3X5573eUaFoRuCHj3RMMuydpicYbe","/ip4/172.17.0.3/tcp/40307/ws/p2p/16Uiu2HAmRiMy3sxoWY6VgrR3X5573eUaFoRuCHj3RMMuydpicYbe"]}'
2025-02-04 17:25:31.319 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:25:31.319 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40305/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.7.200/tcp/17891/p2p/16Uiu2HAmLFNR7PiEFTRPuERC74hgzMpHT8AUeQ4nwFz5aUAnJAe1", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-04 17:25:31.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:25:31.322 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-04 17:25:31.322 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17890/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:25:31.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:25:31.325 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40305/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fef69d6f-d06f-4bcb-9cd0-147007742141", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-04 17:25:31.331 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"fef69d6f-d06f-4bcb-9cd0-147007742141","statusDesc":"OK"}'
2025-02-04 17:25:31.332 DEBUG [tests.filter.test_subscribe_update] Running test with contetn topic Empty string
2025-02-04 17:25:31.335 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:25:31.336 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:25:31.336 DEBUG [src.node.waku_node] Stopping container with id d98f44fc9416
2025-02-04 17:25:31.929 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:25:31.929 DEBUG [src.node.waku_node] Stopping container with id bc2b07dc648f
2025-02-04 17:25:32.743 ERROR [src.node.docker_mananger] Max retries reached for container d98f44fc9416. Exiting log stream.
2025-02-04 17:25:32.803 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:25:32.804 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:25:32.808 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:25:32.811 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
