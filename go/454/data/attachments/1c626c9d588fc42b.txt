2025-02-04 17:28:08.007 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:28:08.007 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-04_17-28-08__8b7ba441-562b-45a8-928c-4deb889c7dab
2025-02-04 17:28:08.008 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:28:08.008 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:28:08.014 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:28:08.014 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-04_17-28-08__8b7ba441-562b-45a8-928c-4deb889c7dab__wakuorg_nwaku:latest.log
2025-02-04 17:28:08.014 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:28:08.015 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:28:08.016 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:28:08.016 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.53
2025-02-04 17:28:08.016 DEBUG [src.node.docker_mananger] Generated ports ['4602', '4603', '4604', '4605', '4606']
2025-02-04 17:28:08.016 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:28:08.016 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:28:08.016 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:28:08.017 DEBUG [src.node.docker_mananger] docker run -i -t -p 4602:4602 -p 4603:4603 -p 4604:4604 -p 4605:4605 -p 4606:4606 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4604 --rest-port=4602 --tcp-port=4603 --discv5-udp-port=4605 --rest-address=0.0.0.0 --nat=extip:172.18.108.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5591cdf8ba1e6cbffb9b4eecf789e7fa0e0d2ffe62ccebecec5ff5c89ba3b5a6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4606 --metrics-logging=true --lightpush=true --relay=true
2025-02-04 17:28:08.245 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.53 waku c45598eb292cc5da3779ec66bbeebf9ca7506074cc6796878522616a9a8e42ae
2025-02-04 17:28:08.290 DEBUG [src.node.docker_mananger] Container started with ID c45598eb292c. Setting up logs at ./log/docker/receiving_node1_2025-02-04_17-28-08__8b7ba441-562b-45a8-928c-4deb889c7dab__wakuorg_nwaku:latest.log
2025-02-04 17:28:08.291 ERROR [src.node.docker_mananger] Max retries reached for container fb5b2898ba18. Exiting log stream.
2025-02-04 17:28:08.293 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4602
2025-02-04 17:28:08.293 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:28:08.783 ERROR [src.node.docker_mananger] Max retries reached for container d0fe4a8acdb9. Exiting log stream.
2025-02-04 17:28:09.293 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4602/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:09.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:28:09.297 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:28:09.297 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4602/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:09.299 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.53/tcp/4603/p2p/16Uiu2HAm6BT3iz5KqectEM5stAjPq5siEiE35fr2mBnkmH1Q3GJi","/ip4/172.18.108.53/tcp/4604/ws/p2p/16Uiu2HAm6BT3iz5KqectEM5stAjPq5siEiE35fr2mBnkmH1Q3GJi"],"enrUri":"enr:-L24QLAjb_rb8-zvc6slwlI1qiG9rU_7HYtRT8DtoOy_vYNBanghrNxnomNxRgTkqBei-IuC9C09dPj4H1MR1CEyclsCgmlkgnY0gmlwhKwSbDWKbXVsdGlhZGRyc5YACASsEmw1BhH7AAoErBJsNQYR_N0DgnJzhQADAQAAiXNlY3AyNTZrMaECn8vNZwqb5xxoueJCDbYEPmNd9Fdnb-ygCaVdtEjZ8N-DdGNwghH7g3VkcIIR_YV3YWt1Mgk"}'
2025-02-04 17:28:09.299 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:28:09.306 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:28:09.306 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-04_17-28-08__8b7ba441-562b-45a8-928c-4deb889c7dab__wakuorg_nwaku:latest.log
2025-02-04 17:28:09.306 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:28:09.306 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:28:09.308 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:28:09.308 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.154.39
2025-02-04 17:28:09.308 DEBUG [src.node.docker_mananger] Generated ports ['39524', '39525', '39526', '39527', '39528']
2025-02-04 17:28:09.308 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:28:09.308 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:28:09.308 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:28:09.308 DEBUG [src.node.docker_mananger] docker run -i -t -p 39524:39524 -p 39525:39525 -p 39526:39526 -p 39527:39527 -p 39528:39528 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39526 --rest-port=39524 --tcp-port=39525 --discv5-udp-port=39527 --rest-address=0.0.0.0 --nat=extip:172.18.154.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ba60c0be38b61c2d6df7bccc2adfed8a184a2813fcc2bcdba4a1bfa2fa7cfcf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39528 --metrics-logging=true --lightpush=false --relay=true
2025-02-04 17:28:09.536 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.154.39 waku 98a937d74816df8c06147235393a9409caa2a19e8b1a0e5a473d40df49c0af29
2025-02-04 17:28:09.589 DEBUG [src.node.docker_mananger] Container started with ID 98a937d74816. Setting up logs at ./log/docker/receiving_node2_2025-02-04_17-28-08__8b7ba441-562b-45a8-928c-4deb889c7dab__wakuorg_nwaku:latest.log
2025-02-04 17:28:09.590 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39524
2025-02-04 17:28:09.590 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:28:10.590 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39524/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:10.593 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:28:10.593 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:28:10.593 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39524/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:10.596 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.39/tcp/39525/p2p/16Uiu2HAmAW9yiaDbxs1WQ2vjBi1nJZPeYyC7zhBahtirss1qhDCZ","/ip4/172.18.154.39/tcp/39526/ws/p2p/16Uiu2HAmAW9yiaDbxs1WQ2vjBi1nJZPeYyC7zhBahtirss1qhDCZ"],"enrUri":"enr:-L24QEZTtvg5be5REReQ46Rqg2xb8Yz3rxYkSCr38qQPtC_qbGWrWE-b0In_N7txRSVumC8oSGPxejtf5IUMzFvCebMCgmlkgnY0gmlwhKwSmieKbXVsdGlhZGRyc5YACASsEponBpplAAoErBKaJwaaZt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4AVJDNjIvKKH6-AORbaHtDLUNyoCEyDV52lGFz6DBg6DdGNwgpplg3VkcIKaZ4V3YWt1MgE"}'
2025-02-04 17:28:10.596 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:28:10.596 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39524/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.108.53/tcp/4603/p2p/16Uiu2HAm6BT3iz5KqectEM5stAjPq5siEiE35fr2mBnkmH1Q3GJi"]'
2025-02-04 17:28:10.635 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:28:10.654 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:28:10.655 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-04_17-28-08__8b7ba441-562b-45a8-928c-4deb889c7dab__wakuorg_go-waku:latest.log
2025-02-04 17:28:10.657 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:28:10.657 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:28:10.660 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:28:10.660 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.249.58
2025-02-04 17:28:10.660 DEBUG [src.node.docker_mananger] Generated ports ['15900', '15901', '15902', '15903', '15904']
2025-02-04 17:28:10.660 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:28:10.661 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:28:10.661 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:28:10.661 DEBUG [src.node.docker_mananger] docker run -i -t -p 15900:15900 -p 15901:15901 -p 15902:15902 -p 15903:15903 -p 15904:15904 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=15902 --rest-port=15900 --tcp-port=15901 --discv5-udp-port=15903 --rest-address=0.0.0.0 --nat=extip:172.18.249.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8e0c42eb2e1e30dc7bdec0db5a94dd7bb28fe5fbda62bbaad858abd146db4494 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QLAjb_rb8-zvc6slwlI1qiG9rU_7HYtRT8DtoOy_vYNBanghrNxnomNxRgTkqBei-IuC9C09dPj4H1MR1CEyclsCgmlkgnY0gmlwhKwSbDWKbXVsdGlhZGRyc5YACASsEmw1BhH7AAoErBJsNQYR_N0DgnJzhQADAQAAiXNlY3AyNTZrMaECn8vNZwqb5xxoueJCDbYEPmNd9Fdnb-ygCaVdtEjZ8N-DdGNwghH7g3VkcIIR_YV3YWt1Mgk --lightpushnode=/ip4/172.18.108.53/tcp/4603/p2p/16Uiu2HAm6BT3iz5KqectEM5stAjPq5siEiE35fr2mBnkmH1Q3GJi --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-04 17:28:10.892 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.249.58 waku 348f82d09af73af71133b1d28575e46b753db286aa3ca461c158be8277a77bf2
2025-02-04 17:28:10.944 DEBUG [src.node.docker_mananger] Container started with ID 348f82d09af7. Setting up logs at ./log/docker/lightpush_node1_2025-02-04_17-28-08__8b7ba441-562b-45a8-928c-4deb889c7dab__wakuorg_go-waku:latest.log
2025-02-04 17:28:10.944 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 15900
2025-02-04 17:28:10.945 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:28:11.945 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15900/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:28:11.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QK8tvqSPjp9cRQfw_5SuMD8A8FNXBBDdonR3a7BF5J1OSkBHPjfeKIZ3_nyYTbUqlA3svHnpXpVt4_ogyz5AMZ6GAZTSAVe6gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIclbUpLEYg7rLG8ZyWUP4yQRr1g0WsBsd_E8_kT3rG1oN0Y3CCPh2DdWRwgj4fhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/15901/p2p/16Uiu2HAkwMFoDtYR9qSdfj7gkRhXUihQG9Gf8RRuZuxgqAuqTeHs","/ip4/127.0.0.1/tcp/15902/ws/p2p/16Uiu2HAkwMFoDtYR9qSdfj7gkRhXUihQG9Gf8RRuZuxgqAuqTeHs","/ip4/172.17.0.4/tcp/15901/p2p/16Uiu2HAkwMFoDtYR9qSdfj7gkRhXUihQG9Gf8RRuZuxgqAuqTeHs","/ip4/172.17.0.4/tcp/15902/ws/p2p/16Uiu2HAkwMFoDtYR9qSdfj7gkRhXUihQG9Gf8RRuZuxgqAuqTeHs"]}'
2025-02-04 17:28:11.948 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:28:11.948 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15900/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.108.53/tcp/4603/p2p/16Uiu2HAm6BT3iz5KqectEM5stAjPq5siEiE35fr2mBnkmH1Q3GJi", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-04 17:28:11.950 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:28:11.950 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15900/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.154.39/tcp/39525/p2p/16Uiu2HAmAW9yiaDbxs1WQ2vjBi1nJZPeYyC7zhBahtirss1qhDCZ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-04 17:28:11.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:28:11.968 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4602/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:28:11.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:28:11.976 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39524/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-04 17:28:11.978 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:28:11.979 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15900/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738690091979933696}}'
2025-02-04 17:28:31.984 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:28:31.985 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:28:31.985 DEBUG [src.node.waku_node] Stopping container with id c45598eb292c
2025-02-04 17:28:32.501 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:28:32.503 DEBUG [src.node.waku_node] Stopping container with id 98a937d74816
2025-02-04 17:28:33.315 ERROR [src.node.docker_mananger] Max retries reached for container c45598eb292c. Exiting log stream.
2025-02-04 17:28:33.536 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:28:33.536 DEBUG [src.node.waku_node] Stopping container with id 348f82d09af7
2025-02-04 17:28:34.033 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:28:34.034 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:28:34.041 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:28:34.049 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:28:34.052 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
