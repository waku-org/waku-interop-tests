2025-02-04 17:26:29.782 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:26:29.782 DEBUG [tests.conftest] Running test: test_publish_after_node1_restarts with id: 2025-02-04_17-26-29__4e1e07cd-1848-4e23-b649-4939050f8ebb
2025-02-04 17:26:29.782 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:26:29.783 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-04 17:26:29.783 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-04 17:26:29.789 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:26:29.789 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-26-29__4e1e07cd-1848-4e23-b649-4939050f8ebb__wakuorg_nwaku:latest.log
2025-02-04 17:26:29.789 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:26:29.789 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:26:29.791 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:26:29.791 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.188.145
2025-02-04 17:26:29.791 DEBUG [src.node.docker_mananger] Generated ports ['16470', '16471', '16472', '16473', '16474']
2025-02-04 17:26:29.791 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:26:29.791 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:26:29.791 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:26:29.792 DEBUG [src.node.docker_mananger] docker run -i -t -p 16470:16470 -p 16471:16471 -p 16472:16472 -p 16473:16473 -p 16474:16474 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16472 --rest-port=16470 --tcp-port=16471 --discv5-udp-port=16473 --rest-address=0.0.0.0 --nat=extip:172.18.188.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7fb05d06e7dc7b58b746aca7fb7a520c6b9cdefd1e0df8fbd8a60d502dccd7c1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16474 --metrics-logging=true --relay=true
2025-02-04 17:26:30.018 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.188.145 waku f2fe6cce7d00dcab6a2fb6572fb71dd9716a5489c58703f10d492f148b18fd0d
2025-02-04 17:26:30.065 ERROR [src.node.docker_mananger] Max retries reached for container 9fbecb0be37a. Exiting log stream.
2025-02-04 17:26:30.069 DEBUG [src.node.docker_mananger] Container started with ID f2fe6cce7d00. Setting up logs at ./log/docker/node1_2025-02-04_17-26-29__4e1e07cd-1848-4e23-b649-4939050f8ebb__wakuorg_nwaku:latest.log
2025-02-04 17:26:30.069 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16470
2025-02-04 17:26:30.070 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:26:30.581 ERROR [src.node.docker_mananger] Max retries reached for container 612d3870fc68. Exiting log stream.
2025-02-04 17:26:31.071 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:31.074 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:26:31.074 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:26:31.074 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:31.076 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.145/tcp/16471/p2p/16Uiu2HAmVAWMNuBLM2UAe2DvSQMKffstSuG2ZEiug2GUSqjPLmwc","/ip4/172.18.188.145/tcp/16472/ws/p2p/16Uiu2HAmVAWMNuBLM2UAe2DvSQMKffstSuG2ZEiug2GUSqjPLmwc"],"enrUri":"enr:-L24QNbseQ5JTpyppzmymgk2QcceNj3Jmi_u8Xq4T5ybxu3CdHywNcVZSeNZ8cVjx0O2_kFDKBKwB_DwIIY3RUhLZJUCgmlkgnY0gmlwhKwSvJGKbXVsdGlhZGRyc5YACASsEryRBkBXAAoErBK8kQZAWN0DgnJzhQADAQAAiXNlY3AyNTZrMaED9UrB0ocN3GbOJ79rmRxGLHWJC82idTfqhlPYavgPWqeDdGNwgkBXg3VkcIJAWYV3YWt1MgE"}'
2025-02-04 17:26:31.077 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:26:31.083 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:26:31.083 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_17-26-29__4e1e07cd-1848-4e23-b649-4939050f8ebb__wakuorg_go-waku:latest.log
2025-02-04 17:26:31.083 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:26:31.083 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:26:31.085 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:26:31.085 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.98
2025-02-04 17:26:31.085 DEBUG [src.node.docker_mananger] Generated ports ['20844', '20845', '20846', '20847', '20848']
2025-02-04 17:26:31.085 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:26:31.085 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:26:31.085 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:26:31.085 DEBUG [src.node.docker_mananger] docker run -i -t -p 20844:20844 -p 20845:20845 -p 20846:20846 -p 20847:20847 -p 20848:20848 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=20846 --rest-port=20844 --tcp-port=20845 --discv5-udp-port=20847 --rest-address=0.0.0.0 --nat=extip:172.18.205.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf7ebf09d28a2bf7dd4374d5ebc28578d0ba508f7e7c53c6cd57ebee6dd49b82 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QNbseQ5JTpyppzmymgk2QcceNj3Jmi_u8Xq4T5ybxu3CdHywNcVZSeNZ8cVjx0O2_kFDKBKwB_DwIIY3RUhLZJUCgmlkgnY0gmlwhKwSvJGKbXVsdGlhZGRyc5YACASsEryRBkBXAAoErBK8kQZAWN0DgnJzhQADAQAAiXNlY3AyNTZrMaED9UrB0ocN3GbOJ79rmRxGLHWJC82idTfqhlPYavgPWqeDdGNwgkBXg3VkcIJAWYV3YWt1MgE
2025-02-04 17:26:31.318 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.98 waku c555d970c90c5ddd8875a3403b67ad6e175837c14485be1e554688e07d74587e
2025-02-04 17:26:31.367 DEBUG [src.node.docker_mananger] Container started with ID c555d970c90c. Setting up logs at ./log/docker/node2_2025-02-04_17-26-29__4e1e07cd-1848-4e23-b649-4939050f8ebb__wakuorg_go-waku:latest.log
2025-02-04 17:26:31.369 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 20844
2025-02-04 17:26:31.369 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:26:32.369 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20844/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:32.372 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QBBrisILIpsV-Om6nOMGvAl0bfAY63DfKtnyjn8jdN81TaE8oEoGy3f21NXufucY1u_ovBzILcXrYfJ9PEn_TCiGAZTR_9LIgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDldqXLsBPi6the_pTCr46XUnAwjcZdFKyNlcVs8d4tpiDdGNwglFtg3VkcIJRb4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/20845/p2p/16Uiu2HAmNjxRKn2LxqeCXPn7vxTdvymYd1cvv48esRcd5G3zAsxb","/ip4/127.0.0.1/tcp/20846/ws/p2p/16Uiu2HAmNjxRKn2LxqeCXPn7vxTdvymYd1cvv48esRcd5G3zAsxb","/ip4/172.17.0.3/tcp/20845/p2p/16Uiu2HAmNjxRKn2LxqeCXPn7vxTdvymYd1cvv48esRcd5G3zAsxb","/ip4/172.17.0.3/tcp/20846/ws/p2p/16Uiu2HAmNjxRKn2LxqeCXPn7vxTdvymYd1cvv48esRcd5G3zAsxb"]}'
2025-02-04 17:26:32.373 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:26:32.373 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20844/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.188.145/tcp/16471/p2p/16Uiu2HAmVAWMNuBLM2UAe2DvSQMKffstSuG2ZEiug2GUSqjPLmwc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-04 17:26:32.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:26:32.391 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-04 17:26:32.392 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:32.413 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:32.414 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20844/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:32.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:26:32.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:26:32.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:32.423 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:26:32.524 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:26:32.525 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:32.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689992418574592,"ephemeral":false}]'
2025-02-04 17:26:32.529 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-04 17:26:32.529 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:32.531 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:26:33.532 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:26:33.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:33.537 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:26:33.638 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:26:33.638 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:33.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689993532389632,"ephemeral":false}]'
2025-02-04 17:26:33.642 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-04 17:26:33.642 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:33.644 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689993532389632,"ephemeral":false}]'
2025-02-04 17:26:33.646 INFO [src.steps.relay] WARM UP successful!!
2025-02-04 17:26:33.647 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:26:33.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:33.651 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:26:33.752 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:26:33.752 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:33.755 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689993647076352,"ephemeral":false}]'
2025-02-04 17:26:33.757 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-04 17:26:33.757 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:33.759 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689993647076352,"ephemeral":false}]'
2025-02-04 17:26:33.760 DEBUG [src.node.waku_node] Restarting container with id f2fe6cce7d00
2025-02-04 17:26:34.591 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:34.694 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:34.698 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:26:34.698 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:26:34.698 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:34.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.145/tcp/16471/p2p/16Uiu2HAmVAWMNuBLM2UAe2DvSQMKffstSuG2ZEiug2GUSqjPLmwc","/ip4/172.18.188.145/tcp/16472/ws/p2p/16Uiu2HAmVAWMNuBLM2UAe2DvSQMKffstSuG2ZEiug2GUSqjPLmwc"],"enrUri":"enr:-L24QNbseQ5JTpyppzmymgk2QcceNj3Jmi_u8Xq4T5ybxu3CdHywNcVZSeNZ8cVjx0O2_kFDKBKwB_DwIIY3RUhLZJUCgmlkgnY0gmlwhKwSvJGKbXVsdGlhZGRyc5YACASsEryRBkBXAAoErBK8kQZAWN0DgnJzhQADAQAAiXNlY3AyNTZrMaED9UrB0ocN3GbOJ79rmRxGLHWJC82idTfqhlPYavgPWqeDdGNwgkBXg3VkcIJAWYV3YWt1MgE"}'
2025-02-04 17:26:34.700 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:26:34.701 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:34.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:34.719 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20844/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:34.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:26:34.721 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:26:34.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:34.725 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:26:34.825 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:26:34.825 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:34.828 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689994721827584,"ephemeral":false}]'
2025-02-04 17:26:34.829 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-04 17:26:34.830 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:34.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:26:35.832 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:35.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:35.836 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20844/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:35.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:26:35.838 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:26:35.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:35.841 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:26:35.941 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:26:35.942 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:35.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689995838581760,"ephemeral":false}]'
2025-02-04 17:26:35.946 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-04 17:26:35.946 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:35.948 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:26:36.949 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:36.952 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:36.952 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20844/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:36.954 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:26:36.955 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:26:36.957 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:36.958 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:26:37.058 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:26:37.058 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:37.061 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689996955011328,"ephemeral":false}]'
2025-02-04 17:26:37.062 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-04 17:26:37.063 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:37.064 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:26:38.065 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:38.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:38.069 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20844/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:38.070 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:26:38.071 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:26:38.074 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:38.074 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:26:38.174 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:26:38.175 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:38.178 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689998071354624,"ephemeral":false}]'
2025-02-04 17:26:38.179 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-04 17:26:38.179 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:38.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:26:39.182 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:39.186 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:39.186 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20844/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:26:39.188 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:26:39.188 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:26:39.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:26:39.193 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-04 17:26:39.293 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-04 17:26:39.293 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16470/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:39.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689999188630016,"ephemeral":false}]'
2025-02-04 17:26:39.297 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-04 17:26:39.298 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20844/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:39.299 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738689999188630016,"ephemeral":false}]'
2025-02-04 17:26:39.303 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:26:39.304 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:26:39.304 DEBUG [src.node.waku_node] Stopping container with id f2fe6cce7d00
2025-02-04 17:26:39.869 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:26:39.870 DEBUG [src.node.waku_node] Stopping container with id c555d970c90c
2025-02-04 17:26:40.380 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:26:40.382 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:26:40.404 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:26:40.408 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
