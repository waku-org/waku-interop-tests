2025-02-04 17:24:09.196 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:24:09.196 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-04_17-24-09__40b96275-f6f0-45b9-be41-0a436a2f56ab
2025-02-04 17:24:09.197 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:24:09.197 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-04 17:24:09.197 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:24:09.206 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:24:09.206 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-24-09__40b96275-f6f0-45b9-be41-0a436a2f56ab__wakuorg_go-waku:latest.log
2025-02-04 17:24:09.211 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:24:09.212 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_17-24-09__40b96275-f6f0-45b9-be41-0a436a2f56ab__wakuorg_nwaku:latest.log
2025-02-04 17:24:09.217 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:24:09.217 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-04_17-24-09__40b96275-f6f0-45b9-be41-0a436a2f56ab__wakuorg_go-waku:latest.log
2025-02-04 17:24:09.217 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-04 17:24:09.217 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:24:09.218 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:24:09.218 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:24:09.281 DEBUG [src.node.docker_mananger] Network waku created
2025-02-04 17:24:09.282 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.105
2025-02-04 17:24:09.282 DEBUG [src.node.docker_mananger] Generated ports ['3039', '3040', '3041', '3042', '3043']
2025-02-04 17:24:09.282 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:24:09.282 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:24:09.282 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:24:09.282 DEBUG [src.node.docker_mananger] docker run -i -t -p 3039:3039 -p 3040:3040 -p 3041:3041 -p 3042:3042 -p 3043:3043 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3041 --rest-port=3039 --tcp-port=3040 --discv5-udp-port=3042 --rest-address=0.0.0.0 --nat=extip:172.18.187.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9cb93ca0fefb7dc1bafbea822fd52e6193bfabdbbc7fe58dcbd3aa98adbf3d9d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-04 17:24:12.658 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.105 waku a9806c713e2efc500b86ac405abc34557595db1f563c6944d5abbd614023ee03
2025-02-04 17:24:12.711 DEBUG [src.node.docker_mananger] Container started with ID a9806c713e2e. Setting up logs at ./log/docker/node1_2025-02-04_17-24-09__40b96275-f6f0-45b9-be41-0a436a2f56ab__wakuorg_go-waku:latest.log
2025-02-04 17:24:12.712 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 3039
2025-02-04 17:24:12.715 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:13.719 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3039/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:13.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QDyBYcsJh954QEiw8PDdg_Y5GkK9Y3ZD-CYUWnV102LEdeZ2SlQO6mtl2H_F8QvAh6jlVZLjbaPs9dBpzHkXRYKGAZTR_bUhgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaED3d-sz43B0TKJSk_CmER-vXr91Ke76xa0Uo2BezNc6kCDdGNwggvgg3VkcIIL4oV3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/3040/p2p/16Uiu2HAmTb6GgV2RcUwawCUGw2iMTy8FMjozKEXgWjp6u37eoTDZ","/ip4/127.0.0.1/tcp/3041/ws/p2p/16Uiu2HAmTb6GgV2RcUwawCUGw2iMTy8FMjozKEXgWjp6u37eoTDZ","/ip4/172.17.0.2/tcp/3040/p2p/16Uiu2HAmTb6GgV2RcUwawCUGw2iMTy8FMjozKEXgWjp6u37eoTDZ","/ip4/172.17.0.2/tcp/3041/ws/p2p/16Uiu2HAmTb6GgV2RcUwawCUGw2iMTy8FMjozKEXgWjp6u37eoTDZ"]}'
2025-02-04 17:24:13.722 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:24:13.722 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:24:13.722 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:24:13.723 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:24:13.723 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.97
2025-02-04 17:24:13.724 DEBUG [src.node.docker_mananger] Generated ports ['43249', '43250', '43251', '43252', '43253']
2025-02-04 17:24:13.724 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:24:13.724 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:24:13.724 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:24:13.724 DEBUG [src.node.docker_mananger] docker run -i -t -p 43249:43249 -p 43250:43250 -p 43251:43251 -p 43252:43252 -p 43253:43253 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43251 --rest-port=43249 --tcp-port=43250 --discv5-udp-port=43252 --rest-address=0.0.0.0 --nat=extip:172.18.44.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdcfa534beba6ff40b5d18756e2ccaeadf35f0eafdeaad80731eb2a655c29a60 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43253 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QDyBYcsJh954QEiw8PDdg_Y5GkK9Y3ZD-CYUWnV102LEdeZ2SlQO6mtl2H_F8QvAh6jlVZLjbaPs9dBpzHkXRYKGAZTR_bUhgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaED3d-sz43B0TKJSk_CmER-vXr91Ke76xa0Uo2BezNc6kCDdGNwggvgg3VkcIIL4oV3YWt1Mgk --lightpushnode=/ip4/172.18.187.105/tcp/3040/p2p/16Uiu2HAmTb6GgV2RcUwawCUGw2iMTy8FMjozKEXgWjp6u37eoTDZ
2025-02-04 17:24:16.525 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.97 waku 6febb8f0c47c7536891a088249e72ffe01f1e26510c2d37cfa0f0c497bd8e235
2025-02-04 17:24:16.580 DEBUG [src.node.docker_mananger] Container started with ID 6febb8f0c47c. Setting up logs at ./log/docker/node2_2025-02-04_17-24-09__40b96275-f6f0-45b9-be41-0a436a2f56ab__wakuorg_nwaku:latest.log
2025-02-04 17:24:16.582 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43249
2025-02-04 17:24:16.584 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:17.586 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43249/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:17.588 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:24:17.589 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:24:17.589 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43249/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:17.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.97/tcp/43250/p2p/16Uiu2HAm93SxVyRMQLpiBkfACP5sA1B7rzVFQDciorreVwvjr937","/ip4/172.18.44.97/tcp/43251/ws/p2p/16Uiu2HAm93SxVyRMQLpiBkfACP5sA1B7rzVFQDciorreVwvjr937"],"enrUri":"enr:-L24QKIyrvIPoNg6H2vKdIOhQ4KMEUZU009EbUlg8F8JyTDRfw6bbkIZNt6_c3w7MlR1rIqWa0aU1Q6QM8yTauT7QfgCgmlkgnY0gmlwhKwSLGGKbXVsdGlhZGRyc5YACASsEixhBqjyAAoErBIsYQao890DgnJzhQADAQAAiXNlY3AyNTZrMaECylIdZFUzw3nJg0a6HIok7MpZwemN0BeSZ4JKPxa0pIKDdGNwgqjyg3VkcIKo9IV3YWt1Mgs"}'
2025-02-04 17:24:17.591 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:24:17.591 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:24:17.591 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:24:17.593 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:24:17.593 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.4.111
2025-02-04 17:24:17.593 DEBUG [src.node.docker_mananger] Generated ports ['56391', '56392', '56393', '56394', '56395']
2025-02-04 17:24:17.593 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:24:17.594 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:24:17.594 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:24:17.594 DEBUG [src.node.docker_mananger] docker run -i -t -p 56391:56391 -p 56392:56392 -p 56393:56393 -p 56394:56394 -p 56395:56395 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=56393 --rest-port=56391 --tcp-port=56392 --discv5-udp-port=56394 --rest-address=0.0.0.0 --nat=extip:172.18.4.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0d5fb420a030e6abcc73d9fde615d4b44a41bef9babd8bc1ef8c5bd33540c0b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.44.97/tcp/43250/p2p/16Uiu2HAm93SxVyRMQLpiBkfACP5sA1B7rzVFQDciorreVwvjr937 --discv5-bootstrap-node=enr:-L24QKIyrvIPoNg6H2vKdIOhQ4KMEUZU009EbUlg8F8JyTDRfw6bbkIZNt6_c3w7MlR1rIqWa0aU1Q6QM8yTauT7QfgCgmlkgnY0gmlwhKwSLGGKbXVsdGlhZGRyc5YACASsEixhBqjyAAoErBIsYQao890DgnJzhQADAQAAiXNlY3AyNTZrMaECylIdZFUzw3nJg0a6HIok7MpZwemN0BeSZ4JKPxa0pIKDdGNwgqjyg3VkcIKo9IV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-04 17:24:17.818 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.4.111 waku 05fa4c460607cd8d8f185d4188bd8b3025ca0b3bdb082da33ada2c8c3cfc0511
2025-02-04 17:24:17.878 DEBUG [src.node.docker_mananger] Container started with ID 05fa4c460607. Setting up logs at ./log/docker/node3_2025-02-04_17-24-09__40b96275-f6f0-45b9-be41-0a436a2f56ab__wakuorg_go-waku:latest.log
2025-02-04 17:24:17.878 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 56391
2025-02-04 17:24:17.878 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:18.879 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56391/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:18.881 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QOY447ds7kE4UjYf92IuvRrr9_QUjAwGkSWuz9mM_iDtJjdxutJbJ7Dk_7ggLkxmXNhkAZ9KZuD2MfSY2ikNoCyGAZTR_clHgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIHMHNEK2xt9udDGwSURY8Yw9lYyAFXmKzig6nzrj9VRIN0Y3CC3EiDdWRwgtxKhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/56392/p2p/16Uiu2HAkuujgbgY4ChxW9vGxf4kyhefBAuqV4eJXemUztKjrhamR","/ip4/127.0.0.1/tcp/56393/ws/p2p/16Uiu2HAkuujgbgY4ChxW9vGxf4kyhefBAuqV4eJXemUztKjrhamR","/ip4/172.17.0.4/tcp/56392/p2p/16Uiu2HAkuujgbgY4ChxW9vGxf4kyhefBAuqV4eJXemUztKjrhamR","/ip4/172.17.0.4/tcp/56393/ws/p2p/16Uiu2HAkuujgbgY4ChxW9vGxf4kyhefBAuqV4eJXemUztKjrhamR"]}'
2025-02-04 17:24:18.881 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:24:18.882 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3039/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:24:18.884 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:24:18.885 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43249/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:24:18.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:24:18.888 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3039/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:18.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAm93SxVyRMQLpiBkfACP5sA1B7rzVFQDciorreVwvjr937","multiaddrs":["/ip4/172.18.44.97/tcp/43250/p2p/16Uiu2HAm93SxVyRMQLpiBkfACP5sA1B7rzVFQDciorreVwvjr937","/ip4/172.18.44.97/tcp/43251/ws/p2p/16Uiu2HAm93SxVyRMQLpiBkfACP5sA1B7rzVFQDciorreVwvjr937"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-04 17:24:18.890 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43249/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:18.893 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/56392/p2p/16Uiu2HAkuujgbgY4ChxW9vGxf4kyhefBAuqV4eJXemUztKjrhamR","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-04 17:24:18.893 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-04 17:24:48.894 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3039/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1738689888894059776}}'
2025-02-04 17:24:48.902 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:24:48.902 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:49.903 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-04 17:24:49.903 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56391/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:49.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"37b447e6522c8a6143cbea50c45c2d78ab81a96420422cd2af3dfcca6321b78d","status_code":200,"status_desc":"OK","messages":[{"message_hash":"wQuIxDuCgQmKpYvy71CYQ2M+sGKmiZkk8N02Dx3ziAY="}]}'
2025-02-04 17:24:49.912 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:24:49.913 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:24:49.913 DEBUG [src.node.waku_node] Stopping container with id a9806c713e2e
2025-02-04 17:24:50.433 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:24:50.433 DEBUG [src.node.waku_node] Stopping container with id 6febb8f0c47c
2025-02-04 17:24:51.236 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:24:51.238 DEBUG [src.node.waku_node] Stopping container with id 05fa4c460607
2025-02-04 17:24:51.245 ERROR [src.node.docker_mananger] Max retries reached for container a9806c713e2e. Exiting log stream.
2025-02-04 17:24:51.725 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:24:51.727 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:24:51.734 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:24:51.748 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:24:51.751 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
