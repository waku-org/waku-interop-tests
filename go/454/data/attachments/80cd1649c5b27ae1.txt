2025-02-04 17:26:12.332 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:26:12.333 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_with_invalid_pubsub_topic_format with id: 2025-02-04_17-26-12__a657c7bc-5c76-4740-bcb9-860db476d1de
2025-02-04 17:26:12.333 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:26:12.333 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-04 17:26:12.333 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-04 17:26:12.339 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:26:12.340 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-26-12__a657c7bc-5c76-4740-bcb9-860db476d1de__wakuorg_nwaku:latest.log
2025-02-04 17:26:12.340 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:26:12.340 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:26:12.341 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:26:12.341 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.216.131
2025-02-04 17:26:12.341 DEBUG [src.node.docker_mananger] Generated ports ['32066', '32067', '32068', '32069', '32070']
2025-02-04 17:26:12.341 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:26:12.342 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:26:12.342 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:26:12.342 DEBUG [src.node.docker_mananger] docker run -i -t -p 32066:32066 -p 32067:32067 -p 32068:32068 -p 32069:32069 -p 32070:32070 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32068 --rest-port=32066 --tcp-port=32067 --discv5-udp-port=32069 --rest-address=0.0.0.0 --nat=extip:172.18.216.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9e6a8c216fa9f4951b555eeaecfedebcaedabeae9bcc302cfb1b8a5e1baeb78 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32070 --metrics-logging=true --relay=true
2025-02-04 17:26:12.569 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.216.131 waku 2f609d665521fc924a4feca173a65202192960cae0ba003b7acf02629f1a10b8
2025-02-04 17:26:12.619 DEBUG [src.node.docker_mananger] Container started with ID 2f609d665521. Setting up logs at ./log/docker/node1_2025-02-04_17-26-12__a657c7bc-5c76-4740-bcb9-860db476d1de__wakuorg_nwaku:latest.log
2025-02-04 17:26:12.621 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32066
2025-02-04 17:26:12.621 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:26:13.133 ERROR [src.node.docker_mananger] Max retries reached for container 9eeabfbdface. Exiting log stream.
2025-02-04 17:26:13.621 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32066/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:13.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:26:13.624 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:26:13.624 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32066/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:13.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.131/tcp/32067/p2p/16Uiu2HAm5YRXnhNYfmTSFJyu8yVZqtjkj1QNVoQZPnWgUBZ4d2GX","/ip4/172.18.216.131/tcp/32068/ws/p2p/16Uiu2HAm5YRXnhNYfmTSFJyu8yVZqtjkj1QNVoQZPnWgUBZ4d2GX"],"enrUri":"enr:-L24QGrTIbeU4JEeWJq9koiaUVrknS1jbC3hNqQucJ__YRx3RA0vF-VfShSvA8gU_pmiXsEqxAlc8iWl_AmM48f4qiMCgmlkgnY0gmlwhKwS2IOKbXVsdGlhZGRyc5YACASsEtiDBn1DAAoErBLYgwZ9RN0DgnJzhQADAQAAiXNlY3AyNTZrMaEClk-ZHhLwVKj_MHxzl31lyXnZ_Id-SkU2y68M4vns8HiDdGNwgn1Dg3VkcIJ9RYV3YWt1MgE"}'
2025-02-04 17:26:13.626 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:26:13.632 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:26:13.632 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_17-26-12__a657c7bc-5c76-4740-bcb9-860db476d1de__wakuorg_go-waku:latest.log
2025-02-04 17:26:13.633 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:26:13.633 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:26:13.634 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:26:13.634 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.218.170
2025-02-04 17:26:13.634 DEBUG [src.node.docker_mananger] Generated ports ['3398', '3399', '3400', '3401', '3402']
2025-02-04 17:26:13.635 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:26:13.635 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:26:13.635 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:26:13.635 DEBUG [src.node.docker_mananger] docker run -i -t -p 3398:3398 -p 3399:3399 -p 3400:3400 -p 3401:3401 -p 3402:3402 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3400 --rest-port=3398 --tcp-port=3399 --discv5-udp-port=3401 --rest-address=0.0.0.0 --nat=extip:172.18.218.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b12b95a3d4dac93be35b185a2acaaf1af5e091fdbf5c209a6df36ffd51b3ab46 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QGrTIbeU4JEeWJq9koiaUVrknS1jbC3hNqQucJ__YRx3RA0vF-VfShSvA8gU_pmiXsEqxAlc8iWl_AmM48f4qiMCgmlkgnY0gmlwhKwS2IOKbXVsdGlhZGRyc5YACASsEtiDBn1DAAoErBLYgwZ9RN0DgnJzhQADAQAAiXNlY3AyNTZrMaEClk-ZHhLwVKj_MHxzl31lyXnZ_Id-SkU2y68M4vns8HiDdGNwgn1Dg3VkcIJ9RYV3YWt1MgE
2025-02-04 17:26:13.860 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.218.170 waku 78185785e68f78ddf267b6ec0016eb92b407266cb8e3b6fb94c4ed704c6ece4d
2025-02-04 17:26:13.914 DEBUG [src.node.docker_mananger] Container started with ID 78185785e68f. Setting up logs at ./log/docker/node2_2025-02-04_17-26-12__a657c7bc-5c76-4740-bcb9-860db476d1de__wakuorg_go-waku:latest.log
2025-02-04 17:26:13.916 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 3398
2025-02-04 17:26:13.917 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:26:14.919 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3398/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:26:14.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPgNEpHHDviaMb8-0AgtxuJAzCJBzC_pYiGkXoD-wewHRWhze7hSGChvu_mb8GOIOsG06jd8-K8GNC8ZTxLnJUaGAZTR_46QgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDeYQQFAN_6vIV5G3Eo7IVlP2dOjkdu0kZasNTSTe5HpyDdGNwgg1Hg3VkcIINSYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/3399/p2p/16Uiu2HAmLqLUjrJH4mGDN5TdqbpJjdPK3ViP4QP9rrqSB3nosDMM","/ip4/127.0.0.1/tcp/3400/ws/p2p/16Uiu2HAmLqLUjrJH4mGDN5TdqbpJjdPK3ViP4QP9rrqSB3nosDMM","/ip4/172.17.0.3/tcp/3399/p2p/16Uiu2HAmLqLUjrJH4mGDN5TdqbpJjdPK3ViP4QP9rrqSB3nosDMM","/ip4/172.17.0.3/tcp/3400/ws/p2p/16Uiu2HAmLqLUjrJH4mGDN5TdqbpJjdPK3ViP4QP9rrqSB3nosDMM"]}'
2025-02-04 17:26:14.921 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:26:14.922 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3398/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.216.131/tcp/32067/p2p/16Uiu2HAm5YRXnhNYfmTSFJyu8yVZqtjkj1QNVoQZPnWgUBZ4d2GX", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-04 17:26:14.940 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-04 17:26:14.942 DEBUG [tests.relay.test_subscribe] Running test with payload /test/2/rs/0/1
2025-02-04 17:26:14.942 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:32066/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/test/2/rs/0/1"'
2025-02-04 17:26:14.966 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32066/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-04 17:26:14.967 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/3/rs/0/1
2025-02-04 17:26:14.967 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:32066/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/3/rs/0/1"'
2025-02-04 17:26:14.970 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32066/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-04 17:26:14.970 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/test/0/1
2025-02-04 17:26:14.971 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:32066/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/test/0/1"'
2025-02-04 17:26:14.973 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32066/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-04 17:26:14.974 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/3/b
2025-02-04 17:26:14.975 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:32066/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/3/b"'
2025-02-04 17:26:14.977 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32066/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-04 17:26:14.978 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/0
2025-02-04 17:26:14.979 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:32066/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/0"'
2025-02-04 17:26:14.981 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32066/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-04 17:26:14.984 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:26:14.985 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:26:14.985 DEBUG [src.node.waku_node] Stopping container with id 2f609d665521
2025-02-04 17:26:15.496 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:26:15.496 DEBUG [src.node.waku_node] Stopping container with id 78185785e68f
2025-02-04 17:26:16.308 ERROR [src.node.docker_mananger] Max retries reached for container 2f609d665521. Exiting log stream.
2025-02-04 17:26:16.417 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:26:16.419 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:26:16.422 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:26:16.424 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
