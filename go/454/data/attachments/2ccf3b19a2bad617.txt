2025-02-04 17:24:12.126 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-04 17:24:12.127 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-04_17-24-12__58cd3ad1-bfa1-4d61-976b-312f566d6ae5
2025-02-04 17:24:12.127 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-04 17:24:12.127 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-04 17:24:12.128 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-04 17:24:12.136 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:24:12.136 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_17-24-12__58cd3ad1-bfa1-4d61-976b-312f566d6ae5__wakuorg_go-waku:latest.log
2025-02-04 17:24:12.142 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-04 17:24:12.142 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_17-24-12__58cd3ad1-bfa1-4d61-976b-312f566d6ae5__wakuorg_nwaku:latest.log
2025-02-04 17:24:12.148 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-04 17:24:12.148 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-04_17-24-12__58cd3ad1-bfa1-4d61-976b-312f566d6ae5__wakuorg_go-waku:latest.log
2025-02-04 17:24:12.148 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-04 17:24:12.149 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-04 17:24:12.149 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:24:12.150 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:24:12.216 DEBUG [src.node.docker_mananger] Network waku created
2025-02-04 17:24:12.217 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.1
2025-02-04 17:24:12.217 DEBUG [src.node.docker_mananger] Generated ports ['42225', '42226', '42227', '42228', '42229']
2025-02-04 17:24:12.217 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:24:12.217 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:24:12.217 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:24:12.217 DEBUG [src.node.docker_mananger] docker run -i -t -p 42225:42225 -p 42226:42226 -p 42227:42227 -p 42228:42228 -p 42229:42229 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=42227 --rest-port=42225 --tcp-port=42226 --discv5-udp-port=42228 --rest-address=0.0.0.0 --nat=extip:172.18.53.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f1caa71eafa748b90a82ba1eacefe498cf5bdcb2cafb19bfaccffb8d3d722b47 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-04 17:24:15.414 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.1 waku eb229b2e760b2f75da12c4a790528149e5e14e613b85381f6c2a7d57c85dad4b
2025-02-04 17:24:15.474 DEBUG [src.node.docker_mananger] Container started with ID eb229b2e760b. Setting up logs at ./log/docker/node1_2025-02-04_17-24-12__58cd3ad1-bfa1-4d61-976b-312f566d6ae5__wakuorg_go-waku:latest.log
2025-02-04 17:24:15.477 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 42225
2025-02-04 17:24:15.477 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:16.478 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42225/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:16.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QKSRJtkGkgOY3s_v8BbqBeoMsASskoXdM-ckgTHyRONGTh1M6dvIV5znedev4LKE3Qjhi-U0qqEzPIylckk4LKWGAZTR_b_hgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECAGVGNuH5hVJNYaZuRhglBB_PMgg90ihtWReQzYh08XqDdGNwgqTyg3VkcIKk9IV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/42226/p2p/16Uiu2HAkuTDYhzDyd1WwxnrAiaLcsH81enSAyoL6ovwhWYZdPFRb","/ip4/127.0.0.1/tcp/42227/ws/p2p/16Uiu2HAkuTDYhzDyd1WwxnrAiaLcsH81enSAyoL6ovwhWYZdPFRb","/ip4/172.17.0.2/tcp/42226/p2p/16Uiu2HAkuTDYhzDyd1WwxnrAiaLcsH81enSAyoL6ovwhWYZdPFRb","/ip4/172.17.0.2/tcp/42227/ws/p2p/16Uiu2HAkuTDYhzDyd1WwxnrAiaLcsH81enSAyoL6ovwhWYZdPFRb"]}'
2025-02-04 17:24:16.481 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:24:16.481 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:24:16.482 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:24:16.483 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:24:16.483 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.98.204
2025-02-04 17:24:16.483 DEBUG [src.node.docker_mananger] Generated ports ['52523', '52524', '52525', '52526', '52527']
2025-02-04 17:24:16.484 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:24:16.484 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:24:16.484 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:24:16.484 DEBUG [src.node.docker_mananger] docker run -i -t -p 52523:52523 -p 52524:52524 -p 52525:52525 -p 52526:52526 -p 52527:52527 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52525 --rest-port=52523 --tcp-port=52524 --discv5-udp-port=52526 --rest-address=0.0.0.0 --nat=extip:172.18.98.204 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbd0ee00e3a2dd28cdccfebffbdab78bb0bee9fdb0b095ffccdef7ecaaaee7df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52527 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QKSRJtkGkgOY3s_v8BbqBeoMsASskoXdM-ckgTHyRONGTh1M6dvIV5znedev4LKE3Qjhi-U0qqEzPIylckk4LKWGAZTR_b_hgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECAGVGNuH5hVJNYaZuRhglBB_PMgg90ihtWReQzYh08XqDdGNwgqTyg3VkcIKk9IV3YWt1MgE
2025-02-04 17:24:19.210 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.98.204 waku f7c63fa7efc05839b7a644c221367d29671cd62b9565d54340e144f21588993f
2025-02-04 17:24:19.261 DEBUG [src.node.docker_mananger] Container started with ID f7c63fa7efc0. Setting up logs at ./log/docker/node2_2025-02-04_17-24-12__58cd3ad1-bfa1-4d61-976b-312f566d6ae5__wakuorg_nwaku:latest.log
2025-02-04 17:24:19.262 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52523
2025-02-04 17:24:19.262 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:20.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52523/health" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:20.266 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-04 17:24:20.266 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-04 17:24:20.266 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52523/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:20.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.204/tcp/52524/p2p/16Uiu2HAm8PyYR28QYg57X2zXXzfBw4BUPkhbSBw5zWmhDxZ7PBWR","/ip4/172.18.98.204/tcp/52525/ws/p2p/16Uiu2HAm8PyYR28QYg57X2zXXzfBw4BUPkhbSBw5zWmhDxZ7PBWR"],"enrUri":"enr:-L24QBEdODpUi1-Ugbdrxxxd9GJ7zFfXuG_qtoUTCQ4-o_nEVNM7jwXaOuosa4pvrEg2_g4x8fnbW3ejmZKYl5xAbSQCgmlkgnY0gmlwhKwSYsyKbXVsdGlhZGRyc5YACASsEmLMBs0sAAoErBJizAbNLd0DgnJzhQADAQAAiXNlY3AyNTZrMaECwLigV5yUImOqRw_pGUByboBOvL2iuIgovPmfYVNtnaKDdGNwgs0sg3VkcILNLoV3YWt1MgM"}'
2025-02-04 17:24:20.268 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:24:20.269 DEBUG [src.node.waku_node] Starting Node...
2025-02-04 17:24:20.270 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-04 17:24:20.274 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-04 17:24:20.274 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.195.39
2025-02-04 17:24:20.274 DEBUG [src.node.docker_mananger] Generated ports ['3256', '3257', '3258', '3259', '3260']
2025-02-04 17:24:20.275 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-04 17:24:20.276 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-04 17:24:20.276 DEBUG [src.node.waku_node] Using volumes []
2025-02-04 17:24:20.276 DEBUG [src.node.docker_mananger] docker run -i -t -p 3256:3256 -p 3257:3257 -p 3258:3258 -p 3259:3259 -p 3260:3260 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3258 --rest-port=3256 --tcp-port=3257 --discv5-udp-port=3259 --rest-address=0.0.0.0 --nat=extip:172.18.195.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adb757cbd7ecbd9e270b7f1d1c1fcb8cc0f4a00cb0bcfe98a34836335fb2dcef --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.98.204/tcp/52524/p2p/16Uiu2HAm8PyYR28QYg57X2zXXzfBw4BUPkhbSBw5zWmhDxZ7PBWR --discv5-bootstrap-node=enr:-L24QBEdODpUi1-Ugbdrxxxd9GJ7zFfXuG_qtoUTCQ4-o_nEVNM7jwXaOuosa4pvrEg2_g4x8fnbW3ejmZKYl5xAbSQCgmlkgnY0gmlwhKwSYsyKbXVsdGlhZGRyc5YACASsEmLMBs0sAAoErBJizAbNLd0DgnJzhQADAQAAiXNlY3AyNTZrMaECwLigV5yUImOqRw_pGUByboBOvL2iuIgovPmfYVNtnaKDdGNwgs0sg3VkcILNLoV3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
2025-02-04 17:24:20.541 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.195.39 waku 49d73a63002ef32924cca1c17f8aa80c74099816c1a4b78bc1da8d566de85f23
2025-02-04 17:24:20.589 DEBUG [src.node.docker_mananger] Container started with ID 49d73a63002e. Setting up logs at ./log/docker/node3_2025-02-04_17-24-12__58cd3ad1-bfa1-4d61-976b-312f566d6ae5__wakuorg_go-waku:latest.log
2025-02-04 17:24:20.590 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 3256
2025-02-04 17:24:20.590 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-04 17:24:21.591 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3256/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:21.593 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QPKVZpObIPek6qiW-XKg1_PZe0cJCMa9Yu65Jf7Tf6RIHhY5k2IobEF3GGr4UqcUX4UXPomQ_IqebopkTRcxzzmGAZTR_dPsgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIzxJvv-rdmTeBGycgzHzp185Q0v_LkEOxch6R3NKmU9oN0Y3CCDLmDdWRwggy7hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/3257/p2p/16Uiu2HAkxukevfEgfZ7rqedtzwkj14JSCbA5piX39qvSsTkMAA8M","/ip4/127.0.0.1/tcp/3258/ws/p2p/16Uiu2HAkxukevfEgfZ7rqedtzwkj14JSCbA5piX39qvSsTkMAA8M","/ip4/172.17.0.4/tcp/3257/p2p/16Uiu2HAkxukevfEgfZ7rqedtzwkj14JSCbA5piX39qvSsTkMAA8M","/ip4/172.17.0.4/tcp/3258/ws/p2p/16Uiu2HAkxukevfEgfZ7rqedtzwkj14JSCbA5piX39qvSsTkMAA8M"]}'
2025-02-04 17:24:21.594 INFO [src.node.waku_node] REST service is ready !!
2025-02-04 17:24:21.594 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42225/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:24:21.596 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:24:21.597 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52523/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-04 17:24:21.600 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-04 17:24:21.601 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42225/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:21.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAm8PyYR28QYg57X2zXXzfBw4BUPkhbSBw5zWmhDxZ7PBWR","multiaddrs":["/ip4/172.18.98.204/tcp/52524/p2p/16Uiu2HAm8PyYR28QYg57X2zXXzfBw4BUPkhbSBw5zWmhDxZ7PBWR","/ip4/172.18.98.204/tcp/52525/ws/p2p/16Uiu2HAm8PyYR28QYg57X2zXXzfBw4BUPkhbSBw5zWmhDxZ7PBWR"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-04 17:24:21.603 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52523/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:21.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/3257/p2p/16Uiu2HAkxukevfEgfZ7rqedtzwkj14JSCbA5piX39qvSsTkMAA8M","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-04 17:24:21.605 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-04 17:24:51.606 DEBUG [src.steps.store] Relaying message
2025-02-04 17:24:51.606 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42225/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-04 17:24:51.608 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-04 17:24:51.609 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-04 17:24:51.811 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-04 17:24:51.811 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3256/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-04 17:24:51.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"d95568bd78ef83b35b76a479e0f1eda703cdb5d49481d97c7bf969dc84f761ca","status_code":200,"status_desc":"OK","messages":[{"message_hash":"7LnvoHBtvUP27xSmPmOnlQY2JWbQWt1RAPz69+VDxls="}]}'
2025-02-04 17:24:51.820 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-04 17:24:51.821 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-04 17:24:51.821 DEBUG [src.node.waku_node] Stopping container with id eb229b2e760b
2025-02-04 17:24:52.325 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:24:52.325 DEBUG [src.node.waku_node] Stopping container with id f7c63fa7efc0
2025-02-04 17:24:52.882 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:24:52.883 DEBUG [src.node.waku_node] Stopping container with id 49d73a63002e
2025-02-04 17:24:53.138 ERROR [src.node.docker_mananger] Max retries reached for container eb229b2e760b. Exiting log stream.
2025-02-04 17:24:53.386 DEBUG [src.node.waku_node] Container stopped.
2025-02-04 17:24:53.388 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-04 17:24:53.393 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:24:53.404 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-04 17:24:53.407 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
