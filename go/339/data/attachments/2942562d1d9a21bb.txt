[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_last_node_to_start_publishes with id: 2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:34 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.39.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55128', '55129', '55130', '55131', '55132']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55128:55128 -p 55129:55129 -p 55130:55130 -p 55131:55131 -p 55132:55132 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55130 --rest-port=55128 --tcp-port=55129 --discv5-udp-port=55131 --rest-address=0.0.0.0 --nat=extip:172.18.39.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1afbb2180c2e290caa5ad63125446bed621ec2b2eed7aba94abfbe96ad464ee0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55132 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.39.149 waku a3978759249f55435350bba5aff57d7f95d22daf2c6ba38ad8f6c249030014a0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a3978759249f. Setting up logs at ./log/docker/node1_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55128
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e3815f5590c0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55128/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55128/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.149/tcp/55129/p2p/16Uiu2HAmNZxEAwDqv1jVDRY4ofmnkGdJjak9mPZLRa6TytQYXynu","/ip4/172.18.39.149/tcp/55130/ws/p2p/16Uiu2HAmNZxEAwDqv1jVDRY4ofmnkGdJjak9mPZLRa6TytQYXynu"],"enrUri":"enr:-L24QKBLdV0rlFtJONEyLSX0MmyDlKukkjdFk0u-nF_MO3p8Y7Ng_6LK0sklh6ns64jXBEBLb1RvHHBJwu2-XK_rfdMCgmlkgnY0gmlwhKwSJ5WKbXVsdGlhZGRyc5YACASsEieVBtdZAAoErBInlQbXWt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDk0qQpyuVpMNpa2VW8FMsf4gqF0JJjZ9THd52DUJcPAaDdGNwgtdZg3VkcILXW4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.242.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29429', '29430', '29431', '29432', '29433']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29429:29429 -p 29430:29430 -p 29431:29431 -p 29432:29432 -p 29433:29433 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29431 --rest-port=29429 --tcp-port=29430 --discv5-udp-port=29432 --rest-address=0.0.0.0 --nat=extip:172.18.242.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2fa096fabbedcdcdc5a66ef3b9b03dcbbdf92005ecec9fd21b0cfc6fcf74f79a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QKBLdV0rlFtJONEyLSX0MmyDlKukkjdFk0u-nF_MO3p8Y7Ng_6LK0sklh6ns64jXBEBLb1RvHHBJwu2-XK_rfdMCgmlkgnY0gmlwhKwSJ5WKbXVsdGlhZGRyc5YACASsEieVBtdZAAoErBInlQbXWt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDk0qQpyuVpMNpa2VW8FMsf4gqF0JJjZ9THd52DUJcPAaDdGNwgtdZg3VkcILXW4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.242.188 waku a3a88292ae4188c8e5d452a45afed70aee0849bc88d5e28f51afd57161c352b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a3a88292ae41. Setting up logs at ./log/docker/node2_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 29429
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29429/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QAaAk-RxJgpuVhUvd7oV015LFapUJ57_GkDvjMGfJz-YbMfvPoXktd2O6CQVctUaptAH4CHWIE95PVBpe2fRGI-GAZMCQyqOgmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQNPtNB7zpi-IcFcaChACUHrayk6FpKBanrIN_xZUZY9YoN0Y3CCcvaDdWRwgnL4hXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/29430/p2p/16Uiu2HAmJ28UKmf4BuxNFaRNPBeimxAfcVizEGkjgpVG7to8Zkwj","/ip4/127.0.0.1/tcp/29431/ws/p2p/16Uiu2HAmJ28UKmf4BuxNFaRNPBeimxAfcVizEGkjgpVG7to8Zkwj","/ip4/172.17.0.8/tcp/29430/p2p/16Uiu2HAmJ28UKmf4BuxNFaRNPBeimxAfcVizEGkjgpVG7to8Zkwj","/ip4/172.17.0.8/tcp/29431/ws/p2p/16Uiu2HAmJ28UKmf4BuxNFaRNPBeimxAfcVizEGkjgpVG7to8Zkwj"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29429/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.39.149/tcp/55129/p2p/16Uiu2HAmNZxEAwDqv1jVDRY4ofmnkGdJjak9mPZLRa6TytQYXynu", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.relay:relay.py:46 Running fixture setup: setup_optional_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.15.21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59158', '59159', '59160', '59161', '59162']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59158:59158 -p 59159:59159 -p 59160:59160 -p 59161:59161 -p 59162:59162 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59160 --rest-port=59158 --tcp-port=59159 --discv5-udp-port=59161 --rest-address=0.0.0.0 --nat=extip:172.18.15.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=00ee1e8bdfaf4bdfaaadf8cb8a898f97b9e2174db89ecf0690f00c6f2cbdbb05 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59162 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKBLdV0rlFtJONEyLSX0MmyDlKukkjdFk0u-nF_MO3p8Y7Ng_6LK0sklh6ns64jXBEBLb1RvHHBJwu2-XK_rfdMCgmlkgnY0gmlwhKwSJ5WKbXVsdGlhZGRyc5YACASsEieVBtdZAAoErBInlQbXWt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDk0qQpyuVpMNpa2VW8FMsf4gqF0JJjZ9THd52DUJcPAaDdGNwgtdZg3VkcILXW4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.15.21 waku 487e18a1b5ff8523b7840b54e085056dff6dd99774df07b864d6271f5fb219f2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 487e18a1b5ff. Setting up logs at ./log/docker/node3_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59158
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59158/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59158/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.21/tcp/59159/p2p/16Uiu2HAmJ9MJoUZYft9AWpKWuYEfUic7uxMW828zNK4icKWBm6AC","/ip4/172.18.15.21/tcp/59160/ws/p2p/16Uiu2HAmJ9MJoUZYft9AWpKWuYEfUic7uxMW828zNK4icKWBm6AC"],"enrUri":"enr:-L24QNhoqettBfcQ5_qpzs5fGT9n2EvquwtO1N_dDgWhGGeFMh3g9Wikt042UQ8u0NBz2ugnkwhZTow8Kd_VC2ZrIVQCgmlkgnY0gmlwhKwSDxWKbXVsdGlhZGRyc5YACASsEg8VBucXAAoErBIPFQbnGN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUY5kwImpis-JQHbLV3YcyDBiP1D4wHz8Uzn8ANhIz2mDdGNwgucXg3VkcILnGYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59158/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.149/tcp/55129/p2p/16Uiu2HAmNZxEAwDqv1jVDRY4ofmnkGdJjak9mPZLRa6TytQYXynu"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node4_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.118.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17121', '17122', '17123', '17124', '17125']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17121:17121 -p 17122:17122 -p 17123:17123 -p 17124:17124 -p 17125:17125 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=17123 --rest-port=17121 --tcp-port=17122 --discv5-udp-port=17124 --rest-address=0.0.0.0 --nat=extip:172.18.118.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=680d0cff94ef5234f46027cf8dfab47afa8f50e6de07dc9bb56cb5ab7dcaf4dc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QKBLdV0rlFtJONEyLSX0MmyDlKukkjdFk0u-nF_MO3p8Y7Ng_6LK0sklh6ns64jXBEBLb1RvHHBJwu2-XK_rfdMCgmlkgnY0gmlwhKwSJ5WKbXVsdGlhZGRyc5YACASsEieVBtdZAAoErBInlQbXWt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDk0qQpyuVpMNpa2VW8FMsf4gqF0JJjZ9THd52DUJcPAaDdGNwgtdZg3VkcILXW4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.118.142 waku ceae361a5747a0021b4c58684468ffe3c71d13f4795aedca328b11f80e3891db
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ceae361a5747. Setting up logs at ./log/docker/node4_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 17121
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17121/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QPC1AzhfWQbAUUYMG7lcTCdGzkqEDD_03YTcQlV0nEWEX5V_oALC32HSjDN5YWYOOMNTVw8_uMZ8BHZEblBeWZaGAZMCQzXKgmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQN27NZ8ZqA2zjGouoklVN_fwZXuGum4wErDMkUZOoIzZYN0Y3CCQuKDdWRwgkLkhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/17122/p2p/16Uiu2HAmLfDvHcCD1NZFtjGfQoWMyj65LMXi4aAFGqDoqgsAwhfi","/ip4/127.0.0.1/tcp/17123/ws/p2p/16Uiu2HAmLfDvHcCD1NZFtjGfQoWMyj65LMXi4aAFGqDoqgsAwhfi","/ip4/172.17.0.13/tcp/17122/p2p/16Uiu2HAmLfDvHcCD1NZFtjGfQoWMyj65LMXi4aAFGqDoqgsAwhfi","/ip4/172.17.0.13/tcp/17123/ws/p2p/16Uiu2HAmLfDvHcCD1NZFtjGfQoWMyj65LMXi4aAFGqDoqgsAwhfi"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17121/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.39.149/tcp/55129/p2p/16Uiu2HAmNZxEAwDqv1jVDRY4ofmnkGdJjak9mPZLRa6TytQYXynu", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node5_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.162.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46370', '46371', '46372', '46373', '46374']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46370:46370 -p 46371:46371 -p 46372:46372 -p 46373:46373 -p 46374:46374 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46372 --rest-port=46370 --tcp-port=46371 --discv5-udp-port=46373 --rest-address=0.0.0.0 --nat=extip:172.18.162.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b179cdc9bdd7da61eea7ae2ce4b51fbdd2464bfa3ce0fc2f5c83cab9a1b48c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46374 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKBLdV0rlFtJONEyLSX0MmyDlKukkjdFk0u-nF_MO3p8Y7Ng_6LK0sklh6ns64jXBEBLb1RvHHBJwu2-XK_rfdMCgmlkgnY0gmlwhKwSJ5WKbXVsdGlhZGRyc5YACASsEieVBtdZAAoErBInlQbXWt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDk0qQpyuVpMNpa2VW8FMsf4gqF0JJjZ9THd52DUJcPAaDdGNwgtdZg3VkcILXW4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.162.221 waku 4b7800b8b77884917f3bab8356fde7decdb862d19d5fd9237f772532bdd0eafb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4b7800b8b778. Setting up logs at ./log/docker/node5_2024-11-06_16-16-14__d2633546-fe08-49ca-b9ff-03e1ef6d7423__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46370
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46370/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46370/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.221/tcp/46371/p2p/16Uiu2HAmJ7YVJYqmTA2x8eQpBbWtoSKXmvHQWEkK9rDTWL88ujJm","/ip4/172.18.162.221/tcp/46372/ws/p2p/16Uiu2HAmJ7YVJYqmTA2x8eQpBbWtoSKXmvHQWEkK9rDTWL88ujJm"],"enrUri":"enr:-L24QI-xWnY0drcGGlqeN2xDBnV6w3z45MMEI9KK6sbZIl5mZuURGhbOinSUm5-D5adsoLEudJOb1Gn1x9bNTyY6kLECgmlkgnY0gmlwhKwSot2KbXVsdGlhZGRyc5YACASsEqLdBrUjAAoErBKi3Qa1JN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDURff2QqW74GYolqiO9GV9pQlEOeRfm1hvWjZm1h_zB6DdGNwgrUjg3VkcIK1JYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46370/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.149/tcp/55129/p2p/16Uiu2HAmNZxEAwDqv1jVDRY4ofmnkGdJjak9mPZLRa6TytQYXynu"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.relay:relay.py:59 Running fixture setup: subscribe_main_relay_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55128/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29429/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.relay:relay.py:64 Running fixture setup: subscribe_optional_relay_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59158/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17121/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46370/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55128/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55128/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909781962612480,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29429/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909781962612480,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_3:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59158/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909781962612480,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_4:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17121/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909781962612480,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_5:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46370/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909781962612480,"ephemeral":false}]'
[32mINFO    [0m src.steps.relay:relay.py:71 WARM UP successful!!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46370/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55128/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909782089615104,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29429/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909782089615104,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_3:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59158/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909782089615104,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_4:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17121/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909782089615104,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_5:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46370/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730909782089615104,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a3978759249f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a3a88292ae41
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a3978759249f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 487e18a1b5ff
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a3a88292ae41. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ceae361a5747
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 487e18a1b5ff. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4b7800b8b778
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ceae361a5747. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.