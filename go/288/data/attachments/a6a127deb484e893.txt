[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2024-09-23_03-18-10__d0112433-996d-4a63-9230-5c14dbf16cfe
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-23_03-18-10__d0112433-996d-4a63-9230-5c14dbf16cfe__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-23_03-18-10__d0112433-996d-4a63-9230-5c14dbf16cfe__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-23_03-18-10__d0112433-996d-4a63-9230-5c14dbf16cfe__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.36.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['58059', '58060', '58061', '58062', '58063']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 58059:58059 -p 58060:58060 -p 58061:58061 -p 58062:58062 -p 58063:58063 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=58061 --rest-port=58059 --tcp-port=58060 --discv5-udp-port=58062 --rest-address=0.0.0.0 --nat=extip:172.18.36.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a8da094a906cd3358b85ecd5d47dfaf68dd06f9c50fce1dbe903c13d6ec58abb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.36.99 waku 216b945811d531f4a5e999c5040ceec73a99d42c38dfc8b74bad7e856ec3b29c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 216b945811d5. Setting up logs at ./log/docker/node1_2024-09-23_03-18-10__d0112433-996d-4a63-9230-5c14dbf16cfe__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 58059
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58059/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBzk9JJ5iwVvFWoR1t7nIXoKh0sqv25dL96UvlTRJDx4fXNxKNyii2yjs0lLg2ffFUmteVjp-8GbG0Fc9hmaysuGAZIc4vwzgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQPqnifjU0wZ4nd0W5K6tWpng4ul_0lkFFpH6VYkUuxf4IN0Y3CC4syDdWRwguLOhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/58060/p2p/16Uiu2HAmUSqdF8VtMPxzES4NnBPXwSAdef8d2Z3N9CUViWt4JsBV","/ip4/127.0.0.1/tcp/58061/ws/p2p/16Uiu2HAmUSqdF8VtMPxzES4NnBPXwSAdef8d2Z3N9CUViWt4JsBV","/ip4/172.17.0.2/tcp/58060/p2p/16Uiu2HAmUSqdF8VtMPxzES4NnBPXwSAdef8d2Z3N9CUViWt4JsBV","/ip4/172.17.0.2/tcp/58061/ws/p2p/16Uiu2HAmUSqdF8VtMPxzES4NnBPXwSAdef8d2Z3N9CUViWt4JsBV"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.227.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59701', '59702', '59703', '59704', '59705']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59701:59701 -p 59702:59702 -p 59703:59703 -p 59704:59704 -p 59705:59705 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59703 --rest-port=59701 --tcp-port=59702 --discv5-udp-port=59704 --rest-address=0.0.0.0 --nat=extip:172.18.227.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=32574e3df12c5e3571ed396132a2bfcccbaf7d38c12bcfe414b11da3ff7a748a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59705 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-Ji4QBzk9JJ5iwVvFWoR1t7nIXoKh0sqv25dL96UvlTRJDx4fXNxKNyii2yjs0lLg2ffFUmteVjp-8GbG0Fc9hmaysuGAZIc4vwzgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQPqnifjU0wZ4nd0W5K6tWpng4ul_0lkFFpH6VYkUuxf4IN0Y3CC4syDdWRwguLOhXdha3UyCQ --lightpushnode=/ip4/172.18.36.99/tcp/58060/p2p/16Uiu2HAmUSqdF8VtMPxzES4NnBPXwSAdef8d2Z3N9CUViWt4JsBV
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.227.254 waku 628d25a084e090e846cc6d2313da4f496d833e08b3d726fa5c0a6b7c627c4887
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 628d25a084e0. Setting up logs at ./log/docker/node2_2024-09-23_03-18-10__d0112433-996d-4a63-9230-5c14dbf16cfe__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59701
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59701/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59701/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.254/tcp/59702/p2p/16Uiu2HAm22JqsiWA3FpPezi7w5y23YEY7x7sh3N2JK6bRC44Rncy","/ip4/172.18.227.254/tcp/59703/ws/p2p/16Uiu2HAm22JqsiWA3FpPezi7w5y23YEY7x7sh3N2JK6bRC44Rncy"],"enrUri":"enr:-LO4QAndJ8rtKcomQ3631V-AJffqKc7ZhX4lptALcssd8zXIHFtWHHj4KbZLGqaQDHF8pH12r7Fa9erbuFL7JPka_J0BgmlkgnY0gmlwhKwS4_6KbXVsdGlhZGRyc4wACgSsEuP-Buk33QOCcnOFAAMBAACJc2VjcDI1NmsxoQJiBYz841hX3dpKH7K4dHuZs4HpDU_fidqwDH3dYsu4CoN0Y3CC6TaDdWRwguk4hXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.135.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20086', '20087', '20088', '20089', '20090']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20086:20086 -p 20087:20087 -p 20088:20088 -p 20089:20089 -p 20090:20090 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=20088 --rest-port=20086 --tcp-port=20087 --discv5-udp-port=20089 --rest-address=0.0.0.0 --nat=extip:172.18.135.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7afdaf9edcb02d7f770360dbc4cafee32dcabada1c3ddc511fecd84a92c83dad --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.227.254/tcp/59702/p2p/16Uiu2HAm22JqsiWA3FpPezi7w5y23YEY7x7sh3N2JK6bRC44Rncy --discv5-bootstrap-node=enr:-LO4QAndJ8rtKcomQ3631V-AJffqKc7ZhX4lptALcssd8zXIHFtWHHj4KbZLGqaQDHF8pH12r7Fa9erbuFL7JPka_J0BgmlkgnY0gmlwhKwS4_6KbXVsdGlhZGRyc4wACgSsEuP-Buk33QOCcnOFAAMBAACJc2VjcDI1NmsxoQJiBYz841hX3dpKH7K4dHuZs4HpDU_fidqwDH3dYsu4CoN0Y3CC6TaDdWRwguk4hXdha3UyDQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.135.19 waku 289e8108afa2304ed57ada7d36ce52ff34caad848507bb0d2fc7b38bec7aef30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 289e8108afa2. Setting up logs at ./log/docker/node3_2024-09-23_03-18-10__d0112433-996d-4a63-9230-5c14dbf16cfe__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 20086
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20086/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBcQYKcjwkvzIS_pAo8JGB8v9WLVH9GP6eJPK9dVDTOFdx9XHKrMS9hn5nLfZ6Ws-SzV1Aq8lQhCBOc60h3fnniGAZIc4wgZgmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQNSFZoYdvoCUMUHFmBsnUXNgmR3oRkyhTHu3TuYep3ERIN0Y3CCTneDdWRwgk55hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/20087/p2p/16Uiu2HAmJBQtP8e2tXUTPFaJGTy7WRyrZQCZLyMg1W2x8WXb2pbm","/ip4/127.0.0.1/tcp/20088/ws/p2p/16Uiu2HAmJBQtP8e2tXUTPFaJGTy7WRyrZQCZLyMg1W2x8WXb2pbm","/ip4/172.17.0.8/tcp/20087/p2p/16Uiu2HAmJBQtP8e2tXUTPFaJGTy7WRyrZQCZLyMg1W2x8WXb2pbm","/ip4/172.17.0.8/tcp/20088/ws/p2p/16Uiu2HAmJBQtP8e2tXUTPFaJGTy7WRyrZQCZLyMg1W2x8WXb2pbm"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58059/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59701/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20086/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58059/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58059/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58059/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm22JqsiWA3FpPezi7w5y23YEY7x7sh3N2JK6bRC44Rncy","multiaddrs":["/ip4/172.18.227.254/tcp/59702/p2p/16Uiu2HAm22JqsiWA3FpPezi7w5y23YEY7x7sh3N2JK6bRC44Rncy","/ip4/172.18.227.254/tcp/59703/ws/p2p/16Uiu2HAm22JqsiWA3FpPezi7w5y23YEY7x7sh3N2JK6bRC44Rncy"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1","/waku/2/rs/3/0"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59701/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/58060/p2p/16Uiu2HAmUSqdF8VtMPxzES4NnBPXwSAdef8d2Z3N9CUViWt4JsBV","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.8/tcp/20087/p2p/16Uiu2HAmJBQtP8e2tXUTPFaJGTy7WRyrZQCZLyMg1W2x8WXb2pbm","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20086/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm22JqsiWA3FpPezi7w5y23YEY7x7sh3N2JK6bRC44Rncy","multiaddrs":["/ip4/172.18.227.254/tcp/59702/p2p/16Uiu2HAm22JqsiWA3FpPezi7w5y23YEY7x7sh3N2JK6bRC44Rncy","/ip4/172.18.227.254/tcp/59703/ws/p2p/16Uiu2HAm22JqsiWA3FpPezi7w5y23YEY7x7sh3N2JK6bRC44Rncy"],"protocols":["/vac/waku/lightpush/2.0.0-beta1","/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58059/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1727061527737562624}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20086/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1727061527737562624,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 216b945811d5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 628d25a084e0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 289e8108afa2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.