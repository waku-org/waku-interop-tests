{"uid":"ebe1a65c52c2708c","name":"test_light_push_after_node_pauses_and_pauses","fullName":"tests.light_push.test_publish.TestLightPushPublish#test_light_push_after_node_pauses_and_pauses","historyId":"74596ad5d1a9a3d1c903974d4f8e5d72","time":{"start":1732160693190,"stop":1732160693205,"duration":15},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:19209/lightpush/v1/message with response: b'lightpush error'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:19209/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:252: in test_light_push_after_node_pauses_and_pauses\n    self.check_light_pushed_message_reaches_receiving_peer()\nsrc/steps/light_push.py:122: in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\nsrc/node/waku_node.py:346: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:19209/lightpush/v1/message with response: b'lightpush error'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1732158676581,"stop":1732158676581,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1732160687463,"stop":1732160687463,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1732160687463,"stop":1732160687463,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1732160687463,"stop":1732160687463,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1732160687463,"stop":1732160687463,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1732160687464,"stop":1732160687464,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1732160687464,"stop":1732160687464,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1732160687464,"stop":1732160687464,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_publish_setup","time":{"start":1732160687464,"stop":1732160693189,"duration":5725},"status":"passed","steps":[{"name":"setup_first_receiving_node","time":{"start":1732160687465,"stop":1732160689211,"duration":1746},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1732160687465,"stop":1732160689211,"duration":1746},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1732160689211,"stop":1732160689211,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7f13419367e0>, <src.node.waku_node.WakuNode object at 0x7f1340ffc800>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_second_receiving_node","time":{"start":1732160689211,"stop":1732160690924,"duration":1713},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1732160689211,"stop":1732160690924,"duration":1713},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1732160690894,"stop":1732160690924,"duration":30},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7f13419367e0>, <src.node.waku_node.WakuNode object at 0x7f1340fe0f50>, ['/ip4/172.18.94.116/tcp/63066/p2p/16Uiu2HAmFaTX3dthw58oXofufbb4sQu44VpvGVVRKU6gZ4A1AQgs'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"2"},{"name":"lightpush","value":"'false'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'false'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_lightpush_node","time":{"start":1732160690924,"stop":1732160693176,"duration":2252},"status":"passed","steps":[{"name":"setup_lightpush_node","time":{"start":1732160690924,"stop":1732160693176,"duration":2252},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1732160693139,"stop":1732160693176,"duration":37},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7f13419367e0>, <src.node.waku_node.WakuNode object at 0x7f1341178590>, ['/ip4/172.18.94.116/tcp/63066/p2p/16Uiu2HAmFaTX3dthw58oXofufbb4sQu44VpvGVVRKU6gZ4A1AQgs', '/ip4/172.18.80.61/tcp/13534/p2p/16Uiu2HAmRcNVC52wM6DWzy7kcAeMAb17U7LgPKpQTb34uxuSrNFM'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/go-waku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_to_pubsub_topics_via_relay","time":{"start":1732160693176,"stop":1732160693189,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"None"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:19209/lightpush/v1/message with response: b'lightpush error'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:19209/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:252: in test_light_push_after_node_pauses_and_pauses\n    self.check_light_pushed_message_reaches_receiving_peer()\nsrc/steps/light_push.py:122: in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\nsrc/node/waku_node.py:346: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:19209/lightpush/v1/message with response: b'lightpush error'","steps":[{"name":"check_light_pushed_message_reaches_receiving_peer","time":{"start":1732160693190,"stop":1732160693204,"duration":14},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:19209/lightpush/v1/message with response: b'lightpush error'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/light_push.py\", line 122, in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in send_light_push_message\n    return self._api.send_light_push_message(payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 57, in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_payload","time":{"start":1732160693190,"stop":1732160693190,"duration":0},"status":"passed","steps":[{"name":"create_message","time":{"start":1732160693190,"stop":1732160693190,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/3/0'"},{"name":"message","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"None"},{"name":"message","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"cadc8d4889b4bbea","name":"log","source":"cadc8d4889b4bbea.txt","type":"text/plain","size":49253}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1732160693292,"stop":1732160693298,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1732160693299,"stop":1732160699521,"duration":6222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1732160699522,"stop":1732160699549,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1732160699549,"stop":1732160699553,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"a89648e5ec8fe311","name":"receiving_node2_2024-11-21_03-44-47__b2d0b05a-eb22-47aa-8478-c73aab1751ee__wakuorg_nwaku:latest.log","source":"a89648e5ec8fe311.txt","type":"text/plain","size":159549},{"uid":"32703df3b7b001a2","name":"receiving_node1_2024-11-21_03-44-47__b2d0b05a-eb22-47aa-8478-c73aab1751ee__wakuorg_nwaku:latest.log","source":"32703df3b7b001a2.txt","type":"text/plain","size":367456},{"uid":"ec1142d2ad84044d","name":"lightpush_node1_2024-11-21_03-44-47__b2d0b05a-eb22-47aa-8478-c73aab1751ee__wakuorg_go-waku:latest.log","source":"ec1142d2ad84044d.txt","type":"text/plain","size":66986}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1732161432687,"stop":1732161432687,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.light_push"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestLightPushPublish"},{"name":"host","value":"fv-az1426-120"},{"name":"thread","value":"2224-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.light_push.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"6f11b30157936c35","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20264/lightpush/v1/message with response: b'lightpush error'","time":{"start":1732160680981,"stop":1732160680998,"duration":17}},{"uid":"ae715a1e84789eef","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:1262/lightpush/v1/message with response: b'lightpush error'","time":{"start":1732160668684,"stop":1732160668699,"duration":15}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":12,"skipped":0,"passed":272,"unknown":0,"total":284},"items":[{"uid":"10cc6c3c0601c562","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/365//#testresult/10cc6c3c0601c562","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:61064/lightpush/v1/message with response: b'lightpush error'","time":{"start":1732074328849,"stop":1732074328865,"duration":16}},{"uid":"11ad9f27ea9abe5e","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/364//#testresult/11ad9f27ea9abe5e","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20578/lightpush/v1/message with response: b'lightpush error'","time":{"start":1731988022526,"stop":1731988022548,"duration":22}},{"uid":"32fdf492813f33b5","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/363//#testresult/32fdf492813f33b5","status":"passed","time":{"start":1731926471960,"stop":1731926472365,"duration":405}},{"uid":"df11527f82367b4b","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/362//#testresult/df11527f82367b4b","status":"passed","time":{"start":1731924588314,"stop":1731924588696,"duration":382}},{"uid":"7b3e6e4d318e0438","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/361//#testresult/7b3e6e4d318e0438","status":"passed","time":{"start":1731900257404,"stop":1731900257809,"duration":405}},{"uid":"1416179c89d9c34a","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/360//#testresult/1416179c89d9c34a","status":"passed","time":{"start":1731813896393,"stop":1731813896906,"duration":513}},{"uid":"fc6fa3cdaad5e9fc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/359//#testresult/fc6fa3cdaad5e9fc","status":"passed","time":{"start":1731727273964,"stop":1731727274351,"duration":387}},{"uid":"9855e27d3776fc39","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/358//#testresult/9855e27d3776fc39","status":"passed","time":{"start":1731640867818,"stop":1731640868208,"duration":390}},{"uid":"9e4d41c6372f3bf","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/357//#testresult/9e4d41c6372f3bf","status":"passed","time":{"start":1731554234706,"stop":1731554235111,"duration":405}},{"uid":"910de9ab28655958","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/356//#testresult/910de9ab28655958","status":"passed","time":{"start":1731467777729,"stop":1731467778113,"duration":384}},{"uid":"5cfdef20df5988fc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/355//#testresult/5cfdef20df5988fc","status":"passed","time":{"start":1731381226099,"stop":1731381226502,"duration":403}},{"uid":"da7da02bf7b6785c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/354//#testresult/da7da02bf7b6785c","status":"passed","time":{"start":1731295054015,"stop":1731295054393,"duration":378}},{"uid":"be98921de78e1f27","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/353//#testresult/be98921de78e1f27","status":"passed","time":{"start":1731223295224,"stop":1731223295640,"duration":416}},{"uid":"9b0c1ba11a4fa3e","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/352//#testresult/9b0c1ba11a4fa3e","status":"passed","time":{"start":1731208549654,"stop":1731208550040,"duration":386}},{"uid":"dda34973cbd68a1c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/351//#testresult/dda34973cbd68a1c","status":"passed","time":{"start":1731121975366,"stop":1731121975747,"duration":381}},{"uid":"3d75234e094851e0","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/350//#testresult/3d75234e094851e0","status":"passed","time":{"start":1731035634449,"stop":1731035634844,"duration":395}},{"uid":"5f770356ecdbb3cf","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/349//#testresult/5f770356ecdbb3cf","status":"passed","time":{"start":1730991082335,"stop":1730991082722,"duration":387}},{"uid":"c244b1b16914c0ad","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/348//#testresult/c244b1b16914c0ad","status":"passed","time":{"start":1730983091244,"stop":1730983091632,"duration":388}},{"uid":"66bd6e6410da2acc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/347//#testresult/66bd6e6410da2acc","status":"passed","time":{"start":1730980989820,"stop":1730980990231,"duration":411}},{"uid":"8eed2dc8c53d6fc6","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/346//#testresult/8eed2dc8c53d6fc6","status":"passed","time":{"start":1730979969841,"stop":1730979970267,"duration":426}}]},"tags":[]},"source":"ebe1a65c52c2708c.json","parameterValues":[]}