[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:347 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.57.75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5930', '5931', '5932', '5933', '5934']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5930:5930 -p 5931:5931 -p 5932:5932 -p 5933:5933 -p 5934:5934 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=5932 --rest-port=5930 --tcp-port=5931 --discv5-udp-port=5933 --rest-address=0.0.0.0 --nat=extip:172.18.57.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb4c00a14df883b55002e6bacf4a2cf75606c4514b962f4eaf93c8a333ceeb26 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.57.75 waku a494286fc499ad46f0567468c73edf145a73c2e67c0441229638fe1b014b1539
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a494286fc499. Setting up logs at ./log/docker/node1_2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 5930
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 01d49afe4ff4. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5930/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QHZNKXJZAADOxCWTyLrF7wle-agqpfwyo2FQChKFAjHbWGGRYusbkcvXFOw7qvK7o-2lDCiX29JBi6XnrhhRXj6GAZNMtkvEgmlkgnY0gmlwhKwRAASCcnODAAMAiXNlY3AyNTZrMaECofnfhBEM80Lq3jaBhr__lxnMo05S0vUniJjDBU_zzXKDdGNwghcrg3VkcIIXLYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/5931/p2p/16Uiu2HAm6KxcErs8hHqMNeNJKtMFBayfdHLPGDstBwwe57ySfTu3","/ip4/127.0.0.1/tcp/5932/ws/p2p/16Uiu2HAm6KxcErs8hHqMNeNJKtMFBayfdHLPGDstBwwe57ySfTu3","/ip4/172.17.0.4/tcp/5931/p2p/16Uiu2HAm6KxcErs8hHqMNeNJKtMFBayfdHLPGDstBwwe57ySfTu3","/ip4/172.17.0.4/tcp/5932/ws/p2p/16Uiu2HAm6KxcErs8hHqMNeNJKtMFBayfdHLPGDstBwwe57ySfTu3"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.145.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23994', '23995', '23996', '23997', '23998']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23994:23994 -p 23995:23995 -p 23996:23996 -p 23997:23997 -p 23998:23998 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23996 --rest-port=23994 --tcp-port=23995 --discv5-udp-port=23997 --rest-address=0.0.0.0 --nat=extip:172.18.145.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0b96e79e0076c45d15fc79adbb2b6a1b5bfbefaf074e02cf8032adfd54c5e847 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23998 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QHZNKXJZAADOxCWTyLrF7wle-agqpfwyo2FQChKFAjHbWGGRYusbkcvXFOw7qvK7o-2lDCiX29JBi6XnrhhRXj6GAZNMtkvEgmlkgnY0gmlwhKwRAASCcnODAAMAiXNlY3AyNTZrMaECofnfhBEM80Lq3jaBhr__lxnMo05S0vUniJjDBU_zzXKDdGNwghcrg3VkcIIXLYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.145.239 waku f01b616bad2ba6c19b4aadc5e7f8afa57cb9debd79a0db8cb92671950b33c355
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f01b616bad2b. Setting up logs at ./log/docker/node2_2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 23994
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23994/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23994/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.239/tcp/23995/p2p/16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY","/ip4/172.18.145.239/tcp/23996/ws/p2p/16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY"],"enrUri":"enr:-L24QERdbAmY0nb6Ixo7poEemX-BFS8aFjctuL3k89_dL2RsKx8piARuBLwTvWGhAk_EaSaK5oi4p2gmENTwqsX5rhACgmlkgnY0gmlwhKwSke-KbXVsdGlhZGRyc5YACASsEpHvBl27AAoErBKR7wZdvN0DgnJzhQADAQAAiXNlY3AyNTZrMaECbiuLl6rRYx-QbQYJamC1RpYAHZLnj7onhNiflJKoJmGDdGNwgl27g3VkcIJdvYV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.58.83
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55496', '55497', '55498', '55499', '55500']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55496:55496 -p 55497:55497 -p 55498:55498 -p 55499:55499 -p 55500:55500 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=55498 --rest-port=55496 --tcp-port=55497 --discv5-udp-port=55499 --rest-address=0.0.0.0 --nat=extip:172.18.58.83 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=87a3ffef916a75e3b5f1aa5bc9b49e7f1ae8faca74cd7beb36afb5ba8cc3a6e6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.145.239/tcp/23995/p2p/16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY --store=false --discv5-bootstrap-node=enr:-L24QERdbAmY0nb6Ixo7poEemX-BFS8aFjctuL3k89_dL2RsKx8piARuBLwTvWGhAk_EaSaK5oi4p2gmENTwqsX5rhACgmlkgnY0gmlwhKwSke-KbXVsdGlhZGRyc5YACASsEpHvBl27AAoErBKR7wZdvN0DgnJzhQADAQAAiXNlY3AyNTZrMaECbiuLl6rRYx-QbQYJamC1RpYAHZLnj7onhNiflJKoJmGDdGNwgl27g3VkcIJdvYV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.58.83 waku cddf77bf602f9dbb82be60be1ff79840d93c2e407d45f96ae14d8cbd98f91d56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cddf77bf602f. Setting up logs at ./log/docker/node3_2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 55496
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55496/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QFiiX94vWsOulAN93jjLu_gHTXIjUHQGxK5xve5IQ0qnc1wb9pmyr7L_5e3AvVJj1ea_m_crM1oY1JkwafHdvLKGAZNMtlc4gmlkgnY0gmlwhKwRAAuCcnODAAMAiXNlY3AyNTZrMaECehp0Ll6JHAe9ZNdq_CIBcMQ7cLnNZmJy0LeORYF38fWDdGNwgtjJg3VkcILYy4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/55497/p2p/16Uiu2HAm3eK7dDiEDBCnAUSqUp4tknXkjNTG5rKmof8yEvaVWHcY","/ip4/127.0.0.1/tcp/55498/ws/p2p/16Uiu2HAm3eK7dDiEDBCnAUSqUp4tknXkjNTG5rKmof8yEvaVWHcY","/ip4/172.17.0.11/tcp/55497/p2p/16Uiu2HAm3eK7dDiEDBCnAUSqUp4tknXkjNTG5rKmof8yEvaVWHcY","/ip4/172.17.0.11/tcp/55498/ws/p2p/16Uiu2HAm3eK7dDiEDBCnAUSqUp4tknXkjNTG5rKmof8yEvaVWHcY"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:353 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5930/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23994/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:357 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5930/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY","multiaddrs":["/ip4/172.18.145.239/tcp/23995/p2p/16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY","/ip4/172.18.145.239/tcp/23996/ws/p2p/16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23994/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5930/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY","multiaddrs":["/ip4/172.18.145.239/tcp/23996/ws/p2p/16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY","/ip4/172.18.145.239/tcp/23995/p2p/16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23994/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5930/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY","multiaddrs":["/ip4/172.18.145.239/tcp/23995/p2p/16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY","/ip4/172.18.145.239/tcp/23996/ws/p2p/16Uiu2HAm2qjLaiELUktwmaHSuBTW88WfAoLZcvZbyKcaz65yTFaY"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23994/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/5931/p2p/16Uiu2HAm6KxcErs8hHqMNeNJKtMFBayfdHLPGDstBwwe57ySfTu3","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:361 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55496/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55496/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id a494286fc499
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id f01b616bad2b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a494286fc499. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id cddf77bf602f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f01b616bad2b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-11-21_03-13-55__34b0946b-beae-4b67-a419-88df7a036246__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:347 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.126.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9266', '9267', '9268', '9269', '9270']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9266:9266 -p 9267:9267 -p 9268:9268 -p 9269:9269 -p 9270:9270 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=9268 --rest-port=9266 --tcp-port=9267 --discv5-udp-port=9269 --rest-address=0.0.0.0 --nat=extip:172.18.126.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad9b40bac35cefffa65ffb77eddec0f7d47e87f26ef58c0a1aef5ffe5ead30df --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cddf77bf602f. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.126.178 waku 75b6f6ed13b905efe798f2fa00e76256e2cc696844ea2720787124f1ba39a03a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 75b6f6ed13b9. Setting up logs at ./log/docker/node1_2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 9266
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9266/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QFQb0N-q4iBHLlflnFH7ue91K4effsUiFlGCWMuTyQ63Q6ZE_7Lof_M-ycoBs8IO_pMvSMwL4pLMoIsz60Tg-JKGAZNMtvAEgmlkgnY0gmlwhKwRAAaCcnODAAMAiXNlY3AyNTZrMaECvy2Y0RNz90b2m39RC-azQRwkte8JRIJsaJyzMWqOYzyDdGNwgiQzg3VkcIIkNYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/9267/p2p/16Uiu2HAm8HxBBnxbTErqUA9X5wHCs2g6RyQeEqWKahkWLmWu3Evw","/ip4/127.0.0.1/tcp/9268/ws/p2p/16Uiu2HAm8HxBBnxbTErqUA9X5wHCs2g6RyQeEqWKahkWLmWu3Evw","/ip4/172.17.0.6/tcp/9267/p2p/16Uiu2HAm8HxBBnxbTErqUA9X5wHCs2g6RyQeEqWKahkWLmWu3Evw","/ip4/172.17.0.6/tcp/9268/ws/p2p/16Uiu2HAm8HxBBnxbTErqUA9X5wHCs2g6RyQeEqWKahkWLmWu3Evw"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.214.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['42643', '42644', '42645', '42646', '42647']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 42643:42643 -p 42644:42644 -p 42645:42645 -p 42646:42646 -p 42647:42647 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42645 --rest-port=42643 --tcp-port=42644 --discv5-udp-port=42646 --rest-address=0.0.0.0 --nat=extip:172.18.214.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee2e2da9693445cfc01549f5bbacea25ad25c6cb609d03fdac619bbf5eb25761 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42647 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QFQb0N-q4iBHLlflnFH7ue91K4effsUiFlGCWMuTyQ63Q6ZE_7Lof_M-ycoBs8IO_pMvSMwL4pLMoIsz60Tg-JKGAZNMtvAEgmlkgnY0gmlwhKwRAAaCcnODAAMAiXNlY3AyNTZrMaECvy2Y0RNz90b2m39RC-azQRwkte8JRIJsaJyzMWqOYzyDdGNwgiQzg3VkcIIkNYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.214.81 waku 80182e2e669164d20eed0ea7b82593ffc25d2b363930294807af6fe84302085e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 80182e2e6691. Setting up logs at ./log/docker/node2_2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 42643
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42643/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42643/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.81/tcp/42644/p2p/16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN","/ip4/172.18.214.81/tcp/42645/ws/p2p/16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN"],"enrUri":"enr:-L24QKesPCrNqxZk_3LChuedAyp5kkTxL19OHJwBdJmJFQLnZM_UOLJKgVhRbM4Mkrtz3NsgydZ_npdM5pdy9330K98CgmlkgnY0gmlwhKwS1lGKbXVsdGlhZGRyc5YACASsEtZRBqaUAAoErBLWUQamld0DgnJzhQADAQAAiXNlY3AyNTZrMaECvTN2Fl268ZnE4VP_wJqtY3jAi3x8qA1t7Uu0trvMfeuDdGNwgqaUg3VkcIKmloV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.72.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54105', '54106', '54107', '54108', '54109']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54105:54105 -p 54106:54106 -p 54107:54107 -p 54108:54108 -p 54109:54109 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=54107 --rest-port=54105 --tcp-port=54106 --discv5-udp-port=54108 --rest-address=0.0.0.0 --nat=extip:172.18.72.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f31bdd6cb332afff528a1189bc9bccbdebdd8123f470aed66abb1cac6f2ad08e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.214.81/tcp/42644/p2p/16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN --store=false --discv5-bootstrap-node=enr:-L24QKesPCrNqxZk_3LChuedAyp5kkTxL19OHJwBdJmJFQLnZM_UOLJKgVhRbM4Mkrtz3NsgydZ_npdM5pdy9330K98CgmlkgnY0gmlwhKwS1lGKbXVsdGlhZGRyc5YACASsEtZRBqaUAAoErBLWUQamld0DgnJzhQADAQAAiXNlY3AyNTZrMaECvTN2Fl268ZnE4VP_wJqtY3jAi3x8qA1t7Uu0trvMfeuDdGNwgqaUg3VkcIKmloV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.72.199 waku e79153a0c7509b0ccea88335a8941a25f73dfc8e64e62f129ce56d6255dbcaff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e79153a0c750. Setting up logs at ./log/docker/node3_2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 54105
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54105/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QKs1Lr4Je_7FgjNItm2WkFdh-EXcw048Re1xmGsQ95iTSLo8FD_I4R3XUwFtFBpj-jaa4cm1ZispGoSQ5tHKNNWGAZNMtvz1gmlkgnY0gmlwhKwRABCCcnODAAMAiXNlY3AyNTZrMaECX6KTR2dHvXAslbzbQlTrBpQZa8o7nILR5yJQ36QknKODdGNwgtNag3VkcILTXIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/54106/p2p/16Uiu2HAm1rzVb7SAGMUMZ3zUfbiCdGUxw1bLgB6yttG9AAsn7Mqt","/ip4/127.0.0.1/tcp/54107/ws/p2p/16Uiu2HAm1rzVb7SAGMUMZ3zUfbiCdGUxw1bLgB6yttG9AAsn7Mqt","/ip4/172.17.0.16/tcp/54106/p2p/16Uiu2HAm1rzVb7SAGMUMZ3zUfbiCdGUxw1bLgB6yttG9AAsn7Mqt","/ip4/172.17.0.16/tcp/54107/ws/p2p/16Uiu2HAm1rzVb7SAGMUMZ3zUfbiCdGUxw1bLgB6yttG9AAsn7Mqt"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:353 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9266/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42643/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:357 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9266/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN","multiaddrs":["/ip4/172.18.214.81/tcp/42644/p2p/16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN","/ip4/172.18.214.81/tcp/42645/ws/p2p/16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42643/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9266/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN","multiaddrs":["/ip4/172.18.214.81/tcp/42644/p2p/16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN","/ip4/172.18.214.81/tcp/42645/ws/p2p/16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42643/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9266/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN","multiaddrs":["/ip4/172.18.214.81/tcp/42644/p2p/16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN","/ip4/172.18.214.81/tcp/42645/ws/p2p/16Uiu2HAm8AEYi2HLjvNMRkDGd1HXpTkTTj8SHBvoMHYa9rkKHDGN"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42643/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.6/tcp/9267/p2p/16Uiu2HAm8HxBBnxbTErqUA9X5wHCs2g6RyQeEqWKahkWLmWu3Evw","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/store-query/3.0.0","connected":false}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:361 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54105/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:54105/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 75b6f6ed13b9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 80182e2e6691
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 75b6f6ed13b9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id e79153a0c750
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 80182e2e6691. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2024-11-21_03-14-36__fbb36e61-aeaf-4857-aff3-d8095ffb3f5d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:347 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.133.102
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44167', '44168', '44169', '44170', '44171']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44167:44167 -p 44168:44168 -p 44169:44169 -p 44170:44170 -p 44171:44171 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44169 --rest-port=44167 --tcp-port=44168 --discv5-udp-port=44170 --rest-address=0.0.0.0 --nat=extip:172.18.133.102 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae2def5d6a4c4a22e00d1ef3acd7e0c28297bdc264eff2e69781c126b5baebe7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.133.102 waku c6c15a99403f34b3949378ea2e4db77c4af73698238a7561bc15f18bee2551c6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c6c15a99403f. Setting up logs at ./log/docker/node1_2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 44167
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e79153a0c750. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44167/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QJLd1WJ8Ry6toMI0bgAvJPMAbIePUR4CigPPV___qUeXdw7Bz4sjjAwSbuNBFn5V8MI38ArEZu4Az4_xmF_Xc_iGAZNMt5GBgmlkgnY0gmlwhKwRAAaCcnODAAMAiXNlY3AyNTZrMaED3yYosVkPKRPxYTUsWhNi8kwkz0Vlf2ae0BJxIXFnkkGDdGNwgqyIg3VkcIKsioV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/44168/p2p/16Uiu2HAmTg51qPxCP6KUj5RSQZvSZGdFs3C24DdLQs8xgJPWv792","/ip4/127.0.0.1/tcp/44169/ws/p2p/16Uiu2HAmTg51qPxCP6KUj5RSQZvSZGdFs3C24DdLQs8xgJPWv792","/ip4/172.17.0.6/tcp/44168/p2p/16Uiu2HAmTg51qPxCP6KUj5RSQZvSZGdFs3C24DdLQs8xgJPWv792","/ip4/172.17.0.6/tcp/44169/ws/p2p/16Uiu2HAmTg51qPxCP6KUj5RSQZvSZGdFs3C24DdLQs8xgJPWv792"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.146.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39030', '39031', '39032', '39033', '39034']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39030:39030 -p 39031:39031 -p 39032:39032 -p 39033:39033 -p 39034:39034 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39032 --rest-port=39030 --tcp-port=39031 --discv5-udp-port=39033 --rest-address=0.0.0.0 --nat=extip:172.18.146.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce4d23dcfa14dc52fa944bfaee28c1c8465d5684ce7173bcfae6df4efcc3cc9c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39034 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QJLd1WJ8Ry6toMI0bgAvJPMAbIePUR4CigPPV___qUeXdw7Bz4sjjAwSbuNBFn5V8MI38ArEZu4Az4_xmF_Xc_iGAZNMt5GBgmlkgnY0gmlwhKwRAAaCcnODAAMAiXNlY3AyNTZrMaED3yYosVkPKRPxYTUsWhNi8kwkz0Vlf2ae0BJxIXFnkkGDdGNwgqyIg3VkcIKsioV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.146.237 waku 27fa9b8c3273ed7512b7af895f6b28b5d3199332041f153e06ca1993025f4085
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 27fa9b8c3273. Setting up logs at ./log/docker/node2_2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 39030
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39030/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39030/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.237/tcp/39031/p2p/16Uiu2HAmK2sdudCxPSwFhLLYSGrBxeUVF7bjyXrmh9UEQbbqR6kp","/ip4/172.18.146.237/tcp/39032/ws/p2p/16Uiu2HAmK2sdudCxPSwFhLLYSGrBxeUVF7bjyXrmh9UEQbbqR6kp"],"enrUri":"enr:-L24QKB1wdHtRadTB3YEf27ickkS9cMn9Mc0M8zSygvG6GL0T1OvIVP3-QHzsUfuFkAC2oynceA51HkfY1BFyv4u75MCgmlkgnY0gmlwhKwSku2KbXVsdGlhZGRyc5YACASsEpLtBph3AAoErBKS7QaYeN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXsFO84l1ORw18RLpS5WRibFpP8b8d-2VHTmp9KEsAqGDdGNwgph3g3VkcIKYeYV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.83.211
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12359', '12360', '12361', '12362', '12363']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12359:12359 -p 12360:12360 -p 12361:12361 -p 12362:12362 -p 12363:12363 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=12361 --rest-port=12359 --tcp-port=12360 --discv5-udp-port=12362 --rest-address=0.0.0.0 --nat=extip:172.18.83.211 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffd68bbcf36ae463bb4d6ccad306aa111c8b8fc366640aaa1b2d48a4bbfaaf74 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.146.237/tcp/39031/p2p/16Uiu2HAmK2sdudCxPSwFhLLYSGrBxeUVF7bjyXrmh9UEQbbqR6kp --store=false --discv5-bootstrap-node=enr:-L24QKB1wdHtRadTB3YEf27ickkS9cMn9Mc0M8zSygvG6GL0T1OvIVP3-QHzsUfuFkAC2oynceA51HkfY1BFyv4u75MCgmlkgnY0gmlwhKwSku2KbXVsdGlhZGRyc5YACASsEpLtBph3AAoErBKS7QaYeN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXsFO84l1ORw18RLpS5WRibFpP8b8d-2VHTmp9KEsAqGDdGNwgph3g3VkcIKYeYV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.83.211 waku 1bd4134be9d65626d20c92bd6627c68fc6075b4bd88c6252649796b13ce863ca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1bd4134be9d6. Setting up logs at ./log/docker/node3_2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 12359
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12359/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QBpYIMENlIuF4uWp0yPU4g2PHf-l3-ufaDgZm1jhn3AlDEajymNkq0ITSzEIRHnq0NOVrsIMIP_Fc4jIw43lqoWGAZNMt541gmlkgnY0gmlwhKwRABCCcnODAAMAiXNlY3AyNTZrMaEDBH8GmBc-5OExSSuEEtm0SPfijSfDtH3tMCztZiLmyjiDdGNwgjBIg3VkcIIwSoV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/12360/p2p/16Uiu2HAmCxYKizQg5DtgVnpwnebHFUPvJvXoZVJQvKG25BQfVi95","/ip4/127.0.0.1/tcp/12361/ws/p2p/16Uiu2HAmCxYKizQg5DtgVnpwnebHFUPvJvXoZVJQvKG25BQfVi95","/ip4/172.17.0.16/tcp/12360/p2p/16Uiu2HAmCxYKizQg5DtgVnpwnebHFUPvJvXoZVJQvKG25BQfVi95","/ip4/172.17.0.16/tcp/12361/ws/p2p/16Uiu2HAmCxYKizQg5DtgVnpwnebHFUPvJvXoZVJQvKG25BQfVi95"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:353 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44167/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39030/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:357 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44167/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmK2sdudCxPSwFhLLYSGrBxeUVF7bjyXrmh9UEQbbqR6kp","multiaddrs":["/ip4/172.18.146.237/tcp/39031/p2p/16Uiu2HAmK2sdudCxPSwFhLLYSGrBxeUVF7bjyXrmh9UEQbbqR6kp","/ip4/172.18.146.237/tcp/39032/ws/p2p/16Uiu2HAmK2sdudCxPSwFhLLYSGrBxeUVF7bjyXrmh9UEQbbqR6kp"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39030/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44167/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmK2sdudCxPSwFhLLYSGrBxeUVF7bjyXrmh9UEQbbqR6kp","multiaddrs":["/ip4/172.18.146.237/tcp/39031/p2p/16Uiu2HAmK2sdudCxPSwFhLLYSGrBxeUVF7bjyXrmh9UEQbbqR6kp","/ip4/172.18.146.237/tcp/39032/ws/p2p/16Uiu2HAmK2sdudCxPSwFhLLYSGrBxeUVF7bjyXrmh9UEQbbqR6kp"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39030/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.6/tcp/44168/p2p/16Uiu2HAmTg51qPxCP6KUj5RSQZvSZGdFs3C24DdLQs8xgJPWv792","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:361 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12359/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12359/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id c6c15a99403f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 27fa9b8c3273
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c6c15a99403f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1bd4134be9d6
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 27fa9b8c3273. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-11-21_03-15-18__3d46ef46-a6fc-46eb-b20a-828d3dca647b__wakuorg_go-waku:latest.log