[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.138.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38760', '38761', '38762', '38763', '38764']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38760:38760 -p 38761:38761 -p 38762:38762 -p 38763:38763 -p 38764:38764 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38762 --rest-port=38760 --tcp-port=38761 --discv5-udp-port=38763 --rest-address=0.0.0.0 --nat=extip:172.18.138.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=46da353ca499dbddfd9bcfaa58646b8c614873d402fbe896f16f9d6a2e5e7f01 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38764 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.138.79 waku b60b0c17bff769ae76e055d8c6c43fe60dc04fc322eb70c048241d551b8a2642
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b60b0c17bff7. Setting up logs at ./log/docker/receiving_node1_2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 38760
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dccda85bf14f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38760/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38760/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.79/tcp/38761/p2p/16Uiu2HAmTFQzdwxXU6QQje6hhwfrnLVYkgd1rXFEq6FxvQ6TvS2z","/ip4/172.18.138.79/tcp/38762/ws/p2p/16Uiu2HAmTFQzdwxXU6QQje6hhwfrnLVYkgd1rXFEq6FxvQ6TvS2z"],"enrUri":"enr:-L24QBM0VQ0hU_AuXH4brleE1omlaN0Gg0FtHD-y1zhHeqOiY8v6in0XvXhnF0N4Wn2PjvyA24xt0BNDatVk6wqgploCgmlkgnY0gmlwhKwSik-KbXVsdGlhZGRyc5YACASsEopPBpdpAAoErBKKTwaXat0DgnJzhQADAQAAiXNlY3AyNTZrMaED2NU6vcq9VXYyb_pQENH7m-ftAHw5Xpxrr0UYr2yO9j-DdGNwgpdpg3VkcIKXa4V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.148.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21250', '21251', '21252', '21253', '21254']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21250:21250 -p 21251:21251 -p 21252:21252 -p 21253:21253 -p 21254:21254 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21252 --rest-port=21250 --tcp-port=21251 --discv5-udp-port=21253 --rest-address=0.0.0.0 --nat=extip:172.18.148.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da62e0dcbdf5dae2d8b899d2014ddcacd0142d3fe171c2b6cb52b8bf10fa6c3e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21254 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.148.52 waku ae6349c4ce73ee43ee56b695a73f159998aca9646904decb274ece20916b4960
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ae6349c4ce73. Setting up logs at ./log/docker/receiving_node2_2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 21250
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21250/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21250/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.52/tcp/21251/p2p/16Uiu2HAmNYb4GtXBEJFhFwxKsMrj8c4J9ECJDUB3GAhrNWspBzhX","/ip4/172.18.148.52/tcp/21252/ws/p2p/16Uiu2HAmNYb4GtXBEJFhFwxKsMrj8c4J9ECJDUB3GAhrNWspBzhX"],"enrUri":"enr:-L24QJxIt2S6_bw1loEfxSB04FyMmFlcbDCbZCwCZT3IaRtXdYuGQoYhdd-GOyJ2IbF883qkUuVIC_BHMiGGQbMQ1iUCgmlkgnY0gmlwhKwSlDSKbXVsdGlhZGRyc5YACASsEpQ0BlMDAAoErBKUNAZTBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkvEL6J3ve657tiR-fLgQywKZdBCOJA2J9lVjwwitabKDdGNwglMDg3VkcIJTBYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21250/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.79/tcp/38761/p2p/16Uiu2HAmTFQzdwxXU6QQje6hhwfrnLVYkgd1rXFEq6FxvQ6TvS2z"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.70.104
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45529', '45530', '45531', '45532', '45533']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45529:45529 -p 45530:45530 -p 45531:45531 -p 45532:45532 -p 45533:45533 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=45531 --rest-port=45529 --tcp-port=45530 --discv5-udp-port=45532 --rest-address=0.0.0.0 --nat=extip:172.18.70.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=70abc213cbb6f9c7f8bbc5d0c9ab18cdce4cf6f4c5dadfed358ecce0d0cc4267 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QBM0VQ0hU_AuXH4brleE1omlaN0Gg0FtHD-y1zhHeqOiY8v6in0XvXhnF0N4Wn2PjvyA24xt0BNDatVk6wqgploCgmlkgnY0gmlwhKwSik-KbXVsdGlhZGRyc5YACASsEopPBpdpAAoErBKKTwaXat0DgnJzhQADAQAAiXNlY3AyNTZrMaED2NU6vcq9VXYyb_pQENH7m-ftAHw5Xpxrr0UYr2yO9j-DdGNwgpdpg3VkcIKXa4V3YWt1Mg0 --lightpushnode=/ip4/172.18.138.79/tcp/38761/p2p/16Uiu2HAmTFQzdwxXU6QQje6hhwfrnLVYkgd1rXFEq6FxvQ6TvS2z --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.70.104 waku 33a95826fb0fb7692692f2c7617e6fe33b321fa7018e7508c4e3a050214f1255
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 33a95826fb0f. Setting up logs at ./log/docker/lightpush_node1_2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 45529
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45529/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QMF72uHzbcwCHrACktKiQ12xeB4f3lXplczgTgyVZaLZWJVlYE8y2xGIeT3aVYROFWJbYf3c6A3RxgfSZhORVX6GAZNM0x7lgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDFIZDPEYDt_nFInm70WE-_BQBs-tdQCdRn0W_llZO_4-DdGNwgrHag3VkcIKx3IV3YWt1Mgg","listenAddresses":["/ip4/127.0.0.1/tcp/45530/p2p/16Uiu2HAmE37FHduAdndHjcERs9Ur3jkXuagruH5SRoh1VNVB99Hp","/ip4/127.0.0.1/tcp/45531/ws/p2p/16Uiu2HAmE37FHduAdndHjcERs9Ur3jkXuagruH5SRoh1VNVB99Hp","/ip4/172.17.0.2/tcp/45530/p2p/16Uiu2HAmE37FHduAdndHjcERs9Ur3jkXuagruH5SRoh1VNVB99Hp","/ip4/172.17.0.2/tcp/45531/ws/p2p/16Uiu2HAmE37FHduAdndHjcERs9Ur3jkXuagruH5SRoh1VNVB99Hp"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45529/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.138.79/tcp/38761/p2p/16Uiu2HAmTFQzdwxXU6QQje6hhwfrnLVYkgd1rXFEq6FxvQ6TvS2z", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45529/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.148.52/tcp/21251/p2p/16Uiu2HAmNYb4GtXBEJFhFwxKsMrj8c4J9ECJDUB3GAhrNWspBzhX", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38760/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21250/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45529/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732160725949405696}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:45529/lightpush/v1/message. Response content: b'lightpush error'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b60b0c17bff7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ae6349c4ce73
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b60b0c17bff7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 33a95826fb0f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ae6349c4ce73. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node2_2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-11-21_03-45-19__bd95f511-cfac-458d-91a9-0c937049cb80__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.82.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58742', '58743', '58744', '58745', '58746']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58742:58742 -p 58743:58743 -p 58744:58744 -p 58745:58745 -p 58746:58746 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58744 --rest-port=58742 --tcp-port=58743 --discv5-udp-port=58745 --rest-address=0.0.0.0 --nat=extip:172.18.82.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4bf638990a9aa3ca4cee11db2ea409aab4ad2bf35bd0b0aadbff1f5cb6ec4bc4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58746 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.82.208 waku 26288c3ff9324302374ccd273b3a3a955507e4b129260a155973c6206c40aabd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 26288c3ff932. Setting up logs at ./log/docker/receiving_node1_2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 58742
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 33a95826fb0f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58742/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58742/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.208/tcp/58743/p2p/16Uiu2HAm3wV3DdrEEdQ7zMvmNsmCeQ5HCYhVQBYqbbf4Q4NuFBTg","/ip4/172.18.82.208/tcp/58744/ws/p2p/16Uiu2HAm3wV3DdrEEdQ7zMvmNsmCeQ5HCYhVQBYqbbf4Q4NuFBTg"],"enrUri":"enr:-L24QAXMFVuVczKI0zzdQdks14OtErCoBupx_2dvr_VjhSQJHqpOGx0FV2hfIPWS7nkyDyjChdOPkvw4Mzxs1UsHb4wCgmlkgnY0gmlwhKwSUtCKbXVsdGlhZGRyc5YACASsElLQBuV3AAoErBJS0AbleN0DgnJzhQADAQAAiXNlY3AyNTZrMaECfoCMeKx68dN3ANyIERvdeBzfg5R1z4_74qyEy8H5AEODdGNwguV3g3VkcILleYV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.53.46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5033', '5034', '5035', '5036', '5037']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5033:5033 -p 5034:5034 -p 5035:5035 -p 5036:5036 -p 5037:5037 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5035 --rest-port=5033 --tcp-port=5034 --discv5-udp-port=5036 --rest-address=0.0.0.0 --nat=extip:172.18.53.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=31fb6deedc974f0c2ef8c61f5d4ca0cb943faa0db3f10f66f7f1b940ac57adab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5037 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.53.46 waku 40594ca90b547714c43e091f108374baa15de67ae29bad383ef34c701a6a0b02
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 40594ca90b54. Setting up logs at ./log/docker/receiving_node2_2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 5033
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5033/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5033/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.46/tcp/5034/p2p/16Uiu2HAm19XsopzdEnFafD4YREGsLE1S6DaCXGjqYefHuhXhGheL","/ip4/172.18.53.46/tcp/5035/ws/p2p/16Uiu2HAm19XsopzdEnFafD4YREGsLE1S6DaCXGjqYefHuhXhGheL"],"enrUri":"enr:-L24QM4Qi4EbXdejEiEvraK6botgntq5RB9LUQ4sukCWKh0jAE4CQcpUkAfTLUOkB0r_nVs4ceAVA3sqwtxwtSHW85UCgmlkgnY0gmlwhKwSNS6KbXVsdGlhZGRyc5YACASsEjUuBhOqAAoErBI1LgYTq90DgnJzhQADAQAAiXNlY3AyNTZrMaECVQOqkq8ZkKS76i4B8xLbObKDHflB-ENByfvo6P5cZa2DdGNwghOqg3VkcIITrIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5033/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.82.208/tcp/58743/p2p/16Uiu2HAm3wV3DdrEEdQ7zMvmNsmCeQ5HCYhVQBYqbbf4Q4NuFBTg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.112.65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61025', '61026', '61027', '61028', '61029']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61025:61025 -p 61026:61026 -p 61027:61027 -p 61028:61028 -p 61029:61029 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=61027 --rest-port=61025 --tcp-port=61026 --discv5-udp-port=61028 --rest-address=0.0.0.0 --nat=extip:172.18.112.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc564dbecb73dfd51a4ede07dabd0a92c978d90af66afeefdfdacfcf4ec16d09 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QAXMFVuVczKI0zzdQdks14OtErCoBupx_2dvr_VjhSQJHqpOGx0FV2hfIPWS7nkyDyjChdOPkvw4Mzxs1UsHb4wCgmlkgnY0gmlwhKwSUtCKbXVsdGlhZGRyc5YACASsElLQBuV3AAoErBJS0AbleN0DgnJzhQADAQAAiXNlY3AyNTZrMaECfoCMeKx68dN3ANyIERvdeBzfg5R1z4_74qyEy8H5AEODdGNwguV3g3VkcILleYV3YWt1Mg0 --lightpushnode=/ip4/172.18.82.208/tcp/58743/p2p/16Uiu2HAm3wV3DdrEEdQ7zMvmNsmCeQ5HCYhVQBYqbbf4Q4NuFBTg --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.112.65 waku 1459be23471e945f5852e76462061221d8c8a4a9c8b8de73e59b99b7af78ab69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1459be23471e. Setting up logs at ./log/docker/lightpush_node1_2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 61025
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61025/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QHYhiGVx9mElOdvzujIIlBDPBhYb3uJwKTI1nJkyApl1G6q1Ms-bS0rPJfl2bk8ohqqPeN3-EuSgO4bRG1mr36SGAZNM00gbgmlkgnY0gmlwhKwRAAmCcnODAAMAiXNlY3AyNTZrMaEDZh-RN8P31fYKnjmB2ng8jrxLuFE_kPtG0ghJB2YicaCDdGNwgu5ig3VkcILuZIV3YWt1Mgg","listenAddresses":["/ip4/127.0.0.1/tcp/61026/p2p/16Uiu2HAmKXdrVFVVwT5ogNoTzpDiZpFQLUBTbfzMVXWrxsH7nnuV","/ip4/127.0.0.1/tcp/61027/ws/p2p/16Uiu2HAmKXdrVFVVwT5ogNoTzpDiZpFQLUBTbfzMVXWrxsH7nnuV","/ip4/172.17.0.9/tcp/61026/p2p/16Uiu2HAmKXdrVFVVwT5ogNoTzpDiZpFQLUBTbfzMVXWrxsH7nnuV","/ip4/172.17.0.9/tcp/61027/ws/p2p/16Uiu2HAmKXdrVFVVwT5ogNoTzpDiZpFQLUBTbfzMVXWrxsH7nnuV"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61025/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.82.208/tcp/58743/p2p/16Uiu2HAm3wV3DdrEEdQ7zMvmNsmCeQ5HCYhVQBYqbbf4Q4NuFBTg", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61025/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.53.46/tcp/5034/p2p/16Uiu2HAm19XsopzdEnFafD4YREGsLE1S6DaCXGjqYefHuhXhGheL", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58742/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5033/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61025/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732160736375268352}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:61025/lightpush/v1/message. Response content: b'lightpush error'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 26288c3ff932
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 40594ca90b54
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 26288c3ff932. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1459be23471e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 40594ca90b54. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node2_2024-11-21_03-45-31__87212743-3c93-4ab1-9283-bfa91cdc4b61__wakuorg_nwaku:latest.log