[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_content_topic with id: 2024-10-06_03-24-31__392a16ab-fc50-428b-9a38-167b23709b28
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-06_03-24-31__392a16ab-fc50-428b-9a38-167b23709b28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.145.172
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29721', '29722', '29723', '29724', '29725']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29721:29721 -p 29722:29722 -p 29723:29723 -p 29724:29724 -p 29725:29725 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29723 --rest-port=29721 --tcp-port=29722 --discv5-udp-port=29724 --rest-address=0.0.0.0 --nat=extip:172.18.145.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ac3a27f8d5fb0719ddfb44aa55bd71ca9e8d18d0ddeebdbd9b6c64ae40b7be8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29725 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.145.172 waku 18032b9044011aa8c8da21cc408fd4dbba168af747c4abe61161564281d665b0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 18032b904401. Setting up logs at ./log/docker/receiving_node1_2024-10-06_03-24-31__392a16ab-fc50-428b-9a38-167b23709b28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29721
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29721/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29721/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.172/tcp/29722/p2p/16Uiu2HAmJjvyuDUqXgxjBUKgtV6nUq9vBnzeKkGUMiFpYtUmaqLM","/ip4/172.18.145.172/tcp/29723/ws/p2p/16Uiu2HAmJjvyuDUqXgxjBUKgtV6nUq9vBnzeKkGUMiFpYtUmaqLM"],"enrUri":"enr:-LO4QLPI_3E-XMlDxqQbYWo63hmzjHcWg5KJvOSjmeGGIQKBbapTZALOX09-Lsrv-wa03MlSfz7IoLEZ5yWjR8CTHwIBgmlkgnY0gmlwhKwSkayKbXVsdGlhZGRyc4wACgSsEpGsBnQb3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNaajdt4cbaU4Pb7jsWCEy1FtzbAeKgwcC9qIsLdNnUKoN0Y3CCdBqDdWRwgnQchXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-06_03-24-31__392a16ab-fc50-428b-9a38-167b23709b28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.138.150
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8021', '8022', '8023', '8024', '8025']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8021:8021 -p 8022:8022 -p 8023:8023 -p 8024:8024 -p 8025:8025 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8023 --rest-port=8021 --tcp-port=8022 --discv5-udp-port=8024 --rest-address=0.0.0.0 --nat=extip:172.18.138.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfcdc9d9edface6c60fcfc0f05bcf79b1b2bdbffbe510d8624a784dbe6e6c227 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8025 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.138.150 waku 08a9fd29c2ca51f966f6ba038255f5926a94f2167236d303812ec72b1a504172
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 08a9fd29c2ca. Setting up logs at ./log/docker/receiving_node2_2024-10-06_03-24-31__392a16ab-fc50-428b-9a38-167b23709b28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8021
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8021/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8021/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.150/tcp/8022/p2p/16Uiu2HAmSDQcqBGAbAxYX6WiEhHfDQDvmrJUFW1RRC2CRmjfPZxr","/ip4/172.18.138.150/tcp/8023/ws/p2p/16Uiu2HAmSDQcqBGAbAxYX6WiEhHfDQDvmrJUFW1RRC2CRmjfPZxr"],"enrUri":"enr:-LO4QLvBgfgJl7OO3chhwEdID51tXWp1IXmVVgOXhZSS-eemd__laie0FcAV_LIdCZeVgG4sYt0z-r8UkhK7bKT3xuEBgmlkgnY0gmlwhKwSipaKbXVsdGlhZGRyc4wACgSsEoqWBh9X3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPJdfSvXOQ_g020YOwFxrvnGgiEZq1LBuEQkuJJwhItN4N0Y3CCH1aDdWRwgh9YhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8021/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.172/tcp/29722/p2p/16Uiu2HAmJjvyuDUqXgxjBUKgtV6nUq9vBnzeKkGUMiFpYtUmaqLM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-06_03-24-31__392a16ab-fc50-428b-9a38-167b23709b28__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.170.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5850', '5851', '5852', '5853', '5854']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5850:5850 -p 5851:5851 -p 5852:5852 -p 5853:5853 -p 5854:5854 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=5852 --rest-port=5850 --tcp-port=5851 --discv5-udp-port=5853 --rest-address=0.0.0.0 --nat=extip:172.18.170.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c00dad7ab2c93bc7aecc15fde0eba40e7e269ff7aa326e0ffdfa171ea0dbb2ec --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QLPI_3E-XMlDxqQbYWo63hmzjHcWg5KJvOSjmeGGIQKBbapTZALOX09-Lsrv-wa03MlSfz7IoLEZ5yWjR8CTHwIBgmlkgnY0gmlwhKwSkayKbXVsdGlhZGRyc4wACgSsEpGsBnQb3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNaajdt4cbaU4Pb7jsWCEy1FtzbAeKgwcC9qIsLdNnUKoN0Y3CCdBqDdWRwgnQchXdha3UyCQ --lightpushnode=/ip4/172.18.145.172/tcp/29722/p2p/16Uiu2HAmJjvyuDUqXgxjBUKgtV6nUq9vBnzeKkGUMiFpYtUmaqLM --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.170.213 waku a41a179fd0880c7fd94b34decc242c033ef49911c15aa888121d486199fbadd9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a41a179fd088. Setting up logs at ./log/docker/lightpush_node1_2024-10-06_03-24-31__392a16ab-fc50-428b-9a38-167b23709b28__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 5850
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5850/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QCks7zMsjXtfWrpLmm7RA1s8ZuD3XV_cJqiwKDYHWxV7XIYuP6c5bt1cuCVcGW_aQhvqtMw9Ga4inQGZ7uUAqfiGAZJf24SngmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQKV1IgaYeT56ayRbC9HAxxYPyeMpSF5nopoG8QsmVrTUYN0Y3CCFtuDdWRwghbdhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/5851/p2p/16Uiu2HAm5WYh2uZovg59EbWZe5yhmp6o6ZDRccYioWb1PxKiSJBr","/ip4/127.0.0.1/tcp/5852/ws/p2p/16Uiu2HAm5WYh2uZovg59EbWZe5yhmp6o6ZDRccYioWb1PxKiSJBr","/ip4/172.17.0.4/tcp/5851/p2p/16Uiu2HAm5WYh2uZovg59EbWZe5yhmp6o6ZDRccYioWb1PxKiSJBr","/ip4/172.17.0.4/tcp/5852/ws/p2p/16Uiu2HAm5WYh2uZovg59EbWZe5yhmp6o6ZDRccYioWb1PxKiSJBr"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5850/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.145.172/tcp/29722/p2p/16Uiu2HAmJjvyuDUqXgxjBUKgtV6nUq9vBnzeKkGUMiFpYtUmaqLM", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5850/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.138.150/tcp/8022/p2p/16Uiu2HAmSDQcqBGAbAxYX6WiEhHfDQDvmrJUFW1RRC2CRmjfPZxr", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29721/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8021/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5850/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1728185075937665536}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:5850/lightpush/v1/message. Response content: b'missing ContentTopic field'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 18032b904401
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 08a9fd29c2ca
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a41a179fd088
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.