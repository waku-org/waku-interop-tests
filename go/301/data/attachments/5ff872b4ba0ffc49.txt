[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_metrics_after_light_push with id: 2024-10-06_03-25-52__e6ffcbce-0e00-425f-9683-0c70db8c1bf0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-06_03-25-52__e6ffcbce-0e00-425f-9683-0c70db8c1bf0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.211.154
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55982', '55983', '55984', '55985', '55986']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55982:55982 -p 55983:55983 -p 55984:55984 -p 55985:55985 -p 55986:55986 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55984 --rest-port=55982 --tcp-port=55983 --discv5-udp-port=55985 --rest-address=0.0.0.0 --nat=extip:172.18.211.154 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=43fab035ebf59fe79b923f5dd0229b674aef3e3c2f6bf2f82dc8cdf63013ad4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55986 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.211.154 waku 00e82e32f8bb370eadec1cf691f80af9055fe6955839ba58462e7a859e154bf5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 00e82e32f8bb. Setting up logs at ./log/docker/receiving_node1_2024-10-06_03-25-52__e6ffcbce-0e00-425f-9683-0c70db8c1bf0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55982
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55982/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55982/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.154/tcp/55983/p2p/16Uiu2HAmHZTxsWUCt9ZX8eFi9RYRJVyGiRB4SSnuWaxwbzx9FzVQ","/ip4/172.18.211.154/tcp/55984/ws/p2p/16Uiu2HAmHZTxsWUCt9ZX8eFi9RYRJVyGiRB4SSnuWaxwbzx9FzVQ"],"enrUri":"enr:-LO4QGBDLCffoW4gMN9B-6mv7rnFEb_ZhDFvwQeXjWrh9z9ND-YNx8GrwhKl3L2n66iDTYGXdvGFYG0RFHFLD0U7sqkBgmlkgnY0gmlwhKwS05qKbXVsdGlhZGRyc4wACgSsEtOaBtqw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNI4Cwk2gYwYk3l2lIESND13c4byjlFf30ZMPBVJvWww4N0Y3CC2q-DdWRwgtqxhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-06_03-25-52__e6ffcbce-0e00-425f-9683-0c70db8c1bf0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.239.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8650', '8651', '8652', '8653', '8654']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8650:8650 -p 8651:8651 -p 8652:8652 -p 8653:8653 -p 8654:8654 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8652 --rest-port=8650 --tcp-port=8651 --discv5-udp-port=8653 --rest-address=0.0.0.0 --nat=extip:172.18.239.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5badb3f8c4d10931b58f870afaa906d9ef93b29a2dabfe52444f74dcce2fb3b2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8654 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.239.87 waku be502373c68b1187f27a904c8a2217855cc74456dc40dc824c8a5eec06a9acce
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID be502373c68b. Setting up logs at ./log/docker/receiving_node2_2024-10-06_03-25-52__e6ffcbce-0e00-425f-9683-0c70db8c1bf0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8650
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8650/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8650/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.87/tcp/8651/p2p/16Uiu2HAmRuHrT2NnFg9fqHAD3bnNf5yN8ksh5M3PjcJQNNovnQMY","/ip4/172.18.239.87/tcp/8652/ws/p2p/16Uiu2HAmRuHrT2NnFg9fqHAD3bnNf5yN8ksh5M3PjcJQNNovnQMY"],"enrUri":"enr:-LO4QBuTmwJH_Um_Y-8VuY91vne5UOzNNtdH6JW4LbSbFqaoQsgOyOyHYVfeG2HMCMxl4pamKCe9LmyS5Qxc7wPkkUgBgmlkgnY0gmlwhKwS71eKbXVsdGlhZGRyc4wACgSsEu9XBiHM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPE0doPNcxetVomPnyfZJ6Kmznoff-o5qDH5hMzMGPvu4N0Y3CCIcuDdWRwgiHNhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8650/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.211.154/tcp/55983/p2p/16Uiu2HAmHZTxsWUCt9ZX8eFi9RYRJVyGiRB4SSnuWaxwbzx9FzVQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-06_03-25-52__e6ffcbce-0e00-425f-9683-0c70db8c1bf0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.227.182
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['23867', '23868', '23869', '23870', '23871']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 23867:23867 -p 23868:23868 -p 23869:23869 -p 23870:23870 -p 23871:23871 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23869 --rest-port=23867 --tcp-port=23868 --discv5-udp-port=23870 --rest-address=0.0.0.0 --nat=extip:172.18.227.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ebdc59a64dda04bb7ce264ecdcae00e0bfdcd89c6cb7ff1c1e24cf56d52fd5d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QGBDLCffoW4gMN9B-6mv7rnFEb_ZhDFvwQeXjWrh9z9ND-YNx8GrwhKl3L2n66iDTYGXdvGFYG0RFHFLD0U7sqkBgmlkgnY0gmlwhKwS05qKbXVsdGlhZGRyc4wACgSsEtOaBtqw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNI4Cwk2gYwYk3l2lIESND13c4byjlFf30ZMPBVJvWww4N0Y3CC2q-DdWRwgtqxhXdha3UyCQ --lightpushnode=/ip4/172.18.211.154/tcp/55983/p2p/16Uiu2HAmHZTxsWUCt9ZX8eFi9RYRJVyGiRB4SSnuWaxwbzx9FzVQ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.227.182 waku 2f4590f517d6bd034744ee52d4a41e72ce46d9a4021c118840374515ff4fd99d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2f4590f517d6. Setting up logs at ./log/docker/lightpush_node1_2024-10-06_03-25-52__e6ffcbce-0e00-425f-9683-0c70db8c1bf0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 23867
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23867/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QMKoFGpOWaDN8MTy6079K0IbTddPwPG9fzD2hwK3u4V1fOmlmlls7m2TtLXMxAIPXJaMfeT3VlvkoTp5eb1wAn-GAZJf3MH9gmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQNXIAs3t1s0NEloHwIg5MKsX46hCzRkl7LyBk0NivdsToN0Y3CCXTyDdWRwgl0-hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/23868/p2p/16Uiu2HAmJX6AEfAqXK9j3TEC1855R4e2XpekTBAfTFcwdgk9w6A1","/ip4/127.0.0.1/tcp/23869/ws/p2p/16Uiu2HAmJX6AEfAqXK9j3TEC1855R4e2XpekTBAfTFcwdgk9w6A1","/ip4/172.17.0.6/tcp/23868/p2p/16Uiu2HAmJX6AEfAqXK9j3TEC1855R4e2XpekTBAfTFcwdgk9w6A1","/ip4/172.17.0.6/tcp/23869/ws/p2p/16Uiu2HAmJX6AEfAqXK9j3TEC1855R4e2XpekTBAfTFcwdgk9w6A1"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23867/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.211.154/tcp/55983/p2p/16Uiu2HAmHZTxsWUCt9ZX8eFi9RYRJVyGiRB4SSnuWaxwbzx9FzVQ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23867/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.239.87/tcp/8651/p2p/16Uiu2HAmRuHrT2NnFg9fqHAD3bnNf5yN8ksh5M3PjcJQNNovnQMY", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55982/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8650/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23867/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1728185157163903744}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55982/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728185157163903744,"ephemeral":false}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_topics has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_topics with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_subscriptions_total has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_subscriptions_total with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_peer_store_size has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_peer_store_size with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_histogram_message_size_count has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_histogram_message_size_count with value 1.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_node_messages_total{type="relay"} has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_node_messages_total{type="relay"} with value 1.0
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 00e82e32f8bb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id be502373c68b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2f4590f517d6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'unhandled': ['Error: unhandled exception: Asynchronous task [relayConnectivityLoop() at peer_manager.nim:906] finished with an exception "MetricsError"!']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'stacktrace': ['FAT 2024-10-06 03:26:02.726+00:00 Shutting down after receiving SIGSEGV      topics="wakunode main" tid=1 file=wakunode2.nim:124 stacktrace="/app/vendor/nim-chronicles/chronicles.nim(170) _ZN9wakunode213handleSigsegvE5int32\\n"', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/excpt.nim(526) _ZN6system15writeStackTraceE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/excpt.nim(330) _ZN6system18rawWriteStackTraceE3varI6stringE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(59) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI6stringE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/excpt.nim(345) _ZN6system18rawWriteStackTraceE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/excpt.nim(345) _ZN6system18rawWriteStackTraceE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE', '/app/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(62) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI3seqIN6system15StackTraceEntryEEE']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:114 Found matches for keyword 'SIGSEGV': ['FAT 2024-10-06 03:26:02.726+00:00 Shutting down after receiving SIGSEGV      topics="wakunode main" tid=1 file=wakunode2.nim:124 stacktrace="/app/vendor/nim-chronicles/chronicles.nim(170) _ZN9wakunode213handleSigsegvE5int32\\n"', '/app/apps/wakunode2/wakunode2.nim(127) _ZN9wakunode213handleSigsegvE5int32', 'Stack trace: /app/apps/wakunode2/wakunode2.nim(129) _ZN9wakunode213handleSigsegvE5int32', '/app/apps/wakunode2/wakunode2.nim(129) _ZN9wakunode213handleSigsegvE5int32', '/app/apps/wakunode2/wakunode2.nim(129) _ZN9wakunode213handleSigsegvE5int32', '/app/apps/wakunode2/wakunode2.nim(129) _ZN9wakunode213handleSigsegvE5int32']
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_metrics_after_light_push with id: 2024-10-06_03-26-05__7c9f445c-6d56-4522-a3fa-886e1f832557
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-06_03-26-05__7c9f445c-6d56-4522-a3fa-886e1f832557__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.34.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13011', '13012', '13013', '13014', '13015']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13011:13011 -p 13012:13012 -p 13013:13013 -p 13014:13014 -p 13015:13015 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13013 --rest-port=13011 --tcp-port=13012 --discv5-udp-port=13014 --rest-address=0.0.0.0 --nat=extip:172.18.34.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cfb5c7bb3054dd08ead15a378daeeb509c30ac8c8ad7315ffcafaaebb328ebbd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13015 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.34.253 waku e3c26cabadc5226cf572b66db32ca267e45ae380284378f3379805630b49e6be
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e3c26cabadc5. Setting up logs at ./log/docker/receiving_node1_2024-10-06_03-26-05__7c9f445c-6d56-4522-a3fa-886e1f832557__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13011
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13011/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13011/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.253/tcp/13012/p2p/16Uiu2HAmKnPCjXDSiHJXmrmVFR9L79HJ2S7widnpzRjPq56LGtjM","/ip4/172.18.34.253/tcp/13013/ws/p2p/16Uiu2HAmKnPCjXDSiHJXmrmVFR9L79HJ2S7widnpzRjPq56LGtjM"],"enrUri":"enr:-LO4QMRk8TYs8FybM-jXo2cHNZCXtbUUTfedENlTXco71GPsRXaCYm8CGY5o6xtAkfRbK-eRtaA5SzP0H4FwC5wp3I8BgmlkgnY0gmlwhKwSIv2KbXVsdGlhZGRyc4wACgSsEiL9BjLV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNp5raqJpfZk4C3BA_Jx0pTNK3WN5bdBqpQfSpufJB3bIN0Y3CCMtSDdWRwgjLWhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-06_03-26-05__7c9f445c-6d56-4522-a3fa-886e1f832557__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.73.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41900', '41901', '41902', '41903', '41904']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41900:41900 -p 41901:41901 -p 41902:41902 -p 41903:41903 -p 41904:41904 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41902 --rest-port=41900 --tcp-port=41901 --discv5-udp-port=41903 --rest-address=0.0.0.0 --nat=extip:172.18.73.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=70a2ac5c7992c8fe566a20a8f5568beadc9ccdbaf0110566c1681ff8ec3f0a38 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41904 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.73.250 waku 57e177cf53143ec0cabe73e73555e56c619b84e04983e561bc35cffb141ae6bf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 57e177cf5314. Setting up logs at ./log/docker/receiving_node2_2024-10-06_03-26-05__7c9f445c-6d56-4522-a3fa-886e1f832557__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 41900
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41900/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41900/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.250/tcp/41901/p2p/16Uiu2HAkx6XHSwRbKhLrmEjWrzkVxcWSbeCpA47T5AwEpWUc2yLp","/ip4/172.18.73.250/tcp/41902/ws/p2p/16Uiu2HAkx6XHSwRbKhLrmEjWrzkVxcWSbeCpA47T5AwEpWUc2yLp"],"enrUri":"enr:-LO4QNaM-0ze1PmCIXTyMTqlnamyTCQDur5xPf-snt3RQB2qctn830gpAQNW2b3RkUw5n-kMktX-yJQuVFzYXc9uIowBgmlkgnY0gmlwhKwSSfqKbXVsdGlhZGRyc4wACgSsEkn6BqOu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQInqzF4ofMJj_hBsnNT76uYFM5hfnzTPl1HzTOzH1a_VYN0Y3CCo62DdWRwgqOvhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41900/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.253/tcp/13012/p2p/16Uiu2HAmKnPCjXDSiHJXmrmVFR9L79HJ2S7widnpzRjPq56LGtjM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-06_03-26-05__7c9f445c-6d56-4522-a3fa-886e1f832557__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.123.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64541', '64542', '64543', '64544', '64545']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64541:64541 -p 64542:64542 -p 64543:64543 -p 64544:64544 -p 64545:64545 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=64543 --rest-port=64541 --tcp-port=64542 --discv5-udp-port=64544 --rest-address=0.0.0.0 --nat=extip:172.18.123.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fdede1bafd0b38859544edb24597b111fe3ef9a03ef8a75ca88febdadb1b7d52 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QMRk8TYs8FybM-jXo2cHNZCXtbUUTfedENlTXco71GPsRXaCYm8CGY5o6xtAkfRbK-eRtaA5SzP0H4FwC5wp3I8BgmlkgnY0gmlwhKwSIv2KbXVsdGlhZGRyc4wACgSsEiL9BjLV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNp5raqJpfZk4C3BA_Jx0pTNK3WN5bdBqpQfSpufJB3bIN0Y3CCMtSDdWRwgjLWhXdha3UyCQ --lightpushnode=/ip4/172.18.34.253/tcp/13012/p2p/16Uiu2HAmKnPCjXDSiHJXmrmVFR9L79HJ2S7widnpzRjPq56LGtjM --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.123.250 waku 9699f495aa41b48e0a50661d3e5d76b0efac65f35f239af93d93e7dcd03ba534
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9699f495aa41. Setting up logs at ./log/docker/lightpush_node1_2024-10-06_03-26-05__7c9f445c-6d56-4522-a3fa-886e1f832557__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 64541
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64541/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJOjg21rWuITA8-hdwJ3hUIVDHhkHLkxkktoT2Dv6uceGBUczK7_3-hr4NMqil-JVG2t25Wz7D_EEK80zqWJyNWGAZJf3PSmgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQPY-xviu_avpX_uJh30VSYWOj-YvXjsPNCCEFzZAZ1CYYN0Y3CC_B6DdWRwgvwghXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/64542/p2p/16Uiu2HAmTFzVgd7uTc3RAYpXA2jBCddXDNLxkjmiXADGzUYCX7oW","/ip4/127.0.0.1/tcp/64543/ws/p2p/16Uiu2HAmTFzVgd7uTc3RAYpXA2jBCddXDNLxkjmiXADGzUYCX7oW","/ip4/172.17.0.2/tcp/64542/p2p/16Uiu2HAmTFzVgd7uTc3RAYpXA2jBCddXDNLxkjmiXADGzUYCX7oW","/ip4/172.17.0.2/tcp/64543/ws/p2p/16Uiu2HAmTFzVgd7uTc3RAYpXA2jBCddXDNLxkjmiXADGzUYCX7oW"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64541/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.34.253/tcp/13012/p2p/16Uiu2HAmKnPCjXDSiHJXmrmVFR9L79HJ2S7widnpzRjPq56LGtjM", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64541/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.250/tcp/41901/p2p/16Uiu2HAkx6XHSwRbKhLrmEjWrzkVxcWSbeCpA47T5AwEpWUc2yLp", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13011/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41900/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64541/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1728185170132954368}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728185170132954368,"ephemeral":false}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_topics has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_topics with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_subscriptions_total has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_subscriptions_total with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_peer_store_size has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_peer_store_size with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_histogram_message_size_count has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_histogram_message_size_count with value 1.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_node_messages_total{type="relay"} has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_node_messages_total{type="relay"} with value 1.0
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e3c26cabadc5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 57e177cf5314
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9699f495aa41
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.