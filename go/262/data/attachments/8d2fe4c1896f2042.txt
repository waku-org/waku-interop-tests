[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_peers_after_node1_was_restarted with id: 2024-08-30_08-56-49__0bd682ec-44ca-4fed-8ff2-b6bc7ba76453
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-30_08-56-49__0bd682ec-44ca-4fed-8ff2-b6bc7ba76453__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.34.125
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15903', '15904', '15905', '15906', '15907']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15903:15903 -p 15904:15904 -p 15905:15905 -p 15906:15906 -p 15907:15907 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15905 --rest-port=15903 --tcp-port=15904 --discv5-udp-port=15906 --rest-address=0.0.0.0 --nat=extip:172.18.34.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecca1ad005f95b38b6f2c43fedc3abcb333d84930dab8e9ed5416588bc7bcb8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15907 --metrics-logging=true --relay=true --relay-peer-exchange=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.34.125 waku 56a93041b07e7960b23cb323bc685aabfc1e4fdeafc76cd14c9f4d61a862c594
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 56a93041b07e. Setting up logs at ./log/docker/node1_2024-08-30_08-56-49__0bd682ec-44ca-4fed-8ff2-b6bc7ba76453__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15903
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15903/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15903/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.125/tcp/15904/p2p/16Uiu2HAm9tQKRJRPSZgGo8tkSABZnquei1Q8MwBosBEpuvBoxTQA","/ip4/172.18.34.125/tcp/15905/ws/p2p/16Uiu2HAm9tQKRJRPSZgGo8tkSABZnquei1Q8MwBosBEpuvBoxTQA"],"enrUri":"enr:-LO4QDsXdNI5_0MbZDHDAXa9ufW33YUvlW7o1oLKl6XWN2jcLvOkknBs04wN5A6UeUyR5UE_V7SMMJY9T_6EdcqzFL0BgmlkgnY0gmlwhKwSIn2KbXVsdGlhZGRyc4wACgSsEiJ9Bj4h3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLW3JcVRJOfg67bsnvo032dDrBJmdtLmmTxZcsh3o5w34N0Y3CCPiCDdWRwgj4ihXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-30_08-56-49__0bd682ec-44ca-4fed-8ff2-b6bc7ba76453__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.142.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63332', '63333', '63334', '63335', '63336']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63332:63332 -p 63333:63333 -p 63334:63334 -p 63335:63335 -p 63336:63336 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=63334 --rest-port=63332 --tcp-port=63333 --discv5-udp-port=63335 --rest-address=0.0.0.0 --nat=extip:172.18.142.64 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=39ba9ce9aaa92da02d8ad7eb7cb1ddcc47b4eaac6a142aca02ebb3499daddfc9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QDsXdNI5_0MbZDHDAXa9ufW33YUvlW7o1oLKl6XWN2jcLvOkknBs04wN5A6UeUyR5UE_V7SMMJY9T_6EdcqzFL0BgmlkgnY0gmlwhKwSIn2KbXVsdGlhZGRyc4wACgSsEiJ9Bj4h3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLW3JcVRJOfg67bsnvo032dDrBJmdtLmmTxZcsh3o5w34N0Y3CCPiCDdWRwgj4ihXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.142.64 waku e8a567f40ba06fbcf65ab9d3b8f8bb66b991dc8825a9e528a10c7913b9138f8b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e8a567f40ba0. Setting up logs at ./log/docker/node2_2024-08-30_08-56-49__0bd682ec-44ca-4fed-8ff2-b6bc7ba76453__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 63332
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63332/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QNjuBF0CzhkUA-g2yXWsiLGAExpZEI8imvMqV_I9-7oUPY2-8P4Jp8FOi_2j8rX23EjkPV0i1cPeNfSYsAjNXaWGAZGigHBzgmlkgnY0gmlwhKwRAA6Jc2VjcDI1NmsxoQKLEod4-NwbaFwX5CR_cwZRtfOdLY9x7HenOEm0dTSMO4N0Y3CC92WDdWRwgvdnhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/63333/p2p/16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8","/ip4/127.0.0.1/tcp/63334/ws/p2p/16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8","/ip4/172.17.0.14/tcp/63333/p2p/16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8","/ip4/172.17.0.14/tcp/63334/ws/p2p/16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63332/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.34.125/tcp/15904/p2p/16Uiu2HAm9tQKRJRPSZgGo8tkSABZnquei1Q8MwBosBEpuvBoxTQA", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15903/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15903/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.14/tcp/63333/p2p/16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:244 Restarting container with id 56a93041b07e
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-08-30_08-56-49__0bd682ec-44ca-4fed-8ff2-b6bc7ba76453__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.21.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50552', '50553', '50554', '50555', '50556']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50552:50552 -p 50553:50553 -p 50554:50554 -p 50555:50555 -p 50556:50556 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=50554 --rest-port=50552 --tcp-port=50553 --discv5-udp-port=50555 --rest-address=0.0.0.0 --nat=extip:172.18.21.218 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --nodekey=bc8cc67fe6d4b9ab2ebffe2ffeaed73cbf099a77fe49d7c5a9eadcd4ccdaf194 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.14/tcp/63333/p2p/16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.99.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59368', '59369', '59370', '59371', '59372']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59368:59368 -p 59369:59369 -p 59370:59370 -p 59371:59371 -p 59372:59372 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=59370 --rest-port=59368 --tcp-port=59369 --discv5-udp-port=59371 --rest-address=0.0.0.0 --nat=extip:172.18.99.119 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --nodekey=ce3bffa74d5eb45c48e79b05ce1e5575a3dba6fbfd2dc878125d9de5abc2a4ce --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.14/tcp/63333/p2p/16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.99.119 waku 5562e5ad836f513aa77697043f2f5533fb46c73c4d1a1edc59064aecb111c8d3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5562e5ad836f. Setting up logs at ./log/docker/node3_2024-08-30_08-56-49__0bd682ec-44ca-4fed-8ff2-b6bc7ba76453__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 59368
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59368/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-JG4QF75PbQMJ2cur2R-A0YwFkEM1i2Sl5sDSNxXnKjOn7Unc7Sp81u8NmLJfL5LnIJT2au-71xVQlgXxw4mXu694FuGAZGigI3ggmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQKa7aST0gI_f_LQmq4gflq3-ATh2VkZYC2ZPhMRQvBheIN0Y3CC5-mFd2FrdTKA","listenAddresses":["/ip4/127.0.0.1/tcp/59369/p2p/16Uiu2HAm5rSwMmXXKSvoFtqt1pNTCEvYuFzZKfZuP1A3RbZVnL3H","/ip4/127.0.0.1/tcp/59370/ws/p2p/16Uiu2HAm5rSwMmXXKSvoFtqt1pNTCEvYuFzZKfZuP1A3RbZVnL3H","/ip4/172.17.0.6/tcp/59369/p2p/16Uiu2HAm5rSwMmXXKSvoFtqt1pNTCEvYuFzZKfZuP1A3RbZVnL3H","/ip4/172.17.0.6/tcp/59370/ws/p2p/16Uiu2HAm5rSwMmXXKSvoFtqt1pNTCEvYuFzZKfZuP1A3RbZVnL3H"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59368/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.34.125/tcp/15904/p2p/16Uiu2HAm9tQKRJRPSZgGo8tkSABZnquei1Q8MwBosBEpuvBoxTQA", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59368/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8","multiaddrs":["/ip4/172.17.0.14/tcp/63333/p2p/16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8","/ip4/172.17.0.14/tcp/63334/ws/p2p/16Uiu2HAm4nZ37jBgT9KypWywXYNapSTGwZHvKCF6afZsh7cMs6h8"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/default-waku/proto"]},{"id":"16Uiu2HAm9tQKRJRPSZgGo8tkSABZnquei1Q8MwBosBEpuvBoxTQA","multiaddrs":["/ip4/172.18.34.125/tcp/15904/p2p/16Uiu2HAm9tQKRJRPSZgGo8tkSABZnquei1Q8MwBosBEpuvBoxTQA","/ip4/172.18.34.125/tcp/15905/ws/p2p/16Uiu2HAm9tQKRJRPSZgGo8tkSABZnquei1Q8MwBosBEpuvBoxTQA"],"protocols":["/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/2","/waku/2/rs/3/3","/waku/2/rs/3/7","/waku/2/rs/3/8","/waku/2/rs/3/1","/waku/2/rs/3/4","/waku/2/rs/3/5","/waku/2/rs/3/6"]}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 56a93041b07e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e8a567f40ba0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5562e5ad836f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.