[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-09-27_03-22-22__555ed4a6-965a-4bc2-a6b0-d7f045aabf94
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-27_03-22-22__555ed4a6-965a-4bc2-a6b0-d7f045aabf94__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.137.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['43752', '43753', '43754', '43755', '43756']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 43752:43752 -p 43753:43753 -p 43754:43754 -p 43755:43755 -p 43756:43756 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43754 --rest-port=43752 --tcp-port=43753 --discv5-udp-port=43755 --rest-address=0.0.0.0 --nat=extip:172.18.137.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=06fdd9bdeafb17962abf8b6ed6dc0fdc30fe446a88d6c5f2fef08a5a3edeb3ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43756 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.148.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33420', '33421', '33422', '33423', '33424']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33420:33420 -p 33421:33421 -p 33422:33422 -p 33423:33423 -p 33424:33424 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33422 --rest-port=33420 --tcp-port=33421 --discv5-udp-port=33423 --rest-address=0.0.0.0 --nat=extip:172.18.148.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ea9d9adf30fef08bdacf25e35dccbc6f4ddff39d9dd1bfe11c9fb6c8caabac0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33424 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.148.16 waku f8ed32b566c6b76f84a1237d1d50604d7497190888efe96a5bdf617006425a7b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f8ed32b566c6. Setting up logs at ./log/docker/receiving_node1_2024-09-27_03-22-22__555ed4a6-965a-4bc2-a6b0-d7f045aabf94__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33420
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33420/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33420/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.16/tcp/33421/p2p/16Uiu2HAkyiEDbkCcEjotQ4fVQmygrigKgdNN2sHFyrPUMSz7vUY2","/ip4/172.18.148.16/tcp/33422/ws/p2p/16Uiu2HAkyiEDbkCcEjotQ4fVQmygrigKgdNN2sHFyrPUMSz7vUY2"],"enrUri":"enr:-LO4QBaDk9BwSLHZlHSyLUmkR4ZXyY6rhchuMkJrq2i6iSE7G6LLEBQmFOPf86Gf4qDFA1lZjcmLhQmcyHGpX3Vq1FMBgmlkgnY0gmlwhKwSlBCKbXVsdGlhZGRyc4wACgSsEpQQBoKO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI_rH4IoYJQ1jqazFWTMGigTwNfUWmHQPtCNcOi_KC8W4N0Y3CCgo2DdWRwgoKPhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-27_03-22-22__555ed4a6-965a-4bc2-a6b0-d7f045aabf94__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.13.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22757', '22758', '22759', '22760', '22761']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22757:22757 -p 22758:22758 -p 22759:22759 -p 22760:22760 -p 22761:22761 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22759 --rest-port=22757 --tcp-port=22758 --discv5-udp-port=22760 --rest-address=0.0.0.0 --nat=extip:172.18.13.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8401d31f66f23462af4dededce7b4e27aa292e15bbfda3ced4db6a4bce01dc0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22761 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.13.41 waku be1e9638aedf91be68e8f86bed9620e54eca222f676ad642407cd87b979f7fe1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID be1e9638aedf. Setting up logs at ./log/docker/receiving_node2_2024-09-27_03-22-22__555ed4a6-965a-4bc2-a6b0-d7f045aabf94__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22757
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22757/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22757/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.41/tcp/22758/p2p/16Uiu2HAkyBea9gYwzCSNLuTHb8MLj5b4eJkZM1A55FUXdMeX8KZz","/ip4/172.18.13.41/tcp/22759/ws/p2p/16Uiu2HAkyBea9gYwzCSNLuTHb8MLj5b4eJkZM1A55FUXdMeX8KZz"],"enrUri":"enr:-LO4QFlAxDuB18NVszckOWmWCs9ZyijsMxqpy4EGBybZzE8qWaUXsn9qIn034rDs9CMKd1-YcKfGuzg7OeGC5S28ruUBgmlkgnY0gmlwhKwSDSmKbXVsdGlhZGRyc4wACgSsEg0pBljn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI31wZWdrjnfnxeXzHcIYQqos0cN3PMN001kRN1-Dn-GYN0Y3CCWOaDdWRwgljohXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22757/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.16/tcp/33421/p2p/16Uiu2HAkyiEDbkCcEjotQ4fVQmygrigKgdNN2sHFyrPUMSz7vUY2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-27_03-22-22__555ed4a6-965a-4bc2-a6b0-d7f045aabf94__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.151.117
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26509', '26510', '26511', '26512', '26513']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26509:26509 -p 26510:26510 -p 26511:26511 -p 26512:26512 -p 26513:26513 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=26511 --rest-port=26509 --tcp-port=26510 --discv5-udp-port=26512 --rest-address=0.0.0.0 --nat=extip:172.18.151.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=02beacc535bf468b3b8f1e1dfeead6d4ea62dd4ffe439037b59eb7faea2c1d5c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QBaDk9BwSLHZlHSyLUmkR4ZXyY6rhchuMkJrq2i6iSE7G6LLEBQmFOPf86Gf4qDFA1lZjcmLhQmcyHGpX3Vq1FMBgmlkgnY0gmlwhKwSlBCKbXVsdGlhZGRyc4wACgSsEpQQBoKO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI_rH4IoYJQ1jqazFWTMGigTwNfUWmHQPtCNcOi_KC8W4N0Y3CCgo2DdWRwgoKPhXdha3UyCQ --lightpushnode=/ip4/172.18.148.16/tcp/33421/p2p/16Uiu2HAkyiEDbkCcEjotQ4fVQmygrigKgdNN2sHFyrPUMSz7vUY2 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.151.117 waku 270d0aac13eb39beaa93e896c3e7ee16ac6ee5b230f6677612f1ebe708ae3054
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 270d0aac13eb. Setting up logs at ./log/docker/lightpush_node1_2024-09-27_03-22-22__555ed4a6-965a-4bc2-a6b0-d7f045aabf94__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 26509
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26509/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QPG1Ty0Q-irjahaQ7rUfZMZrpVoQWqFFZxKkBcZggDl8bnVSaa-YwTwmQm46Kwmxech0H5XbyYqsTl7bbJgJxjOGAZIxgFJygmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQMHWSWWPoj1LDbJElSSMVoRbh03lKdvh7fuJRELhw63RIN0Y3CCZ46DdWRwgmeQhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/26510/p2p/16Uiu2HAmD9g3ePqDVAvXQzgQopyDnRFimvc6PZCkdB2J1yT3rJg3","/ip4/127.0.0.1/tcp/26511/ws/p2p/16Uiu2HAmD9g3ePqDVAvXQzgQopyDnRFimvc6PZCkdB2J1yT3rJg3","/ip4/172.17.0.5/tcp/26510/p2p/16Uiu2HAmD9g3ePqDVAvXQzgQopyDnRFimvc6PZCkdB2J1yT3rJg3","/ip4/172.17.0.5/tcp/26511/ws/p2p/16Uiu2HAmD9g3ePqDVAvXQzgQopyDnRFimvc6PZCkdB2J1yT3rJg3"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26509/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.148.16/tcp/33421/p2p/16Uiu2HAkyiEDbkCcEjotQ4fVQmygrigKgdNN2sHFyrPUMSz7vUY2", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26509/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.13.41/tcp/22758/p2p/16Uiu2HAkyBea9gYwzCSNLuTHb8MLj5b4eJkZM1A55FUXdMeX8KZz", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33420/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22757/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26509/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33420/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22757/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f8ed32b566c6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id be1e9638aedf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 270d0aac13eb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.