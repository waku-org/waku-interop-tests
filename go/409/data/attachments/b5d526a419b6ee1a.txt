[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-12-29_03-27-08__0071f370-6779-4aff-b1e2-39c6aecf9391
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-12-29_03-27-08__0071f370-6779-4aff-b1e2-39c6aecf9391__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.52.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14687', '14688', '14689', '14690', '14691']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14687:14687 -p 14688:14688 -p 14689:14689 -p 14690:14690 -p 14691:14691 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14689 --rest-port=14687 --tcp-port=14688 --discv5-udp-port=14690 --rest-address=0.0.0.0 --nat=extip:172.18.52.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd25270becadc9170542e5bc79f2dcca27fc5ece3189a38497d79857c107f3df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14691 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.52.229 waku 6f360afd203989038ff840a6dc378d8ed5918c39847cf26917ddaad9d71c7ce6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6f360afd2039. Setting up logs at ./log/docker/publishing_node1_2024-12-29_03-27-08__0071f370-6779-4aff-b1e2-39c6aecf9391__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14687
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c08f8eb4ca5e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14687/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14687/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.229/tcp/14688/p2p/16Uiu2HAkvcRY3QuJqwBxDf1UZCNKge3FN6ZnYZPDqVbhpVUP4bya","/ip4/172.18.52.229/tcp/14689/ws/p2p/16Uiu2HAkvcRY3QuJqwBxDf1UZCNKge3FN6ZnYZPDqVbhpVUP4bya"],"enrUri":"enr:-L24QNvwKzzk-dF7MnuZ0OgsPB216NZ-SVmgTNqkEUmXz-_mKI5gEERe7zIRhYGouOF4dLp-5M8hk5fj9jRncsHfBs8CgmlkgnY0gmlwhKwSNOWKbXVsdGlhZGRyc5YACASsEjTlBjlgAAoErBI05QY5Yd0DgnJzhQADAQAAiXNlY3AyNTZrMaECEZy-dDPVwifnx8k7hGNN-4G7hKll-4qZoOtxR8QxidGDdGNwgjlgg3VkcII5YoV3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-12-29_03-27-08__0071f370-6779-4aff-b1e2-39c6aecf9391__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.63.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9100', '9101', '9102', '9103', '9104']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9100:9100 -p 9101:9101 -p 9102:9102 -p 9103:9103 -p 9104:9104 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9102 --rest-port=9100 --tcp-port=9101 --discv5-udp-port=9103 --rest-address=0.0.0.0 --nat=extip:172.18.63.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5baf402bed53d3e0d5d8521cc0f4a6f1d45ae92fcbcafbda0fee3fe738f325c1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9104 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.63.190 waku 445174f7ad53bf72ff0f11dd0334a3f7ce714903b379008579483c20d1f8c899
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 445174f7ad53. Setting up logs at ./log/docker/publishing_node2_2024-12-29_03-27-08__0071f370-6779-4aff-b1e2-39c6aecf9391__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 9100
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9100/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9100/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.190/tcp/9101/p2p/16Uiu2HAmNeAWt1WeDQDudw6g7Lz9SWv7FmMu6n87Cb613CD4VqtT","/ip4/172.18.63.190/tcp/9102/ws/p2p/16Uiu2HAmNeAWt1WeDQDudw6g7Lz9SWv7FmMu6n87Cb613CD4VqtT"],"enrUri":"enr:-L24QEnDhVDV1CdYncKYwcnseATbBzbWqAXCJUMb33g-Ai2BOF91bi48psN4aP1bZfDMt0eGddZzPCYBRKz1Nb_CEnQCgmlkgnY0gmlwhKwSP76KbXVsdGlhZGRyc5YACASsEj--BiONAAoErBI_vgYjjt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlF7ITu1vnU2ZF0prs7VJ_XnJXuPkPtuR-TAGI9HzxTiDdGNwgiONg3VkcIIjj4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9100/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.52.229/tcp/14688/p2p/16Uiu2HAkvcRY3QuJqwBxDf1UZCNKge3FN6ZnYZPDqVbhpVUP4bya"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-12-29_03-27-08__0071f370-6779-4aff-b1e2-39c6aecf9391__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.79.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48330', '48331', '48332', '48333', '48334']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48330:48330 -p 48331:48331 -p 48332:48332 -p 48333:48333 -p 48334:48334 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=48332 --rest-port=48330 --tcp-port=48331 --discv5-udp-port=48333 --rest-address=0.0.0.0 --nat=extip:172.18.79.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a8fdb0a9bee27f7efe36cc5b8afbffe54eee7665b5f1c58255303cbb31f7852b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QNvwKzzk-dF7MnuZ0OgsPB216NZ-SVmgTNqkEUmXz-_mKI5gEERe7zIRhYGouOF4dLp-5M8hk5fj9jRncsHfBs8CgmlkgnY0gmlwhKwSNOWKbXVsdGlhZGRyc5YACASsEjTlBjlgAAoErBI05QY5Yd0DgnJzhQADAQAAiXNlY3AyNTZrMaECEZy-dDPVwifnx8k7hGNN-4G7hKll-4qZoOtxR8QxidGDdGNwgjlgg3VkcII5YoV3YWt1Mgs --storenode=/ip4/172.18.52.229/tcp/14688/p2p/16Uiu2HAkvcRY3QuJqwBxDf1UZCNKge3FN6ZnYZPDqVbhpVUP4bya --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.52.229/tcp/14688/p2p/16Uiu2HAkvcRY3QuJqwBxDf1UZCNKge3FN6ZnYZPDqVbhpVUP4bya --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.79.237 waku fcc83a97877a792498b127720b8c9364fdb7068d3a25c6396953d8db924f0950
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fcc83a97877a. Setting up logs at ./log/docker/store_node1_2024-12-29_03-27-08__0071f370-6779-4aff-b1e2-39c6aecf9391__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 48330
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48330/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QDYIX6dTwuHJg2kkzGjAdk24xwchLKAMdgqENpNFwnywOHXTtpNKH4i8DlnrhVAu6RExB24gv9fRbq3YI6sqbxKGAZQQdBnugmlkgnY0gmlwhKwRAAuCcnOFAAMBAAGJc2VjcDI1NmsxoQKhg5WNdei4O1I7yeNi2HsasjZUARsmoLrWE4-lS9F3q4N0Y3CCvMuDdWRwgrzNhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/48331/p2p/16Uiu2HAm6J9zYvbaQv3bpAxcEjmnWtoAUsEHBLtmPiku8bpYHLmx","/ip4/127.0.0.1/tcp/48332/ws/p2p/16Uiu2HAm6J9zYvbaQv3bpAxcEjmnWtoAUsEHBLtmPiku8bpYHLmx","/ip4/172.17.0.11/tcp/48331/p2p/16Uiu2HAm6J9zYvbaQv3bpAxcEjmnWtoAUsEHBLtmPiku8bpYHLmx","/ip4/172.17.0.11/tcp/48332/ws/p2p/16Uiu2HAm6J9zYvbaQv3bpAxcEjmnWtoAUsEHBLtmPiku8bpYHLmx"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48330/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.52.229/tcp/14688/p2p/16Uiu2HAkvcRY3QuJqwBxDf1UZCNKge3FN6ZnYZPDqVbhpVUP4bya", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48330/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.63.190/tcp/9101/p2p/16Uiu2HAmNeAWt1WeDQDudw6g7Lz9SWv7FmMu6n87Cb613CD4VqtT", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14687/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9100/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48330/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735442832903278848}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14687/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0LKDNWMoXPCeCer6kcx0RXEQT+FWUlExEismmav0DdU="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48330/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"5705277d882f5a871fa0734633272dba23a9479b255aade3d7d50d8d97432db5","status_code":200,"status_desc":"OK","messages":[{"message_hash":"0LKDNWMoXPCeCer6kcx0RXEQT+FWUlExEismmav0DdU="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6f360afd2039
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 445174f7ad53
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6f360afd2039. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fcc83a97877a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.