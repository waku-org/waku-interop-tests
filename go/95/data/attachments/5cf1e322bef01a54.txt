[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-04-22_11-53-12__a481bf75-c693-4b61-a6ca-b63cf937d3a8
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-22_11-53-12__a481bf75-c693-4b61-a6ca-b63cf937d3a8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.45.240
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36508', '36509', '36510', '36511', '36512']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36508:36508 -p 36509:36509 -p 36510:36510 -p 36511:36511 -p 36512:36512 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36510 --rest-port=36508 --tcp-port=36509 --discv5-udp-port=36511 --rest-address=0.0.0.0 --nat=extip:172.18.45.240 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36512 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.45.240 waku d041e55362fccd3285d8750485370769b269da0cf2aff893af24db2f0eedff76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d041e55362fc. Setting up logs at ./log/docker/publishing_node1_2024-04-22_11-53-12__a481bf75-c693-4b61-a6ca-b63cf937d3a8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 36508
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36508/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.240/tcp/36509/p2p/16Uiu2HAmM8Qz23EvRfZCMatMcbQFcdLCWYDcupX7jfiY2qTtrErz","/ip4/172.18.45.240/tcp/36510/ws/p2p/16Uiu2HAmM8Qz23EvRfZCMatMcbQFcdLCWYDcupX7jfiY2qTtrErz"],"enrUri":"enr:-LO4QLfoQyvOFXzS37mFGbG4epveO8eBN8L4RcqLLG6t0nVQQjlvLrwxDOe6OqtET2F99dLqnETQSm95hnQFwTHSVeABgmlkgnY0gmlwhKwSLfCKbXVsdGlhZGRyc4wACgSsEi3wBo6e3QOCcnOFAAABAACJc2VjcDI1NmsxoQN95Ae5CYUI9KMiRWfI4SizN86zMoojVN2AzLMmpTorv4N0Y3CCjp2DdWRwgo6fhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-22_11-53-12__a481bf75-c693-4b61-a6ca-b63cf937d3a8__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.5.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['10172', '10173', '10174', '10175', '10176']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 10172:10172 -p 10173:10173 -p 10174:10174 -p 10175:10175 -p 10176:10176 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=10174 --rest-port=10172 --tcp-port=10173 --discv5-udp-port=10175 --rest-address=0.0.0.0 --nat=extip:172.18.5.121 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QLfoQyvOFXzS37mFGbG4epveO8eBN8L4RcqLLG6t0nVQQjlvLrwxDOe6OqtET2F99dLqnETQSm95hnQFwTHSVeABgmlkgnY0gmlwhKwSLfCKbXVsdGlhZGRyc4wACgSsEi3wBo6e3QOCcnOFAAABAACJc2VjcDI1NmsxoQN95Ae5CYUI9KMiRWfI4SizN86zMoojVN2AzLMmpTorv4N0Y3CCjp2DdWRwgo6fhXdha3UyAQ --storenode=/ip4/172.18.45.240/tcp/36509/p2p/16Uiu2HAmM8Qz23EvRfZCMatMcbQFcdLCWYDcupX7jfiY2qTtrErz --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.5.121 waku 6533d2bfd5fb527945b9673000bbce9d13e43e0cf0f0c276e6d3da81a671feb2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6533d2bfd5fb. Setting up logs at ./log/docker/store_node1_2024-04-22_11-53-12__a481bf75-c693-4b61-a6ca-b63cf937d3a8__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 10172
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10172/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QOj8LjCvRCkj9SKMsdFgSSE_ldkEL8yHQ530B5DepufiAtE6MkKPm4JdFkcD0rTZ8kI2_7ep0rlvRSX0cW63Vz-GAY8FpzCogmlkgnY0gmlwhKwRAAOKbXVsdGlhZGRyc5gACgR_AAABBie-3QMACgSsEQADBie-3QOJc2VjcDI1NmsxoQMRG8eOCY8oRvWG5sIV3XKijxA2ud9dcfG3DgT2KewZjoN0Y3CCJ72DdWRwgie_hXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/10173/p2p/16Uiu2HAmDomrF5mTFWhGivPpwmhicL7NfoU8ToAw8CoUhfKo5py3","/ip4/127.0.0.1/tcp/10174/ws/p2p/16Uiu2HAmDomrF5mTFWhGivPpwmhicL7NfoU8ToAw8CoUhfKo5py3","/ip4/172.17.0.3/tcp/10173/p2p/16Uiu2HAmDomrF5mTFWhGivPpwmhicL7NfoU8ToAw8CoUhfKo5py3","/ip4/172.17.0.3/tcp/10174/ws/p2p/16Uiu2HAmDomrF5mTFWhGivPpwmhicL7NfoU8ToAw8CoUhfKo5py3"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10172/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.45.240/tcp/36509/p2p/16Uiu2HAmM8Qz23EvRfZCMatMcbQFcdLCWYDcupX7jfiY2qTtrErz", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36508/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10172/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:121 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36508/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:152 Checking that peer harbor.status.im/wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10172/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","timestamp":1713786795206400000}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id d041e55362fc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 6533d2bfd5fb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.