[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-10-15_03-24-21__5a27ea67-700e-4ab0-8785-870be1afd09e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-15_03-24-21__5a27ea67-700e-4ab0-8785-870be1afd09e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.47.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18192', '18193', '18194', '18195', '18196']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18192:18192 -p 18193:18193 -p 18194:18194 -p 18195:18195 -p 18196:18196 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18194 --rest-port=18192 --tcp-port=18193 --discv5-udp-port=18195 --rest-address=0.0.0.0 --nat=extip:172.18.47.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7dd3ffc0623e2c3c163d5dbf6f7bd9dcb7dd4422515c087ede6f55eeb4baea1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18196 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.47.168 waku 44b59e9edb7e3378e5e342271f0ac22925aca4bec97e4971e0ea3cf966e8eef3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 44b59e9edb7e. Setting up logs at ./log/docker/receiving_node1_2024-10-15_03-24-21__5a27ea67-700e-4ab0-8785-870be1afd09e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18192
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18192/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18192/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.168/tcp/18193/p2p/16Uiu2HAmPGsqQLUSCsn3KWy5N5TN6thzWQ8zgXMUqKMzgPNNEAcS","/ip4/172.18.47.168/tcp/18194/ws/p2p/16Uiu2HAmPGsqQLUSCsn3KWy5N5TN6thzWQ8zgXMUqKMzgPNNEAcS"],"enrUri":"enr:-LO4QENMajEU1svNM5C-GiVN4IyLABdRJ5LQ5UXAoBlJ5O-GW9YSGXx6ras_vvD2lBoPP4Vhx3w4G0L6j2_Mdkglr1wBgmlkgnY0gmlwhKwSL6iKbXVsdGlhZGRyc4wACgSsEi-oBkcS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOdxmlaDLvg6rxyU3cnlGB5RkrIM5MWts0JtIBUrpmmw4N0Y3CCRxGDdWRwgkcThXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-15_03-24-21__5a27ea67-700e-4ab0-8785-870be1afd09e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.185.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45109', '45110', '45111', '45112', '45113']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45109:45109 -p 45110:45110 -p 45111:45111 -p 45112:45112 -p 45113:45113 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45111 --rest-port=45109 --tcp-port=45110 --discv5-udp-port=45112 --rest-address=0.0.0.0 --nat=extip:172.18.185.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3fde60634797fc1e8a95ad7c1dac9d9acbf7bf143a92f2bd63bd7b4ca6dad8ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45113 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.185.105 waku 36db267447a1418fc51ba81c622cc443edb26129a149756cf7b05f79f88fa209
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 36db267447a1. Setting up logs at ./log/docker/receiving_node2_2024-10-15_03-24-21__5a27ea67-700e-4ab0-8785-870be1afd09e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45109
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45109/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45109/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.185.105/tcp/45110/p2p/16Uiu2HAmEh1V1HCMGbq4xhxeVZg1SLV4Jt8NPEHWAUa6d4Y6f7pA","/ip4/172.18.185.105/tcp/45111/ws/p2p/16Uiu2HAmEh1V1HCMGbq4xhxeVZg1SLV4Jt8NPEHWAUa6d4Y6f7pA"],"enrUri":"enr:-LO4QC0ZC6kOiDFhIJ2MKUdrMIt26TkOAKJd6SSJBn3UwJUoGHIlLpsNU7L6XKrZG83fOn8cXYQA-fg_MI2Dygl_AZ4BgmlkgnY0gmlwhKwSuWmKbXVsdGlhZGRyc4wACgSsErlpBrA33QOCcnOFAAMBAACJc2VjcDI1NmsxoQMeO9EMMIeRWiICWkxc2E_Zsofcb5egZjrW-3-P4Hxq54N0Y3CCsDaDdWRwgrA4hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45109/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.47.168/tcp/18193/p2p/16Uiu2HAmPGsqQLUSCsn3KWy5N5TN6thzWQ8zgXMUqKMzgPNNEAcS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-15_03-24-21__5a27ea67-700e-4ab0-8785-870be1afd09e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.175.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26520', '26521', '26522', '26523', '26524']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26520:26520 -p 26521:26521 -p 26522:26522 -p 26523:26523 -p 26524:26524 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=26522 --rest-port=26520 --tcp-port=26521 --discv5-udp-port=26523 --rest-address=0.0.0.0 --nat=extip:172.18.175.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=35ee9dd0c0955dde7ca56d84ad7ab37ca0a6b36b6ed1ab84abd3c3f09f7ca20d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QENMajEU1svNM5C-GiVN4IyLABdRJ5LQ5UXAoBlJ5O-GW9YSGXx6ras_vvD2lBoPP4Vhx3w4G0L6j2_Mdkglr1wBgmlkgnY0gmlwhKwSL6iKbXVsdGlhZGRyc4wACgSsEi-oBkcS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOdxmlaDLvg6rxyU3cnlGB5RkrIM5MWts0JtIBUrpmmw4N0Y3CCRxGDdWRwgkcThXdha3UyCQ --lightpushnode=/ip4/172.18.47.168/tcp/18193/p2p/16Uiu2HAmPGsqQLUSCsn3KWy5N5TN6thzWQ8zgXMUqKMzgPNNEAcS --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.175.131 waku caa63193264921777469d6c496403b9bbb857fdcbfdf442c0ddeccd253cee37d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID caa631932649. Setting up logs at ./log/docker/lightpush_node1_2024-10-15_03-24-21__5a27ea67-700e-4ab0-8785-870be1afd09e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 26520
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26520/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QDokOOGMhsQ52lGSqSuwJe_EWR5Dpy2RgM2N7C0hCjQdesq3GmqtyQQpR89CkLkyprVyQ_WwcS7-S6udUdwAWEqGAZKONJzagmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQIUv444hc-a_vGOP6-JWIWaExH4FK2jAiILsgB2Nl3S4IN0Y3CCZ5mDdWRwgmebhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/26521/p2p/16Uiu2HAkvpfYfCmskQitMxirkrXoyUVs22tEmcbft9D8nXvurtWT","/ip4/127.0.0.1/tcp/26522/ws/p2p/16Uiu2HAkvpfYfCmskQitMxirkrXoyUVs22tEmcbft9D8nXvurtWT","/ip4/172.17.0.9/tcp/26521/p2p/16Uiu2HAkvpfYfCmskQitMxirkrXoyUVs22tEmcbft9D8nXvurtWT","/ip4/172.17.0.9/tcp/26522/ws/p2p/16Uiu2HAkvpfYfCmskQitMxirkrXoyUVs22tEmcbft9D8nXvurtWT"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26520/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.47.168/tcp/18193/p2p/16Uiu2HAmPGsqQLUSCsn3KWy5N5TN6thzWQ8zgXMUqKMzgPNNEAcS", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26520/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.185.105/tcp/45110/p2p/16Uiu2HAmEh1V1HCMGbq4xhxeVZg1SLV4Jt8NPEHWAUa6d4Y6f7pA", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18192/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45109/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26520/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728962666819619840, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18192/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1728962666819619840,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45109/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1728962666819619840,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 44b59e9edb7e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 36db267447a1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id caa631932649
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.