[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_retrieve_messages_without_subscribing_via_api with id: 2024-08-24_03-21-56__8d742ea2-303b-4175-9eec-8c644fc999ca
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-24_03-21-56__8d742ea2-303b-4175-9eec-8c644fc999ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.17.12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['40192', '40193', '40194', '40195', '40196']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:71 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 40192:40192 -p 40193:40193 -p 40194:40194 -p 40195:40195 -p 40196:40196 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40194 --rest-port=40192 --tcp-port=40193 --discv5-udp-port=40195 --rest-address=0.0.0.0 --nat=extip:172.18.17.12 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=4eebdafabafbbd60cbf4fc8d51fcbadfdfddafe2caceaaeadb31c83edfc9b648 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40196 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.97.193
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['12148', '12149', '12150', '12151', '12152']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:71 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 12148:12148 -p 12149:12149 -p 12150:12150 -p 12151:12151 -p 12152:12152 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12150 --rest-port=12148 --tcp-port=12149 --discv5-udp-port=12151 --rest-address=0.0.0.0 --nat=extip:172.18.97.193 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=94b3ffba5c3f999085a4cacafe048ab1c8d390447cea8dafddefeffcaf9ea2fe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12152 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.97.193 waku 1218114d2a12fb7a6126a9100b9bbe06264ceae7d95eff8cbfc29c2aba8edb58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1218114d2a12. Setting up logs at ./log/docker/node1_2024-08-24_03-21-56__8d742ea2-303b-4175-9eec-8c644fc999ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 12148
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12148/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12148/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.193/tcp/12149/p2p/16Uiu2HAmV9LHiiGm3ojRK323L7996qvAjRiu3Wcyn2Mh57oNR7oZ","/ip4/172.18.97.193/tcp/12150/ws/p2p/16Uiu2HAmV9LHiiGm3ojRK323L7996qvAjRiu3Wcyn2Mh57oNR7oZ"],"enrUri":"enr:-LO4QK1oP9U00v1A1uhgZ2qEs7kgHw0DUjB_6P6GlI4aGHtROvepqKEywXHB0VqVrGS_-qREXQtYKuOCaYDfb8taclQBgmlkgnY0gmlwhKwSYcGKbXVsdGlhZGRyc4wACgSsEmHBBi923QOCcnOFAAIBAACJc2VjcDI1NmsxoQP0_cxGqBw-FoECJbv9nfMWQO9rMVIB3D19_Iso_GYttIN0Y3CCL3WDdWRwgi93hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-24_03-21-56__8d742ea2-303b-4175-9eec-8c644fc999ca__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.21.238
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['11058', '11059', '11060', '11061', '11062']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:71 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 11058:11058 -p 11059:11059 -p 11060:11060 -p 11061:11061 -p 11062:11062 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=11060 --rest-port=11058 --tcp-port=11059 --discv5-udp-port=11061 --rest-address=0.0.0.0 --nat=extip:172.18.21.238 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8cb1e4d176bdff3cf42a7c6e1a3fea9ebaf0a8caa6bafde7fd12c5ff976a6ae4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QK1oP9U00v1A1uhgZ2qEs7kgHw0DUjB_6P6GlI4aGHtROvepqKEywXHB0VqVrGS_-qREXQtYKuOCaYDfb8taclQBgmlkgnY0gmlwhKwSYcGKbXVsdGlhZGRyc4wACgSsEmHBBi923QOCcnOFAAIBAACJc2VjcDI1NmsxoQP0_cxGqBw-FoECJbv9nfMWQO9rMVIB3D19_Iso_GYttIN0Y3CCL3WDdWRwgi93hXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.21.238 waku f191f389aa69b13ec4b598290cb97d663bb7e5c430481000b609acf7e41a8090
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f191f389aa69. Setting up logs at ./log/docker/node2_2024-08-24_03-21-56__8d742ea2-303b-4175-9eec-8c644fc999ca__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 11058
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11058/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QCSR-sUpEz9GZGIZg0069jM61W4df0wqJeMUUHOQeRPmCxlcsYvIgA26Pt_QM9fKYFonfe_wbGcfAz9gRPxos6WGAZGCZ66MgmlkgnY0gmlwhKwRAAWCcnOFAAIBAACJc2VjcDI1NmsxoQLmIp53sIkreGX3t_2nYf_QpKdnAC7PMRrNRMcwzPp81IN0Y3CCKzODdWRwgis1hXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/11059/p2p/16Uiu2HAmAv2NHFmYtxPa3gT5H7btE2AMP94hGNvPUF9BzE68NvSX","/ip4/127.0.0.1/tcp/11060/ws/p2p/16Uiu2HAmAv2NHFmYtxPa3gT5H7btE2AMP94hGNvPUF9BzE68NvSX","/ip4/172.17.0.5/tcp/11059/p2p/16Uiu2HAmAv2NHFmYtxPa3gT5H7btE2AMP94hGNvPUF9BzE68NvSX","/ip4/172.17.0.5/tcp/11060/ws/p2p/16Uiu2HAmAv2NHFmYtxPa3gT5H7btE2AMP94hGNvPUF9BzE68NvSX"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11058/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.97.193/tcp/12149/p2p/16Uiu2HAmV9LHiiGm3ojRK323L7996qvAjRiu3Wcyn2Mh57oNR7oZ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12148/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12148/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724469719729108992,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11058/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:11058/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0. Response content: b'no subscription found for pubsubTopic'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 1218114d2a12
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id f191f389aa69
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.