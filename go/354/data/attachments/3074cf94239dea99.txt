[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_time_filter_invalid_start_time with id: 2024-11-11_03-28-20__6df3d468-a9e8-4339-a196-ffae41c2ef4c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-11_03-28-20__6df3d468-a9e8-4339-a196-ffae41c2ef4c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.112.14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8377', '8378', '8379', '8380', '8381']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8377:8377 -p 8378:8378 -p 8379:8379 -p 8380:8380 -p 8381:8381 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8379 --rest-port=8377 --tcp-port=8378 --discv5-udp-port=8380 --rest-address=0.0.0.0 --nat=extip:172.18.112.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4eca459e3c4fc1fc26fe677bbe0dbaebcd9ed73c1cf364d0ed32821cccefc322 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8381 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.112.14 waku 64bba203646fb26267c88da83fa4c805519930007a7d50aa1983253b40fa3339
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 64bba203646f. Setting up logs at ./log/docker/publishing_node1_2024-11-11_03-28-20__6df3d468-a9e8-4339-a196-ffae41c2ef4c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 8377
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f7254fdee8f8. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8377/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8377/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.14/tcp/8378/p2p/16Uiu2HAmEpvBwZukPhVxnzUjqk6uSzfpTLV1KoYFVPzpJWaizrVb","/ip4/172.18.112.14/tcp/8379/ws/p2p/16Uiu2HAmEpvBwZukPhVxnzUjqk6uSzfpTLV1KoYFVPzpJWaizrVb"],"enrUri":"enr:-L24QPozdxfCUsvYnzpU70SZpZwL1iP7k-DtMhUTNQTghKEjfG5jBOHZ5pMqI76gEZxjiz47_49OlTrhlO8JExyszOMCgmlkgnY0gmlwhKwScA6KbXVsdGlhZGRyc5YACASsEnAOBiC6AAoErBJwDgYgu90DgnJzhQADAQAAiXNlY3AyNTZrMaEDIEJ6FTTRoli7DLPUGKkeTGMaktk5-hw56l-Qrh_AdzaDdGNwgiC6g3VkcIIgvIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-11_03-28-20__6df3d468-a9e8-4339-a196-ffae41c2ef4c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.48.92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47315', '47316', '47317', '47318', '47319']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47315:47315 -p 47316:47316 -p 47317:47317 -p 47318:47318 -p 47319:47319 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=47317 --rest-port=47315 --tcp-port=47316 --discv5-udp-port=47318 --rest-address=0.0.0.0 --nat=extip:172.18.48.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d443b88dcf36d0e72ff5fcef2cbd6edb3763f59df54258bdfcbc72fd38b9edfa --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QPozdxfCUsvYnzpU70SZpZwL1iP7k-DtMhUTNQTghKEjfG5jBOHZ5pMqI76gEZxjiz47_49OlTrhlO8JExyszOMCgmlkgnY0gmlwhKwScA6KbXVsdGlhZGRyc5YACASsEnAOBiC6AAoErBJwDgYgu90DgnJzhQADAQAAiXNlY3AyNTZrMaEDIEJ6FTTRoli7DLPUGKkeTGMaktk5-hw56l-Qrh_AdzaDdGNwgiC6g3VkcIIgvIV3YWt1MgM --storenode=/ip4/172.18.112.14/tcp/8378/p2p/16Uiu2HAmEpvBwZukPhVxnzUjqk6uSzfpTLV1KoYFVPzpJWaizrVb --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.48.92 waku 023d0f785938eea38024bcd2e64f943088e2353767cb2d661051e48d055bd306
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 023d0f785938. Setting up logs at ./log/docker/store_node1_2024-11-11_03-28-20__6df3d468-a9e8-4339-a196-ffae41c2ef4c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 47315
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47315/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QLPTdeqA6NoOsK3zucN5oACUJ2GEOfHxYhY4ndmfbqQKbJV2Un9K3754FtN5LVyoEIaJH7WaSuNewpfRYsO9oD-GAZMZQ-72gmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQM9PJuEDB-JPT-T25vVwP55wGJ3gUvOG_MRmbV087IxOoN0Y3CCuNSDdWRwgrjWhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/47316/p2p/16Uiu2HAmGn2pceMkUGHMpJgnY3w93iq3iedzxfPpmvdfdrzc2vVw","/ip4/127.0.0.1/tcp/47317/ws/p2p/16Uiu2HAmGn2pceMkUGHMpJgnY3w93iq3iedzxfPpmvdfdrzc2vVw","/ip4/172.17.0.7/tcp/47316/p2p/16Uiu2HAmGn2pceMkUGHMpJgnY3w93iq3iedzxfPpmvdfdrzc2vVw","/ip4/172.17.0.7/tcp/47317/ws/p2p/16Uiu2HAmGn2pceMkUGHMpJgnY3w93iq3iedzxfPpmvdfdrzc2vVw"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47315/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.112.14/tcp/8378/p2p/16Uiu2HAmEpvBwZukPhVxnzUjqk6uSzfpTLV1KoYFVPzpJWaizrVb", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8377/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47315/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:174 inquering stored messages with start time abc
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8377/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8377/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true. Response content: b'time parsing error: invalid integer: abc'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:180 invalid start_time cause error Error: 400 Client Error: Bad Request for url: http://127.0.0.1:8377/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true with response: b'time parsing error: invalid integer: abc'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 64bba203646f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 023d0f785938
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 64bba203646f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.