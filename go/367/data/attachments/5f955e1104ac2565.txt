[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_ephemeral with id: 2024-11-22_03-19-44__44e4c20c-e4e8-41dc-b190-3864ea19ab74
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-22_03-19-44__44e4c20c-e4e8-41dc-b190-3864ea19ab74__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.60.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46862', '46863', '46864', '46865', '46866']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46862:46862 -p 46863:46863 -p 46864:46864 -p 46865:46865 -p 46866:46866 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46864 --rest-port=46862 --tcp-port=46863 --discv5-udp-port=46865 --rest-address=0.0.0.0 --nat=extip:172.18.60.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=38cbffe1f4fbcee31e8efdcacbabdfad22cdf8d8b4f5e91fc8dcdf0affddaefd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46866 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.60.247 waku 1e7ab243465c20e7493144f3646117e50491285f5710e62033d1e995fbfa1af3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1e7ab243465c. Setting up logs at ./log/docker/node1_2024-11-22_03-19-44__44e4c20c-e4e8-41dc-b190-3864ea19ab74__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 46862
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 34e0f2bda8f6. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46862/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46862/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.247/tcp/46863/p2p/16Uiu2HAmM68yVdGdgoGL4d14t5WcGE26g3YgD3h8bbmkmCMpw1Cj","/ip4/172.18.60.247/tcp/46864/ws/p2p/16Uiu2HAmM68yVdGdgoGL4d14t5WcGE26g3YgD3h8bbmkmCMpw1Cj"],"enrUri":"enr:-L24QBxgFwOjl75KkG3HeMfXziUq8guITCiASRE9nfrtyJYiEKq42MjQYX9xqviIAXlZlBjSPiojqkm5blEA9PRpN4UCgmlkgnY0gmlwhKwSPPeKbXVsdGlhZGRyc5YACASsEjz3BrcPAAoErBI89wa3EN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfU7EXqB5OinMA_ic_cXmBPFQgghi-sLl3IL25U9Eu0iDdGNwgrcPg3VkcIK3EYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-22_03-19-44__44e4c20c-e4e8-41dc-b190-3864ea19ab74__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.13.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10039', '10040', '10041', '10042', '10043']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10039:10039 -p 10040:10040 -p 10041:10041 -p 10042:10042 -p 10043:10043 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=10041 --rest-port=10039 --tcp-port=10040 --discv5-udp-port=10042 --rest-address=0.0.0.0 --nat=extip:172.18.13.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3f49d33e2bbb26b00fedddeed6bbb59caaaf2a0a7f05a17b60ab7cafeaeca7ed --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QBxgFwOjl75KkG3HeMfXziUq8guITCiASRE9nfrtyJYiEKq42MjQYX9xqviIAXlZlBjSPiojqkm5blEA9PRpN4UCgmlkgnY0gmlwhKwSPPeKbXVsdGlhZGRyc5YACASsEjz3BrcPAAoErBI89wa3EN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfU7EXqB5OinMA_ic_cXmBPFQgghi-sLl3IL25U9Eu0iDdGNwgrcPg3VkcIK3EYV3YWt1MgU --filternode=/ip4/172.18.60.247/tcp/46863/p2p/16Uiu2HAmM68yVdGdgoGL4d14t5WcGE26g3YgD3h8bbmkmCMpw1Cj
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.13.80 waku deb4ed1265645353709be4382e0ca6bb6c029466d88f3f5f06069146a663dc63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID deb4ed126564. Setting up logs at ./log/docker/node2_2024-11-22_03-19-44__44e4c20c-e4e8-41dc-b190-3864ea19ab74__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 10039
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10039/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLV-1P6mEok-G4vF8p0NzaIV4_-HMp-cD2aam1ic1lRqaiitV6K8Ye2TlGTof-rZcrfbioItcPTEjx9Xbz1N-vGGAZNR4gE3gmlkgnY0gmlwhKwRAASCcnODAAMAiXNlY3AyNTZrMaEDmSTtXXJxTdhpTmNWdoiEBLTgRTe1Oyz44HRW29U_nHKDdGNwgic4g3VkcIInOoV3YWt1MoA","listenAddresses":["/ip4/127.0.0.1/tcp/10040/p2p/16Uiu2HAmNxoPQ6yCKr5U1b5jNxbzs2kFyWGAKkiZFtLsYtoTk8Pb","/ip4/127.0.0.1/tcp/10041/ws/p2p/16Uiu2HAmNxoPQ6yCKr5U1b5jNxbzs2kFyWGAKkiZFtLsYtoTk8Pb","/ip4/172.17.0.4/tcp/10040/p2p/16Uiu2HAmNxoPQ6yCKr5U1b5jNxbzs2kFyWGAKkiZFtLsYtoTk8Pb","/ip4/172.17.0.4/tcp/10041/ws/p2p/16Uiu2HAmNxoPQ6yCKr5U1b5jNxbzs2kFyWGAKkiZFtLsYtoTk8Pb"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.60.247/tcp/46863/p2p/16Uiu2HAmM68yVdGdgoGL4d14t5WcGE26g3YgD3h8bbmkmCMpw1Cj", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46862/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10039/filter/v2/subscriptions. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "276fa5d5-656a-4689-9ab8-adccf1bfe235", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"276fa5d5-656a-4689-9ab8-adccf1bfe235","statusDesc":"OK"}'
[35mDEBUG   [0m tests.filter.test_get_messages:test_get_messages.py:48 Running test with Ephemeral True
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46862/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10039/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[1m[31mERROR   [0m tests.filter.test_get_messages:test_get_messages.py:52 Massage with Ephemeral True failed: Peer NODE_2:wakuorg/go-waku:latest couldn't find any messages
[35mDEBUG   [0m tests.filter.test_get_messages:test_get_messages.py:48 Running test with Ephemeral False
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46862/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10039/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[1m[31mERROR   [0m tests.filter.test_get_messages:test_get_messages.py:52 Massage with Ephemeral False failed: Peer NODE_2:wakuorg/go-waku:latest couldn't find any messages
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1e7ab243465c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id deb4ed126564
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1e7ab243465c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-11-22_03-19-44__44e4c20c-e4e8-41dc-b190-3864ea19ab74__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-11-22_03-19-44__44e4c20c-e4e8-41dc-b190-3864ea19ab74__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_ephemeral with id: 2024-11-22_03-20-13__2d2a1332-2611-4c5e-8927-2cfbf30be4d8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-22_03-20-13__2d2a1332-2611-4c5e-8927-2cfbf30be4d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.55.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55477', '55478', '55479', '55480', '55481']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55477:55477 -p 55478:55478 -p 55479:55479 -p 55480:55480 -p 55481:55481 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55479 --rest-port=55477 --tcp-port=55478 --discv5-udp-port=55480 --rest-address=0.0.0.0 --nat=extip:172.18.55.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ef3a4bbb35ed9205f434bfe5af1d1f9cceb8cacb1e35f0bc7f9c799f73f55ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55481 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.55.247 waku d3f162196e3d79ed490163fcf0adf84abfad01e5e4a6a3e0cc1bf6053fd9ac38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d3f162196e3d. Setting up logs at ./log/docker/node1_2024-11-22_03-20-13__2d2a1332-2611-4c5e-8927-2cfbf30be4d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 55477
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container deb4ed126564. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55477/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55477/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.247/tcp/55478/p2p/16Uiu2HAm6QvCJFtr9afaF5qfvxRYr9p9rcqBz2LBBfcGdLgXbGeP","/ip4/172.18.55.247/tcp/55479/ws/p2p/16Uiu2HAm6QvCJFtr9afaF5qfvxRYr9p9rcqBz2LBBfcGdLgXbGeP"],"enrUri":"enr:-L24QMDrYy3C3O6rcotA5O68ue08Cf4jb7GNX9vvFvKM_PwTcIlh7NaYZqM1b2XSJbyA5bcE7dLy4-faKYjaSOm6NuECgmlkgnY0gmlwhKwSN_eKbXVsdGlhZGRyc5YACASsEjf3Bti2AAoErBI39wbYt90DgnJzhQADAQAAiXNlY3AyNTZrMaECoz8MjAVwZ7ui2iSgINRAdLwH7KNEOUJqD7r-Ag_qj-SDdGNwgti2g3VkcILYuIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-22_03-20-13__2d2a1332-2611-4c5e-8927-2cfbf30be4d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.8.171
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40427', '40428', '40429', '40430', '40431']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40427:40427 -p 40428:40428 -p 40429:40429 -p 40430:40430 -p 40431:40431 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40429 --rest-port=40427 --tcp-port=40428 --discv5-udp-port=40430 --rest-address=0.0.0.0 --nat=extip:172.18.8.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e5d276f250ddffeecd9e0affc1de98d18c6cabf97e04382cf00f3dfbf4d73b93 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QMDrYy3C3O6rcotA5O68ue08Cf4jb7GNX9vvFvKM_PwTcIlh7NaYZqM1b2XSJbyA5bcE7dLy4-faKYjaSOm6NuECgmlkgnY0gmlwhKwSN_eKbXVsdGlhZGRyc5YACASsEjf3Bti2AAoErBI39wbYt90DgnJzhQADAQAAiXNlY3AyNTZrMaECoz8MjAVwZ7ui2iSgINRAdLwH7KNEOUJqD7r-Ag_qj-SDdGNwgti2g3VkcILYuIV3YWt1MgU --filternode=/ip4/172.18.55.247/tcp/55478/p2p/16Uiu2HAm6QvCJFtr9afaF5qfvxRYr9p9rcqBz2LBBfcGdLgXbGeP
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.8.171 waku c8acd4884595a1e1015b05919ad87494928da3f9838489a48ab9b2e12cbe899e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c8acd4884595. Setting up logs at ./log/docker/node2_2024-11-22_03-20-13__2d2a1332-2611-4c5e-8927-2cfbf30be4d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 40427
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40427/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPZlSrs3Uh9PmQsjvgRr_MzqRR8UGwW65wLLVit3acAqOj395mnkgP2S0Z6f7T-MxvgbF9y4eRCbMLuE0CQ8bQKGAZNR4nXXgmlkgnY0gmlwhKwRAASCcnODAAMAiXNlY3AyNTZrMaECk2tzuPtmAGZev_E6GTPaOZJ_dhg7OTfrYJXf6Dpvk5SDdGNwgp3sg3VkcIKd7oV3YWt1MoA","listenAddresses":["/ip4/127.0.0.1/tcp/40428/p2p/16Uiu2HAm5M8wdWAJvss5bfUGPXfMHtGHZQUuphhkFUgdP92Jm3b9","/ip4/127.0.0.1/tcp/40429/ws/p2p/16Uiu2HAm5M8wdWAJvss5bfUGPXfMHtGHZQUuphhkFUgdP92Jm3b9","/ip4/172.17.0.4/tcp/40428/p2p/16Uiu2HAm5M8wdWAJvss5bfUGPXfMHtGHZQUuphhkFUgdP92Jm3b9","/ip4/172.17.0.4/tcp/40429/ws/p2p/16Uiu2HAm5M8wdWAJvss5bfUGPXfMHtGHZQUuphhkFUgdP92Jm3b9"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40427/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.55.247/tcp/55478/p2p/16Uiu2HAm6QvCJFtr9afaF5qfvxRYr9p9rcqBz2LBBfcGdLgXbGeP", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55477/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40427/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "11d267cb-390d-4bcf-90a8-4e56ed660c87", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40427/filter/v2/subscriptions. Response content: b'{"requestId":"11d267cb-390d-4bcf-90a8-4e56ed660c87","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40427/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "11d267cb-390d-4bcf-90a8-4e56ed660c87", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40427/filter/v2/subscriptions. Response content: b'{"requestId":"11d267cb-390d-4bcf-90a8-4e56ed660c87","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40427/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "11d267cb-390d-4bcf-90a8-4e56ed660c87", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40427/filter/v2/subscriptions. Response content: b'{"requestId":"11d267cb-390d-4bcf-90a8-4e56ed660c87","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40427/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "11d267cb-390d-4bcf-90a8-4e56ed660c87", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40427/filter/v2/subscriptions. Response content: b'{"requestId":"11d267cb-390d-4bcf-90a8-4e56ed660c87","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40427/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "11d267cb-390d-4bcf-90a8-4e56ed660c87", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40427/filter/v2/subscriptions. Response content: b'{"requestId":"11d267cb-390d-4bcf-90a8-4e56ed660c87","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40427/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "11d267cb-390d-4bcf-90a8-4e56ed660c87", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40427/filter/v2/subscriptions. Response content: b'{"requestId":"11d267cb-390d-4bcf-90a8-4e56ed660c87","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40427/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "11d267cb-390d-4bcf-90a8-4e56ed660c87", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40427/filter/v2/subscriptions. Response content: b'{"requestId":"11d267cb-390d-4bcf-90a8-4e56ed660c87","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40427/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "11d267cb-390d-4bcf-90a8-4e56ed660c87", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"11d267cb-390d-4bcf-90a8-4e56ed660c87","statusDesc":"OK"}'
[35mDEBUG   [0m tests.filter.test_get_messages:test_get_messages.py:48 Running test with Ephemeral True
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55477/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40427/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[1m[31mERROR   [0m tests.filter.test_get_messages:test_get_messages.py:52 Massage with Ephemeral True failed: Peer NODE_2:wakuorg/go-waku:latest couldn't find any messages
[35mDEBUG   [0m tests.filter.test_get_messages:test_get_messages.py:48 Running test with Ephemeral False
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55477/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40427/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[1m[31mERROR   [0m tests.filter.test_get_messages:test_get_messages.py:52 Massage with Ephemeral False failed: Peer NODE_2:wakuorg/go-waku:latest couldn't find any messages
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d3f162196e3d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id c8acd4884595
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d3f162196e3d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-11-22_03-20-13__2d2a1332-2611-4c5e-8927-2cfbf30be4d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-11-22_03-20-13__2d2a1332-2611-4c5e-8927-2cfbf30be4d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_ephemeral with id: 2024-11-22_03-20-29__e8439e54-3d69-448d-8ea3-ae19069a4d3a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-22_03-20-29__e8439e54-3d69-448d-8ea3-ae19069a4d3a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.133.172
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25938', '25939', '25940', '25941', '25942']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25938:25938 -p 25939:25939 -p 25940:25940 -p 25941:25941 -p 25942:25942 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25940 --rest-port=25938 --tcp-port=25939 --discv5-udp-port=25941 --rest-address=0.0.0.0 --nat=extip:172.18.133.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afc5c013cbbaff5b0f7f0c9b9f5ef6a0bede99c2042ef6615adaec2fbdd7cf9a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25942 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.133.172 waku 664592e13040917201ddf1dc84bf398c423a03095edc7b3af2964d376f5fc7d8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 664592e13040. Setting up logs at ./log/docker/node1_2024-11-22_03-20-29__e8439e54-3d69-448d-8ea3-ae19069a4d3a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 25938
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c8acd4884595. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25938/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25938/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.172/tcp/25939/p2p/16Uiu2HAmKMwm4WutLd4cUpAFRUHaXaMirBM3NtEhQxH3G2uYvEm9","/ip4/172.18.133.172/tcp/25940/ws/p2p/16Uiu2HAmKMwm4WutLd4cUpAFRUHaXaMirBM3NtEhQxH3G2uYvEm9"],"enrUri":"enr:-L24QCtsQbWCUnjx2HasLUrt9QWvQW7dQqgEWyOSUsGjLzyAEZFnOBXJN43iqfilSQjwtjoizg01_sU8ZUnLO91Nk2ECgmlkgnY0gmlwhKwShayKbXVsdGlhZGRyc5YACASsEoWsBmVTAAoErBKFrAZlVN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDY6QBjAzRG5gyVaxGe8I0TUCUVQXALaD_DySWtJNREkyDdGNwgmVTg3VkcIJlVYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-22_03-20-29__e8439e54-3d69-448d-8ea3-ae19069a4d3a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.184.244
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9255', '9256', '9257', '9258', '9259']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9255:9255 -p 9256:9256 -p 9257:9257 -p 9258:9258 -p 9259:9259 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=9257 --rest-port=9255 --tcp-port=9256 --discv5-udp-port=9258 --rest-address=0.0.0.0 --nat=extip:172.18.184.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef4bffa5a87cbf894bcb5efd7d10576c4bfbf755aedd02f6e5623e3bea4ab05a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QCtsQbWCUnjx2HasLUrt9QWvQW7dQqgEWyOSUsGjLzyAEZFnOBXJN43iqfilSQjwtjoizg01_sU8ZUnLO91Nk2ECgmlkgnY0gmlwhKwShayKbXVsdGlhZGRyc5YACASsEoWsBmVTAAoErBKFrAZlVN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDY6QBjAzRG5gyVaxGe8I0TUCUVQXALaD_DySWtJNREkyDdGNwgmVTg3VkcIJlVYV3YWt1MgU --filternode=/ip4/172.18.133.172/tcp/25939/p2p/16Uiu2HAmKMwm4WutLd4cUpAFRUHaXaMirBM3NtEhQxH3G2uYvEm9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.184.244 waku e19913aa2d1fce58b7bbbe915ad66be0ceba1573cdaefc84aa207074630e2b27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e19913aa2d1f. Setting up logs at ./log/docker/node2_2024-11-22_03-20-29__e8439e54-3d69-448d-8ea3-ae19069a4d3a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 9255
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9255/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPN_GBJ42R98Kzum2MjoRlOqSWQRsI5et2KHyp1SPPVTYUOep7T15M2nHPyiPq-WFM6qb1tGU8WmNPi8yfeWj9KGAZNR4rIAgmlkgnY0gmlwhKwRAASCcnODAAMAiXNlY3AyNTZrMaEDNxsidBVBoN0fRCqDyx2YzGuWXjZXovvVCvGAu2ocJNyDdGNwgiQog3VkcIIkKoV3YWt1MoA","listenAddresses":["/ip4/127.0.0.1/tcp/9256/p2p/16Uiu2HAmGN6mj9x7C713TdyNy8yEguZfdjJgHS8mr8X6YqnVLVCP","/ip4/127.0.0.1/tcp/9257/ws/p2p/16Uiu2HAmGN6mj9x7C713TdyNy8yEguZfdjJgHS8mr8X6YqnVLVCP","/ip4/172.17.0.4/tcp/9256/p2p/16Uiu2HAmGN6mj9x7C713TdyNy8yEguZfdjJgHS8mr8X6YqnVLVCP","/ip4/172.17.0.4/tcp/9257/ws/p2p/16Uiu2HAmGN6mj9x7C713TdyNy8yEguZfdjJgHS8mr8X6YqnVLVCP"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.133.172/tcp/25939/p2p/16Uiu2HAmKMwm4WutLd4cUpAFRUHaXaMirBM3NtEhQxH3G2uYvEm9", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25938/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9255/filter/v2/subscriptions. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "27f68884-d8a9-4cf0-a89d-8d1b288dc076", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"27f68884-d8a9-4cf0-a89d-8d1b288dc076","statusDesc":"OK"}'
[35mDEBUG   [0m tests.filter.test_get_messages:test_get_messages.py:48 Running test with Ephemeral True
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9255/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[1m[31mERROR   [0m tests.filter.test_get_messages:test_get_messages.py:52 Massage with Ephemeral True failed: Peer NODE_2:wakuorg/go-waku:latest couldn't find any messages
[35mDEBUG   [0m tests.filter.test_get_messages:test_get_messages.py:48 Running test with Ephemeral False
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9255/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[1m[31mERROR   [0m tests.filter.test_get_messages:test_get_messages.py:52 Massage with Ephemeral False failed: Peer NODE_2:wakuorg/go-waku:latest couldn't find any messages
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 664592e13040
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id e19913aa2d1f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 664592e13040. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-11-22_03-20-29__e8439e54-3d69-448d-8ea3-ae19069a4d3a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-11-22_03-20-29__e8439e54-3d69-448d-8ea3-ae19069a4d3a__wakuorg_nwaku:latest.log