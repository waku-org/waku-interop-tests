{"uid":"868fad0dcbca3a6","name":"test_filter_ping_on_subscribed_peer","fullName":"tests.filter.test_ping.TestFilterPing#test_filter_ping_on_subscribed_peer","historyId":"4bc05992bfd76751fc34bd3ee48a2d6c","time":{"start":1732245966838,"stop":1732245966889,"duration":51},"status":"broken","statusMessage":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:43755/filter/v2/subscriptions/056968ec-a511-4ebb-9771-c3de4ece745b with response: b'{\"requestId\":\"056968ec-a511-4ebb-9771-c3de4ece745b\",\"statusDesc\":\"ping request failed\"}'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://127.0.0.1:43755/filter/v2/subscriptions/056968ec-a511-4ebb-9771-c3de4ece745b\n\nDuring handling of the above exception, another exception occurred:\ntests/filter/test_ping.py:9: in test_filter_ping_on_subscribed_peer\n    self.ping_filter_subscriptions(str(uuid4()))\nsrc/steps/filter.py:180: in ping_filter_subscriptions\n    ping_sub_response = node.ping_filter_subscriptions(request_id)\nsrc/node/waku_node.py:367: in ping_filter_subscriptions\n    return self._api.ping_filter_subscriptions(request_id)\nsrc/node/api_clients/rest.py:84: in ping_filter_subscriptions\n    ping_subscriptions_response = self.rest_call(\"get\", f\"filter/v2/subscriptions/{quote(request_id, safe='')}\")\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:43755/filter/v2/subscriptions/056968ec-a511-4ebb-9771-c3de4ece745b with response: b'{\"requestId\":\"056968ec-a511-4ebb-9771-c3de4ece745b\",\"statusDesc\":\"ping request failed\"}'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1732245237974,"stop":1732245237974,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1732245955892,"stop":1732245955892,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1732245955892,"stop":1732245955892,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1732245955893,"stop":1732245955893,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1732245955893,"stop":1732245955893,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1732245955893,"stop":1732245955893,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1732245955893,"stop":1732245955894,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1732245955894,"stop":1732245955899,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_node","time":{"start":1732245955899,"stop":1732245957773,"duration":1874},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_filter_node","time":{"start":1732245957774,"stop":1732245959755,"duration":1981},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1732245959715,"stop":1732245959755,"duration":40},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.filter.test_ping.TestFilterPing object at 0x7f1c66cc8650>, <src.node.waku_node.WakuNode object at 0x7f1c64505bb0>, ['/ip4/172.18.208.172/tcp/15151/p2p/16Uiu2HAm62cqavv535dzsu9S172V2z6NmURMcBeN4QyQSxhpgP8P'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_main_nodes","time":{"start":1732245959755,"stop":1732245966837,"duration":7082},"status":"passed","steps":[{"name":"wait_for_subscriptions_on_main_nodes","time":{"start":1732245959755,"stop":1732245966837,"duration":7082},"status":"passed","steps":[{"name":"create_filter_subscription_with_retry","time":{"start":1732245959818,"stop":1732245962644,"duration":2826},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:43755/filter/v2/subscriptions with response: b'{\"requestId\":\"854cbc14-44e8-4ec3-8ef3-0a0fc73862a6\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 138, in create_filter_subscription_with_retry\n    return self.create_filter_subscription(subscription, node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 144, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_filter_subscription","time":{"start":1732245959819,"stop":1732245962643,"duration":2824},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:43755/filter/v2/subscriptions with response: b'{\"requestId\":\"854cbc14-44e8-4ec3-8ef3-0a0fc73862a6\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 144, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_filter_subscription_with_retry","time":{"start":1732245963646,"stop":1732245963690,"duration":44},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:43755/filter/v2/subscriptions with response: b'{\"requestId\":\"854cbc14-44e8-4ec3-8ef3-0a0fc73862a6\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 138, in create_filter_subscription_with_retry\n    return self.create_filter_subscription(subscription, node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 144, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_filter_subscription","time":{"start":1732245963646,"stop":1732245963689,"duration":43},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:43755/filter/v2/subscriptions with response: b'{\"requestId\":\"854cbc14-44e8-4ec3-8ef3-0a0fc73862a6\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 144, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_filter_subscription_with_retry","time":{"start":1732245964692,"stop":1732245964749,"duration":57},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:43755/filter/v2/subscriptions with response: b'{\"requestId\":\"854cbc14-44e8-4ec3-8ef3-0a0fc73862a6\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 138, in create_filter_subscription_with_retry\n    return self.create_filter_subscription(subscription, node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 144, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_filter_subscription","time":{"start":1732245964697,"stop":1732245964749,"duration":52},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:43755/filter/v2/subscriptions with response: b'{\"requestId\":\"854cbc14-44e8-4ec3-8ef3-0a0fc73862a6\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 144, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_filter_subscription_with_retry","time":{"start":1732245965751,"stop":1732245965786,"duration":35},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:43755/filter/v2/subscriptions with response: b'{\"requestId\":\"854cbc14-44e8-4ec3-8ef3-0a0fc73862a6\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 138, in create_filter_subscription_with_retry\n    return self.create_filter_subscription(subscription, node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 144, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_filter_subscription","time":{"start":1732245965751,"stop":1732245965785,"duration":34},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:43755/filter/v2/subscriptions with response: b'{\"requestId\":\"854cbc14-44e8-4ec3-8ef3-0a0fc73862a6\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 144, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 355, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_filter_subscription_with_retry","time":{"start":1732245966788,"stop":1732245966837,"duration":49},"status":"passed","steps":[{"name":"create_filter_subscription","time":{"start":1732245966789,"stop":1732245966837,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '854cbc14-44e8-4ec3-8ef3-0a0fc73862a6', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/3/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topic_list","value":"['/test/1/waku-filter/proto']"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":11,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:43755/filter/v2/subscriptions/056968ec-a511-4ebb-9771-c3de4ece745b with response: b'{\"requestId\":\"056968ec-a511-4ebb-9771-c3de4ece745b\",\"statusDesc\":\"ping request failed\"}'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://127.0.0.1:43755/filter/v2/subscriptions/056968ec-a511-4ebb-9771-c3de4ece745b\n\nDuring handling of the above exception, another exception occurred:\ntests/filter/test_ping.py:9: in test_filter_ping_on_subscribed_peer\n    self.ping_filter_subscriptions(str(uuid4()))\nsrc/steps/filter.py:180: in ping_filter_subscriptions\n    ping_sub_response = node.ping_filter_subscriptions(request_id)\nsrc/node/waku_node.py:367: in ping_filter_subscriptions\n    return self._api.ping_filter_subscriptions(request_id)\nsrc/node/api_clients/rest.py:84: in ping_filter_subscriptions\n    ping_subscriptions_response = self.rest_call(\"get\", f\"filter/v2/subscriptions/{quote(request_id, safe='')}\")\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:43755/filter/v2/subscriptions/056968ec-a511-4ebb-9771-c3de4ece745b with response: b'{\"requestId\":\"056968ec-a511-4ebb-9771-c3de4ece745b\",\"statusDesc\":\"ping request failed\"}'","steps":[{"name":"ping_filter_subscriptions","time":{"start":1732245966838,"stop":1732245966888,"duration":50},"status":"broken","statusMessage":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:43755/filter/v2/subscriptions/056968ec-a511-4ebb-9771-c3de4ece745b with response: b'{\"requestId\":\"056968ec-a511-4ebb-9771-c3de4ece745b\",\"statusDesc\":\"ping request failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 180, in ping_filter_subscriptions\n    ping_sub_response = node.ping_filter_subscriptions(request_id)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 367, in ping_filter_subscriptions\n    return self._api.ping_filter_subscriptions(request_id)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 84, in ping_filter_subscriptions\n    ping_subscriptions_response = self.rest_call(\"get\", f\"filter/v2/subscriptions/{quote(request_id, safe='')}\")\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"request_id","value":"'056968ec-a511-4ebb-9771-c3de4ece745b'"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"a3abff9766099c98","name":"log","source":"a3abff9766099c98.txt","type":"text/plain","size":52746}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1732245967028,"stop":1732245967031,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1732245967032,"stop":1732245970903,"duration":3871},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1732245970903,"stop":1732245970938,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1732245970938,"stop":1732245970942,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"1597eb305f18d15","name":"node1_2024-11-22_03-25-55__ef40ce5c-11be-479b-9c9d-8d0cd706e99d__wakuorg_nwaku:latest.log","source":"1597eb305f18d15.txt","type":"text/plain","size":390780},{"uid":"2634c931b58a3305","name":"node2_2024-11-22_03-25-55__ef40ce5c-11be-479b-9c9d-8d0cd706e99d__wakuorg_go-waku:latest.log","source":"2634c931b58a3305.txt","type":"text/plain","size":120826}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1732247971562,"stop":1732247971562,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"},{"name":"parentSuite","value":"tests.filter"},{"name":"suite","value":"test_ping"},{"name":"subSuite","value":"TestFilterPing"},{"name":"host","value":"fv-az1435-841"},{"name":"thread","value":"2218-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.filter.test_ping"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"454d26df3bb5cdd","status":"broken","statusDetails":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:40039/filter/v2/subscriptions/421ff6dd-c564-4688-8416-7bf5d984d644 with response: b'{\"requestId\":\"421ff6dd-c564-4688-8416-7bf5d984d644\",\"statusDesc\":\"ping request failed\"}'","time":{"start":1732245952566,"stop":1732245952656,"duration":90}},{"uid":"1a13653fba83ea1c","status":"broken","statusDetails":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:24401/filter/v2/subscriptions/074f6c12-a5af-45d8-adc7-7d40f9c2d963 with response: b'{\"requestId\":\"074f6c12-a5af-45d8-adc7-7d40f9c2d963\",\"statusDesc\":\"ping request failed\"}'","time":{"start":1732245933683,"stop":1732245933708,"duration":25}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":19,"skipped":0,"passed":371,"unknown":0,"total":390},"items":[{"uid":"eac115fc5847e36","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/366//#testresult/eac115fc5847e36","status":"broken","statusDetails":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:33268/filter/v2/subscriptions/f85908bd-fb3a-45df-9e1a-1342625f353f with response: b'{\"requestId\":\"f85908bd-fb3a-45df-9e1a-1342625f353f\",\"statusDesc\":\"ping request failed\"}'","time":{"start":1732159524813,"stop":1732159524856,"duration":43}},{"uid":"f14d308e0d40766c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/365//#testresult/f14d308e0d40766c","status":"broken","statusDetails":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:44669/filter/v2/subscriptions/348ac3c4-e5b2-4482-8554-d3b793107155 with response: b'{\"requestId\":\"348ac3c4-e5b2-4482-8554-d3b793107155\",\"statusDesc\":\"ping request failed\"}'","time":{"start":1732072996818,"stop":1732072996830,"duration":12}},{"uid":"eb0a70c6876c5013","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/364//#testresult/eb0a70c6876c5013","status":"broken","statusDetails":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:52172/filter/v2/subscriptions/a85d6f73-c568-4b7c-8f1a-986778b29387 with response: b'{\"requestId\":\"a85d6f73-c568-4b7c-8f1a-986778b29387\",\"statusDesc\":\"ping request failed\"}'","time":{"start":1731986732525,"stop":1731986732534,"duration":9}},{"uid":"f3758d0c3f338a58","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/363//#testresult/f3758d0c3f338a58","status":"passed","time":{"start":1731926133626,"stop":1731926133630,"duration":4}},{"uid":"4981ed74e4cb35ed","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/362//#testresult/4981ed74e4cb35ed","status":"passed","time":{"start":1731924254474,"stop":1731924254478,"duration":4}},{"uid":"d8327803e1d4e7e8","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/361//#testresult/d8327803e1d4e7e8","status":"passed","time":{"start":1731900009258,"stop":1731900009267,"duration":9}},{"uid":"ace91502cf58f778","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/360//#testresult/ace91502cf58f778","status":"passed","time":{"start":1731813587423,"stop":1731813587434,"duration":11}},{"uid":"5beed0a9137ab344","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/359//#testresult/5beed0a9137ab344","status":"passed","time":{"start":1731726939082,"stop":1731726939088,"duration":6}},{"uid":"5dcdaa8f899899dc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/358//#testresult/5dcdaa8f899899dc","status":"passed","time":{"start":1731640556502,"stop":1731640556508,"duration":6}},{"uid":"a2d8b47d660962f0","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/357//#testresult/a2d8b47d660962f0","status":"passed","time":{"start":1731553914534,"stop":1731553914539,"duration":5}},{"uid":"b588b682265c5b85","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/356//#testresult/b588b682265c5b85","status":"passed","time":{"start":1731467447610,"stop":1731467447617,"duration":7}},{"uid":"9a6291877ca47557","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/355//#testresult/9a6291877ca47557","status":"passed","time":{"start":1731380866219,"stop":1731380866223,"duration":4}},{"uid":"f2347a227c5e435","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/354//#testresult/f2347a227c5e435","status":"passed","time":{"start":1731294713788,"stop":1731294713794,"duration":6}},{"uid":"d4987f8e21c12106","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/353//#testresult/d4987f8e21c12106","status":"passed","time":{"start":1731222996615,"stop":1731222996620,"duration":5}},{"uid":"28b339d935a795c4","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/352//#testresult/28b339d935a795c4","status":"passed","time":{"start":1731208251527,"stop":1731208251532,"duration":5}},{"uid":"314bf60613345cfd","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/351//#testresult/314bf60613345cfd","status":"passed","time":{"start":1731121674239,"stop":1731121674244,"duration":5}},{"uid":"ae7a565a1df7b35f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/350//#testresult/ae7a565a1df7b35f","status":"passed","time":{"start":1731035340828,"stop":1731035340833,"duration":5}},{"uid":"7e4a86de4a93b84d","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/349//#testresult/7e4a86de4a93b84d","status":"passed","time":{"start":1730990820913,"stop":1730990820919,"duration":6}},{"uid":"eaeb2fcbcba40740","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/348//#testresult/eaeb2fcbcba40740","status":"passed","time":{"start":1730982782993,"stop":1730982782999,"duration":6}},{"uid":"ca49bddb92106523","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/347//#testresult/ca49bddb92106523","status":"passed","time":{"start":1730980642311,"stop":1730980642315,"duration":4}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"]},"source":"868fad0dcbca3a6.json","parameterValues":[]}