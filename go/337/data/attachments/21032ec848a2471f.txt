[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_extra_field with id: 2024-11-06_12-34-40__52122654-388d-4beb-9623-c79e8530ed54
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-06_12-34-40__52122654-388d-4beb-9623-c79e8530ed54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.166.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56760', '56761', '56762', '56763', '56764']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56760:56760 -p 56761:56761 -p 56762:56762 -p 56763:56763 -p 56764:56764 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56762 --rest-port=56760 --tcp-port=56761 --discv5-udp-port=56763 --rest-address=0.0.0.0 --nat=extip:172.18.166.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f8ee3efbbee4edfed3c25fcce55b0ba1cccec4bdbdd20d7ac4ff22ca1f6bbfce --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56764 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.166.121 waku a75961d25551d3f316d3bdbb8f76f2a5e2d22c1a12d47e7b49e9897e5d2481ea
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a75961d25551. Setting up logs at ./log/docker/node1_2024-11-06_12-34-40__52122654-388d-4beb-9623-c79e8530ed54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 56760
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56760/health" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.waku_node:waku_node.py:184 REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=56760): Max retries exceeded with url: /health (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7ff1af6d34d0>, 'Connection to 127.0.0.1 timed out. (connect timeout=50)'))
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.49.23
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4936', '4937', '4938', '4939', '4940']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4936:4936 -p 4937:4937 -p 4938:4938 -p 4939:4939 -p 4940:4940 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4938 --rest-port=4936 --tcp-port=4937 --discv5-udp-port=4939 --rest-address=0.0.0.0 --nat=extip:172.18.49.23 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9cc63bfea0aa76f4cdee95eebb420e7b4dfb22cb0fd5e7ca82efcc5e3cba31a --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4940 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.49.23 waku 5294652d9b403bb77e5887c6ef9e6418990a5fba71286e66a656b6ebfc6553e4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5294652d9b40. Setting up logs at ./log/docker/node1_2024-11-06_12-34-40__52122654-388d-4beb-9623-c79e8530ed54__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 4936
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4936/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4936/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.23/tcp/4937/p2p/16Uiu2HAm8GHmP7dNjxoMgn2hTo2CaXa1fPt3ktnm5hZuaNonvk1K","/ip4/172.18.49.23/tcp/4938/ws/p2p/16Uiu2HAm8GHmP7dNjxoMgn2hTo2CaXa1fPt3ktnm5hZuaNonvk1K"],"enrUri":"enr:-L24QANXpBdYvSrvKXBRdMYXGfK5bA0GNOsVQDgRehqAPwPCb9JJ5FkG1v9MjfYYaLJrqkg7pe0Bg4uHJYuXEoRnFhECgmlkgnY0gmlwhKwSMReKbXVsdGlhZGRyc5YACASsEjEXBhNJAAoErBIxFwYTSt0DgnJzhQADAQAAiXNlY3AyNTZrMaECvsCV168wWl9QOVok0iYrvaJO03zfZaBzSqSoTgglf7aDdGNwghNJg3VkcIITS4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-06_12-34-40__52122654-388d-4beb-9623-c79e8530ed54__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.102.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38841', '38842', '38843', '38844', '38845']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38841:38841 -p 38842:38842 -p 38843:38843 -p 38844:38844 -p 38845:38845 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=38843 --rest-port=38841 --tcp-port=38842 --discv5-udp-port=38844 --rest-address=0.0.0.0 --nat=extip:172.18.102.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=23fbf8f1e9fe9ced0e76d77837ccfbf6f4654a20d60dd2dccaad1bdabeec5b81 --max-connections=1000 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QANXpBdYvSrvKXBRdMYXGfK5bA0GNOsVQDgRehqAPwPCb9JJ5FkG1v9MjfYYaLJrqkg7pe0Bg4uHJYuXEoRnFhECgmlkgnY0gmlwhKwSMReKbXVsdGlhZGRyc5YACASsEjEXBhNJAAoErBIxFwYTSt0DgnJzhQADAQAAiXNlY3AyNTZrMaECvsCV168wWl9QOVok0iYrvaJO03zfZaBzSqSoTgglf7aDdGNwghNJg3VkcIITS4V3YWt1MgU --filternode=/ip4/172.18.49.23/tcp/4937/p2p/16Uiu2HAm8GHmP7dNjxoMgn2hTo2CaXa1fPt3ktnm5hZuaNonvk1K
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.102.60 waku 45cfaf148103741e28e40fa74704c0f873fb1ad206520f1d2c4347cd2d134fbe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 45cfaf148103. Setting up logs at ./log/docker/node2_2024-11-06_12-34-40__52122654-388d-4beb-9623-c79e8530ed54__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/go-waku:latest. REST: 38841
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38841/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBIhgNVnBlduWVrW0apIY437EZLPTu5H78h1jXnHEFdWEroyLz1-DcTgSoSYHomfe7Dd50fDlRtmTLWGUrl3h6aGAZMBearJgmlkgnY0gmlwhKwRAC6Jc2VjcDI1NmsxoQLDCr4wZ21A5qgGiPH7rJVS3qFLzS4ZFVTqV3QFnP48jYN0Y3CCl7qDdWRwgpe8hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/38842/p2p/16Uiu2HAm8Z2yvFRfTgjevYKNakKagQ1USje33BLMpWtS1qPFZ3tQ","/ip4/127.0.0.1/tcp/38843/ws/p2p/16Uiu2HAm8Z2yvFRfTgjevYKNakKagQ1USje33BLMpWtS1qPFZ3tQ","/ip4/172.17.0.46/tcp/38842/p2p/16Uiu2HAm8Z2yvFRfTgjevYKNakKagQ1USje33BLMpWtS1qPFZ3tQ","/ip4/172.17.0.46/tcp/38843/ws/p2p/16Uiu2HAm8Z2yvFRfTgjevYKNakKagQ1USje33BLMpWtS1qPFZ3tQ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38841/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.49.23/tcp/4937/p2p/16Uiu2HAm8GHmP7dNjxoMgn2hTo2CaXa1fPt3ktnm5hZuaNonvk1K", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:38841/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38841/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.49.23/tcp/4937/p2p/16Uiu2HAm8GHmP7dNjxoMgn2hTo2CaXa1fPt3ktnm5hZuaNonvk1K", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:38841/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38841/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.49.23/tcp/4937/p2p/16Uiu2HAm8GHmP7dNjxoMgn2hTo2CaXa1fPt3ktnm5hZuaNonvk1K", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:38841/admin/v1/peers. Response content: b''
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38841/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.49.23/tcp/4937/p2p/16Uiu2HAm8GHmP7dNjxoMgn2hTo2CaXa1fPt3ktnm5hZuaNonvk1K", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4936/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38841/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d2f9d28f-2df2-4fd5-8fdf-75ee468bab5c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d2f9d28f-2df2-4fd5-8fdf-75ee468bab5c","statusDesc":"OK"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 5294652d9b40
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 45cfaf148103
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5294652d9b40. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.