[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-09-01_03-23-58__09ac38d2-62ea-4de2-8fb6-ee4eff749be4
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-01_03-23-58__09ac38d2-62ea-4de2-8fb6-ee4eff749be4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.52.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['54129', '54130', '54131', '54132', '54133']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 54129:54129 -p 54130:54130 -p 54131:54131 -p 54132:54132 -p 54133:54133 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54131 --rest-port=54129 --tcp-port=54130 --discv5-udp-port=54132 --rest-address=0.0.0.0 --nat=extip:172.18.52.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eccc5503d5ee849e7663d88519a54ec8d3e1eec6ee0a4debd50f0fe1a3caa83c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54133 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.52.128 waku 1803cf93cb17cfc807dcbecae126af18a2984c66f18930031d16b89a983cf1dc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1803cf93cb17. Setting up logs at ./log/docker/receiving_node1_2024-09-01_03-23-58__09ac38d2-62ea-4de2-8fb6-ee4eff749be4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54129
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54129/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54129/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.128/tcp/54130/p2p/16Uiu2HAmN1EXDUSRJzWxavNM55AWjK2HELkShkUgDfQS9dRaud6b","/ip4/172.18.52.128/tcp/54131/ws/p2p/16Uiu2HAmN1EXDUSRJzWxavNM55AWjK2HELkShkUgDfQS9dRaud6b"],"enrUri":"enr:-LO4QBNyUBlsX1UnGq5fiTnuM8x6ML5WttfHC2Zw3TqkDG63PsP_47Q0ykfHSKHIiUBjNGtHlAMpA_HdDwA4DZsmq74BgmlkgnY0gmlwhKwSNICKbXVsdGlhZGRyc4wACgSsEjSABtNz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOK6NJmaywtMv4_STmqKj4UYbWuhLCo976OnVCtiSKshIN0Y3CC03KDdWRwgtN0hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-01_03-23-58__09ac38d2-62ea-4de2-8fb6-ee4eff749be4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.136.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26255', '26256', '26257', '26258', '26259']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26255:26255 -p 26256:26256 -p 26257:26257 -p 26258:26258 -p 26259:26259 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26257 --rest-port=26255 --tcp-port=26256 --discv5-udp-port=26258 --rest-address=0.0.0.0 --nat=extip:172.18.136.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8ace3e5fe1afb890b655b1117bcec89fbbabead0f3ebcb17d73e689fae56cdc8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26259 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.136.72 waku e2f8f5df9f33c21d50fa62c6e3fffdd094a13ea1b232e9bfd5fb787b2a3f66b9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e2f8f5df9f33. Setting up logs at ./log/docker/receiving_node2_2024-09-01_03-23-58__09ac38d2-62ea-4de2-8fb6-ee4eff749be4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26255
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26255/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26255/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.72/tcp/26256/p2p/16Uiu2HAmVBTMiAmhRCEgvo3TEB5unovCCebSg3MHoHxkwb6gDpqc","/ip4/172.18.136.72/tcp/26257/ws/p2p/16Uiu2HAmVBTMiAmhRCEgvo3TEB5unovCCebSg3MHoHxkwb6gDpqc"],"enrUri":"enr:-LO4QHYY2hGz7kqoztv2Ql4N-QHFjSDyXn0PL3SFDV53DwMKItS3Ic5MESY1jbSbVtvdgcN4e5271x_3YmbqDcl-mxABgmlkgnY0gmlwhKwSiEiKbXVsdGlhZGRyc4wACgSsEohIBmaR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP1iPPJgiYkZmt-_AJzjiOS9kxzjCXbXOSXoGAFmcDUj4N0Y3CCZpCDdWRwgmaShXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26255/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.52.128/tcp/54130/p2p/16Uiu2HAmN1EXDUSRJzWxavNM55AWjK2HELkShkUgDfQS9dRaud6b"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-01_03-23-58__09ac38d2-62ea-4de2-8fb6-ee4eff749be4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.68.209
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22320', '22321', '22322', '22323', '22324']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22320:22320 -p 22321:22321 -p 22322:22322 -p 22323:22323 -p 22324:22324 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=22322 --rest-port=22320 --tcp-port=22321 --discv5-udp-port=22323 --rest-address=0.0.0.0 --nat=extip:172.18.68.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1473c2da2f3cbab0f8bad9c6e8e851fe48c2dbed72a7313acb44caecbb1b355 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QBNyUBlsX1UnGq5fiTnuM8x6ML5WttfHC2Zw3TqkDG63PsP_47Q0ykfHSKHIiUBjNGtHlAMpA_HdDwA4DZsmq74BgmlkgnY0gmlwhKwSNICKbXVsdGlhZGRyc4wACgSsEjSABtNz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOK6NJmaywtMv4_STmqKj4UYbWuhLCo976OnVCtiSKshIN0Y3CC03KDdWRwgtN0hXdha3UyCQ --lightpushnode=/ip4/172.18.52.128/tcp/54130/p2p/16Uiu2HAmN1EXDUSRJzWxavNM55AWjK2HELkShkUgDfQS9dRaud6b --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.68.209 waku 311fba74e7f5f2ca4a550ddf338efd290f673df1494ee28be2699a809baec66b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 311fba74e7f5. Setting up logs at ./log/docker/lightpush_node1_2024-09-01_03-23-58__09ac38d2-62ea-4de2-8fb6-ee4eff749be4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 22320
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22320/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QEW4CytzFDs5qHBW5ALIkl0uLxUtqvZ0bwLYCUzpoJalSvA8p7ULqjl-C3cdILru0LrG2Vk7HTqVJv6zzqYoouqGAZGrnHXMgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQIbEen7OcXc7_R0x3oaY2S2RboI0768SAIy5YZvVevXO4N0Y3CCVzGDdWRwglczhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/22321/p2p/16Uiu2HAkwFLq9xDKY7FVxcaNXnJTVYKzXUD6Q2pv9tyrTiMho7uk","/ip4/127.0.0.1/tcp/22322/ws/p2p/16Uiu2HAkwFLq9xDKY7FVxcaNXnJTVYKzXUD6Q2pv9tyrTiMho7uk","/ip4/172.17.0.9/tcp/22321/p2p/16Uiu2HAkwFLq9xDKY7FVxcaNXnJTVYKzXUD6Q2pv9tyrTiMho7uk","/ip4/172.17.0.9/tcp/22322/ws/p2p/16Uiu2HAkwFLq9xDKY7FVxcaNXnJTVYKzXUD6Q2pv9tyrTiMho7uk"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22320/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.52.128/tcp/54130/p2p/16Uiu2HAmN1EXDUSRJzWxavNM55AWjK2HELkShkUgDfQS9dRaud6b", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22320/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.136.72/tcp/26256/p2p/16Uiu2HAmVBTMiAmhRCEgvo3TEB5unovCCebSg3MHoHxkwb6gDpqc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54129/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26255/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22320/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725161044498987264}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:22320/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x911148b5f8b4a7848f7dbaaaa03ec2fb64aeb84d043bbc7c3a268076bcc591d5'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1803cf93cb17
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e2f8f5df9f33
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 311fba74e7f5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.