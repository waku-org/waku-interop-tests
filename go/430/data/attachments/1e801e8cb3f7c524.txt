[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-01-13_03-10-38__0a4fe4d9-982e-49d0-943e-46aceb9f85fb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-13_03-10-38__0a4fe4d9-982e-49d0-943e-46aceb9f85fb__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-13_03-10-38__0a4fe4d9-982e-49d0-943e-46aceb9f85fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-13_03-10-38__0a4fe4d9-982e-49d0-943e-46aceb9f85fb__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.18.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30349', '30350', '30351', '30352', '30353']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30349:30349 -p 30350:30350 -p 30351:30351 -p 30352:30352 -p 30353:30353 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=30351 --rest-port=30349 --tcp-port=30350 --discv5-udp-port=30352 --rest-address=0.0.0.0 --nat=extip:172.18.18.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=14cba8d10e3cffccd931ab0a1d459b2f67b82ffcdeceaed9eab74c2f9afbbd87 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.18.56 waku bd4cea2009e29f4eb0b96bc52752b42947f53ced6c1b120c26236f4551b9a6d6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bd4cea2009e2. Setting up logs at ./log/docker/node1_2025-01-13_03-10-38__0a4fe4d9-982e-49d0-943e-46aceb9f85fb__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 30349
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30349/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLxc8jWYZ5E8aCfHTvEHcp56KFkNuGEz9p8Cc0IvOMO2OUqoraImF7WOZorLuHuNaR7CJfv-V6eXrE7_NEMzdsiGAZRdpGSegmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDiFljmR5iSPV1-pLVsgdmUos6u4cGmcSmPFmtbs4ns3mDdGNwgnaOg3VkcIJ2kIV3YWt1MgU","listenAddresses":["/ip4/127.0.0.1/tcp/30350/p2p/16Uiu2HAmMqErTxQK4kDXP67qVA4BcoPPtipmveEg7gxYwMgpyija","/ip4/127.0.0.1/tcp/30351/ws/p2p/16Uiu2HAmMqErTxQK4kDXP67qVA4BcoPPtipmveEg7gxYwMgpyija","/ip4/172.17.0.2/tcp/30350/p2p/16Uiu2HAmMqErTxQK4kDXP67qVA4BcoPPtipmveEg7gxYwMgpyija","/ip4/172.17.0.2/tcp/30351/ws/p2p/16Uiu2HAmMqErTxQK4kDXP67qVA4BcoPPtipmveEg7gxYwMgpyija"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.202.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60053', '60054', '60055', '60056', '60057']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60053:60053 -p 60054:60054 -p 60055:60055 -p 60056:60056 -p 60057:60057 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60055 --rest-port=60053 --tcp-port=60054 --discv5-udp-port=60056 --rest-address=0.0.0.0 --nat=extip:172.18.202.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2fbd97b6c58ea2afe162f7227981afef9cbc0c3cb32fedebc308ae3adbd8cba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60057 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-J-4QLxc8jWYZ5E8aCfHTvEHcp56KFkNuGEz9p8Cc0IvOMO2OUqoraImF7WOZorLuHuNaR7CJfv-V6eXrE7_NEMzdsiGAZRdpGSegmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDiFljmR5iSPV1-pLVsgdmUos6u4cGmcSmPFmtbs4ns3mDdGNwgnaOg3VkcIJ2kIV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.202.27 waku ad409238ebd6a4dad421700ab2d35d780b8fa2e756a502e91d382a38905a78b8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ad409238ebd6. Setting up logs at ./log/docker/node2_2025-01-13_03-10-38__0a4fe4d9-982e-49d0-943e-46aceb9f85fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60053
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60053/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60053/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.27/tcp/60054/p2p/16Uiu2HAmVbaWK1Q2tFmKMxCnC4N5qyPEQsX8WX296EffitbR6oLu","/ip4/172.18.202.27/tcp/60055/ws/p2p/16Uiu2HAmVbaWK1Q2tFmKMxCnC4N5qyPEQsX8WX296EffitbR6oLu"],"enrUri":"enr:-L24QF2q0vmnC4gXI16jPdpKYhbmtStzHOuvfM0uU1EnPLh0KKD2Zzp61esy51NcU8K7xtiSOrI-0qmpSUe099L38VYCgmlkgnY0gmlwhKwSyhuKbXVsdGlhZGRyc5YACASsEsobBuqWAAoErBLKGwbql90DgnJzhQADAQAAiXNlY3AyNTZrMaED-7b5bBYJqEVl90rDBmR2Zm5zDJS8CQpWKiZQOlCxx8KDdGNwguqWg3VkcILqmIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.129.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44699', '44700', '44701', '44702', '44703']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44699:44699 -p 44700:44700 -p 44701:44701 -p 44702:44702 -p 44703:44703 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44701 --rest-port=44699 --tcp-port=44700 --discv5-udp-port=44702 --rest-address=0.0.0.0 --nat=extip:172.18.129.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f0f3b088fa42899888f0e7f85db66abd3a3620a533eb00fcdf959f8e3efe0fb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.202.27/tcp/60054/p2p/16Uiu2HAmVbaWK1Q2tFmKMxCnC4N5qyPEQsX8WX296EffitbR6oLu --discv5-bootstrap-node=enr:-L24QF2q0vmnC4gXI16jPdpKYhbmtStzHOuvfM0uU1EnPLh0KKD2Zzp61esy51NcU8K7xtiSOrI-0qmpSUe099L38VYCgmlkgnY0gmlwhKwSyhuKbXVsdGlhZGRyc5YACASsEsobBuqWAAoErBLKGwbql90DgnJzhQADAQAAiXNlY3AyNTZrMaED-7b5bBYJqEVl90rDBmR2Zm5zDJS8CQpWKiZQOlCxx8KDdGNwguqWg3VkcILqmIV3YWt1MgU --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.129.131 waku a6232108e3024470851763337436e6daf12b9333faab7b547892bf2927bc8157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a6232108e302. Setting up logs at ./log/docker/node3_2025-01-13_03-10-38__0a4fe4d9-982e-49d0-943e-46aceb9f85fb__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 44699
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44699/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFooy3PoqPvPc3sc_3C0gt1psd3FMF6xTUo9-cOpWezvMsNL6z2Z-MgBZChe4VfNzvjtivH1kwa1bd8P6jF00gCGAZRdpHlsgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQJYIY-Jhv7nQR3pEmzuAsbPH-BAXKX26AcVkbOaKFzt-oN0Y3CCrpyDdWRwgq6ehXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/44700/p2p/16Uiu2HAm1MhYCGqX2DabVu8c6KgPN1KT2S9pHfAmYh1f8zkoh7BX","/ip4/127.0.0.1/tcp/44701/ws/p2p/16Uiu2HAm1MhYCGqX2DabVu8c6KgPN1KT2S9pHfAmYh1f8zkoh7BX","/ip4/172.17.0.4/tcp/44700/p2p/16Uiu2HAm1MhYCGqX2DabVu8c6KgPN1KT2S9pHfAmYh1f8zkoh7BX","/ip4/172.17.0.4/tcp/44701/ws/p2p/16Uiu2HAm1MhYCGqX2DabVu8c6KgPN1KT2S9pHfAmYh1f8zkoh7BX"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30349/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60053/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44699/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30349/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm1MhYCGqX2DabVu8c6KgPN1KT2S9pHfAmYh1f8zkoh7BX","multiaddrs":["/ip4/172.17.0.4/tcp/44700/p2p/16Uiu2HAm1MhYCGqX2DabVu8c6KgPN1KT2S9pHfAmYh1f8zkoh7BX","/ip4/172.17.0.4/tcp/44701/ws/p2p/16Uiu2HAm1MhYCGqX2DabVu8c6KgPN1KT2S9pHfAmYh1f8zkoh7BX"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":[]},{"id":"16Uiu2HAmVbaWK1Q2tFmKMxCnC4N5qyPEQsX8WX296EffitbR6oLu","multiaddrs":["/ip4/172.18.202.27/tcp/60054/p2p/16Uiu2HAmVbaWK1Q2tFmKMxCnC4N5qyPEQsX8WX296EffitbR6oLu","/ip4/172.18.202.27/tcp/60055/ws/p2p/16Uiu2HAmVbaWK1Q2tFmKMxCnC4N5qyPEQsX8WX296EffitbR6oLu"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60053/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/44700/p2p/16Uiu2HAm1MhYCGqX2DabVu8c6KgPN1KT2S9pHfAmYh1f8zkoh7BX","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44699/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmVbaWK1Q2tFmKMxCnC4N5qyPEQsX8WX296EffitbR6oLu","multiaddrs":["/ip4/172.18.202.27/tcp/60054/p2p/16Uiu2HAmVbaWK1Q2tFmKMxCnC4N5qyPEQsX8WX296EffitbR6oLu","/ip4/172.18.202.27/tcp/60055/ws/p2p/16Uiu2HAmVbaWK1Q2tFmKMxCnC4N5qyPEQsX8WX296EffitbR6oLu"],"protocols":["/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAmMqErTxQK4kDXP67qVA4BcoPPtipmveEg7gxYwMgpyija","multiaddrs":["/ip4/172.17.0.2/tcp/30350/p2p/16Uiu2HAmMqErTxQK4kDXP67qVA4BcoPPtipmveEg7gxYwMgpyija","/ip4/172.17.0.2/tcp/30351/ws/p2p/16Uiu2HAmMqErTxQK4kDXP67qVA4BcoPPtipmveEg7gxYwMgpyija"],"protocols":["/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30349/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44699/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","timestamp":1736737879734451712,"ephemeral":null}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bd4cea2009e2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ad409238ebd6
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bd4cea2009e2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a6232108e302
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.