{"uid":"eb3ac57fc467649a","name":"test_ping_only_some_nodes_have_subscriptions","fullName":"tests.filter.test_multiple_nodes.TestFilterMultipleNodes#test_ping_only_some_nodes_have_subscriptions","historyId":"2d6409c42149872333898c33c1f95002","time":{"start":1705633981775,"stop":1705633987350,"duration":5575},"status":"broken","statusMessage":"KeyError: 'statusCode'","statusTrace":"tests/filter/test_multiple_nodes.py:50: in test_ping_only_some_nodes_have_subscriptions\n    self.ping_filter_subscriptions(\"1\", node=self.node2)\nsrc/steps/filter.py:178: in ping_filter_subscriptions\n    assert ping_sub_response[\"statusCode\"] == 0\nE   KeyError: 'statusCode'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1705633680167,"stop":1705633680167,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1705633978757,"stop":1705633978757,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1705633978757,"stop":1705633978757,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1705633978757,"stop":1705633978757,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1705633978758,"stop":1705633978760,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1705633978758,"stop":1705633978758,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_node","time":{"start":1705633978760,"stop":1705633980233,"duration":1473},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_filter_node","time":{"start":1705633980234,"stop":1705633981774,"duration":1540},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"KeyError: 'statusCode'","statusTrace":"tests/filter/test_multiple_nodes.py:50: in test_ping_only_some_nodes_have_subscriptions\n    self.ping_filter_subscriptions(\"1\", node=self.node2)\nsrc/steps/filter.py:178: in ping_filter_subscriptions\n    assert ping_sub_response[\"statusCode\"] == 0\nE   KeyError: 'statusCode'","steps":[{"name":"wait_for_subscriptions_on_main_nodes","time":{"start":1705633987168,"stop":1705633987343,"duration":175},"status":"passed","steps":[{"name":"create_filter_subscription_with_retry","time":{"start":1705633987171,"stop":1705633987343,"duration":172},"status":"passed","steps":[{"name":"create_filter_subscription","time":{"start":1705633987171,"stop":1705633987342,"duration":171},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': 'ade71b5b-3294-42ad-b077-9845ac124c13', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': 'ade71b5b-3294-42ad-b077-9845ac124c13', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topic_list","value":"['/test/1/waku-filter/proto']"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ping_filter_subscriptions","time":{"start":1705633987343,"stop":1705633987349,"duration":6},"status":"broken","statusMessage":"KeyError: 'statusCode'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 178, in ping_filter_subscriptions\n    assert ping_sub_response[\"statusCode\"] == 0\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[{"name":"request_id","value":"'1'"},{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f1435d31670>"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"51fe61382682d093","name":"log","source":"51fe61382682d093.txt","type":"text/plain","size":40766}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1705633987364,"stop":1705633987366,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1705633987367,"stop":1705634000636,"duration":13269},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1705634000638,"stop":1705634000643,"duration":5},"status":"passed","steps":[],"attachments":[{"uid":"85f96b26896e9050","name":"additional_node2_2024-01-19_03-12-58__1ea35de4-ce58-4dec-a7f8-bfe59f3d957d__harbor.status.im_wakuorg_go-waku:latest.log","source":"85f96b26896e9050.txt","type":"text/plain","size":68250},{"uid":"2028782e60017e76","name":"additional_node1_2024-01-19_03-12-58__1ea35de4-ce58-4dec-a7f8-bfe59f3d957d__harbor.status.im_wakuorg_nwaku:latest.log","source":"2028782e60017e76.txt","type":"text/plain","size":111880},{"uid":"466082cc9d07857","name":"node2_2024-01-19_03-12-58__1ea35de4-ce58-4dec-a7f8-bfe59f3d957d__harbor.status.im_wakuorg_go-waku:latest.log","source":"466082cc9d07857.txt","type":"text/plain","size":68357},{"uid":"e933efcf36355fb1","name":"additional_node3_2024-01-19_03-12-58__1ea35de4-ce58-4dec-a7f8-bfe59f3d957d__harbor.status.im_wakuorg_nwaku:latest.log","source":"e933efcf36355fb1.txt","type":"text/plain","size":18297},{"uid":"55827319591da38","name":"node1_2024-01-19_03-12-58__1ea35de4-ce58-4dec-a7f8-bfe59f3d957d__harbor.status.im_wakuorg_go-waku:latest.log","source":"55827319591da38.txt","type":"text/plain","size":61191}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":5,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1705634307643,"stop":1705634307643,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"},{"name":"parentSuite","value":"tests.filter"},{"name":"suite","value":"test_multiple_nodes"},{"name":"subSuite","value":"TestFilterMultipleNodes"},{"name":"host","value":"fv-az1153-664"},{"name":"thread","value":"2068-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.filter.test_multiple_nodes"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"ac7e1f9179d4058f","status":"broken","statusDetails":"Exception: Error: 404 Client Error: Not Found for url: http://127.0.0.1:47833/filter/v2/subscriptions/1 with response: b'{\"requestId\":\"1\",\"statusDesc\":\"peer has no subscription\"}'","time":{"start":1705633932792,"stop":1705633967255,"duration":34463}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"]},"source":"eb3ac57fc467649a.json","parameterValues":[]}